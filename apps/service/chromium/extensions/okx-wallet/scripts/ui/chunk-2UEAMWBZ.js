import{k as $t,l as Zt,m as te}from"./chunk-PV5K2HOA.js";import{a as G,b as K}from"./chunk-KLQ5LRUF.js";import{a as _}from"./chunk-ALZKZKT7.js";import{a as V,d as S}from"./chunk-H4BR5O6P.js";import{a as Xt}from"./chunk-QBAWFARF.js";import{a as jt}from"./chunk-FYV4ZBAP.js";import{b as Jt}from"./chunk-TXAI4LDH.js";import{b as Qt}from"./chunk-AZH4OWJP.js";import{b as zt}from"./chunk-DPLPUTOK.js";import{b as Kt,c as Yt}from"./chunk-V4H2MEPY.js";import{a as qt}from"./chunk-WCLMZJ77.js";import{l as M}from"./chunk-DQ2IBJ6G.js";import{a as Gt,b as T}from"./chunk-IYVZOFWF.js";import{a as C,d as Vt}from"./chunk-O43TNQSD.js";import{B as St,Jb as Z,Kb as bt,M as Q,Qa as At,Ra as f,Rc as Ht,S as O,Sa as H,Vb as Nt,Wb as Ot,Xb as yt,Yb as wt,cb as R,fc as Mt,gc as Wt,hc as Dt,jc as xt,kc as vt,lc as Bt,mc as Pt,nc as Ut,ob as w,oc as kt,pb as $,rb as Lt,ta as y,uc as Ft,wb as d,yb as Rt}from"./chunk-LUYLQDIU.js";import{c as N,d as pt,j as U}from"./chunk-ZOUFDRHZ.js";import{a as ht,b as q,c as J,d as ft,f as Tt,g as _t,h as gt,i as Et,j as It,k,l as F,m as Ct,n as p}from"./chunk-QZXD2Q4G.js";import{a as Ie}from"./chunk-QCINCBGO.js";import{a as Ce}from"./chunk-VLKJDIZ5.js";import{B as lt,F as v,j as I,ja as X,oa as B}from"./chunk-KBQXBPIW.js";import{A as ut,D as mt,O as j,a as dt}from"./chunk-364XNTHB.js";import{a as P}from"./chunk-PDSGFBX4.js";import{f as L,h as r,o as n,q as i}from"./chunk-FJHLV356.js";n();i();var ee=L(P());j();function Se({children:o,...t}){return ee.default.createElement(ut,{fetchConfig:Gt.fetchConfig,...t},o)}n();i();var z=L(P());n();i();var Y=L(Ie());async function Ae(o,t){let{devid:e}=await o.get("devid");return(s,a)=>{Y.setDeviceId(e);let c=Y.newInstance({site:"okex",product:s});return c.setApiEndpoint(`${t}/amplitude`),c.setCommonParams(V()),a(c),c}}async function tt(o,t){(await Ae(o,t))("web3_trade",qt)}var Le=()=>{let[o,t]=(0,z.useState)(!1);return(0,z.useEffect)(()=>{let{getApiHostname:e}=p.global;tt(p.localStore,e()).then(()=>t(!0)).catch(()=>{})},[]),{initialized:o}},Xe=Le;n();i();n();i();B();n();i();var re=(o,t)=>{let e=o.split(".").map(Number),s=t.split(".").map(Number),a=Math.max(e.length,s.length);for(let c=0;c<a;c++){let l=e[c]||0,m=s[c]||0;if(l>m)return 1;if(l<m)return-1}return 0};var W=class{constructor(){r(this,"btcAddressType","");r(this,"setBtcAddressType",t=>{this.btcAddressType=t});r(this,"commonStore",null);r(this,"userForbiddenWithBridge",Q);r(this,"setUserForbiddenBridge",t=>{this.userForbiddenWithBridge=t});r(this,"defaultWalletConfig",Lt);r(this,"walletConfig",this.defaultWalletConfig);r(this,"hasInitWalletInfo",!1);r(this,"chainId",_);r(this,"setChainId",t=>{this.chainId=t});r(this,"fromChainId",_);r(this,"setFromChainId",t=>{this.fromChainId=t});r(this,"walletSupportMev",!1);r(this,"setWalletSupportMev",t=>{this.walletSupportMev=t});r(this,"checkOkxVersion",async()=>{let t="2.82.31",e=this.walletConfig.isOkxWallet;if(this.isConnectedWallet&&e&&window?.okxwallet?.getVersion){let s=await window.okxwallet.getVersion(),c=re(s,t)>=0;this.setWalletSupportMev(c)}else this.setWalletSupportMev(!1)})}getDeviceId(){}getChainId(){}get scanAppType(){throw new Error("scanAppType is not defined")}get walletType(){throw new Error("walletType is not defined")}get address(){return _}get computedForbiddenBridge(){let{computedIsCrossChain:t}=I(this.rootStore,"fromToStore",{});return t?this.userForbiddenWithBridge:Q}get computedAccountId(){let{walletConfig:t}=this;return t.walletId}setWalletConfig(t={}){this.walletConfig=t}getAddressByChainId(){}get isConnectedWallet(){return!!this.walletConfig.walletId}get computedNonsupportChain(){return!this.isConnectedWallet||!M(this.fromChainId)?!1:!this.address}get computedAccountWalletAddresses(){return X(I(this,"walletConfig.address",[])).join(",")||this.address}get computedAccountWalletAddressesArray(){return X(I(this,"walletConfig.address",[]))||[this.address]}get computedSpecialWalletAddress(){return this.getAddressByChainId(R.BTC_MAINNET)}};n();i();n();i();function D(o=[],t=[]){let e={};o.forEach(a=>{e[a]=N});let s={};return t.forEach(a=>{s[a]=pt}),{...e,...s}}var se=D(["walletConfig","chainId","hasInitWalletInfo","fromChainId","btcAddressType"],["computedAccountId","isConnectedWallet","computedNonsupportChain","computedAccountWalletAddresses","computedAccountWalletAddressesArray","address","computedSpecialWalletAddress"]);var et=class extends W{constructor(e){super();r(this,"formatWalletType",()=>{let{walletInfo:e}=p,{isHARDWARE:s,isMNEMONIC:a,isMPC:c,isPRIVATE:l}=e?.walletType||{};return s?O.HARDWARE:a?O.MNEMONIC:c?O.MPC:l?O.PRIVATE_KEY:null});r(this,"formatWalletAccount",e=>{let s=Object.values(e.account);return{...e,OKXWalletType:this.formatWalletType(),address:s}});r(this,"keyringIdentityTypeEnum",{});r(this,"walletList",[]);r(this,"addressBookList",[]);r(this,"hasInitWalletInfo",!1);r(this,"getAddressByChainId",e=>{if(!M(e))return _;let s=this.getWalletChainName(e);return this.walletConfig.account?.[s]||_});this.rootStore=e,this.commonStore=e.commonStore,U(this,se)}async getDeviceId(){let{devid:e}=await p.localStore.get("devid");return e}getCurrentChainAddress(e){let s=this.rootStore?.fromToStore.from.chainId;if(!M(s))return _;let a=this.getWalletChainName(s);return e.account[a]}getWalletChainName(e){return p.getNetWorkName(e)}replaceBtcAddressByType(e){if(this.btcAddressType){let s=this.getWalletChainName(R.BTC_MAINNET);if(e.account?.[s]){let c=e.accountsMap?.bitcoin?.[this.btcAddressType]?.address;if(c)return{...e,account:{...e.account,[s]:c}}}}return e}setWalletConfig(e){this.walletConfig=this.formatWalletAccount(this.replaceBtcAddressByType(e)),this.hasInitWalletInfo=!0}webSwapHistoryDetailViewMore(){}setAddressBookList(e){this.addressBookList=e}setWalletList(e){this.walletList=e.map(s=>s.walletId===this.computedAccountId?this.replaceBtcAddressByType(s):s)}setKeyringIdentityTypeEnum(e){this.keyringIdentityTypeEnum=e}get address(){return this.getAddressByChainId(this.fromChainId)}},Lr=et;n();i();n();i();B();j();n();i();var wr={FROM:"FROM",TO:"TO"},Mr={COMMON:"COMMON",COLLECTION:"COLLECTION"},A={COLLECT_LIST:"COLLECT_LIST",ALL_NETWORK:"ALL_NETWORK",CHAIN_LIST:"CHAIN_LIST",SEARCH:"SEARCH",ALL_TOKENS:"ALL_TOKENS"},Re={[A.COLLECT_LIST]:{[d.SWAP]:vt,[d.LIMIT_ORDER]:xt,[d.BRIDGE]:Bt},[A.ALL_NETWORK]:{[d.SWAP]:Wt,[d.LIMIT_ORDER]:Mt,[d.BRIDGE]:Dt},[A.SEARCH]:{[d.SWAP]:Ut,[d.LIMIT_ORDER]:Pt,[d.BRIDGE]:kt},[A.CHAIN_LIST]:{[d.SWAP]:Ot,[d.LIMIT_ORDER]:wt,[d.BRIDGE]:yt},[A.ALL_TOKENS]:{[d.SWAP]:Z,[d.LIMIT_ORDER]:Z,[d.BRIDGE]:bt}},oe=(o,t)=>Re[o]?.[t]??"";var x=class{constructor(t){r(this,"rootStore",null);r(this,"userUniqueId",Jt());r(this,"chainListFreshCount",0);r(this,"chainList",[]);r(this,"setChainList",t=>{this.chainList=t,this.chainListFreshCount+=1});r(this,"transactionLoading",!1);r(this,"setTransactionLoading",t=>{this.transactionLoading=t});r(this,"nowCurrencyUnit",{});r(this,"tokenModalVisible",!1);r(this,"safemoonSlippage",0);r(this,"fetchChainList",async({businessLine:t=1,isLimit:e=!1,isHistory:s=!1,currentTab:a,chainIdConfig:c={}})=>{if(dt())return[];let l=oe(A.CHAIN_LIST,this.currentTab||a),m=await S.get(l,{params:{businessLine:e?Rt.LIMIT_ORDER:t,...c}});return!s&&this.setChainList(m?.data),this.setCurrentTabChainList({[e?d.LIMIT_ORDER:d.SWAP]:m?.data}),m?.data});r(this,"currentTabChainList",{});r(this,"setCurrentTabChainList",t=>{this.currentTabChainList={...this.currentTabChainList,...t}});r(this,"getTradeType",()=>this.rootStore?.fromToStore?.computedIsCrossChain?$.MULTI:$.SINGLE);r(this,"globalMessages",null);r(this,"setGlobalMessage",t=>{this.globalMessages=t});r(this,"cleanGlobalMessage",()=>{this.globalMessages=null});r(this,"socketStatus",!1);r(this,"balancePushSocketStatus",!1);r(this,"resetFromToByTabChange",!1);r(this,"setResetFromToByTabChange",t=>{this.resetFromToByTabChange=t});r(this,"portal",f.DEX);r(this,"setPortal",t=>{this.portal=t});r(this,"currencyConversion",t=>{let{usdToThisRate:e}=this.nowCurrencyUnit,s=C.BigNumber(t);return!e||s.isNaN()?"":s.multipliedBy(e)});r(this,"currencyReConversion",t=>{let{usdToThisRate:e}=this.nowCurrencyUnit,s=C.BigNumber(t);return!e||s.isNaN()?"":s.dividedBy(e).toString()});r(this,"isSensitiveChain",t=>this.computedSensitiveChainIds.some(e=>String(e)===String(t)));r(this,"getTokenAddress",t=>$t(t,this.isSensitiveChain(t?.chainId)));r(this,"equalsChainId",(t,e)=>Zt(t,e));r(this,"equalsToken",(t,e)=>{let s=this.isSensitiveChain(t?.chainId);return te(t,e,s)});r(this,"fromFillToken",!1);r(this,"currentTab","");r(this,"setCurrentTab",(t,e)=>{this.currentTab!==t&&(this.setResetFromToByTabChange(!0),this.rootStore?.fromToStore?.clearFromTo()),this.currentTab=t,this.fromFillToken=!!e});r(this,"forceUpdateFromToByHash",0);r(this,"forceUpdateFromTo",()=>{this.forceUpdateFromToByHash+=1});r(this,"isFirstInit",!0);r(this,"visibleAddFunds",!1);r(this,"setAddFundsVisible",t=>{this.visibleAddFunds=t});r(this,"currencyConversionWithSymbol",(t,e={})=>{let s=this.currencyConversion(t).toString(),a=this.computedNowCurrencySymbol;return Vt(s,a,e)});r(this,"disclaimerVisible",!1);r(this,"setDisclaimerVisible",t=>{this.disclaimerVisible=t});this.rootStore=t,Qt&&this.setPortal(f.LEDGER)}setChainType(){}get computedReserveGas(){let{chainList:t}=this,e=I(this.rootStore,"fromToStore.from.chainId");return t.find(a=>Number(a.chainId)===Number(e))?.reserveGas||""}getChainByID(t){return this.chainList.find(e=>(this.computedCurrentTabIsLimit||e.chainUsed)&&e.chainId===Number(t))}getUserUnit(){}get computedRealSlippageValue(){return I(this,"rootStore.slippageStore",{}).computedRealSlippageValue||0}setSocketStatus(t){this.socketStatus=t}setBalanceSocketStatus(t){this.balancePushSocketStatus=t}get computedIsWalletEnv(){return this.portal===f.OKX_WALLET_EXTENSION}get computedIsWalletDashBoard(){return this.portal===f.WALLET_DASHBOARD}get computedIsMarket(){return this.portal===f.MARKET}get computedNotThirdBiz(){return this.portal===f.OKX_WALLET_EXTENSION||this.portal===f.DEX||this.portal===f.MARKET}get computedNowCurrencySymbol(){return this.nowCurrencyUnit.symbol||""}get computedSensitiveChainIds(){return this.chainList.map(t=>Number(t.isSensitive)===St.YES?t.chainId:null).filter(Boolean)}get computedCurrentTabIsLimit(){return this.currentTab===d.LIMIT_ORDER}get computedIsUrlFillSwap(){return this.computedIsWalletDashBoard||this.computedIsWalletEnv}setIsFirstInit(t){this.isFirstInit=t}};n();i();var ne=D(["userUniqueId","chainList","transactionLoading","nowCurrencyUnit","tokenModalVisible","safemoonSlippage","globalMessages","socketStatus","balancePushSocketStatus","portal","currentTab","currentTabChainList","forceUpdateFromToByHash","isFirstInit","visibleAddFunds","disclaimerVisible"],["computedReserveGas","computedNowCurrencySymbol","computedSensitiveChainIds","computedIsWalletEnv","computedCurrentTabIsLimit"]);var rt=class extends x{constructor(e){super(e);r(this,"swapCollapse",!1);r(this,"setSwapCollapse",e=>{this.swapCollapse=e});r(this,"chainListLoadError",!1);r(this,"setChainListLoadError",e=>{this.chainListLoadError=e});U(this,{...ne,swapCollapse:N,chainListLoadError:N}),this.setPortal(At)}getUserUnit(e){this.nowCurrencyUnit=e}};n();i();j();n();i();var st=class{constructor(t){r(this,"updateTxHash",t=>(K.info(G.UPDATE_HASH,{...t,tags:{orderId:t.orderId,status:t?.status||1}}),S.post(Nt,t).catch(e=>{K.info(G.UPDATE_HASH_ERROR,{...t,error:e,tags:{orderId:t.orderId}})})));r(this,"cancelOrder",t=>(K.info(G.CANCEL_ORDER,{tags:{orderId:t}}),S.get(Ft,{params:{id:t}})));this.rootStore=t}},ie=st;var ot=class extends ie{constructor(){super(...arguments);r(this,"sendTransaction",async(...e)=>p.global?.signAndSubmitTransaction(...e));r(this,"sendTransactionEnhance",async(...e)=>this.sendTransaction(...e));r(this,"signTransaction",async(e,s)=>{let[a,c]=await mt(p.global.signTypedDataV4(s,e));return[a,c]})}async signSolanaTransactionWithMeme(e,s){let{calldataParams:a}=e;return await Promise.all(s.map(l=>p.global.signSolanaCommonTransaction({fromAddress:a.userWalletAddress,instanceType:l.payload.version,serializedMessage:l.inputData,needToReplaceRecentBlockhash:!1})))}},gs=ot;n();i();B();var nt=class{constructor(){r(this,"importSolana",async()=>{let t=await import("./index.browser.esm-Q34SE5KW.js"),{default:e}=await import("./bs58-2LRZRTZQ.js");return{SolanaWeb3:t,bs58:e}});r(this,"deserialize",async t=>{let e={TRANSACTION:"transaction",VERSIONED_TRANSACTION:"versionedTransaction"},s,a,{SolanaWeb3:c,bs58:l}=await this.importSolana();try{s=c.Transaction.from(l.decode(t)),a=e.TRANSACTION}catch{s=c.VersionedTransaction.deserialize(l.decode(t)),a=e.VERSIONED_TRANSACTION}return{transaction:s,version:a}});r(this,"rentReserve",t=>{if(!t)return"0";let{BigNumber:e}=C,s=e("365.25").div(2).multipliedBy(2);return e("19.055441478439427").multipliedBy(t).multipliedBy(s).div(10**9).toFixed(9)});r(this,"txData",async t=>{let e;lt(t)?e=JSON.parse(t):e=t;let{data:s,accountLength:a,bizType:c,bizId:l,from:m,to:h}=e,{transaction:b,version:it}=await this.deserialize(s),g=this.rentReserve(a);return{payload:{bizType:c,bizId:l,transaction:b,version:it},inputData:s,from:m,to:h,rent:g}})}};r(nt,"chainId",R.SOLANA_MAINNET);n();i();n();i();var ae=()=>{if(H()){let e={home:Xt()?y.TGAPP:y.PLUGIN,coinDetail:y.WALLET,bot:y.COMMAND},s=zt.get("pageSource");return{orderSource:e[s]}}return{orderSource:V()?.source}};var be=o=>{let t=0;return o.forEach(e=>{t=C.add(t,e.rent,{returnString:!0})}),t},Ne=o=>{let t=o[0];return{fromAdr:t.from,toAdr:t.to,inputData:t.inputData}},Oe=async({walletId:o,swapParams:t,signedTransactions:e,txArray:s,enableJito:a,isMemeMode:c=!1})=>{let l=s.length>1,m=[],h=[],{default:b}=await import("./bs58-2LRZRTZQ.js");e.map(E=>{if(c&&H()||jt()){let{serializedTransaction:ge,signature:Ee}=E;return{txHash:Ee,signedTx:ge}}let fe=E?.signature||E?.signatures[0],Te=b.encode(fe),_e=b.encode(E.serialize());return{txHash:Te,signedTx:_e}}).forEach(E=>{m.push(E.signedTx),h.push(E.txHash)});let g="";l?g=JSON.stringify(m):g=m[0];let at=h[0],me=l?{mev:"Jito",jitoHash:h[1]}:{},pe=Ne(s),he=be(s),ct={...t,enableJito:a,...ae()};return a&&(ct.mevInfo="jito"),{updateMultiOrderInfo:{transactionHash:at,walletTxData:{extJson:JSON.stringify({...me,rent:he,txSource:3,feeType:4,multiTag:0,isMainTx:!1,coinAmount:0,serviceCharge:0,signedTx:l?JSON.parse(g):g}),isMainTx:!1,serviceCharge:0,txHash:at,walletId:o,txSource:3,coinAmount:0,walletType:2,signedTx:g,...pe}},dexMultiMetaSaveOrderParam:ct}},Ks=async({signedTransactions:o,swapParams:t,walletId:e,txArray:s,enableJito:a,traceData:c})=>{let l=await Oe({walletId:e,signedTransactions:o,swapParams:t,txArray:s,enableJito:a,traceData:c});return S.post(Ht,l)};n();i();var Js={wrapper:"_wrapper_12n6r_1","extension-container":"_extension-container_12n6r_5",extensionContainer:"_extension-container_12n6r_5","extension-container-no-header":"_extension-container-no-header_12n6r_9",extensionContainerNoHeader:"_extension-container-no-header_12n6r_9","telegram-container":"_telegram-container_12n6r_13",telegramContainer:"_telegram-container_12n6r_13","meme-telegram-container":"_meme-telegram-container_12n6r_17",memeTelegramContainer:"_meme-telegram-container_12n6r_17","right-icon":"_right-icon_12n6r_21",rightIcon:"_right-icon_12n6r_21"};n();i();var le=L(P()),de=L(Ce());B();var ce={[Kt]:"swaptrade_card_swap_title_swap",[Yt]:"swaptrade_card_swap_title_swap",[J]:"swaptrade_extension_cinteraction_contract_interaction",[q]:"swaptrade_recent_transaction_detail_dialog_title",[Tt]:"swaptrade_card_swap_title_swap",[_t]:"swaptrade_card_swap_title_swap",[gt]:"swaptrade_modal_select_crypto_title",[It]:"swaptrade_select_token_header_third_token_reminder",[Et]:"swaptrade_trading_mode_header_settings"},ye=[ft,J,Ct],we=o=>o.startsWith(ht)?T(ce[q]):T(ce[o]),Me=(o,t,e,s)=>{if(v(t)||v(e)||v(s))return"";let{currentMode:a}=t,{editBuyPreset:c,buyPresetList:l}=e,{editSellPreset:m,sellPresetList:h}=s;return{["buy"]:{[k]:T("swaptrade_meme_header_buy_presets"),[F]:c.index<l.length?T("swaptrade_meme_header_edit_preset"):T("swaptrade_meme_header_add_presets")},["sell"]:{[k]:T("swaptrade_meme_header_sell_presets"),[F]:m.index<h.length?T("swaptrade_meme_header_edit_preset"):T("swaptrade_meme_header_add_presets")}}[a]?.[o]||""},We=({memeConfigStore:o,memeBuyStore:t,memeSellStore:e}={})=>{let s=(0,de.useLocation)();return(0,le.useMemo)(()=>({showNavigator:!ye.includes(s.pathname),title:[k,F].includes(s.pathname)?Me(s.pathname,o,t,e):we(s.pathname)}),[s.pathname,o,t,e])},ao=We;n();i();function po(o){return[w.USER_DENIED,w.WC2Denied,w.USER_DENIED_WC_RAINBOW,w.WC_QR_DENIED].includes(o?.code)}n();i();var ue=L(P());var De=({visible:o,onBack:t=()=>{},params:e})=>{let{useCoin:s}=p.hooks,{coinId:a,receiveOnly:c,chainId:l,tokenContractAddress:m}=e,h=s(l,m);return o&&ue.default.createElement(p.components.SupplyGas,{visible:o,closeCallback:t,coinId:a||h?.coinId,receiveOnly:c})},go=De;export{Se as a,Xe as b,go as c,Js as d,ao as e,D as f,Lr as g,wr as h,Mr as i,A as j,oe as k,rt as l,po as m,nt as n,ae as o,be as p,Oe as q,Ks as r,gs as s};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-2UEAMWBZ.js.map
