import{a as Ns}from"./chunk-MGKKWOMJ.js";import{a as Ms}from"./chunk-ZSUO3ILU.js";import{a as fi}from"./chunk-J5P7OMUC.js";import{b as me}from"./chunk-TKZ7N5JX.js";import{N as Bs,d as en}from"./chunk-SHMKQUVK.js";import{a as si,c as re,o as A,p as y,q as B}from"./chunk-FJHLV356.js";var ai=re(jr=>{"use strict";A();B();Object.defineProperty(jr,"__esModule",{value:!0});jr.MAX_UINT64=jr.MAX_INTEGER=void 0;var ra=en().Buffer,oi=me();jr.MAX_INTEGER=new oi.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);jr.MAX_UINT64=new oi.BN("ffffffffffffffff",16)});var on=re(Ze=>{"use strict";A();B();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.stripHexPrefix=Ze.isHexPrefixed=Ze.getLength=Ze.decode=Ze.encode=void 0;var Is=me();function ui(e){if(Array.isArray(e)){let r=[];for(let s=0;s<e.length;s++)r.push(ui(e[s]));let n=y.Buffer.concat(r);return y.Buffer.concat([ci(n.length,192),n])}else{let r=fn(e);return r.length===1&&r[0]<128?r:y.Buffer.concat([ci(r.length,128),r])}}Ze.encode=ui;function rn(e,r){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,r)}function ci(e,r){if(e<56)return y.Buffer.from([e+r]);{let n=nn(e),s=n.length/2,c=nn(r+55+s);return y.Buffer.from(c+n,"hex")}}function Os(e,r=!1){if(!e||e.length===0)return y.Buffer.from([]);let n=fn(e),s=tn(n);if(r)return s;if(s.remainder.length!==0)throw new Error("invalid remainder");return s.data}Ze.decode=Os;function Hs(e){if(!e||e.length===0)return y.Buffer.from([]);let r=fn(e),n=r[0];if(n<=127)return r.length;if(n<=183)return n-127;if(n<=191)return n-182;if(n<=247)return n-191;{let s=n-246,c=rn(r.slice(1,s).toString("hex"),16);return s+c}}Ze.getLength=Hs;function tn(e){let r,n,s,c,l,b=[],m=e[0];if(m<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(m<=183){if(r=m-127,m===128?s=y.Buffer.from([]):s=e.slice(1,r),r===2&&s[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:s,remainder:e.slice(r)}}else if(m<=191){if(n=m-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(r=rn(e.slice(1,n).toString("hex"),16),r<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(s=e.slice(n,r+n),s.length<r)throw new Error("invalid RLP: not enough bytes for string");return{data:s,remainder:e.slice(r+n)}}else if(m<=247){for(r=m-191,c=e.slice(1,r);c.length;)l=tn(c),b.push(l.data),c=l.remainder;return{data:b,remainder:e.slice(r)}}else{n=m-246,r=rn(e.slice(1,n).toString("hex"),16);let j=n+r;if(j>e.length)throw new Error("invalid rlp: total length is larger than the data");if(c=e.slice(n,j),c.length===0)throw new Error("invalid rlp, List has a invalid length");for(;c.length;)l=tn(c),b.push(l.data),c=l.remainder;return{data:b,remainder:e.slice(j)}}}function sn(e){return e.slice(0,2)==="0x"}Ze.isHexPrefixed=sn;function di(e){return typeof e!="string"?e:sn(e)?e.slice(2):e}Ze.stripHexPrefix=di;function nn(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");let r=e.toString(16);return r.length%2?`0${r}`:r}function Us(e){return e.length%2?`0${e}`:e}function Ls(e){let r=nn(e);return y.Buffer.from(r,"hex")}function fn(e){if(!y.Buffer.isBuffer(e)){if(typeof e=="string")return sn(e)?y.Buffer.from(Us(di(e)),"hex"):y.Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?Ls(e):y.Buffer.from([]);if(e==null)return y.Buffer.from([]);if(e instanceof Uint8Array)return y.Buffer.from(e);if(Is.BN.isBN(e))return y.Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var Rr=re(be=>{"use strict";A();B();Object.defineProperty(be,"__esModule",{value:!0});be.numberToBuffer=be.isHexString=be.getKeys=be.fromAscii=be.fromUtf8=be.toAscii=be.toUtf8=be.getBinarySize=be.intToBuffer=be.intToHex=be.padToEven=void 0;var js=me();function bt(e){let r=e;if(typeof r!="string")throw new Error(`[ethjs-util] while padding to even, value must be string, is currently ${typeof r}, while padToEven.`);return r.length%2&&(r=`0${r}`),r}be.padToEven=bt;function hi(e){return`0x${e.toString(16)}`}be.intToHex=hi;function Rs(e){let r=hi(e);return y.Buffer.from(bt(r.slice(2)),"hex")}be.intToBuffer=Rs;function Ds(e){if(typeof e!="string")throw new Error(`[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '${typeof e}'.`);return y.Buffer.byteLength(e,"utf8")}be.getBinarySize=Ds;function qs(e){return new y.Buffer(bt(js.base.stripHexPrefix(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")}be.toUtf8=qs;function Gs(e){var r="",n=0,s=e.length;for(e.substring(0,2)==="0x"&&(n=2);n<s;n+=2){let c=parseInt(e.substr(n,2),16);r+=String.fromCharCode(c)}return r}be.toAscii=Gs;function Ks(e){let r=new y.Buffer(e,"utf8");return`0x${bt(r.toString("hex")).replace(/^0+|0+$/g,"")}`}be.fromUtf8=Ks;function Vs(e){for(var r="",n=0;n<e.length;n++){let c=e.charCodeAt(n).toString(16);r+=c.length<2?`0${c}`:c}return`0x${r}`}be.fromAscii=Vs;function $s(e,r,n){if(!Array.isArray(e))throw new Error(`[ethjs-util] method getKeys expecting type Array as 'params' input, got '${typeof e}'`);if(typeof r!="string")throw new Error(`[ethjs-util] method getKeys expecting type String for input 'key' got '${typeof r}'.`);for(var s=[],c=0;c<e.length;c++){var l=e[c][r];if(n&&!l)l="";else if(typeof l!="string")throw new Error("invalid abi");s.push(l)}return s}be.getKeys=$s;function Fs(e,r){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||r&&e.length!==2+2*r)}be.isHexString=Fs;function Ys(e){let r=e.toString(16),n=r.length%2?"0":"";return y.Buffer.from(n+r,"hex")}be.numberToBuffer=Ys});var Xr=re(fr=>{"use strict";A();B();Object.defineProperty(fr,"__esModule",{value:!0});fr.assertIsString=fr.assertIsArray=fr.assertIsBuffer=fr.assertIsHexString=void 0;var Cs=Rr(),zs=function(e){if(!(0,Cs.isHexString)(e)){let r=`This method only supports 0x-prefixed hex strings but input was: ${e}`;throw new Error(r)}};fr.assertIsHexString=zs;var Ws=function(e){if(!y.Buffer.isBuffer(e)){let r=`This method only supports Buffer but input was: ${e}`;throw new Error(r)}};fr.assertIsBuffer=Ws;var Xs=function(e){if(!Array.isArray(e)){let r=`This method only supports number arrays but input was: ${e}`;throw new Error(r)}};fr.assertIsArray=Xs;var Js=function(e){if(typeof e!="string"){let r=`This method only supports strings but input was: ${e}`;throw new Error(r)}};fr.assertIsString=Js});var pt=re(Me=>{"use strict";A();B();var Zs=Me&&Me.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),ks=Me&&Me.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Qs=Me&&Me.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Zs(r,e,n);return ks(r,e),r};Object.defineProperty(Me,"__esModule",{value:!0});Me.rlphash=Me.keccakFromString=Me.keccak256=Me.keccak=void 0;var ef=Qs(on()),rf=Xr(),tf=me(),nf=en();Me.keccak=tf.base.keccak;var sf=function(e){return(0,Me.keccak)(e,256)};Me.keccak256=sf;var ff=function(e,r=256){(0,rf.assertIsString)(e);let n=nf.Buffer.from(e,"utf8");return(0,Me.keccak)(n,r)};Me.keccakFromString=ff;var of=function(e){return(0,Me.keccak)(ef.encode(e))};Me.rlphash=of});var Jr=re(he=>{"use strict";A();B();Object.defineProperty(he,"__esModule",{value:!0});he.addHexPrefix=he.toUnsigned=he.fromSigned=he.bufferToHex=he.toBuffer=he.unpadArray=he.unpadBuffer=he.stripZeros=he.setLengthLeft=he.zeros=void 0;var li=me(),xi=me(),an=Rr(),cn=Xr(),af=function(e){return y.Buffer.allocUnsafe(e).fill(0)};he.zeros=af;var cf=function(e,r,n){let s=(0,he.zeros)(r);return n?e.length<r?(e.copy(s),s):e.slice(0,r):e.length<r?(e.copy(s,r-e.length),s):e.slice(-r)},uf=function(e,r){return(0,cn.assertIsBuffer)(e),cf(e,r,!1)};he.setLengthLeft=uf;var df=function(e){let r=e[0];for(;e.length>0&&r.toString()==="0";)e=e.slice(1),r=e[0];return e};he.stripZeros=df;var hf=function(e){return(0,cn.assertIsBuffer)(e),(0,he.stripZeros)(e)};he.unpadBuffer=hf;var lf=function(e){return(0,cn.assertIsArray)(e),(0,he.stripZeros)(e)};he.unpadArray=lf;var xf=function(e){if(e==null)return y.Buffer.allocUnsafe(0);if(y.Buffer.isBuffer(e))return y.Buffer.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return y.Buffer.from(e);if(typeof e=="string"){if(!(0,an.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return y.Buffer.from((0,an.padToEven)(xi.base.stripHexPrefix(e)),"hex")}if(typeof e=="number")return(0,an.intToBuffer)(e);if(li.BN.isBN(e))return e.toArrayLike(y.Buffer);if(e.toArray)return y.Buffer.from(e.toArray());if(e.toBuffer)return y.Buffer.from(e.toBuffer());throw new Error("invalid type")};he.toBuffer=xf;var gf=function(e){return e=(0,he.toBuffer)(e),"0x"+e.toString("hex")};he.bufferToHex=gf;var bf=function(e){return new li.BN(e).fromTwos(256)};he.fromSigned=bf;var pf=function(e){return y.Buffer.from(e.toTwos(256).toArray())};he.toUnsigned=pf;var yf=function(e){return typeof e!="string"||xi.base.isHexPrefixed(e)?e:"0x"+e};he.addHexPrefix=yf});var _t=re(Re=>{"use strict";A();B();Object.defineProperty(Re,"__esModule",{value:!0});Re.toType=Re.TypeOutput=Re.bnToRlp=Re.bnToUnpaddedBuffer=Re.validateNoLeadingZeroes=Re.bnToHex=void 0;var un=me(),_f=Rr(),dn=Jr();function vf(e){return`0x${e.toString(16)}`}Re.bnToHex=vf;var Sf=function(e){for(let[r,n]of Object.entries(e))if(n!==void 0&&n.length>0&&n[0]===0)throw new Error(`${r} cannot have leading zeroes, received: ${n.toString("hex")}`)};Re.validateNoLeadingZeroes=Sf;function wf(e){return(0,dn.unpadBuffer)(e.toArrayLike(y.Buffer))}Re.bnToUnpaddedBuffer=wf;function Tf(e){return(0,dn.unpadBuffer)(e.toArrayLike(y.Buffer))}Re.bnToRlp=Tf;var yt;(function(e){e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"})(yt=Re.TypeOutput||(Re.TypeOutput={}));function mf(e,r){if(typeof e=="string"&&!(0,_f.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if(typeof e=="number"&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");if(e=(0,dn.toBuffer)(e),r===yt.Buffer)return e;if(r===yt.BN)return new un.BN(e);if(r===yt.Number){let n=new un.BN(e),s=new un.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(s))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}else return`0x${e.toString("hex")}`}Re.toType=mf});var hn=re(Te=>{"use strict";A();B();var Ef=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Te,"__esModule",{value:!0});Te.privateToAddress=Te.privateToPublicRaw=Te.privateToPublic=Te.publicToAddress=Te.pubToAddress=Te.toChecksumAddress=Te.isValidAddress=void 0;var Pf=Ef(fi()),vt=me(),bi=pt(),Zr=Xr(),gi=_t(),Af=function(e){return(0,Zr.assertIsHexString)(e),/^0x[0-9a-fA-F]{40}$/.test(e)};Te.isValidAddress=Af;var Bf=function(e,r){(0,Zr.assertIsHexString)(e);let n=vt.base.stripHexPrefix(e).toLowerCase(),s="";r&&(s=(0,gi.toType)(r,gi.TypeOutput.BN).toString()+"0x");let c=(0,bi.keccakFromString)(s+n).toString("hex"),l="0x";for(let b=0;b<n.length;b++)parseInt(c[b],16)>=8?l+=n[b].toUpperCase():l+=n[b];return l};Te.toChecksumAddress=Bf;var Mf=function(e,r=!1){if((0,Zr.assertIsBuffer)(e),r&&e.length!==64){let n=vt.signUtil.secp256k1.publicKeyConvert(e,!1);e=y.Buffer.from(n.slice(1))}return(0,Pf.default)(e.length===64),(0,bi.keccak)(e).slice(-20)};Te.pubToAddress=Mf;Te.publicToAddress=Te.pubToAddress;var Nf=function(e){return(0,Zr.assertIsBuffer)(e),vt.signUtil.secp256k1.publicKeyCreate(e,!1).slice(1)};Te.privateToPublic=Nf;var If=function(e){return(0,Zr.assertIsBuffer)(e),vt.signUtil.secp256k1.publicKeyCreate(e,!1)};Te.privateToPublicRaw=If;var Of=function(e){return(0,Te.publicToAddress)((0,Te.privateToPublic)(e))};Te.privateToAddress=Of});var yi=re(wt=>{"use strict";A();B();Object.defineProperty(wt,"__esModule",{value:!0});wt.Address=void 0;var St=fi(),pi=Jr(),ln=hn(),lr=class{constructor(r){St(r.length===20,"Invalid address length"),this.buf=r}static zero(){return new lr((0,pi.zeros)(20))}static fromString(r){return St((0,ln.isValidAddress)(r),"Invalid address"),new lr((0,pi.toBuffer)(r))}static fromPublicKey(r){St(y.Buffer.isBuffer(r),"Public key should be Buffer");let n=(0,ln.pubToAddress)(r);return new lr(n)}static fromPrivateKey(r){St(y.Buffer.isBuffer(r),"Private key should be Buffer");let n=(0,ln.privateToAddress)(r);return new lr(n)}equals(r){return this.buf.equals(r.buf)}isZero(){return this.equals(lr.zero())}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return y.Buffer.from(this.buf)}};wt.Address=lr});var Hi=re($=>{"use strict";A();B();Object.defineProperty($,"__esModule",{value:!0});$.typedSignatureHash=$.TypedDataUtils=$.TYPED_MESSAGE_SCHEMA=$.getLength=$.getErrorStack=$.padStart=$.bigIntToBytes=$.remove0x=$.add0x=$.hexToBytes=$.isStrictHexString=$.assertIsHexString=$.concatBytes=$.valueToBytes=$.isBytes=$.stringToBytes=$.numberToBytes=$.assert=$.SignTypedDataVersion=$.StrictHexStruct=void 0;var ke=nr(),Hf=mr(),kr=me(),xn=Ns(),_i=48,vi=58,Si=87,Uf=/^u?int(?<length>[0-9]*)?$/u,Lf=32;$.StrictHexStruct=(0,xn.pattern)((0,xn.string)(),/^0x[0-9a-f]+$/iu);var Ye;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Ye=$.SignTypedDataVersion||($.SignTypedDataVersion={}));function Ce(e,r){if(!e)throw new Error(r)}$.assert=Ce;function Qr(e){Ce(typeof e=="number","Value must be a number."),Ce(e>=0,"Value must be a non-negative number."),Ce(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");let r=e.toString(16);return Dr(r)}$.numberToBytes=Qr;function mt(e){return Ce(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}$.stringToBytes=mt;function Ti(e){return e instanceof Uint8Array}$.isBytes=Ti;function mi(e){if(typeof e=="bigint")return Et(e);if(typeof e=="number")return Qr(e);if(typeof e=="string")return e.startsWith("0x")?Dr(e):mt(e);if(Ti(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}$.valueToBytes=mi;function Ei(e){let r=new Array(e.length),n=0;for(let c=0;c<e.length;c++){let l=mi(e[c]);r[c]=l,n+=l.length}let s=new Uint8Array(n);for(let c=0,l=0;c<r.length;c++)s.set(r[c],l),l+=r[c].length;return s}$.concatBytes=Ei;function Pi(e){Ce((0,ke.isHexString)(e),"Value must be a hexadecimal string.")}$.assertIsHexString=Pi;function Tt(e){return(0,xn.is)(e,$.StrictHexStruct)}$.isStrictHexString=Tt;function Dr(e){if(e?.toLowerCase?.()==="0x")return new Uint8Array;Pi(e);let r=Bi(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,s=new Uint8Array(n.length/2);for(let c=0;c<s.length;c++){let l=n.charCodeAt(c*2),b=n.charCodeAt(c*2+1),m=l-(l<vi?_i:Si),j=b-(b<vi?_i:Si);s[c]=m*16+j}return s}$.hexToBytes=Dr;function Ai(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`}$.add0x=Ai;function Bi(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}$.remove0x=Bi;function Et(e){Ce(typeof e=="bigint","Value must be a bigint."),Ce(e>=BigInt(0),"Value must be a non-negative bigint.");let r=e.toString(16);return Dr(r)}$.bigIntToBytes=Et;function gn(e,r=Lf){let n=new Uint8Array(Math.max(r-e.length,0)).fill(0);return Ei([n,e])}$.padStart=gn;var jf=e=>{if(e instanceof Error)return e.stack};$.getErrorStack=jf;var Rf=e=>{if(e==="int"||e==="uint")return 256;let r=e.match(Uf);Ce(r?.groups?.length,`Invalid number type. Expected a number type, but received "${e}".`);let n=parseInt(r.groups.length,10);return Ce(n>=8&&n<=256,`Invalid number length. Expected a number between 8 and 256, but received "${e}".`),Ce(n%8===0,`Invalid number length. Expected a multiple of 8, but received "${e}".`),n};$.getLength=Rf;$.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string",enum:Df()}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Df(){let e=["bool","address","string","bytes"],r=Array.from(new Array(32)).map((c,l)=>`int${(l+1)*8}`),n=Array.from(new Array(32)).map((c,l)=>`uint${(l+1)*8}`),s=Array.from(new Array(32)).map((c,l)=>`bytes${l+1}`);return[...e,...r,...n,...s]}function Pt(e,r){if(Object.keys(Ye).includes(e)){if(r&&!r.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${r.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function qf(e){let r=BigInt(0);for(let n=0;n<e.length;n++){let s=BigInt(e.charCodeAt(n)-48);r*=BigInt(10),s>=49?r+=s-BigInt(49)+BigInt(10):s>=17?r+=s-BigInt(17)+BigInt(10):r+=s}return gn(Et(r),20)}function Gf(e,r){Ce(r!==null,`Unable to encode value: Invalid number. Expected a valid number value, but received "${r}".`);let n=BigInt(r),s=(0,$.getLength)(e),c=BigInt(2)**BigInt(s)-BigInt(1);return Ce(n>=-c&&n<=c,`Unable to encode value: Number "${r}" is out of range for type "${e}".`),n}function Mi(e,r,n,s,c){if(Pt(c,[Ye.V3,Ye.V4]),e[n]!==void 0)return["bytes32",c===Ye.V4&&s==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,ke.keccak)(bn(n,s,e,c))];if(n==="function")throw new Error('Unsupported or invalid type: "function"');if(s===void 0)throw new Error(`missing value for field ${r} of type ${n}`);if(n==="address"){if(typeof s=="number")return["address",gn(Qr(s),20)];if(Tt(s))return["address",Ai(s)];if(typeof s=="string")return["address",qf(s).subarray(0,20)]}if(n==="bool")return["bool",Boolean(s)];if(n==="bytes")return typeof s=="number"?s=Qr(s):Tt(s)?s=Dr(s):typeof s=="string"&&(s=mt(s)),["bytes32",(0,ke.keccak)(s)];if(n.startsWith("bytes")&&n!=="bytes"&&!n.includes("["))return typeof s=="number"?s<0?["bytes32",new Uint8Array(32)]:["bytes32",Et(BigInt(s))]:Tt(s)?["bytes32",Dr(s)]:["bytes32",s];if(n.startsWith("int")&&!n.includes("[")){let l=Gf(n,s);return l>=BigInt(0)?["uint256",l]:["int256",l]}if(n==="string")return typeof s=="number"?s=Qr(s):s=mt(s??""),["bytes32",(0,ke.keccak)(s)];if(n.endsWith("]")){if(c===Ye.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let l=n.slice(0,n.lastIndexOf("[")),b=s.map(Z=>Mi(e,r,l,Z,c)),m=b.map(([Z])=>Z),j=b.map(([,Z])=>Z);return["bytes32",(0,ke.keccak)(kr.abi.RawEncode(m,j))]}return[n,s]}function bn(e,r,n,s){Pt(s,[Ye.V3,Ye.V4]);let c=["bytes32"],l=[Oi(e,n)];for(let b of n[e]){if(s===Ye.V3&&r[b.name]===void 0)continue;let[m,j]=Mi(n,b.name,b.type,r[b.name],s);c.push(m),l.push(j)}return kr.abi.RawEncode(c,l)}function Ni(e,r){let n="",s=Ii(e,r);s.delete(e);let c=[e,...Array.from(s).sort()];for(let l of c){if(!r[l])throw new Error(`No type definition specified: ${l}`);n+=`${l}(${r[l].map(({name:m,type:j})=>`${j} ${m}`).join(",")})`}return n}function Ii(e,r,n=new Set){if([e]=e.match(/^\w*/u),n.has(e)||r[e]===void 0)return n;n.add(e);for(let s of r[e])Ii(s.type,r,n);return n}function wi(e,r,n,s){return Pt(s,[Ye.V3,Ye.V4]),(0,ke.keccak)(bn(e,r,n,s))}function Oi(e,r){return(0,ke.keccak)(y.Buffer.from(Ni(e,r)))}function Kf(e){let r={};for(let n in $.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(r[n]=e[n]);return"types"in r&&(r.types={EIP712Domain:[],...r.types}),r}function Vf(e,r){Pt(r,[Ye.V3,Ye.V4]);let n=Kf(e),s=[y.Buffer.from("1901","hex")];return s.push(wi("EIP712Domain",n.domain,n.types,r)),n.primaryType!=="EIP712Domain"&&s.push(wi(n.primaryType,n.message,n.types,r)),(0,ke.keccak)(y.Buffer.concat(s))}$.TypedDataUtils={encodeData:bn,encodeType:Ni,hashType:Oi,eip712Hash:Vf};function $f(e){let r=Ff(e);return(0,ke.bufferToHex)(r)}$.typedSignatureHash=$f;function Ff(e){let r=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw r;let n=e.map(function(te){return te.type!=="bytes"?te.value:(0,Hf.legacyToBuffer)(te.value)}),s=e.map(function(te){return te.type}),c=e.map(function(te){if(!te.name)throw r;return`${te.type} ${te.name}`}),l=kr.abi.ABI.solidityPack(new Array(e.length).fill("string"),c),b=kr.abi.ABI.solidityPack(s,n),m=(0,ke.keccak256)(l),j=(0,ke.keccak256)(b),Z=kr.abi.ABI.solidityPack(["bytes32","bytes32"],[m,j]);return(0,ke.keccak256)(Z)}});var Ui=re((Oa,At)=>{"use strict";A();B();(function(e){"use strict";var r=function(i){var o,f=new Float64Array(16);if(i)for(o=0;o<i.length;o++)f[o]=i[o];return f},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),c=new Uint8Array(32);c[0]=9;var l=r(),b=r([1]),m=r([56129,1]),j=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Z=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),te=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Se=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),qe=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Xe(i,o,f,t){i[o]=f>>24&255,i[o+1]=f>>16&255,i[o+2]=f>>8&255,i[o+3]=f&255,i[o+4]=t>>24&255,i[o+5]=t>>16&255,i[o+6]=t>>8&255,i[o+7]=t&255}function Ir(i,o,f,t,a){var d,h=0;for(d=0;d<a;d++)h|=i[o+d]^f[t+d];return(1&h-1>>>8)-1}function Kn(i,o,f,t){return Ir(i,o,f,t,16)}function Rt(i,o,f,t){return Ir(i,o,f,t,32)}function _s(i,o,f,t){for(var a=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,d=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,h=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,_=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,T=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,L=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,P=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,fe=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,I=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,q=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,G=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,C=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,Y=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,K=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,F=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,V=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,O=a,R=d,M=h,H=_,U=T,E=L,x=P,g=fe,S=I,p=q,v=G,w=C,D=Y,z=K,X=F,W=V,u,k=0;k<20;k+=2)u=O+D|0,U^=u<<7|u>>>32-7,u=U+O|0,S^=u<<9|u>>>32-9,u=S+U|0,D^=u<<13|u>>>32-13,u=D+S|0,O^=u<<18|u>>>32-18,u=E+R|0,p^=u<<7|u>>>32-7,u=p+E|0,z^=u<<9|u>>>32-9,u=z+p|0,R^=u<<13|u>>>32-13,u=R+z|0,E^=u<<18|u>>>32-18,u=v+x|0,X^=u<<7|u>>>32-7,u=X+v|0,M^=u<<9|u>>>32-9,u=M+X|0,x^=u<<13|u>>>32-13,u=x+M|0,v^=u<<18|u>>>32-18,u=W+w|0,H^=u<<7|u>>>32-7,u=H+W|0,g^=u<<9|u>>>32-9,u=g+H|0,w^=u<<13|u>>>32-13,u=w+g|0,W^=u<<18|u>>>32-18,u=O+H|0,R^=u<<7|u>>>32-7,u=R+O|0,M^=u<<9|u>>>32-9,u=M+R|0,H^=u<<13|u>>>32-13,u=H+M|0,O^=u<<18|u>>>32-18,u=E+U|0,x^=u<<7|u>>>32-7,u=x+E|0,g^=u<<9|u>>>32-9,u=g+x|0,U^=u<<13|u>>>32-13,u=U+g|0,E^=u<<18|u>>>32-18,u=v+p|0,w^=u<<7|u>>>32-7,u=w+v|0,S^=u<<9|u>>>32-9,u=S+w|0,p^=u<<13|u>>>32-13,u=p+S|0,v^=u<<18|u>>>32-18,u=W+X|0,D^=u<<7|u>>>32-7,u=D+W|0,z^=u<<9|u>>>32-9,u=z+D|0,X^=u<<13|u>>>32-13,u=X+z|0,W^=u<<18|u>>>32-18;O=O+a|0,R=R+d|0,M=M+h|0,H=H+_|0,U=U+T|0,E=E+L|0,x=x+P|0,g=g+fe|0,S=S+I|0,p=p+q|0,v=v+G|0,w=w+C|0,D=D+Y|0,z=z+K|0,X=X+F|0,W=W+V|0,i[0]=O>>>0&255,i[1]=O>>>8&255,i[2]=O>>>16&255,i[3]=O>>>24&255,i[4]=R>>>0&255,i[5]=R>>>8&255,i[6]=R>>>16&255,i[7]=R>>>24&255,i[8]=M>>>0&255,i[9]=M>>>8&255,i[10]=M>>>16&255,i[11]=M>>>24&255,i[12]=H>>>0&255,i[13]=H>>>8&255,i[14]=H>>>16&255,i[15]=H>>>24&255,i[16]=U>>>0&255,i[17]=U>>>8&255,i[18]=U>>>16&255,i[19]=U>>>24&255,i[20]=E>>>0&255,i[21]=E>>>8&255,i[22]=E>>>16&255,i[23]=E>>>24&255,i[24]=x>>>0&255,i[25]=x>>>8&255,i[26]=x>>>16&255,i[27]=x>>>24&255,i[28]=g>>>0&255,i[29]=g>>>8&255,i[30]=g>>>16&255,i[31]=g>>>24&255,i[32]=S>>>0&255,i[33]=S>>>8&255,i[34]=S>>>16&255,i[35]=S>>>24&255,i[36]=p>>>0&255,i[37]=p>>>8&255,i[38]=p>>>16&255,i[39]=p>>>24&255,i[40]=v>>>0&255,i[41]=v>>>8&255,i[42]=v>>>16&255,i[43]=v>>>24&255,i[44]=w>>>0&255,i[45]=w>>>8&255,i[46]=w>>>16&255,i[47]=w>>>24&255,i[48]=D>>>0&255,i[49]=D>>>8&255,i[50]=D>>>16&255,i[51]=D>>>24&255,i[52]=z>>>0&255,i[53]=z>>>8&255,i[54]=z>>>16&255,i[55]=z>>>24&255,i[56]=X>>>0&255,i[57]=X>>>8&255,i[58]=X>>>16&255,i[59]=X>>>24&255,i[60]=W>>>0&255,i[61]=W>>>8&255,i[62]=W>>>16&255,i[63]=W>>>24&255}function vs(i,o,f,t){for(var a=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,d=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,h=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,_=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,T=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,L=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,P=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,fe=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,I=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,q=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,G=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,C=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,Y=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,K=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,F=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,V=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,O=a,R=d,M=h,H=_,U=T,E=L,x=P,g=fe,S=I,p=q,v=G,w=C,D=Y,z=K,X=F,W=V,u,k=0;k<20;k+=2)u=O+D|0,U^=u<<7|u>>>32-7,u=U+O|0,S^=u<<9|u>>>32-9,u=S+U|0,D^=u<<13|u>>>32-13,u=D+S|0,O^=u<<18|u>>>32-18,u=E+R|0,p^=u<<7|u>>>32-7,u=p+E|0,z^=u<<9|u>>>32-9,u=z+p|0,R^=u<<13|u>>>32-13,u=R+z|0,E^=u<<18|u>>>32-18,u=v+x|0,X^=u<<7|u>>>32-7,u=X+v|0,M^=u<<9|u>>>32-9,u=M+X|0,x^=u<<13|u>>>32-13,u=x+M|0,v^=u<<18|u>>>32-18,u=W+w|0,H^=u<<7|u>>>32-7,u=H+W|0,g^=u<<9|u>>>32-9,u=g+H|0,w^=u<<13|u>>>32-13,u=w+g|0,W^=u<<18|u>>>32-18,u=O+H|0,R^=u<<7|u>>>32-7,u=R+O|0,M^=u<<9|u>>>32-9,u=M+R|0,H^=u<<13|u>>>32-13,u=H+M|0,O^=u<<18|u>>>32-18,u=E+U|0,x^=u<<7|u>>>32-7,u=x+E|0,g^=u<<9|u>>>32-9,u=g+x|0,U^=u<<13|u>>>32-13,u=U+g|0,E^=u<<18|u>>>32-18,u=v+p|0,w^=u<<7|u>>>32-7,u=w+v|0,S^=u<<9|u>>>32-9,u=S+w|0,p^=u<<13|u>>>32-13,u=p+S|0,v^=u<<18|u>>>32-18,u=W+X|0,D^=u<<7|u>>>32-7,u=D+W|0,z^=u<<9|u>>>32-9,u=z+D|0,X^=u<<13|u>>>32-13,u=X+z|0,W^=u<<18|u>>>32-18;i[0]=O>>>0&255,i[1]=O>>>8&255,i[2]=O>>>16&255,i[3]=O>>>24&255,i[4]=E>>>0&255,i[5]=E>>>8&255,i[6]=E>>>16&255,i[7]=E>>>24&255,i[8]=v>>>0&255,i[9]=v>>>8&255,i[10]=v>>>16&255,i[11]=v>>>24&255,i[12]=W>>>0&255,i[13]=W>>>8&255,i[14]=W>>>16&255,i[15]=W>>>24&255,i[16]=x>>>0&255,i[17]=x>>>8&255,i[18]=x>>>16&255,i[19]=x>>>24&255,i[20]=g>>>0&255,i[21]=g>>>8&255,i[22]=g>>>16&255,i[23]=g>>>24&255,i[24]=S>>>0&255,i[25]=S>>>8&255,i[26]=S>>>16&255,i[27]=S>>>24&255,i[28]=p>>>0&255,i[29]=p>>>8&255,i[30]=p>>>16&255,i[31]=p>>>24&255}function st(i,o,f,t){_s(i,o,f,t)}function ft(i,o,f,t){vs(i,o,f,t)}var Sr=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Vn(i,o,f,t,a,d,h){var _=new Uint8Array(16),T=new Uint8Array(64),L,P;for(P=0;P<16;P++)_[P]=0;for(P=0;P<8;P++)_[P]=d[P];for(;a>=64;){for(st(T,_,h,Sr),P=0;P<64;P++)i[o+P]=f[t+P]^T[P];for(L=1,P=8;P<16;P++)L=L+(_[P]&255)|0,_[P]=L&255,L>>>=8;a-=64,o+=64,t+=64}if(a>0)for(st(T,_,h,Sr),P=0;P<a;P++)i[o+P]=f[t+P]^T[P];return 0}function $n(i,o,f,t,a){var d=new Uint8Array(16),h=new Uint8Array(64),_,T;for(T=0;T<16;T++)d[T]=0;for(T=0;T<8;T++)d[T]=t[T];for(;f>=64;){for(st(h,d,a,Sr),T=0;T<64;T++)i[o+T]=h[T];for(_=1,T=8;T<16;T++)_=_+(d[T]&255)|0,d[T]=_&255,_>>>=8;f-=64,o+=64}if(f>0)for(st(h,d,a,Sr),T=0;T<f;T++)i[o+T]=h[T];return 0}function Fn(i,o,f,t,a){var d=new Uint8Array(32);ft(d,t,a,Sr);for(var h=new Uint8Array(8),_=0;_<8;_++)h[_]=t[_+16];return $n(i,o,f,h,d)}function Dt(i,o,f,t,a,d,h){var _=new Uint8Array(32);ft(_,d,h,Sr);for(var T=new Uint8Array(8),L=0;L<8;L++)T[L]=d[L+16];return Vn(i,o,f,t,a,T,_)}var ot=function(i){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var o,f,t,a,d,h,_,T;o=i[0]&255|(i[1]&255)<<8,this.r[0]=o&8191,f=i[2]&255|(i[3]&255)<<8,this.r[1]=(o>>>13|f<<3)&8191,t=i[4]&255|(i[5]&255)<<8,this.r[2]=(f>>>10|t<<6)&7939,a=i[6]&255|(i[7]&255)<<8,this.r[3]=(t>>>7|a<<9)&8191,d=i[8]&255|(i[9]&255)<<8,this.r[4]=(a>>>4|d<<12)&255,this.r[5]=d>>>1&8190,h=i[10]&255|(i[11]&255)<<8,this.r[6]=(d>>>14|h<<2)&8191,_=i[12]&255|(i[13]&255)<<8,this.r[7]=(h>>>11|_<<5)&8065,T=i[14]&255|(i[15]&255)<<8,this.r[8]=(_>>>8|T<<8)&8191,this.r[9]=T>>>5&127,this.pad[0]=i[16]&255|(i[17]&255)<<8,this.pad[1]=i[18]&255|(i[19]&255)<<8,this.pad[2]=i[20]&255|(i[21]&255)<<8,this.pad[3]=i[22]&255|(i[23]&255)<<8,this.pad[4]=i[24]&255|(i[25]&255)<<8,this.pad[5]=i[26]&255|(i[27]&255)<<8,this.pad[6]=i[28]&255|(i[29]&255)<<8,this.pad[7]=i[30]&255|(i[31]&255)<<8};ot.prototype.blocks=function(i,o,f){for(var t=this.fin?0:2048,a,d,h,_,T,L,P,fe,I,q,G,C,Y,K,F,V,O,R,M,H=this.h[0],U=this.h[1],E=this.h[2],x=this.h[3],g=this.h[4],S=this.h[5],p=this.h[6],v=this.h[7],w=this.h[8],D=this.h[9],z=this.r[0],X=this.r[1],W=this.r[2],u=this.r[3],k=this.r[4],oe=this.r[5],ae=this.r[6],J=this.r[7],ie=this.r[8],se=this.r[9];f>=16;)a=i[o+0]&255|(i[o+1]&255)<<8,H+=a&8191,d=i[o+2]&255|(i[o+3]&255)<<8,U+=(a>>>13|d<<3)&8191,h=i[o+4]&255|(i[o+5]&255)<<8,E+=(d>>>10|h<<6)&8191,_=i[o+6]&255|(i[o+7]&255)<<8,x+=(h>>>7|_<<9)&8191,T=i[o+8]&255|(i[o+9]&255)<<8,g+=(_>>>4|T<<12)&8191,S+=T>>>1&8191,L=i[o+10]&255|(i[o+11]&255)<<8,p+=(T>>>14|L<<2)&8191,P=i[o+12]&255|(i[o+13]&255)<<8,v+=(L>>>11|P<<5)&8191,fe=i[o+14]&255|(i[o+15]&255)<<8,w+=(P>>>8|fe<<8)&8191,D+=fe>>>5|t,I=0,q=I,q+=H*z,q+=U*(5*se),q+=E*(5*ie),q+=x*(5*J),q+=g*(5*ae),I=q>>>13,q&=8191,q+=S*(5*oe),q+=p*(5*k),q+=v*(5*u),q+=w*(5*W),q+=D*(5*X),I+=q>>>13,q&=8191,G=I,G+=H*X,G+=U*z,G+=E*(5*se),G+=x*(5*ie),G+=g*(5*J),I=G>>>13,G&=8191,G+=S*(5*ae),G+=p*(5*oe),G+=v*(5*k),G+=w*(5*u),G+=D*(5*W),I+=G>>>13,G&=8191,C=I,C+=H*W,C+=U*X,C+=E*z,C+=x*(5*se),C+=g*(5*ie),I=C>>>13,C&=8191,C+=S*(5*J),C+=p*(5*ae),C+=v*(5*oe),C+=w*(5*k),C+=D*(5*u),I+=C>>>13,C&=8191,Y=I,Y+=H*u,Y+=U*W,Y+=E*X,Y+=x*z,Y+=g*(5*se),I=Y>>>13,Y&=8191,Y+=S*(5*ie),Y+=p*(5*J),Y+=v*(5*ae),Y+=w*(5*oe),Y+=D*(5*k),I+=Y>>>13,Y&=8191,K=I,K+=H*k,K+=U*u,K+=E*W,K+=x*X,K+=g*z,I=K>>>13,K&=8191,K+=S*(5*se),K+=p*(5*ie),K+=v*(5*J),K+=w*(5*ae),K+=D*(5*oe),I+=K>>>13,K&=8191,F=I,F+=H*oe,F+=U*k,F+=E*u,F+=x*W,F+=g*X,I=F>>>13,F&=8191,F+=S*z,F+=p*(5*se),F+=v*(5*ie),F+=w*(5*J),F+=D*(5*ae),I+=F>>>13,F&=8191,V=I,V+=H*ae,V+=U*oe,V+=E*k,V+=x*u,V+=g*W,I=V>>>13,V&=8191,V+=S*X,V+=p*z,V+=v*(5*se),V+=w*(5*ie),V+=D*(5*J),I+=V>>>13,V&=8191,O=I,O+=H*J,O+=U*ae,O+=E*oe,O+=x*k,O+=g*u,I=O>>>13,O&=8191,O+=S*W,O+=p*X,O+=v*z,O+=w*(5*se),O+=D*(5*ie),I+=O>>>13,O&=8191,R=I,R+=H*ie,R+=U*J,R+=E*ae,R+=x*oe,R+=g*k,I=R>>>13,R&=8191,R+=S*u,R+=p*W,R+=v*X,R+=w*z,R+=D*(5*se),I+=R>>>13,R&=8191,M=I,M+=H*se,M+=U*ie,M+=E*J,M+=x*ae,M+=g*oe,I=M>>>13,M&=8191,M+=S*k,M+=p*u,M+=v*W,M+=w*X,M+=D*z,I+=M>>>13,M&=8191,I=(I<<2)+I|0,I=I+q|0,q=I&8191,I=I>>>13,G+=I,H=q,U=G,E=C,x=Y,g=K,S=F,p=V,v=O,w=R,D=M,o+=16,f-=16;this.h[0]=H,this.h[1]=U,this.h[2]=E,this.h[3]=x,this.h[4]=g,this.h[5]=S,this.h[6]=p,this.h[7]=v,this.h[8]=w,this.h[9]=D},ot.prototype.finish=function(i,o){var f=new Uint16Array(10),t,a,d,h;if(this.leftover){for(h=this.leftover,this.buffer[h++]=1;h<16;h++)this.buffer[h]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(t=this.h[1]>>>13,this.h[1]&=8191,h=2;h<10;h++)this.h[h]+=t,t=this.h[h]>>>13,this.h[h]&=8191;for(this.h[0]+=t*5,t=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=t,t=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=t,f[0]=this.h[0]+5,t=f[0]>>>13,f[0]&=8191,h=1;h<10;h++)f[h]=this.h[h]+t,t=f[h]>>>13,f[h]&=8191;for(f[9]-=1<<13,a=(t^1)-1,h=0;h<10;h++)f[h]&=a;for(a=~a,h=0;h<10;h++)this.h[h]=this.h[h]&a|f[h];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,d=this.h[0]+this.pad[0],this.h[0]=d&65535,h=1;h<8;h++)d=(this.h[h]+this.pad[h]|0)+(d>>>16)|0,this.h[h]=d&65535;i[o+0]=this.h[0]>>>0&255,i[o+1]=this.h[0]>>>8&255,i[o+2]=this.h[1]>>>0&255,i[o+3]=this.h[1]>>>8&255,i[o+4]=this.h[2]>>>0&255,i[o+5]=this.h[2]>>>8&255,i[o+6]=this.h[3]>>>0&255,i[o+7]=this.h[3]>>>8&255,i[o+8]=this.h[4]>>>0&255,i[o+9]=this.h[4]>>>8&255,i[o+10]=this.h[5]>>>0&255,i[o+11]=this.h[5]>>>8&255,i[o+12]=this.h[6]>>>0&255,i[o+13]=this.h[6]>>>8&255,i[o+14]=this.h[7]>>>0&255,i[o+15]=this.h[7]>>>8&255},ot.prototype.update=function(i,o,f){var t,a;if(this.leftover){for(a=16-this.leftover,a>f&&(a=f),t=0;t<a;t++)this.buffer[this.leftover+t]=i[o+t];if(f-=a,o+=a,this.leftover+=a,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(f>=16&&(a=f-f%16,this.blocks(i,o,a),o+=a,f-=a),f){for(t=0;t<f;t++)this.buffer[this.leftover+t]=i[o+t];this.leftover+=f}};function qt(i,o,f,t,a,d){var h=new ot(d);return h.update(f,t,a),h.finish(i,o),0}function Yn(i,o,f,t,a,d){var h=new Uint8Array(16);return qt(h,0,f,t,a,d),Kn(i,o,h,0)}function Gt(i,o,f,t,a){var d;if(f<32)return-1;for(Dt(i,0,o,0,f,t,a),qt(i,16,i,32,f-32,i),d=0;d<16;d++)i[d]=0;return 0}function Kt(i,o,f,t,a){var d,h=new Uint8Array(32);if(f<32||(Fn(h,0,32,t,a),Yn(o,16,o,32,f-32,h)!==0))return-1;for(Dt(i,0,o,0,f,t,a),d=0;d<32;d++)i[d]=0;return 0}function dr(i,o){var f;for(f=0;f<16;f++)i[f]=o[f]|0}function Vt(i){var o,f,t=1;for(o=0;o<16;o++)f=i[o]+t+65535,t=Math.floor(f/65536),i[o]=f-t*65536;i[0]+=t-1+37*(t-1)}function Or(i,o,f){for(var t,a=~(f-1),d=0;d<16;d++)t=a&(i[d]^o[d]),i[d]^=t,o[d]^=t}function Hr(i,o){var f,t,a,d=r(),h=r();for(f=0;f<16;f++)h[f]=o[f];for(Vt(h),Vt(h),Vt(h),t=0;t<2;t++){for(d[0]=h[0]-65517,f=1;f<15;f++)d[f]=h[f]-65535-(d[f-1]>>16&1),d[f-1]&=65535;d[15]=h[15]-32767-(d[14]>>16&1),a=d[15]>>16&1,d[14]&=65535,Or(h,d,1-a)}for(f=0;f<16;f++)i[2*f]=h[f]&255,i[2*f+1]=h[f]>>8}function Cn(i,o){var f=new Uint8Array(32),t=new Uint8Array(32);return Hr(f,i),Hr(t,o),Rt(f,0,t,0)}function zn(i){var o=new Uint8Array(32);return Hr(o,i),o[0]&1}function $t(i,o){var f;for(f=0;f<16;f++)i[f]=o[2*f]+(o[2*f+1]<<8);i[15]&=32767}function rr(i,o,f){for(var t=0;t<16;t++)i[t]=o[t]+f[t]}function tr(i,o,f){for(var t=0;t<16;t++)i[t]=o[t]-f[t]}function ne(i,o,f){var t,a,d=0,h=0,_=0,T=0,L=0,P=0,fe=0,I=0,q=0,G=0,C=0,Y=0,K=0,F=0,V=0,O=0,R=0,M=0,H=0,U=0,E=0,x=0,g=0,S=0,p=0,v=0,w=0,D=0,z=0,X=0,W=0,u=f[0],k=f[1],oe=f[2],ae=f[3],J=f[4],ie=f[5],se=f[6],we=f[7],ue=f[8],ye=f[9],_e=f[10],ve=f[11],Be=f[12],He=f[13],Ue=f[14],Le=f[15];t=o[0],d+=t*u,h+=t*k,_+=t*oe,T+=t*ae,L+=t*J,P+=t*ie,fe+=t*se,I+=t*we,q+=t*ue,G+=t*ye,C+=t*_e,Y+=t*ve,K+=t*Be,F+=t*He,V+=t*Ue,O+=t*Le,t=o[1],h+=t*u,_+=t*k,T+=t*oe,L+=t*ae,P+=t*J,fe+=t*ie,I+=t*se,q+=t*we,G+=t*ue,C+=t*ye,Y+=t*_e,K+=t*ve,F+=t*Be,V+=t*He,O+=t*Ue,R+=t*Le,t=o[2],_+=t*u,T+=t*k,L+=t*oe,P+=t*ae,fe+=t*J,I+=t*ie,q+=t*se,G+=t*we,C+=t*ue,Y+=t*ye,K+=t*_e,F+=t*ve,V+=t*Be,O+=t*He,R+=t*Ue,M+=t*Le,t=o[3],T+=t*u,L+=t*k,P+=t*oe,fe+=t*ae,I+=t*J,q+=t*ie,G+=t*se,C+=t*we,Y+=t*ue,K+=t*ye,F+=t*_e,V+=t*ve,O+=t*Be,R+=t*He,M+=t*Ue,H+=t*Le,t=o[4],L+=t*u,P+=t*k,fe+=t*oe,I+=t*ae,q+=t*J,G+=t*ie,C+=t*se,Y+=t*we,K+=t*ue,F+=t*ye,V+=t*_e,O+=t*ve,R+=t*Be,M+=t*He,H+=t*Ue,U+=t*Le,t=o[5],P+=t*u,fe+=t*k,I+=t*oe,q+=t*ae,G+=t*J,C+=t*ie,Y+=t*se,K+=t*we,F+=t*ue,V+=t*ye,O+=t*_e,R+=t*ve,M+=t*Be,H+=t*He,U+=t*Ue,E+=t*Le,t=o[6],fe+=t*u,I+=t*k,q+=t*oe,G+=t*ae,C+=t*J,Y+=t*ie,K+=t*se,F+=t*we,V+=t*ue,O+=t*ye,R+=t*_e,M+=t*ve,H+=t*Be,U+=t*He,E+=t*Ue,x+=t*Le,t=o[7],I+=t*u,q+=t*k,G+=t*oe,C+=t*ae,Y+=t*J,K+=t*ie,F+=t*se,V+=t*we,O+=t*ue,R+=t*ye,M+=t*_e,H+=t*ve,U+=t*Be,E+=t*He,x+=t*Ue,g+=t*Le,t=o[8],q+=t*u,G+=t*k,C+=t*oe,Y+=t*ae,K+=t*J,F+=t*ie,V+=t*se,O+=t*we,R+=t*ue,M+=t*ye,H+=t*_e,U+=t*ve,E+=t*Be,x+=t*He,g+=t*Ue,S+=t*Le,t=o[9],G+=t*u,C+=t*k,Y+=t*oe,K+=t*ae,F+=t*J,V+=t*ie,O+=t*se,R+=t*we,M+=t*ue,H+=t*ye,U+=t*_e,E+=t*ve,x+=t*Be,g+=t*He,S+=t*Ue,p+=t*Le,t=o[10],C+=t*u,Y+=t*k,K+=t*oe,F+=t*ae,V+=t*J,O+=t*ie,R+=t*se,M+=t*we,H+=t*ue,U+=t*ye,E+=t*_e,x+=t*ve,g+=t*Be,S+=t*He,p+=t*Ue,v+=t*Le,t=o[11],Y+=t*u,K+=t*k,F+=t*oe,V+=t*ae,O+=t*J,R+=t*ie,M+=t*se,H+=t*we,U+=t*ue,E+=t*ye,x+=t*_e,g+=t*ve,S+=t*Be,p+=t*He,v+=t*Ue,w+=t*Le,t=o[12],K+=t*u,F+=t*k,V+=t*oe,O+=t*ae,R+=t*J,M+=t*ie,H+=t*se,U+=t*we,E+=t*ue,x+=t*ye,g+=t*_e,S+=t*ve,p+=t*Be,v+=t*He,w+=t*Ue,D+=t*Le,t=o[13],F+=t*u,V+=t*k,O+=t*oe,R+=t*ae,M+=t*J,H+=t*ie,U+=t*se,E+=t*we,x+=t*ue,g+=t*ye,S+=t*_e,p+=t*ve,v+=t*Be,w+=t*He,D+=t*Ue,z+=t*Le,t=o[14],V+=t*u,O+=t*k,R+=t*oe,M+=t*ae,H+=t*J,U+=t*ie,E+=t*se,x+=t*we,g+=t*ue,S+=t*ye,p+=t*_e,v+=t*ve,w+=t*Be,D+=t*He,z+=t*Ue,X+=t*Le,t=o[15],O+=t*u,R+=t*k,M+=t*oe,H+=t*ae,U+=t*J,E+=t*ie,x+=t*se,g+=t*we,S+=t*ue,p+=t*ye,v+=t*_e,w+=t*ve,D+=t*Be,z+=t*He,X+=t*Ue,W+=t*Le,d+=38*R,h+=38*M,_+=38*H,T+=38*U,L+=38*E,P+=38*x,fe+=38*g,I+=38*S,q+=38*p,G+=38*v,C+=38*w,Y+=38*D,K+=38*z,F+=38*X,V+=38*W,a=1,t=d+a+65535,a=Math.floor(t/65536),d=t-a*65536,t=h+a+65535,a=Math.floor(t/65536),h=t-a*65536,t=_+a+65535,a=Math.floor(t/65536),_=t-a*65536,t=T+a+65535,a=Math.floor(t/65536),T=t-a*65536,t=L+a+65535,a=Math.floor(t/65536),L=t-a*65536,t=P+a+65535,a=Math.floor(t/65536),P=t-a*65536,t=fe+a+65535,a=Math.floor(t/65536),fe=t-a*65536,t=I+a+65535,a=Math.floor(t/65536),I=t-a*65536,t=q+a+65535,a=Math.floor(t/65536),q=t-a*65536,t=G+a+65535,a=Math.floor(t/65536),G=t-a*65536,t=C+a+65535,a=Math.floor(t/65536),C=t-a*65536,t=Y+a+65535,a=Math.floor(t/65536),Y=t-a*65536,t=K+a+65535,a=Math.floor(t/65536),K=t-a*65536,t=F+a+65535,a=Math.floor(t/65536),F=t-a*65536,t=V+a+65535,a=Math.floor(t/65536),V=t-a*65536,t=O+a+65535,a=Math.floor(t/65536),O=t-a*65536,d+=a-1+37*(a-1),a=1,t=d+a+65535,a=Math.floor(t/65536),d=t-a*65536,t=h+a+65535,a=Math.floor(t/65536),h=t-a*65536,t=_+a+65535,a=Math.floor(t/65536),_=t-a*65536,t=T+a+65535,a=Math.floor(t/65536),T=t-a*65536,t=L+a+65535,a=Math.floor(t/65536),L=t-a*65536,t=P+a+65535,a=Math.floor(t/65536),P=t-a*65536,t=fe+a+65535,a=Math.floor(t/65536),fe=t-a*65536,t=I+a+65535,a=Math.floor(t/65536),I=t-a*65536,t=q+a+65535,a=Math.floor(t/65536),q=t-a*65536,t=G+a+65535,a=Math.floor(t/65536),G=t-a*65536,t=C+a+65535,a=Math.floor(t/65536),C=t-a*65536,t=Y+a+65535,a=Math.floor(t/65536),Y=t-a*65536,t=K+a+65535,a=Math.floor(t/65536),K=t-a*65536,t=F+a+65535,a=Math.floor(t/65536),F=t-a*65536,t=V+a+65535,a=Math.floor(t/65536),V=t-a*65536,t=O+a+65535,a=Math.floor(t/65536),O=t-a*65536,d+=a-1+37*(a-1),i[0]=d,i[1]=h,i[2]=_,i[3]=T,i[4]=L,i[5]=P,i[6]=fe,i[7]=I,i[8]=q,i[9]=G,i[10]=C,i[11]=Y,i[12]=K,i[13]=F,i[14]=V,i[15]=O}function Je(i,o){ne(i,o,o)}function Wn(i,o){var f=r(),t;for(t=0;t<16;t++)f[t]=o[t];for(t=253;t>=0;t--)Je(f,f),t!==2&&t!==4&&ne(f,f,o);for(t=0;t<16;t++)i[t]=f[t]}function Xn(i,o){var f=r(),t;for(t=0;t<16;t++)f[t]=o[t];for(t=250;t>=0;t--)Je(f,f),t!==1&&ne(f,f,o);for(t=0;t<16;t++)i[t]=f[t]}function at(i,o,f){var t=new Uint8Array(32),a=new Float64Array(80),d,h,_=r(),T=r(),L=r(),P=r(),fe=r(),I=r();for(h=0;h<31;h++)t[h]=o[h];for(t[31]=o[31]&127|64,t[0]&=248,$t(a,f),h=0;h<16;h++)T[h]=a[h],P[h]=_[h]=L[h]=0;for(_[0]=P[0]=1,h=254;h>=0;--h)d=t[h>>>3]>>>(h&7)&1,Or(_,T,d),Or(L,P,d),rr(fe,_,L),tr(_,_,L),rr(L,T,P),tr(T,T,P),Je(P,fe),Je(I,_),ne(_,L,_),ne(L,T,fe),rr(fe,_,L),tr(_,_,L),Je(T,_),tr(L,P,I),ne(_,L,m),rr(_,_,P),ne(L,L,_),ne(_,P,I),ne(P,T,a),Je(T,fe),Or(_,T,d),Or(L,P,d);for(h=0;h<16;h++)a[h+16]=_[h],a[h+32]=L[h],a[h+48]=T[h],a[h+64]=P[h];var q=a.subarray(32),G=a.subarray(16);return Wn(q,q),ne(G,G,q),Hr(i,G),0}function ct(i,o){return at(i,o,c)}function Jn(i,o){return n(o,32),ct(i,o)}function ut(i,o,f){var t=new Uint8Array(32);return at(t,f,o),ft(i,s,t,Sr)}var Zn=Gt,Ss=Kt;function ws(i,o,f,t,a,d){var h=new Uint8Array(32);return ut(h,a,d),Zn(i,o,f,t,h)}function Ts(i,o,f,t,a,d){var h=new Uint8Array(32);return ut(h,a,d),Ss(i,o,f,t,h)}var kn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Qn(i,o,f,t){for(var a=new Int32Array(16),d=new Int32Array(16),h,_,T,L,P,fe,I,q,G,C,Y,K,F,V,O,R,M,H,U,E,x,g,S,p,v,w,D=i[0],z=i[1],X=i[2],W=i[3],u=i[4],k=i[5],oe=i[6],ae=i[7],J=o[0],ie=o[1],se=o[2],we=o[3],ue=o[4],ye=o[5],_e=o[6],ve=o[7],Be=0;t>=128;){for(U=0;U<16;U++)E=8*U+Be,a[U]=f[E+0]<<24|f[E+1]<<16|f[E+2]<<8|f[E+3],d[U]=f[E+4]<<24|f[E+5]<<16|f[E+6]<<8|f[E+7];for(U=0;U<80;U++)if(h=D,_=z,T=X,L=W,P=u,fe=k,I=oe,q=ae,G=J,C=ie,Y=se,K=we,F=ue,V=ye,O=_e,R=ve,x=ae,g=ve,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=(u>>>14|ue<<32-14)^(u>>>18|ue<<32-18)^(ue>>>41-32|u<<32-(41-32)),g=(ue>>>14|u<<32-14)^(ue>>>18|u<<32-18)^(u>>>41-32|ue<<32-(41-32)),S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,x=u&k^~u&oe,g=ue&ye^~ue&_e,S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,x=kn[U*2],g=kn[U*2+1],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,x=a[U%16],g=d[U%16],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,M=v&65535|w<<16,H=S&65535|p<<16,x=M,g=H,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=(D>>>28|J<<32-28)^(J>>>34-32|D<<32-(34-32))^(J>>>39-32|D<<32-(39-32)),g=(J>>>28|D<<32-28)^(D>>>34-32|J<<32-(34-32))^(D>>>39-32|J<<32-(39-32)),S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,x=D&z^D&X^z&X,g=J&ie^J&se^ie&se,S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,q=v&65535|w<<16,R=S&65535|p<<16,x=L,g=K,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=M,g=H,S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,L=v&65535|w<<16,K=S&65535|p<<16,z=h,X=_,W=T,u=L,k=P,oe=fe,ae=I,D=q,ie=G,se=C,we=Y,ue=K,ye=F,_e=V,ve=O,J=R,U%16===15)for(E=0;E<16;E++)x=a[E],g=d[E],S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=a[(E+9)%16],g=d[(E+9)%16],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,M=a[(E+1)%16],H=d[(E+1)%16],x=(M>>>1|H<<32-1)^(M>>>8|H<<32-8)^M>>>7,g=(H>>>1|M<<32-1)^(H>>>8|M<<32-8)^(H>>>7|M<<32-7),S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,M=a[(E+14)%16],H=d[(E+14)%16],x=(M>>>19|H<<32-19)^(H>>>61-32|M<<32-(61-32))^M>>>6,g=(H>>>19|M<<32-19)^(M>>>61-32|H<<32-(61-32))^(H>>>6|M<<32-6),S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,a[E]=v&65535|w<<16,d[E]=S&65535|p<<16;x=D,g=J,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[0],g=o[0],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[0]=D=v&65535|w<<16,o[0]=J=S&65535|p<<16,x=z,g=ie,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[1],g=o[1],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[1]=z=v&65535|w<<16,o[1]=ie=S&65535|p<<16,x=X,g=se,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[2],g=o[2],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[2]=X=v&65535|w<<16,o[2]=se=S&65535|p<<16,x=W,g=we,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[3],g=o[3],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[3]=W=v&65535|w<<16,o[3]=we=S&65535|p<<16,x=u,g=ue,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[4],g=o[4],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[4]=u=v&65535|w<<16,o[4]=ue=S&65535|p<<16,x=k,g=ye,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[5],g=o[5],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[5]=k=v&65535|w<<16,o[5]=ye=S&65535|p<<16,x=oe,g=_e,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[6],g=o[6],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[6]=oe=v&65535|w<<16,o[6]=_e=S&65535|p<<16,x=ae,g=ve,S=g&65535,p=g>>>16,v=x&65535,w=x>>>16,x=i[7],g=o[7],S+=g&65535,p+=g>>>16,v+=x&65535,w+=x>>>16,p+=S>>>16,v+=p>>>16,w+=v>>>16,i[7]=ae=v&65535|w<<16,o[7]=ve=S&65535|p<<16,Be+=128,t-=128}return t}function wr(i,o,f){var t=new Int32Array(8),a=new Int32Array(8),d=new Uint8Array(256),h,_=f;for(t[0]=1779033703,t[1]=3144134277,t[2]=1013904242,t[3]=2773480762,t[4]=1359893119,t[5]=2600822924,t[6]=528734635,t[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,Qn(t,a,o,f),f%=128,h=0;h<f;h++)d[h]=o[_-f+h];for(d[f]=128,f=256-128*(f<112?1:0),d[f-9]=0,Xe(d,f-8,_/536870912|0,_<<3),Qn(t,a,d,f),h=0;h<8;h++)Xe(i,8*h,t[h],a[h]);return 0}function dt(i,o){var f=r(),t=r(),a=r(),d=r(),h=r(),_=r(),T=r(),L=r(),P=r();tr(f,i[1],i[0]),tr(P,o[1],o[0]),ne(f,f,P),rr(t,i[0],i[1]),rr(P,o[0],o[1]),ne(t,t,P),ne(a,i[3],o[3]),ne(a,a,Z),ne(d,i[2],o[2]),rr(d,d,d),tr(h,t,f),tr(_,d,a),rr(T,d,a),rr(L,t,f),ne(i[0],h,_),ne(i[1],L,T),ne(i[2],T,_),ne(i[3],h,L)}function ei(i,o,f){var t;for(t=0;t<4;t++)Or(i[t],o[t],f)}function Ft(i,o){var f=r(),t=r(),a=r();Wn(a,o[2]),ne(f,o[0],a),ne(t,o[1],a),Hr(i,t),i[31]^=zn(f)<<7}function Yt(i,o,f){var t,a;for(dr(i[0],l),dr(i[1],b),dr(i[2],b),dr(i[3],l),a=255;a>=0;--a)t=f[a/8|0]>>(a&7)&1,ei(i,o,t),dt(o,i),dt(i,i),ei(i,o,t)}function ht(i,o){var f=[r(),r(),r(),r()];dr(f[0],te),dr(f[1],Se),dr(f[2],b),ne(f[3],te,Se),Yt(i,f,o)}function Ct(i,o,f){var t=new Uint8Array(64),a=[r(),r(),r(),r()],d;for(f||n(o,32),wr(t,o,32),t[0]&=248,t[31]&=127,t[31]|=64,ht(a,t),Ft(i,a),d=0;d<32;d++)o[d+32]=i[d];return 0}var lt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function zt(i,o){var f,t,a,d;for(t=63;t>=32;--t){for(f=0,a=t-32,d=t-12;a<d;++a)o[a]+=f-16*o[t]*lt[a-(t-32)],f=Math.floor((o[a]+128)/256),o[a]-=f*256;o[a]+=f,o[t]=0}for(f=0,a=0;a<32;a++)o[a]+=f-(o[31]>>4)*lt[a],f=o[a]>>8,o[a]&=255;for(a=0;a<32;a++)o[a]-=f*lt[a];for(t=0;t<32;t++)o[t+1]+=o[t]>>8,i[t]=o[t]&255}function Wt(i){var o=new Float64Array(64),f;for(f=0;f<64;f++)o[f]=i[f];for(f=0;f<64;f++)i[f]=0;zt(i,o)}function ri(i,o,f,t){var a=new Uint8Array(64),d=new Uint8Array(64),h=new Uint8Array(64),_,T,L=new Float64Array(64),P=[r(),r(),r(),r()];wr(a,t,32),a[0]&=248,a[31]&=127,a[31]|=64;var fe=f+64;for(_=0;_<f;_++)i[64+_]=o[_];for(_=0;_<32;_++)i[32+_]=a[32+_];for(wr(h,i.subarray(32),f+32),Wt(h),ht(P,h),Ft(i,P),_=32;_<64;_++)i[_]=t[_];for(wr(d,i,f+64),Wt(d),_=0;_<64;_++)L[_]=0;for(_=0;_<32;_++)L[_]=h[_];for(_=0;_<32;_++)for(T=0;T<32;T++)L[_+T]+=d[_]*a[T];return zt(i.subarray(32),L),fe}function ms(i,o){var f=r(),t=r(),a=r(),d=r(),h=r(),_=r(),T=r();return dr(i[2],b),$t(i[1],o),Je(a,i[1]),ne(d,a,j),tr(a,a,i[2]),rr(d,i[2],d),Je(h,d),Je(_,h),ne(T,_,h),ne(f,T,a),ne(f,f,d),Xn(f,f),ne(f,f,a),ne(f,f,d),ne(f,f,d),ne(i[0],f,d),Je(t,i[0]),ne(t,t,d),Cn(t,a)&&ne(i[0],i[0],qe),Je(t,i[0]),ne(t,t,d),Cn(t,a)?-1:(zn(i[0])===o[31]>>7&&tr(i[0],l,i[0]),ne(i[3],i[0],i[1]),0)}function Xt(i,o,f,t){var a,d=new Uint8Array(32),h=new Uint8Array(64),_=[r(),r(),r(),r()],T=[r(),r(),r(),r()];if(f<64||ms(T,t))return-1;for(a=0;a<f;a++)i[a]=o[a];for(a=0;a<32;a++)i[a+32]=t[a];if(wr(h,i,f),Wt(h),Yt(_,T,h),ht(T,o.subarray(32)),dt(_,T),Ft(d,_),f-=64,Rt(o,0,d,0)){for(a=0;a<f;a++)i[a]=0;return-1}for(a=0;a<f;a++)i[a]=o[a+64];return f}var Jt=32,xt=24,Yr=32,Ur=16,Cr=32,gt=32,zr=32,Wr=32,Zt=32,ti=xt,Es=Yr,Ps=Ur,hr=64,Tr=32,Lr=64,kt=32,Qt=64;e.lowlevel={crypto_core_hsalsa20:ft,crypto_stream_xor:Dt,crypto_stream:Fn,crypto_stream_salsa20_xor:Vn,crypto_stream_salsa20:$n,crypto_onetimeauth:qt,crypto_onetimeauth_verify:Yn,crypto_verify_16:Kn,crypto_verify_32:Rt,crypto_secretbox:Gt,crypto_secretbox_open:Kt,crypto_scalarmult:at,crypto_scalarmult_base:ct,crypto_box_beforenm:ut,crypto_box_afternm:Zn,crypto_box:ws,crypto_box_open:Ts,crypto_box_keypair:Jn,crypto_hash:wr,crypto_sign:ri,crypto_sign_keypair:Ct,crypto_sign_open:Xt,crypto_secretbox_KEYBYTES:Jt,crypto_secretbox_NONCEBYTES:xt,crypto_secretbox_ZEROBYTES:Yr,crypto_secretbox_BOXZEROBYTES:Ur,crypto_scalarmult_BYTES:Cr,crypto_scalarmult_SCALARBYTES:gt,crypto_box_PUBLICKEYBYTES:zr,crypto_box_SECRETKEYBYTES:Wr,crypto_box_BEFORENMBYTES:Zt,crypto_box_NONCEBYTES:ti,crypto_box_ZEROBYTES:Es,crypto_box_BOXZEROBYTES:Ps,crypto_sign_BYTES:hr,crypto_sign_PUBLICKEYBYTES:Tr,crypto_sign_SECRETKEYBYTES:Lr,crypto_sign_SEEDBYTES:kt,crypto_hash_BYTES:Qt,gf:r,D:j,L:lt,pack25519:Hr,unpack25519:$t,M:ne,A:rr,S:Je,Z:tr,pow2523:Xn,add:dt,set25519:dr,modL:zt,scalarmult:Yt,scalarbase:ht};function ni(i,o){if(i.length!==Jt)throw new Error("bad key size");if(o.length!==xt)throw new Error("bad nonce size")}function As(i,o){if(i.length!==zr)throw new Error("bad public key size");if(o.length!==Wr)throw new Error("bad secret key size")}function Fe(){for(var i=0;i<arguments.length;i++)if(!(arguments[i]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ii(i){for(var o=0;o<i.length;o++)i[o]=0}e.randomBytes=function(i){var o=new Uint8Array(i);return n(o,i),o},e.secretbox=function(i,o,f){Fe(i,o,f),ni(f,o);for(var t=new Uint8Array(Yr+i.length),a=new Uint8Array(t.length),d=0;d<i.length;d++)t[d+Yr]=i[d];return Gt(a,t,t.length,o,f),a.subarray(Ur)},e.secretbox.open=function(i,o,f){Fe(i,o,f),ni(f,o);for(var t=new Uint8Array(Ur+i.length),a=new Uint8Array(t.length),d=0;d<i.length;d++)t[d+Ur]=i[d];return t.length<32||Kt(a,t,t.length,o,f)!==0?null:a.subarray(Yr)},e.secretbox.keyLength=Jt,e.secretbox.nonceLength=xt,e.secretbox.overheadLength=Ur,e.scalarMult=function(i,o){if(Fe(i,o),i.length!==gt)throw new Error("bad n size");if(o.length!==Cr)throw new Error("bad p size");var f=new Uint8Array(Cr);return at(f,i,o),f},e.scalarMult.base=function(i){if(Fe(i),i.length!==gt)throw new Error("bad n size");var o=new Uint8Array(Cr);return ct(o,i),o},e.scalarMult.scalarLength=gt,e.scalarMult.groupElementLength=Cr,e.box=function(i,o,f,t){var a=e.box.before(f,t);return e.secretbox(i,o,a)},e.box.before=function(i,o){Fe(i,o),As(i,o);var f=new Uint8Array(Zt);return ut(f,i,o),f},e.box.after=e.secretbox,e.box.open=function(i,o,f,t){var a=e.box.before(f,t);return e.secretbox.open(i,o,a)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var i=new Uint8Array(zr),o=new Uint8Array(Wr);return Jn(i,o),{publicKey:i,secretKey:o}},e.box.keyPair.fromSecretKey=function(i){if(Fe(i),i.length!==Wr)throw new Error("bad secret key size");var o=new Uint8Array(zr);return ct(o,i),{publicKey:o,secretKey:new Uint8Array(i)}},e.box.publicKeyLength=zr,e.box.secretKeyLength=Wr,e.box.sharedKeyLength=Zt,e.box.nonceLength=ti,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(i,o){if(Fe(i,o),o.length!==Lr)throw new Error("bad secret key size");var f=new Uint8Array(hr+i.length);return ri(f,i,i.length,o),f},e.sign.open=function(i,o){if(Fe(i,o),o.length!==Tr)throw new Error("bad public key size");var f=new Uint8Array(i.length),t=Xt(f,i,i.length,o);if(t<0)return null;for(var a=new Uint8Array(t),d=0;d<a.length;d++)a[d]=f[d];return a},e.sign.detached=function(i,o){for(var f=e.sign(i,o),t=new Uint8Array(hr),a=0;a<t.length;a++)t[a]=f[a];return t},e.sign.detached.verify=function(i,o,f){if(Fe(i,o,f),o.length!==hr)throw new Error("bad signature size");if(f.length!==Tr)throw new Error("bad public key size");var t=new Uint8Array(hr+i.length),a=new Uint8Array(hr+i.length),d;for(d=0;d<hr;d++)t[d]=o[d];for(d=0;d<i.length;d++)t[d+hr]=i[d];return Xt(a,t,t.length,f)>=0},e.sign.keyPair=function(){var i=new Uint8Array(Tr),o=new Uint8Array(Lr);return Ct(i,o),{publicKey:i,secretKey:o}},e.sign.keyPair.fromSecretKey=function(i){if(Fe(i),i.length!==Lr)throw new Error("bad secret key size");for(var o=new Uint8Array(Tr),f=0;f<o.length;f++)o[f]=i[32+f];return{publicKey:o,secretKey:new Uint8Array(i)}},e.sign.keyPair.fromSeed=function(i){if(Fe(i),i.length!==kt)throw new Error("bad seed size");for(var o=new Uint8Array(Tr),f=new Uint8Array(Lr),t=0;t<32;t++)f[t]=i[t];return Ct(o,f,!0),{publicKey:o,secretKey:f}},e.sign.publicKeyLength=Tr,e.sign.secretKeyLength=Lr,e.sign.seedLength=kt,e.sign.signatureLength=hr,e.hash=function(i){Fe(i);var o=new Uint8Array(Qt);return wr(o,i,i.length),o},e.hash.hashLength=Qt,e.verify=function(i,o){return Fe(i,o),i.length===0||o.length===0||i.length!==o.length?!1:Ir(i,0,o,0,i.length)===0},e.setPRNG=function(i){n=i},function(){var i=typeof self<"u"?self.crypto||self.msCrypto:null;if(i&&i.getRandomValues){var o=65536;e.setPRNG(function(f,t){var a,d=new Uint8Array(t);for(a=0;a<t;a+=o)i.getRandomValues(d.subarray(a,a+Math.min(t-a,o)));for(a=0;a<t;a++)f[a]=d[a];ii(d)})}else typeof si<"u"&&(i=Bs(),i&&i.randomBytes&&e.setPRNG(function(f,t){var a,d=i.randomBytes(t);for(a=0;a<t;a++)f[a]=d[a];ii(d)}))}()})(typeof At<"u"&&At.exports?At.exports:self.nacl=self.nacl||{})});var ji=re((Li,Bt)=>{"use strict";A();B();(function(e,r){"use strict";typeof Bt<"u"&&Bt.exports?Bt.exports=r():(e.nacl||(e.nacl={}),e.nacl.util=r())})(Li,function(){"use strict";var e={};function r(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var s,c=unescape(encodeURIComponent(n)),l=new Uint8Array(c.length);for(s=0;s<c.length;s++)l[s]=c.charCodeAt(s);return l},e.encodeUTF8=function(n){var s,c=[];for(s=0;s<n.length;s++)c.push(String.fromCharCode(n[s]));return decodeURIComponent(escape(c.join("")))},typeof atob>"u"?typeof y.Buffer.from<"u"?(e.encodeBase64=function(n){return y.Buffer.from(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(y.Buffer.from(n,"base64"),0))}):(e.encodeBase64=function(n){return new y.Buffer(n).toString("base64")},e.decodeBase64=function(n){return r(n),new Uint8Array(Array.prototype.slice.call(new y.Buffer(n,"base64"),0))}):(e.encodeBase64=function(n){var s,c=[],l=n.length;for(s=0;s<l;s++)c.push(String.fromCharCode(n[s]));return btoa(c.join(""))},e.decodeBase64=function(n){r(n);var s,c=atob(n),l=new Uint8Array(c.length);for(s=0;s<c.length;s++)l[s]=c.charCodeAt(s);return l}),e})});var Gi=re(Qe=>{"use strict";A();B();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getEncryptionPublicKey=Qe.decryptSafely=Qe.decrypt=Qe.encryptSafely=Qe.encrypt=void 0;var Er=Ui(),ir=ji(),or=mr();function Ri({publicKey:e,data:r,version:n}){if((0,or.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,or.isNullish)(r))throw new Error("Missing data parameter");if((0,or.isNullish)(n))throw new Error("Missing version parameter");switch(n){case"x25519-xsalsa20-poly1305":{let s=Er.box.keyPair(),c;try{c=ir.decodeBase64(e)}catch{throw new Error("Bad public key")}let l=ir.decodeUTF8(r),b=Er.randomBytes(Er.box.nonceLength),m=Er.box(l,b,c,s.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:ir.encodeBase64(b),ephemPublicKey:ir.encodeBase64(s.publicKey),ciphertext:ir.encodeBase64(m)}}default:throw new Error("Encryption type/version not supported")}}Qe.encrypt=Ri;function Yf({publicKey:e,data:r,version:n}){if((0,or.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,or.isNullish)(r))throw new Error("Missing data parameter");if((0,or.isNullish)(n))throw new Error("Missing version parameter");let s=2**11,c=16;if(typeof r=="object"&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let l={data:r,padding:""},m=y.Buffer.byteLength(JSON.stringify(l),"utf-8")%s,j=0;m>0&&(j=s-m-c),l.padding="0".repeat(j);let Z=JSON.stringify(l);return Ri({publicKey:e,data:Z,version:n})}Qe.encryptSafely=Yf;function Di({encryptedData:e,privateKey:r}){if((0,or.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,or.isNullish)(r))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let n=qi(r),s=Er.box.keyPair.fromSecretKey(n).secretKey,c=ir.decodeBase64(e.nonce),l=ir.decodeBase64(e.ciphertext),b=ir.decodeBase64(e.ephemPublicKey),m=Er.box.open(l,c,b,s),j;try{j=ir.encodeUTF8(m)}catch{throw new Error("Decryption failed.")}if(j)return j;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Qe.decrypt=Di;function Cf({encryptedData:e,privateKey:r}){if((0,or.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,or.isNullish)(r))throw new Error("Missing privateKey parameter");return JSON.parse(Di({encryptedData:e,privateKey:r})).data}Qe.decryptSafely=Cf;function zf(e){let r=qi(e),n=Er.box.keyPair.fromSecretKey(r).publicKey;return ir.encodeBase64(n)}Qe.getEncryptionPublicKey=zf;function qi(e){let r=y.Buffer.from(e,"hex").toString("base64");return ir.decodeBase64(r)}});var mr=re(Ge=>{"use strict";A();B();var Wf=Ge&&Ge.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),Vi=Ge&&Ge.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&Wf(r,e,n)};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.isNullish=Ge.legacyToBuffer=Ge.padWithZeroes=void 0;Vi(Hi(),Ge);Vi(Gi(),Ge);var Ki=nr();function Xf(e,r){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(r<0)throw new Error(`Expected a non-negative integer target length. Received: ${r}`);return String.prototype.padStart.call(e,r,"0")}Ge.padWithZeroes=Xf;function Jf(e){return typeof e=="string"&&!(0,Ki.isHexString)(e)?y.Buffer.from(e):(0,Ki.toBuffer)(e)}Ge.legacyToBuffer=Jf;function Zf(e){return e==null}Ge.isNullish=Zf});var Ci=re(Ke=>{"use strict";A();B();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.recoverFromSignature=Ke.ecdsaSign=Ke.makeSignature=Ke.calculateSigRecovery=Ke.isValidSigRecovery=Ke.hashPersonalMessage=void 0;var kf=pt(),Qf=Xr(),et=me(),Mt=_t(),rt=en(),Pr=Jr(),$i=mr(),eo=Rr(),ro=function(e){(0,Qf.assertIsBuffer)(e);let r=rt.Buffer.from(`Ethereum Signed Message:
${e.length.toString()}`,"utf-8");return(0,kf.keccak)(rt.Buffer.concat([r,e]))};Ke.hashPersonalMessage=ro;function Fi(e){let r=new et.BN(e);return r.eqn(0)||r.eqn(1)}Ke.isValidSigRecovery=Fi;function Yi(e,r){let n=(0,Mt.toType)(e,Mt.TypeOutput.BN);if(!r)return n.subn(27);let s=(0,Mt.toType)(r,Mt.TypeOutput.BN);return n.sub(s.muln(2).addn(35))}Ke.calculateSigRecovery=Yi;function to(e,r,n){let s=(0,Pr.fromSigned)(r),c=(0,Pr.fromSigned)(n),l=e,b=(0,$i.padWithZeroes)((0,Pr.toUnsigned)(s).toString("hex"),64),m=(0,$i.padWithZeroes)((0,Pr.toUnsigned)(c).toString("hex"),64),j=et.base.stripHexPrefix((0,eo.intToHex)(l));return(0,Pr.addHexPrefix)(b.concat(m,j))}Ke.makeSignature=to;function no(e,r,n){let{signature:s,recovery:c}=et.signUtil.secp256k1.sign(e,r),l=rt.Buffer.from(s.slice(0,32)),b=rt.Buffer.from(s.slice(32,64));if(n&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:n?c+(n*2+35):c+27,r:l,s:b}}Ke.ecdsaSign=no;function io(e,r,n,s,c){let l=rt.Buffer.concat([(0,Pr.setLengthLeft)(n,32),(0,Pr.setLengthLeft)(s,32)],64),b=Yi(r,c);if(!Fi(b))throw new Error("Invalid signature v value");let m=et.signUtil.secp256k1.recover(l,b.toNumber(),e,!1);if(m==null)throw new Error("ecdsaRecover error");let j=et.signUtil.secp256k1.publicKeyConvert(m,!1);if(j==null)throw new Error("publicKeyConvert error");return j.slice(1)}Ke.recoverFromSignature=io});var nr=re(Ee=>{"use strict";A();B();var zi=Ee&&Ee.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),so=Ee&&Ee.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),yr=Ee&&Ee.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&zi(r,e,n)},fo=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&zi(r,e,n);return so(r,e),r};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.rlp=void 0;yr(ai(),Ee);yr(hn(),Ee);yr(yi(),Ee);yr(pt(),Ee);yr(Ci(),Ee);yr(Jr(),Ee);yr(_t(),Ee);Ee.rlp=fo(on());yr(Rr(),Ee)});var Nt=re(Br=>{"use strict";A();B();Object.defineProperty(Br,"__esModule",{value:!0});Br.BaseTransaction=Br.Chain=void 0;var je=nr(),Ar=me(),Wi;(function(e){e[e.Mainnet=1]="Mainnet",e[e.Ropsten=3]="Ropsten",e[e.Rinkeby=4]="Rinkeby",e[e.Kovan=42]="Kovan",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia"})(Wi=Br.Chain||(Br.Chain={}));var pn=class{constructor(r){this.activeCapabilities=[],this.DEFAULT_CHAIN=Wi.Mainnet;let{nonce:n,gasLimit:s,to:c,value:l,data:b,v:m,r:j,s:Z,type:te}=r;this._type=new Ar.BN((0,je.toBuffer)(te)).toNumber();let Se=(0,je.toBuffer)(c===""?"0x":c),qe=(0,je.toBuffer)(m===""?"0x":m),Xe=(0,je.toBuffer)(j===""?"0x":j),Ir=(0,je.toBuffer)(Z===""?"0x":Z);this.nonce=new Ar.BN((0,je.toBuffer)(n===""?"0x":n)),this.gasLimit=new Ar.BN((0,je.toBuffer)(s===""?"0x":s)),this.to=Se.length>0?new je.Address(Se):void 0,this.value=new Ar.BN((0,je.toBuffer)(l===""?"0x":l)),this.data=(0,je.toBuffer)(b===""?"0x":b),this.v=qe.length>0?new Ar.BN(qe):void 0,this.r=Xe.length>0?new Ar.BN(Xe):void 0,this.s=Ir.length>0?new Ar.BN(Ir):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0)}get transactionType(){return this.type}get type(){return this._type}isSigned(){let{v:r,r:n,s}=this;return this.type===0?!(!r||!n||!s):!(r===void 0||!n||!s)}sign(r){if(r.length!==32){let b=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(b)}let n=this.getMessageToSign(!0),{v:s,r:c,s:l}=(0,je.ecdsaSign)(n,r);return this._processSignature(s,c,l)}_validateCannotExceedMaxInteger(r,n=256,s=!1){for(let[c,l]of Object.entries(r))switch(n){case 64:if(s){if(l?.gte(je.MAX_UINT64)){let b=this._errorMsg(`${c} cannot equal or exceed MAX_UINT64 (2^64-1), given ${l}`);throw new Error(b)}}else if(l?.gt(je.MAX_UINT64)){let b=this._errorMsg(`${c} cannot exceed MAX_UINT64 (2^64-1), given ${l}`);throw new Error(b)}break;case 256:if(s){if(l?.gte(je.MAX_INTEGER)){let b=this._errorMsg(`${c} cannot equal or exceed MAX_INTEGER (2^256-1), given ${l}`);throw new Error(b)}}else if(l?.gt(je.MAX_INTEGER)){let b=this._errorMsg(`${c} cannot exceed MAX_INTEGER (2^256-1), given ${l}`);throw new Error(b)}break;default:{let b=this._errorMsg("unimplemented bits value");throw new Error(b)}}}_getSharedErrorPostfix(){let r="";try{r=this.isSigned()?(0,je.bufferToHex)(this.hash()):"not available (unsigned)"}catch{r="error"}let n="";try{n=this.isSigned().toString()}catch{r="error"}let s=`tx type=${this.type} hash=${r} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${n}`,s}processSignature(r,n,s){return this._processSignature(r,n,s)}processSignatureWithRawV(r,n,s){return this._processSignatureWithRawV(r,n,s)}};Br.BaseTransaction=pn});var Xi=re(yn=>{"use strict";A();B();Object.defineProperty(yn,"__esModule",{value:!0});var ce=nr(),oo=Nt(),_r=me(),ao=0,vr=class extends oo.BaseTransaction{static fromTxData(r){return new vr(r)}static fromSerializedTx(r,n){let s=ce.rlp.decode(r);if(!Array.isArray(s))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(s,n)}static fromValuesArray(r,n){if(r.length!==6&&r.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");let[s,c,l,b,m,j,Z,te,Se]=r;return(0,ce.validateNoLeadingZeroes)({nonce:s,gasPrice:c,gasLimit:l,value:m,v:Z,r:te,s:Se}),new vr({nonce:s,gasPrice:c,gasLimit:l,to:b,value:m,data:j,v:Z,r:te,s:Se,chainId:n})}constructor(r){if(super({...r,type:ao}),this.gasPrice=new _r.BN((0,ce.toBuffer)(r.gasPrice===""?"0x":r.gasPrice)),this.chainId=new _r.BN((0,ce.toBuffer)(r.chainId===""?"0x":r.chainId)),this.gasPrice.mul(this.gasLimit).gt(ce.MAX_INTEGER)){let n=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(n)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice})}raw(){return[(0,ce.bnToUnpaddedBuffer)(this.nonce),(0,ce.bnToUnpaddedBuffer)(this.gasPrice),(0,ce.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:y.Buffer.from([]),(0,ce.bnToUnpaddedBuffer)(this.value),this.data,this.v!==void 0?(0,ce.bnToUnpaddedBuffer)(this.v):y.Buffer.from([]),this.r!==void 0?(0,ce.bnToUnpaddedBuffer)(this.r):y.Buffer.from([]),this.s!==void 0?(0,ce.bnToUnpaddedBuffer)(this.s):y.Buffer.from([])]}serialize(){return ce.rlp.encode(this.raw())}_getMessageToSign(){return[(0,ce.bnToUnpaddedBuffer)(this.nonce),(0,ce.bnToUnpaddedBuffer)(this.gasPrice),(0,ce.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:y.Buffer.from([]),(0,ce.bnToUnpaddedBuffer)(this.value),this.data,(0,ce.toBuffer)(this.chainId),(0,ce.unpadBuffer)((0,ce.toBuffer)(0)),(0,ce.unpadBuffer)((0,ce.toBuffer)(0))]}getMessageToSign(r=!0){let n=this._getMessageToSign();return r?(0,ce.rlphash)(n):n}hash(){return(0,ce.rlphash)(this.raw())}_processSignature(r,n,s){let c=new _r.BN(2*this.chainId.toNumber()+r+8);return vr.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,chainId:this.chainId,v:c,r:new _r.BN(n),s:new _r.BN(s)})}_processSignatureWithRawV(r,n,s){return vr.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,chainId:this.chainId,v:new _r.BN(r),r:new _r.BN(n),s:new _r.BN(s)})}toJSON(){return{nonce:(0,ce.bnToHex)(this.nonce),gasPrice:(0,ce.bnToHex)(this.gasPrice),gasLimit:(0,ce.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,ce.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==void 0?(0,ce.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,ce.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,ce.bnToHex)(this.s):void 0}}errorStr(){let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};yn.default=vr});var _n=re(qr=>{"use strict";A();B();Object.defineProperty(qr,"__esModule",{value:!0});qr.isAccessList=qr.isAccessListBuffer=void 0;function Ji(e){if(e.length===0)return!0;let r=e[0];return!!Array.isArray(r)}qr.isAccessListBuffer=Ji;function co(e){return!Ji(e)}qr.isAccessList=co});var Sn=re(It=>{"use strict";A();B();Object.defineProperty(It,"__esModule",{value:!0});It.AccessLists=void 0;var Gr=nr(),uo=_n(),vn=class{static getAccessListData(r){let n,s;if(r&&(0,uo.isAccessList)(r)){n=r;let c=[];for(let l=0;l<r.length;l++){let b=r[l],m=(0,Gr.toBuffer)(b.address),j=[];for(let Z=0;Z<b.storageKeys.length;Z++)j.push((0,Gr.toBuffer)(b.storageKeys[Z]));c.push([m,j])}s=c}else{s=r??[];let c=[];for(let l=0;l<s.length;l++){let b=s[l],m=(0,Gr.bufferToHex)(b[0]),j=[];for(let te=0;te<b[1].length;te++)j.push((0,Gr.bufferToHex)(b[1][te]));let Z={address:m,storageKeys:j};c.push(Z)}n=c}return{AccessListJSON:n,accessList:s}}static verifyAccessList(r){for(let n=0;n<r.length;n++){let s=r[n],c=s[0],l=s[1];if(s[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(c.length!=20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let b=0;b<l.length;b++)if(l[b].length!=32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(r){let n=[];for(let s=0;s<r.length;s++){let c=r[s],l={address:"0x"+(0,Gr.setLengthLeft)(c[0],20).toString("hex"),storageKeys:[]},b=c[1];for(let m=0;m<b.length;m++){let j=b[m];l.storageKeys.push("0x"+(0,Gr.setLengthLeft)(j,32).toString("hex"))}n.push(l)}return n}};It.AccessLists=vn});var Zi=re(En=>{"use strict";A();B();Object.defineProperty(En,"__esModule",{value:!0});var le=nr(),xr=me(),ho=Nt(),wn=Sn(),mn=1,Tn=y.Buffer.from(mn.toString(16).padStart(2,"0"),"hex"),gr=class extends ho.BaseTransaction{static fromTxData(r){return new gr(r)}static fromSerializedTx(r){if(!r.slice(0,1).equals(Tn))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${mn}, received: ${r.slice(0,1).toString("hex")}`);let n=le.rlp.decode(r.slice(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return gr.fromValuesArray(n)}static fromValuesArray(r){if(r.length!==8&&r.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");let[n,s,c,l,b,m,j,Z,te,Se,qe]=r;(0,le.validateNoLeadingZeroes)({nonce:s,gasPrice:c,gasLimit:l,value:m,v:te,r:Se,s:qe});let Xe=[];return new gr({chainId:new xr.BN(n),nonce:s,gasPrice:c,gasLimit:l,to:b,value:m,data:j,accessList:Z??Xe,v:te!==void 0?new xr.BN(te):void 0,r:Se,s:qe})}constructor(r){super({...r,type:mn});let{chainId:n,accessList:s,gasPrice:c}=r;this.chainId=(0,le.toType)(n,le.TypeOutput.BN),this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);let l=wn.AccessLists.getAccessListData(s??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,wn.AccessLists.verifyAccessList(this.accessList),this.gasPrice=new xr.BN((0,le.toBuffer)(c===""?"0x":c)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),this.gasPrice.mul(this.gasLimit).gt(le.MAX_INTEGER)){let b=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(b)}if(this.v&&!this.v.eqn(0)&&!this.v.eqn(1)){let b=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(b)}}raw(){return[(0,le.bnToUnpaddedBuffer)(this.chainId),(0,le.bnToUnpaddedBuffer)(this.nonce),(0,le.bnToUnpaddedBuffer)(this.gasPrice),(0,le.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:y.Buffer.from([]),(0,le.bnToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==void 0?(0,le.bnToUnpaddedBuffer)(this.v):y.Buffer.from([]),this.r!==void 0?(0,le.bnToUnpaddedBuffer)(this.r):y.Buffer.from([]),this.s!==void 0?(0,le.bnToUnpaddedBuffer)(this.s):y.Buffer.from([])]}serialize(){let r=this.raw();return y.Buffer.concat([Tn,le.rlp.encode(r)])}getMessageToSign(r=!0){let n=this.raw().slice(0,8),s=y.Buffer.concat([Tn,le.rlp.encode(n)]);return r?(0,le.keccak256)(s):s}hash(){if(!this.isSigned()){let r=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(r)}return(0,le.keccak256)(this.serialize())}_processSignature(r,n,s){return gr.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new xr.BN(r-27),r:new xr.BN(n),s:new xr.BN(s)})}_processSignatureWithRawV(r,n,s){return gr.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new xr.BN(r),r:new xr.BN(n),s:new xr.BN(s)})}toJSON(){let r=wn.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,le.bnToHex)(this.chainId),nonce:(0,le.bnToHex)(this.nonce),gasPrice:(0,le.bnToHex)(this.gasPrice),gasLimit:(0,le.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,le.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:r,v:this.v!==void 0?(0,le.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,le.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,le.bnToHex)(this.s):void 0}}errorStr(){let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};En.default=gr});var ki=re(An=>{"use strict";A();B();Object.defineProperty(An,"__esModule",{value:!0});var lo=nr(),xo=me(),Mr=Bn(),Pn=class{static fromTxData(r){if(!("type"in r)||r.type===void 0)return Mr.Transaction.fromTxData(r);{let n=new xo.BN((0,lo.toBuffer)(r.type)).toNumber();if(n===0)return Mr.Transaction.fromTxData(r);if(n===1)return Mr.AccessListEIP2930Transaction.fromTxData(r);if(n===2)return Mr.FeeMarketEIP1559Transaction.fromTxData(r);throw new Error(`Tx instantiation with type ${n} not supported`)}}static fromSerializedData(r,n){if(r[0]<=127){let s;switch(r[0]){case 1:s=2930;break;case 2:s=1559;break;default:throw new Error(`TypedTransaction with ID ${r[0]} unknown`)}return s===1559?Mr.FeeMarketEIP1559Transaction.fromSerializedTx(r):Mr.AccessListEIP2930Transaction.fromSerializedTx(r)}else return Mr.Transaction.fromSerializedTx(r,n)}};An.default=Pn});var Qi=re(On=>{"use strict";A();B();Object.defineProperty(On,"__esModule",{value:!0});var de=nr(),ar=me(),go=Nt(),Mn=Sn(),In=2,Nn=y.Buffer.from(In.toString(16).padStart(2,"0"),"hex"),br=class extends go.BaseTransaction{static fromTxData(r){return new br(r)}static fromSerializedTx(r){if(!r.slice(0,1).equals(Nn))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${In}, received: ${r.slice(0,1).toString("hex")}`);let n=de.rlp.decode(r.slice(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return br.fromValuesArray(n)}static fromValuesArray(r){if(r.length!==9&&r.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");let[n,s,c,l,b,m,j,Z,te,Se,qe,Xe]=r;return(0,de.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:c,maxFeePerGas:l,gasLimit:b,value:j,v:Se,r:qe,s:Xe}),new br({chainId:new ar.BN(n),nonce:s,maxPriorityFeePerGas:c,maxFeePerGas:l,gasLimit:b,to:m,value:j,data:Z,accessList:te??[],v:Se!==void 0?new ar.BN(Se):void 0,r:qe,s:Xe})}constructor(r){super({...r,type:In});let{chainId:n,accessList:s,maxFeePerGas:c,maxPriorityFeePerGas:l}=r;this.chainId=(0,de.toType)(n,de.TypeOutput.BN),this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);let b=Mn.AccessLists.getAccessListData(s??[]);if(this.accessList=b.accessList,this.AccessListJSON=b.AccessListJSON,Mn.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=new ar.BN((0,de.toBuffer)(c===""?"0x":c)),this.maxPriorityFeePerGas=new ar.BN((0,de.toBuffer)(l===""?"0x":l)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),this.gasLimit.mul(this.maxFeePerGas).gt(de.MAX_INTEGER)){let m=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(m)}if(this.maxFeePerGas.lt(this.maxPriorityFeePerGas)){let m=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(m)}if(this.v&&!this.v.eqn(0)&&!this.v.eqn(1)){let m=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(m)}}raw(){return[(0,de.bnToUnpaddedBuffer)(this.chainId),(0,de.bnToUnpaddedBuffer)(this.nonce),(0,de.bnToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,de.bnToUnpaddedBuffer)(this.maxFeePerGas),(0,de.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:y.Buffer.from([]),(0,de.bnToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==void 0?(0,de.bnToUnpaddedBuffer)(this.v):y.Buffer.from([]),this.r!==void 0?(0,de.bnToUnpaddedBuffer)(this.r):y.Buffer.from([]),this.s!==void 0?(0,de.bnToUnpaddedBuffer)(this.s):y.Buffer.from([])]}serialize(){let r=this.raw();return y.Buffer.concat([Nn,de.rlp.encode(r)])}getMessageToSign(r=!0){let n=this.raw().slice(0,9),s=y.Buffer.concat([Nn,de.rlp.encode(n)]);return r?(0,de.keccak256)(s):s}hash(){if(!this.isSigned()){let r=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(r)}return(0,de.keccak256)(this.serialize())}_processSignature(r,n,s){return br.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ar.BN(r-27),r:new ar.BN(n),s:new ar.BN(s)})}_processSignatureWithRawV(r,n,s){return br.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ar.BN(r),r:new ar.BN(n),s:new ar.BN(s)})}toJSON(){let r=Mn.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,de.bnToHex)(this.chainId),nonce:(0,de.bnToHex)(this.nonce),maxPriorityFeePerGas:(0,de.bnToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,de.bnToHex)(this.maxFeePerGas),gasLimit:(0,de.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,de.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:r,v:this.v!==void 0?(0,de.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,de.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,de.bnToHex)(this.s):void 0}}errorStr(){let r=this._getSharedErrorPostfix();return r+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};On.default=br});var Bn=re(Ie=>{"use strict";A();B();var bo=Ie&&Ie.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),po=Ie&&Ie.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&bo(r,e,n)},Ot=Ie&&Ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.FeeMarketEIP1559Transaction=Ie.TransactionFactory=Ie.AccessListEIP2930Transaction=Ie.Transaction=void 0;var yo=Xi();Object.defineProperty(Ie,"Transaction",{enumerable:!0,get:function(){return Ot(yo).default}});var _o=Zi();Object.defineProperty(Ie,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return Ot(_o).default}});var vo=ki();Object.defineProperty(Ie,"TransactionFactory",{enumerable:!0,get:function(){return Ot(vo).default}});var So=Qi();Object.defineProperty(Ie,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return Ot(So).default}});po(_n(),Ie)});var Hn=re(Ve=>{"use strict";A();B();var es=Ve&&Ve.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),wo=Ve&&Ve.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),rs=Ve&&Ve.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&es(r,e,n)},To=Ve&&Ve.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&es(r,e,n);return wo(r,e),r};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.sigUtil=void 0;rs(nr(),Ve);rs(Bn(),Ve);Ve.sigUtil=To(mr())});var Un=re(ze=>{"use strict";A();B();var mo=ze&&ze.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),Eo=ze&&ze.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ns=ze&&ze.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&mo(r,e,n);return Eo(r,e),r};Object.defineProperty(ze,"__esModule",{value:!0});ze.hashMessage=ze.MessageTypes=void 0;var tt=ns(mr()),Kr=ns(nr()),ts=me(),Vr;(function(e){e[e.ETH_SIGN=0]="ETH_SIGN",e[e.PERSONAL_SIGN=1]="PERSONAL_SIGN",e[e.TYPE_DATA_V1=2]="TYPE_DATA_V1",e[e.TYPE_DATA_V3=3]="TYPE_DATA_V3",e[e.TYPE_DATA_V4=4]="TYPE_DATA_V4"})(Vr=ze.MessageTypes||(ze.MessageTypes={}));var Po=(e,r)=>{switch(e){case Vr.ETH_SIGN:return Kr.addHexPrefix(r);case Vr.PERSONAL_SIGN:{let n=ts.base.isHexString(r)?ts.base.fromHex(r):y.Buffer.from(r);return Kr.addHexPrefix(Kr.hashPersonalMessage(n).toString("hex"))}case Vr.TYPE_DATA_V1:return Kr.addHexPrefix(tt.typedSignatureHash(JSON.parse(r)));case Vr.TYPE_DATA_V3:return Kr.addHexPrefix(tt.TypedDataUtils.eip712Hash(JSON.parse(r),tt.SignTypedDataVersion.V3).toString("hex"));case Vr.TYPE_DATA_V4:return Kr.addHexPrefix(tt.TypedDataUtils.eip712Hash(JSON.parse(r),tt.SignTypedDataVersion.V4).toString("hex"));default:throw new Error(`Invalid messageType: ${e}`)}};ze.hashMessage=Po});var os=re(xe=>{"use strict";A();B();Object.defineProperty(xe,"__esModule",{value:!0});xe.validSignedTransaction=xe.getSignHash=xe.getSignedTransaction=xe.getMPCSignedMessage=xe.getMPCTransaction=xe.verifyMessage=xe.signMPCMessage=xe.signMessage=xe.signTransaction=xe.validAddress=xe.validPrivateKey=xe.getNewAddress=void 0;var Q=me(),We=Hn(),pr=Un(),is=mr(),$r=Ms();function Ao(e){if(!ss(e))throw new Error("invalid key");let r=Q.base.fromHex(e),n=(0,We.privateToPublicRaw)(r),s=(0,We.publicToAddress)(n.slice(1));return{address:Q.base.toHex(s,!0),publicKey:Q.base.toHex(n,!0)}}xe.getNewAddress=Ao;function ss(e){if(!Q.base.validateHexString(e))return!1;let r=Q.base.fromHex(e.toLowerCase());return!(r.length!=32||r.every(n=>n===0))}xe.validPrivateKey=ss;function Bo(e){let r="",n=(0,We.isValidAddress)(e);return r=(0,We.toChecksumAddress)(e),{isValid:n,address:r}}xe.validAddress=Bo;function Mo(e,r){let n=We.TransactionFactory.fromTxData(r);if(!e)return{raw:Q.base.toHex(y.Buffer.from(JSON.stringify(r))),hash:Q.base.toHex(n.getMessageToSign(!0)),serializeRaw:Q.base.toHex(n.serialize())};let s=Q.base.fromHex(e),c=n.sign(s);return Q.base.toHex(c.serialize(),!0)}xe.signTransaction=Mo;function No(e,r,n){if(!n)return fs(e,r);if(e==pr.MessageTypes.TYPE_DATA_V1)return(0,$r.signTypedMessage)(n,{data:JSON.parse(r)},"V1");if(e==pr.MessageTypes.TYPE_DATA_V3)return(0,$r.signTypedMessage)(n,{data:JSON.parse(r)},"V3");if(e==pr.MessageTypes.TYPE_DATA_V4)return(0,$r.signTypedMessage)(n,{data:JSON.parse(r)},"V4");let s=(0,pr.hashMessage)(e,r),{v:c,r:l,s:b}=(0,We.ecdsaSign)(Q.base.fromHex(s),n);return(0,We.makeSignature)(c,l,b)}xe.signMessage=No;function fs(e,r){return e==pr.MessageTypes.TYPE_DATA_V1?(0,$r.typedSignatureHash)(JSON.parse(r)):e==pr.MessageTypes.TYPE_DATA_V3?Q.base.toHex($r.TypedDataUtils.sign(JSON.parse(r),!1)):e==pr.MessageTypes.TYPE_DATA_V4?Q.base.toHex($r.TypedDataUtils.sign(JSON.parse(r))):(0,pr.hashMessage)(e,r)}xe.signMPCMessage=fs;function Io(e,r,n){let s=(0,pr.hashMessage)(e,r),[c,l,b]=[n.slice(0,32),n.slice(32,64),n[64]];return(0,We.recoverFromSignature)(Q.base.fromHex(s),b,c,l)}xe.verifyMessage=Io;function Oo(e,r,n){let s=We.TransactionFactory.fromTxData(JSON.parse(Q.base.fromHex(e).toString())),c=s.getMessageToSign(!0),l=Q.base.fromHex(r),b=l.slice(0,32),m=l.slice(32,64),j=Q.signUtil.secp256k1.getV(c,Q.base.toHex(b),Q.base.toHex(m),Q.base.fromHex(n));return s=s.processSignature(j+27,b,m),Q.base.toHex(s.serialize(),!0)}xe.getMPCTransaction=Oo;function Ho(e,r,n){let s=Q.base.fromHex(r),c=s.slice(0,32),l=s.slice(32,64),b=Q.signUtil.secp256k1.getV(Q.base.fromHex(e),Q.base.toHex(c),Q.base.toHex(l),Q.base.fromHex(n))+27;return(0,We.makeSignature)(b,c,l)}xe.getMPCSignedMessage=Ho;function Uo(e,r,n,s){let c=We.TransactionFactory.fromSerializedData(Q.base.fromHex(e));return c=c.processSignatureWithRawV(parseInt(s,16),Q.base.fromHex(r),Q.base.fromHex(n)),Q.base.toHex(c.serialize(),!0)}xe.getSignedTransaction=Uo;function Lo(e){let r=We.TransactionFactory.fromSerializedData(Q.base.fromHex(e));return Q.base.toHex(r.getMessageToSign(!0))}xe.getSignHash=Lo;function jo(e,r,n){let s=We.TransactionFactory.fromSerializedData(Q.base.fromHex(e),r),c=s.getMessageToSign(!0),l=(0,is.padWithZeroes)(Q.base.toHex(s.r.toArrayLike(y.Buffer)),64),b=(0,is.padWithZeroes)(Q.base.toHex(s.s.toArrayLike(y.Buffer)),64),m=Q.base.fromHex(l.concat(b));return n&&!Q.signUtil.secp256k1.verifyWithNoRecovery(c,m,Q.base.fromHex(n))?new Error("signature error"):s}xe.validSignedTransaction=jo});var Ln=re(nt=>{"use strict";A();B();Object.defineProperty(nt,"__esModule",{value:!0});nt.SignType=void 0;var Ro;(function(e){e[e.Secp256k1=1]="Secp256k1",e[e.ECDSA_P256=2]="ECDSA_P256",e[e.ED25519=3]="ED25519",e[e.StarknetSignType=4]="StarknetSignType",e[e.TezosSignType=5]="TezosSignType"})(Ro=nt.SignType||(nt.SignType={}))});var as=re(er=>{"use strict";A();B();Object.defineProperty(er,"__esModule",{value:!0});er.CoinCurveMap=er.MultiAddressCoins=er.segwitType=er.Currency=void 0;var ee;(function(e){e[e.NULL=-1]="NULL",e[e.BTC=0]="BTC",e[e.TBTC=1]="TBTC",e[e.ETH=60]="ETH",e[e.LTC=2]="LTC",e[e.DOGE=3]="DOGE",e[e.BCH=145]="BCH",e[e.BSV=236]="BSV",e[e.TRX=195]="TRX",e[e.SOL=501]="SOL",e[e.APTOS=637]="APTOS",e[e.OMNI_USDT=20001]="OMNI_USDT",e[e.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",e[e.SUI=784]="SUI",e[e.ATOM=118]="ATOM",e[e.OSMO=1e3]="OSMO",e[e.EVMOS=1001]="EVMOS",e[e.AXL=1002]="AXL",e[e.CRO=1003]="CRO",e[e.Iris=1004]="Iris",e[e.Juno=1005]="Juno",e[e.Kava=1006]="Kava",e[e.Kujira=1007]="Kujira",e[e.SCRT=1008]="SCRT",e[e.Stargaze=1009]="Stargaze",e[e.Terra=1010]="Terra",e[e.ZKSPACE=1011]="ZKSPACE",e[e.ZKSYNC=804]="ZKSYNC",e[e.Stx=5757]="Stx",e[e.SEI=2837]="SEI",e[e.WAX=14001]="WAX",e[e.Starknet=9004]="Starknet",e[e.ADA=1815]="ADA",e[e.INJ=2892]="INJ",e[e.Celestia=2854]="Celestia",e[e.DYDX=2897]="DYDX",e[e.Kaspa=111111]="Kaspa",e[e.TON=607]="TON",e[e.NostrAssets=1237]="NostrAssets",e[e.Near=397]="Near"})(ee=er.Currency||(er.Currency={}));var Do;(function(e){e[e.SEGWIT_NESTED=1]="SEGWIT_NESTED",e[e.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",e[e.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",e[e.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})(Do=er.segwitType||(er.segwitType={}));er.MultiAddressCoins=[ee.BTC,ee.TBTC,ee.LTC,ee.DOGE,ee.BSV,ee.OMNI_USDT,ee.OMNI_USDT_TEST];var ge="secp256k1",Ht="ed25519";er.CoinCurveMap=new Map([[ee.BTC,ge],[ee.TBTC,ge],[ee.ETH,ge],[ee.LTC,ge],[ee.DOGE,ge],[ee.BCH,ge],[ee.BSV,ge],[ee.TRX,ge],[ee.OMNI_USDT,ge],[ee.OMNI_USDT_TEST,ge],[ee.ATOM,ge],[ee.OSMO,ge],[ee.EVMOS,ge],[ee.AXL,ge],[ee.CRO,ge],[ee.Iris,ge],[ee.Juno,ge],[ee.Kava,ge],[ee.Kujira,ge],[ee.SCRT,ge],[ee.Stargaze,ge],[ee.Terra,ge],[ee.SEI,ge],[ee.Celestia,ge],[ee.DYDX,ge],[ee.SOL,Ht],[ee.APTOS,Ht],[ee.SUI,Ht],[ee.TON,Ht]])});var jn=re(N=>{"use strict";A();B();Object.defineProperty(N,"__esModule",{value:!0});N.SignCommonMsgError=N.EstimateFeeError=N.validSignedTransactionError=N.GetPayLoadError=N.HardwareDerivePubKeyError=N.CalcTxHashError=N.SignMsgStep3Error=N.SignMsgSetupError=N.Ed25519Step3Error=N.Ed25519Step2Error=N.Ed25519Step1Error=N.Ed25519SetupError=N.EcdsaStep3Error=N.EcdsaStep2Error=N.EcdsaStep1Error=N.EcdsaSetupError=N.MPCShakeHandsError=N.MPCStepError=N.MPCAesKeyMissError=N.GetHardWareMessageHashError=N.GetHardwareSignedTransactionError=N.GetHardwareRawTransactionError=N.GetMpcTransactionError=N.GetMpcRawTransactionError=N.DerivePathError=N.GenMnemonicError=N.GenPrivateKeyError=N.UnsupportedCoinError=N.SignMsgError=N.SignTxError=N.ValidAddressError=N.NewAddressError=N.NotImplementedError=void 0;N.NotImplementedError="no implementation method";N.NewAddressError="generate address error";N.ValidAddressError="valid address error";N.SignTxError="sign tx error";N.SignMsgError="sign message error";N.UnsupportedCoinError="unsupported currency";N.GenPrivateKeyError="generate private key error";N.GenMnemonicError="generate mnemonic error";N.DerivePathError="derive hdPath error";N.GetMpcRawTransactionError="get mpc raw transaction error";N.GetMpcTransactionError="get mpc transaction error";N.GetHardwareRawTransactionError="get hardware raw transaction error";N.GetHardwareSignedTransactionError="get hardware signed transaction error";N.GetHardWareMessageHashError="get hardware message hash error";N.MPCAesKeyMissError="mpc get aes key error";N.MPCStepError="mpc step error";N.MPCShakeHandsError="mpc shake hands error";N.EcdsaSetupError="ecdsa setup error";N.EcdsaStep1Error="ecdsa step1 error";N.EcdsaStep2Error="ecdsa step2 error";N.EcdsaStep3Error="ecdsa step3 error";N.Ed25519SetupError="ed25519 setup error";N.Ed25519Step1Error="ed25519 step1 error";N.Ed25519Step2Error="ed25519 step2 error";N.Ed25519Step3Error="ed25519 step3 error";N.SignMsgSetupError="sign message setup error";N.SignMsgStep3Error="sign message step3 error";N.CalcTxHashError="calculate tx hash error";N.HardwareDerivePubKeyError="derive sub pub key error";N.GetPayLoadError="get payload error";N.validSignedTransactionError="valid signed transaction error";N.EstimateFeeError="estimate fee error";N.SignCommonMsgError="sign common msg error"});var cs=re($e=>{"use strict";A();B();Object.defineProperty($e,"__esModule",{value:!0});$e.jsonStringifyUniform=$e.cloneObject=$e.assertBufferLength=$e.convert2BigNumber=$e.convert2Number=$e.buildCommonSignMsg=void 0;var Ut=me();function qo(e,r){return`OKX Wallet Sign In

publicKey: ${e}
walletId: ${r}
host: api.wallet.okx
OKX Wallet Sign In`}$e.buildCommonSignMsg=qo;function Go(e){if(e!=null)return typeof e=="string"?parseInt(e):e}$e.convert2Number=Go;function Ko(e){if(e!=null)return Ut.BigNumber.isBigNumber(e)?e:new Ut.BigNumber(e)}$e.convert2BigNumber=Ko;function Vo(e,r){if(e.length!=r)throw Error("buffer length is illegal")}$e.assertBufferLength=Vo;function $o(e){return JSON.parse(JSON.stringify(e))}$e.cloneObject=$o;function Fo(e){return JSON.stringify(e,(r,n)=>n&&(n.type==="Buffer"||n instanceof Uint8Array?Ut.base.toHex(n):typeof n=="bigint"?n.toString():n))}$e.jsonStringifyUniform=Fo});var Rn=re(Nr=>{"use strict";A();B();var Yo=Nr&&Nr.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),Co=Nr&&Nr.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&Yo(r,e,n)};Object.defineProperty(Nr,"__esModule",{value:!0});Co(cs(),Nr)});var xs=re(pe=>{"use strict";A();B();Object.defineProperty(pe,"__esModule",{value:!0});pe.SimpleWallet=pe.BaseWallet=pe.ecdsaSign=pe.fromSigned=pe.padWithZeroes=pe.toUnsigned=pe.intToHex=pe.makeSignature=pe.secp256k1SignTest=void 0;var Pe=jn(),Fr=Ln(),Ae=me(),zo=Rn();function us(e){let r=Ae.base.sha256("secp256k1-test"),n=Ae.signUtil.secp256k1.publicKeyCreate(e,!1),{signature:s,recovery:c}=Ae.signUtil.secp256k1.sign(y.Buffer.from(r),e);return Ae.signUtil.secp256k1.verify(r,s,c,n)}pe.secp256k1SignTest=us;function ds(e,r,n){let s=(0,pe.fromSigned)(r),c=(0,pe.fromSigned)(n),l=e,b=Dn((0,pe.toUnsigned)(s).toString("hex"),64),m=Dn((0,pe.toUnsigned)(c).toString("hex"),64);return Ae.base.stripHexPrefix(hs(l)).concat(b,m)}pe.makeSignature=ds;function hs(e){return`0x${e.toString(16)}`}pe.intToHex=hs;var Wo=function(e){return y.Buffer.from(e.toTwos(256).toArray())};pe.toUnsigned=Wo;function Dn(e,r){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(r<0)throw new Error(`Expected a non-negative integer target length. Received: ${r}`);return String.prototype.padStart.call(e,r,"0")}pe.padWithZeroes=Dn;var Xo=function(e){return new Ae.BN(e).fromTwos(256)};pe.fromSigned=Xo;function ls(e,r,n){let{signature:s,recovery:c}=Ae.signUtil.secp256k1.sign(e,r),l=y.Buffer.from(s.slice(0,32)),b=y.Buffer.from(s.slice(32,64));if(n&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:n?c+(n*2+35):c+27,r:l,s:b}}pe.ecdsaSign=ls;var Lt=class{getRandomPrivateKey(){try{for(;;){let r=Ae.base.randomBytes(32);if(us(r))return Promise.resolve(Ae.base.toHex(r,!0))}}catch{}return Promise.reject(Pe.GenPrivateKeyError)}getDerivedPrivateKey(r){return Ae.bip39.mnemonicToSeed(r.mnemonic).then(n=>{let s=Ae.bip32.fromSeed(n).derivePath(r.hdPath);if(s.privateKey){let c=Ae.base.toHex(s.privateKey);return Promise.resolve("0x"+c)}else return Promise.reject(Pe.GenPrivateKeyError)}).catch(n=>Promise.reject(Pe.GenPrivateKeyError))}getDerivedPath(r){return Promise.reject(Pe.NotImplementedError)}validPrivateKey(r){return Promise.reject(Pe.NotImplementedError)}signMessage(r){return Promise.reject(Pe.NotImplementedError)}async signCommonMsg(r){r.signType||(r.signType=Fr.SignType.Secp256k1);let n;if(r.message.text)n=r.message.text;else{let m;if(r.publicKey?m=r.publicKey:m=(await this.getNewAddress({privateKey:r.privateKey,addressType:r.addressType,hrp:r.hrp,version:r.version})).publicKey,m.startsWith("0x")&&(m=m.substring(2)),!r.message.walletId)return Promise.reject("invalid walletId");n=(0,zo.buildCommonSignMsg)(m,r.message.walletId)}let s=Ae.base.magicHash(n),c=r.privateKeyHex?r.privateKeyHex:r.privateKey,l=Ae.base.fromHex(c);var b;switch(r.signType){case Fr.SignType.Secp256k1:let{v:m,r:j,s:Z}=ls(y.Buffer.from(s),l);return Promise.resolve(ds(m,j,Z));case Fr.SignType.ECDSA_P256:return b=Ae.signUtil.p256.sign(y.Buffer.from(s),l).signature,Promise.resolve(Ae.base.toHex(b));case Fr.SignType.ED25519:return b=Ae.signUtil.ed25519.sign(s,l),Promise.resolve(Ae.base.toHex(b));case Fr.SignType.StarknetSignType:return b=Ae.signUtil.schnorr.stark.sign(s,l).toCompactRawBytes(),Promise.resolve(Ae.base.toHex(b));case Fr.SignType.TezosSignType:return Promise.reject("not support")}}verifyMessage(r){return Promise.reject(Pe.NotImplementedError)}ecRecover(r,n){return Promise.reject(Pe.NotImplementedError)}getAddressByPublicKey(r){return Promise.reject(Pe.NotImplementedError)}getMPCRawTransaction(r){return Promise.reject(Pe.NotImplementedError)}getMPCTransaction(r){return Promise.reject(Pe.NotImplementedError)}getMPCRawMessage(r){return Promise.reject(Pe.NotImplementedError)}getMPCSignedMessage(r){return Promise.reject(Pe.NotImplementedError)}getHardWareRawTransaction(r){return Promise.reject(Pe.NotImplementedError)}getHardWareSignedTransaction(r){return Promise.reject(Pe.NotImplementedError)}getHardWareMessageHash(r){return Promise.reject(Pe.NotImplementedError)}calcTxHash(r){return Promise.reject(Pe.NotImplementedError)}getRawTransaction(r){return Promise.reject(Pe.NotImplementedError)}validSignedTransaction(r){return Promise.reject(Pe.NotImplementedError)}estimateFee(r){return Promise.reject(Pe.NotImplementedError)}};pe.BaseWallet=Lt;var qn=class extends Lt{mockData(r,n){this.mockAddress=r,this.mockPublicKey=n}getNewAddress(r){return Promise.resolve({address:this.mockAddress,publicKey:this.mockPublicKey})}validAddress(r){throw new Error("Method not implemented.")}signTransaction(r){throw new Error("Method not implemented.")}};pe.SimpleWallet=qn});var gs=re(sr=>{"use strict";A();B();var Jo=sr&&sr.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),it=sr&&sr.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&Jo(r,e,n)};Object.defineProperty(sr,"__esModule",{value:!0});it(Ln(),sr);it(as(),sr);it(jn(),sr);it(xs(),sr);it(Rn(),sr)});var ps=re(cr=>{"use strict";A();B();var Zo=cr&&cr.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),ko=cr&&cr.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Qo=cr&&cr.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Zo(r,e,n);return ko(r,e),r};Object.defineProperty(cr,"__esModule",{value:!0});cr.EthWallet=void 0;var De=gs(),Oe=me(),Ne=Qo(ys()),bs="0xa9059cbb",Gn=class extends De.BaseWallet{async getDerivedPath(r){return`m/44'/60'/0'/0/${r.index}`}async getNewAddress(r){let n=r.privateKey;if(!Ne.validPrivateKey(n))throw new Error("invalid key");try{let c=Oe.base.fromHex(n.toLowerCase());return(0,De.assertBufferLength)(c,32),Promise.resolve(Ne.getNewAddress(n.toLowerCase()))}catch{}return Promise.reject(De.NewAddressError)}async validPrivateKey(r){let s={isValid:Ne.validPrivateKey(r.privateKey),privateKey:r.privateKey};return Promise.resolve(s)}async validAddress(r){return Promise.resolve(Ne.validAddress(r.address))}convert2HexString(r){let n;return Oe.BigNumber.isBigNumber(r)?n=r:n=new Oe.BigNumber(r),Oe.base.toBigIntHex(n)}convert2TxParam(r){return{to:r.to,value:this.convert2HexString(r.value||0),nonce:this.convert2HexString(r.nonce),contractAddress:r.contractAddress,gasPrice:this.convert2HexString(r.gasPrice||0),gasLimit:this.convert2HexString(r.gasLimit||0),data:r.data,chainId:this.convert2HexString(r.chainId||1),type:r.type||0,maxPriorityFeePerGas:this.convert2HexString(r.maxPriorityFeePerGas||0),maxFeePerGas:this.convert2HexString(r.maxFeePerGas||0),useValue:r.useValue||!1}}async signTransaction(r){try{let n=r.privateKey;n&&(0,De.assertBufferLength)(Oe.base.fromHex(n),32);let s=this.convert2TxParam(r.data),c=s.chainId,l=s.nonce,b=s.type;if(b===0||b===1){let m=s.gasPrice,j=s.contractAddress,Z=s.to,te=s.value,Se;j?(Se=bs+Array.prototype.map.call(Oe.abi.RawEncode(["address","uint256"],[Z,te]),Xe=>`00${Xe.toString(16)}`.slice(-2)).join(""),s.useValue||(te="0x0"),Z=j):Se=s.data;let qe={nonce:l,gasPrice:m,gasLimit:s.gasLimit,to:Z,value:te,data:Se,chainId:c,type:b};return Promise.resolve(Ne.signTransaction(n,qe))}else if(b===2){let m=s.contractAddress,j=s.to,Z=s.value,te;m?(te=bs+Array.prototype.map.call(Oe.abi.RawEncode(["address","uint256"],[j,Z]),qe=>`00${qe.toString(16)}`.slice(-2)).join(""),Z="0x0",j=m):te=s.data;let Se={nonce:l,gasLimit:s.gasLimit,to:j,value:Z,data:te,chainId:c,type:b,maxPriorityFeePerGas:s.maxPriorityFeePerGas,maxFeePerGas:s.maxFeePerGas};return Promise.resolve(Ne.signTransaction(n,Se))}return Promise.reject(De.SignTxError)}catch{return Promise.reject(De.SignTxError)}}async signMessage(r){let n;r.privateKey&&((0,De.assertBufferLength)(Oe.base.fromHex(r.privateKey),32),n=Oe.base.fromHex(r.privateKey));let s=r.data,c=s.type,l=Ne.signMessage(c,s.message,n);return Promise.resolve(l)}async verifyMessage(r){let n=r.data,s=await this.ecRecover(n,r.signature),c=r.address||"";return Promise.resolve(c.toLowerCase()===s.toLowerCase())}async ecRecover(r,n){let s=r.type,c=Ne.verifyMessage(s,r.message,Oe.base.fromHex(n)),l=Oe.base.toHex(Ne.publicToAddress(c),!0);return Promise.resolve(l)}async encrypt(r,n,s){return Promise.resolve(Ne.sigUtil.encrypt({publicKey:r,data:n,version:s}))}async decrypt(r,n){return Promise.resolve(Ne.sigUtil.decrypt({encryptedData:r,privateKey:Oe.base.stripHexPrefix(n)}))}async getEncryptionPublicKey(r){return Promise.resolve(Ne.sigUtil.getEncryptionPublicKey(Oe.base.stripHexPrefix(r)))}getAddressByPublicKey(r){return Promise.resolve(Oe.base.toHex(Ne.publicToAddress(Oe.base.fromHex(r.publicKey),!0),!0))}async getMPCRawTransaction(r){try{let n=await this.signTransaction(r);return Promise.resolve({raw:n.raw,hash:n.hash})}catch{return Promise.reject(De.GetMpcRawTransactionError)}}async getMPCTransaction(r){try{let n=Ne.getMPCTransaction(r.raw,r.sigs,r.publicKey);return Promise.resolve(n)}catch{return Promise.reject(De.GetMpcTransactionError)}}async getMPCRawMessage(r){try{let n=await this.signMessage(r);return Promise.resolve({hash:n})}catch{return Promise.reject(De.GetMpcRawTransactionError)}}async getMPCSignedMessage(r){try{return Promise.resolve(Ne.getMPCSignedMessage(r.hash,r.sigs,r.publicKey))}catch{return Promise.reject(De.GetMpcTransactionError)}}async getHardWareRawTransaction(r){try{let n=await this.signTransaction(r);return Promise.resolve(n.serializeRaw)}catch{return Promise.reject(De.GetHardwareRawTransactionError)}}async getHardWareSignedTransaction(r){try{return Ne.getSignedTransaction(r.raw,r.r,r.s,r.v)}catch{return Promise.reject(De.GetHardwareSignedTransactionError)}}async calcTxHash(r){let n=Oe.base.fromHex(r.data),s=Ne.TransactionFactory.fromSerializedData(n);return Promise.resolve(Oe.base.toHex(s.hash(),!0))}async validSignedTransaction(r){try{let n=r.data?r.data.chainId:void 0,s=r.data?r.data.publicKey:void 0,c=Ne.validSignedTransaction(r.tx,n,s);return Promise.resolve((0,De.jsonStringifyUniform)(c))}catch{return Promise.reject(De.validSignedTransactionError)}}};cr.EthWallet=Gn});var ys=re(ur=>{A();B();var ea=ur&&ur.__createBinding||(Object.create?function(e,r,n,s){s===void 0&&(s=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(e,s,c)}:function(e,r,n,s){s===void 0&&(s=n),e[s]=r[n]}),jt=ur&&ur.__exportStar||function(e,r){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&ea(r,e,n)};Object.defineProperty(ur,"__esModule",{value:!0});jt(os(),ur);jt(Un(),ur);jt(Hn(),ur);jt(ps(),ur)});export{ys as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-66BSWFTP.js.map
