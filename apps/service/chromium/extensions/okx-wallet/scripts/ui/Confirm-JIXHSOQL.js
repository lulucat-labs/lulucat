import"./chunk-O2YW3UOK.js";import{a as pt}from"./chunk-KLM4DQWY.js";import{a as mt}from"./chunk-2USO6FEB.js";import"./chunk-EDVE6I6Q.js";import{a as lt}from"./chunk-DY3PK2UD.js";import{a as ct}from"./chunk-A5JN3MUE.js";import{a as Z,b as j,d as J}from"./chunk-QBO66WYA.js";import{a as q}from"./chunk-G6PPKZHQ.js";import{a as ut}from"./chunk-5NDLBNRM.js";import"./chunk-2R2FRPW3.js";import"./chunk-PREZW222.js";import"./chunk-OIXVONQI.js";import{a as at}from"./chunk-YYUUDQVK.js";import{f as ot,n as st}from"./chunk-LTMEFQRN.js";import"./chunk-TU5XNYNZ.js";import{Sa as nt}from"./chunk-WSXZYUQ4.js";import"./chunk-SFTZ55EP.js";import{o as Ct}from"./chunk-AUURQ3HI.js";import{cc as Pt,wb as it}from"./chunk-B32MCU7F.js";import{a as St}from"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import"./chunk-TKFT6XV3.js";import"./chunk-2BGRD7AD.js";import"./chunk-ELX2GHLL.js";import{c as l}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import"./chunk-E44TZGUB.js";import{ja as Y,ma as tt,oa as Et}from"./chunk-KBQXBPIW.js";import{O as V,w}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as Lt,T as et,Z as rt,ca as k}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as P}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as d,h as _,o as r,q as o}from"./chunk-FJHLV356.js";r();o();var E=d(P());r();o();var O=d(P());var ft=d(Lt());r();o();r();o();var S={root:"_root_na3xe_1",icon:"_icon_na3xe_12",loading:"_loading_na3xe_16",finished:"_finished_na3xe_22",failed:"_failed_na3xe_25"};var _t=(e,t)=>()=>O.default.createElement(et,{className:(0,ft.default)(e,S.icon,t)}),At=_t("okds-success-circle",S.finished),Dt=_t("okx-wallet-plugin-warning-circle",S.failed),Ft=()=>O.default.createElement(rt,{loaderClassName:S.loading}),Ot=()=>null,Gt={[0]:Ot,[1]:Ft,[2]:At,[3]:Dt},dt=({status:e})=>{let t=Gt[e];return O.default.createElement(l.Box,{className:S.root},O.default.createElement(t,null))};r();o();var xt=d(P());V();r();o();var yt={root:"_root_mrqdw_1"};var It=({status:e,success:t=0,failed:s=0,duplicated:n=0})=>{let i={[0]:null,[1]:{key:"wallet_extension_private_key_title_importing_private_key",params:{}},[2]:{key:s>0||n>0?"wallet_extension_private_key_title_num_imports_successful":"wallet_extension_private_key_title_import_successful",params:{num:t}},[3]:{key:"wallet_extension_private_key_title_import_failed",params:{}}}[e],c=i?w(i.key,i.params):"";return c?xt.default.createElement(l.Box,{className:yt.root},c):null};r();o();var H=d(P());V();r();o();var G={root:"_root_a49x9_1",item:"_item_a49x9_8",retry:"_retry_a49x9_15",divider:"_divider_a49x9_26"};function Ht({status:e,total:t=0,success:s=0,failed:n=0,duplicated:u=0}){let i={importing:{key:"wallet_extension_private_key_text_importing_num_entries",params:{num:s},retry:!1},success:{key:"wallet_extension_private_key_text_num_entries_imported",params:{num:s},retry:!1},duplicated:{key:"wallet_extension_private_key_duplicate_imports",params:{num:u},retry:!1},failed:{key:"wallet_extension_private_key_text_num_failed_entries",params:{num:n},retry:n>0}};return{items:{[0]:[],[1]:[i.importing],[2]:[s===t?i.success:void 0,u>0?i.duplicated:void 0,n>0?i.failed:void 0].filter(Boolean),[3]:[u>0?i.duplicated:void 0,n>0?i.failed:void 0].filter(Boolean)}[e]}}var ht=({status:e,total:t,success:s,failed:n,duplicated:u,onRetry:i})=>{let{items:c=[]}=Ht({status:e,total:t,success:s,failed:n,duplicated:u});return H.default.createElement(l.Box,{className:G.root},c.map((b,x)=>{let{key:I,params:h,retry:N}=b;return H.default.createElement(l.Box,{key:x,className:G.item},w(I,h),x===0&&c.length>1&&H.default.createElement(l.Box,{className:G.divider}),N&&H.default.createElement(l.Box,{onClick:i,className:G.retry},w("wallet_extension_private_key_btn_try_again")))}))};r();o();var C=d(P());V();r();o();var z={root:"_root_1ir3w_1",actions:"_actions_1ir3w_10",tip:"_tip_1ir3w_15"};var gt=({status:e,onCancel:t,onComplete:s})=>{let n=e===1,u=e===0;return C.default.createElement(l.Box,{className:z.root},C.default.createElement(l.Box,{className:z.actions},n?C.default.createElement(k,{category:k.CATEGORY.outline,type:k.TYPE.primary,onClick:t,size:k.SIZE.xl,block:!0},w("wallet_extension_private_key_btn_stop_import")):!u&&C.default.createElement(k,{category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.xl,onClick:s,block:!0},w("wallet_extension_private_key_btn_ok"))),n&&C.default.createElement(l.Box,{className:z.tip},w("wallet_extension_private_key_text_dont_close_page")))};r();o();var a=d(P()),U=d(Pt()),wt=d(St()),kt=d(Ct());Et();r();o();var y={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},M=class{constructor(t){_(this,"status",y.uninitialized);_(this,"nextInfo",null);_(this,"cb",null);_(this,"args",[]);_(this,"next",(...t)=>{[y.waiting,y.canceled,y.paused].includes(this.status)||!this.cb||(t.length>0&&(this.args=t),this.nextInfo=this.generator(this.execute,...this.args),this.status=y.waiting,this.nextInfo.execute())});_(this,"execute",()=>{this.status=y.working,this.cb?.(this.next)});_(this,"cancel",()=>{this.status=y.canceled,this.nextInfo.cancel?.(),this.cb=void 0});_(this,"pause",()=>{this.status=y.paused,this.nextInfo.pause?.()});_(this,"start",(t,...s)=>{this.cb=t,s.length>0&&(this.args=s),this.next()});_(this,"continue",()=>{this.status=y.initialized,this.next()});this.generator=t,this.status=y.initialized,this.nextInfo=null,this.cb=null}};function Mt(){let e=t=>({execute:t,cancel:()=>{},start:()=>{}});return new M(e)}var K=e=>t=>t+e;function Rt(){let e=(0,U.useDispatch)(),{value:t}=Z(),{value:s}=j(),{value:n}=J(),u=t.filter(m=>m.value).map(m=>m.value),[i,c]=(0,a.useState)(0),b=(0,a.useRef)(u),x=(0,a.useRef)([]),I=(0,a.useRef)([]),h=(0,a.useRef)(!1),N=(0,a.useRef)(),[f]=(0,a.useState)(u.length),[g,A]=(0,a.useState)(0),[T,D]=(0,a.useState)(0),[L,F]=(0,a.useState)(0),v=(0,a.useRef)(0),B=f-g,Q=m=>m>0,vt=(0,U.useSelector)(it),X=(0,a.useRef)(vt);(0,a.useEffect)(()=>{f<=0||(g===f&&c(2),(T===f||L===f||T+L===f)&&c(3))},[T,g,L,f]);let $=m=>{!Q(m)||(c(1),N.current=Mt(),N.current.start(async Nt=>{if(Q(m)&&m>v.current){let R=b.current[v.current];try{h.current=!0,X.current?await e(ot({privateKey:R,baseChains:[s]},{noticeBackend:!1})):(await e(st(n,{privateKey:R,baseChains:[s]},{noticeBackend:!1})),await e(at()),X.current=!0),await q(200),A(K(1)),x.current.push(R)}catch(Bt){Bt?.message===lt?F(K(1)):(D(K(1)),I.current.push(R))}finally{h.current=!1,v.current=K(1)(v.current),Nt()}}else c(2)}))};return{start:()=>{g>0||(v.current=0,$(f))},cancel:async()=>{for(c(2),N.current?.cancel();h.current;)await q(100);let m=tt(b.current,[...x.current,...I.current]);D(Y(m).length+I.current.length),b.current=Y(m),x.current=[],I.current=[]},retry:()=>{B>0&&(v.current=0,D(0),F(0),$(B))},failed:T,success:g,total:f,duplicated:L,remain:B,status:i}}var bt=()=>{let e=(0,wt.useHistory)(),t=mt(),{value:s,setValue:n}=Z(),{value:u,setValue:i}=j(),{setValue:c}=J();(!s.filter(B=>B.value).map(B=>B.value).length||!u)&&e.replace(nt);let{remainAccountAmount:x}=ut(),I=(0,a.useRef)(!1),{start:h,cancel:N,retry:f,success:g,failed:A,total:T,duplicated:D,status:L}=Rt(),F=async()=>{n([{id:Date.now(),show:!1,value:"",error:!1}]),i(""),c(""),await ct()},v=async()=>{await F(),await t()};return(0,a.useEffect)(()=>{!I.current&&x>0&&g+A<T&&(h(),I.current=!0)},[A,x,h,g,T]),(0,kt.useUnmount)(async()=>{await F()}),{start:h,cancel:N,retry:f,complete:v,success:g,failed:A,total:T,duplicated:D,status:L}};r();o();var Tt={root:"_root_80chm_1"};var Tr=()=>{let{status:e,success:t,failed:s,total:n,duplicated:u,cancel:i,retry:c,complete:b}=bt();return E.default.createElement(pt,null,E.default.createElement(l.Box,{className:Tt.root},E.default.createElement(dt,{status:e}),E.default.createElement(It,{status:e,success:t,failed:s,duplicated:u}),E.default.createElement(ht,{status:e,total:n,success:t,failed:s,duplicated:u,onRetry:c}),E.default.createElement(gt,{status:e,onCancel:i,onComplete:b})))};export{Tr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Confirm-JIXHSOQL.js.map
