import{b as j}from"./chunk-TKZ7N5JX.js";import{c as E,o as u,p as o,q as d}from"./chunk-FJHLV356.js";var $=E(B=>{"use strict";u();d();Object.defineProperty(B,"__esModule",{value:!0});B.SignType=void 0;var De;(function(e){e[e.Secp256k1=1]="Secp256k1",e[e.ECDSA_P256=2]="ECDSA_P256",e[e.ED25519=3]="ED25519",e[e.StarknetSignType=4]="StarknetSignType",e[e.TezosSignType=5]="TezosSignType"})(De=B.SignType||(B.SignType={}))});var ue=E(P=>{"use strict";u();d();Object.defineProperty(P,"__esModule",{value:!0});P.CoinCurveMap=P.MultiAddressCoins=P.segwitType=P.Currency=void 0;var c;(function(e){e[e.NULL=-1]="NULL",e[e.BTC=0]="BTC",e[e.TBTC=1]="TBTC",e[e.ETH=60]="ETH",e[e.LTC=2]="LTC",e[e.DOGE=3]="DOGE",e[e.BCH=145]="BCH",e[e.BSV=236]="BSV",e[e.TRX=195]="TRX",e[e.SOL=501]="SOL",e[e.APTOS=637]="APTOS",e[e.OMNI_USDT=20001]="OMNI_USDT",e[e.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",e[e.SUI=784]="SUI",e[e.ATOM=118]="ATOM",e[e.OSMO=1e3]="OSMO",e[e.EVMOS=1001]="EVMOS",e[e.AXL=1002]="AXL",e[e.CRO=1003]="CRO",e[e.Iris=1004]="Iris",e[e.Juno=1005]="Juno",e[e.Kava=1006]="Kava",e[e.Kujira=1007]="Kujira",e[e.SCRT=1008]="SCRT",e[e.Stargaze=1009]="Stargaze",e[e.Terra=1010]="Terra",e[e.ZKSPACE=1011]="ZKSPACE",e[e.ZKSYNC=804]="ZKSYNC",e[e.Stx=5757]="Stx",e[e.SEI=2837]="SEI",e[e.WAX=14001]="WAX",e[e.Starknet=9004]="Starknet",e[e.ADA=1815]="ADA",e[e.INJ=2892]="INJ",e[e.Celestia=2854]="Celestia",e[e.DYDX=2897]="DYDX",e[e.Kaspa=111111]="Kaspa",e[e.TON=607]="TON",e[e.NostrAssets=1237]="NostrAssets",e[e.Near=397]="Near"})(c=P.Currency||(P.Currency={}));var Ge;(function(e){e[e.SEGWIT_NESTED=1]="SEGWIT_NESTED",e[e.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",e[e.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",e[e.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})(Ge=P.segwitType||(P.segwitType={}));P.MultiAddressCoins=[c.BTC,c.TBTC,c.LTC,c.DOGE,c.BSV,c.OMNI_USDT,c.OMNI_USDT_TEST];var f="secp256k1",k="ed25519";P.CoinCurveMap=new Map([[c.BTC,f],[c.TBTC,f],[c.ETH,f],[c.LTC,f],[c.DOGE,f],[c.BCH,f],[c.BSV,f],[c.TRX,f],[c.OMNI_USDT,f],[c.OMNI_USDT_TEST,f],[c.ATOM,f],[c.OSMO,f],[c.EVMOS,f],[c.AXL,f],[c.CRO,f],[c.Iris,f],[c.Juno,f],[c.Kava,f],[c.Kujira,f],[c.SCRT,f],[c.Stargaze,f],[c.Terra,f],[c.SEI,f],[c.Celestia,f],[c.DYDX,f],[c.SOL,k],[c.APTOS,k],[c.SUI,k],[c.TON,k]])});var C=E(s=>{"use strict";u();d();Object.defineProperty(s,"__esModule",{value:!0});s.SignCommonMsgError=s.EstimateFeeError=s.validSignedTransactionError=s.GetPayLoadError=s.HardwareDerivePubKeyError=s.CalcTxHashError=s.SignMsgStep3Error=s.SignMsgSetupError=s.Ed25519Step3Error=s.Ed25519Step2Error=s.Ed25519Step1Error=s.Ed25519SetupError=s.EcdsaStep3Error=s.EcdsaStep2Error=s.EcdsaStep1Error=s.EcdsaSetupError=s.MPCShakeHandsError=s.MPCStepError=s.MPCAesKeyMissError=s.GetHardWareMessageHashError=s.GetHardwareSignedTransactionError=s.GetHardwareRawTransactionError=s.GetMpcTransactionError=s.GetMpcRawTransactionError=s.DerivePathError=s.GenMnemonicError=s.GenPrivateKeyError=s.UnsupportedCoinError=s.SignMsgError=s.SignTxError=s.ValidAddressError=s.NewAddressError=s.NotImplementedError=void 0;s.NotImplementedError="no implementation method";s.NewAddressError="generate address error";s.ValidAddressError="valid address error";s.SignTxError="sign tx error";s.SignMsgError="sign message error";s.UnsupportedCoinError="unsupported currency";s.GenPrivateKeyError="generate private key error";s.GenMnemonicError="generate mnemonic error";s.DerivePathError="derive hdPath error";s.GetMpcRawTransactionError="get mpc raw transaction error";s.GetMpcTransactionError="get mpc transaction error";s.GetHardwareRawTransactionError="get hardware raw transaction error";s.GetHardwareSignedTransactionError="get hardware signed transaction error";s.GetHardWareMessageHashError="get hardware message hash error";s.MPCAesKeyMissError="mpc get aes key error";s.MPCStepError="mpc step error";s.MPCShakeHandsError="mpc shake hands error";s.EcdsaSetupError="ecdsa setup error";s.EcdsaStep1Error="ecdsa step1 error";s.EcdsaStep2Error="ecdsa step2 error";s.EcdsaStep3Error="ecdsa step3 error";s.Ed25519SetupError="ed25519 setup error";s.Ed25519Step1Error="ed25519 step1 error";s.Ed25519Step2Error="ed25519 step2 error";s.Ed25519Step3Error="ed25519 step3 error";s.SignMsgSetupError="sign message setup error";s.SignMsgStep3Error="sign message step3 error";s.CalcTxHashError="calculate tx hash error";s.HardwareDerivePubKeyError="derive sub pub key error";s.GetPayLoadError="get payload error";s.validSignedTransactionError="valid signed transaction error";s.EstimateFeeError="estimate fee error";s.SignCommonMsgError="sign common msg error"});var de=E(w=>{"use strict";u();d();Object.defineProperty(w,"__esModule",{value:!0});w.jsonStringifyUniform=w.cloneObject=w.assertBufferLength=w.convert2BigNumber=w.convert2Number=w.buildCommonSignMsg=void 0;var q=j();function ke(e,r){return`OKX Wallet Sign In

publicKey: ${e}
walletId: ${r}
host: api.wallet.okx
OKX Wallet Sign In`}w.buildCommonSignMsg=ke;function qe(e){if(e!=null)return typeof e=="string"?parseInt(e):e}w.convert2Number=qe;function Re(e){if(e!=null)return q.BigNumber.isBigNumber(e)?e:new q.BigNumber(e)}w.convert2BigNumber=Re;function We(e,r){if(e.length!=r)throw Error("buffer length is illegal")}w.assertBufferLength=We;function ze(e){return JSON.parse(JSON.stringify(e))}w.cloneObject=ze;function Fe(e){return JSON.stringify(e,(r,t)=>t&&(t.type==="Buffer"||t instanceof Uint8Array?q.base.toHex(t):typeof t=="bigint"?t.toString():t))}w.jsonStringifyUniform=Fe});var Q=E(M=>{"use strict";u();d();var Xe=M&&M.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Ve=M&&M.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Xe(r,e,t)};Object.defineProperty(M,"__esModule",{value:!0});Ve(de(),M)});var he=E(p=>{"use strict";u();d();Object.defineProperty(p,"__esModule",{value:!0});p.SimpleWallet=p.BaseWallet=p.ecdsaSign=p.fromSigned=p.padWithZeroes=p.toUnsigned=p.intToHex=p.makeSignature=p.secp256k1SignTest=void 0;var h=C(),K=$(),v=j(),Je=Q();function le(e){let r=v.base.sha256("secp256k1-test"),t=v.signUtil.secp256k1.publicKeyCreate(e,!1),{signature:n,recovery:i}=v.signUtil.secp256k1.sign(o.Buffer.from(r),e);return v.signUtil.secp256k1.verify(r,n,i,t)}p.secp256k1SignTest=le;function ge(e,r,t){let n=(0,p.fromSigned)(r),i=(0,p.fromSigned)(t),a=e,l=ee((0,p.toUnsigned)(n).toString("hex"),64),g=ee((0,p.toUnsigned)(i).toString("hex"),64);return v.base.stripHexPrefix(fe(a)).concat(l,g)}p.makeSignature=ge;function fe(e){return`0x${e.toString(16)}`}p.intToHex=fe;var Ye=function(e){return o.Buffer.from(e.toTwos(256).toArray())};p.toUnsigned=Ye;function ee(e,r){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(r<0)throw new Error(`Expected a non-negative integer target length. Received: ${r}`);return String.prototype.padStart.call(e,r,"0")}p.padWithZeroes=ee;var Ze=function(e){return new v.BN(e).fromTwos(256)};p.fromSigned=Ze;function pe(e,r,t){let{signature:n,recovery:i}=v.signUtil.secp256k1.sign(e,r),a=o.Buffer.from(n.slice(0,32)),l=o.Buffer.from(n.slice(32,64));if(t&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:t?i+(t*2+35):i+27,r:a,s:l}}p.ecdsaSign=pe;var R=class{getRandomPrivateKey(){try{for(;;){let r=v.base.randomBytes(32);if(le(r))return Promise.resolve(v.base.toHex(r,!0))}}catch{}return Promise.reject(h.GenPrivateKeyError)}getDerivedPrivateKey(r){return v.bip39.mnemonicToSeed(r.mnemonic).then(t=>{let n=v.bip32.fromSeed(t).derivePath(r.hdPath);if(n.privateKey){let i=v.base.toHex(n.privateKey);return Promise.resolve("0x"+i)}else return Promise.reject(h.GenPrivateKeyError)}).catch(t=>Promise.reject(h.GenPrivateKeyError))}getDerivedPath(r){return Promise.reject(h.NotImplementedError)}validPrivateKey(r){return Promise.reject(h.NotImplementedError)}signMessage(r){return Promise.reject(h.NotImplementedError)}async signCommonMsg(r){r.signType||(r.signType=K.SignType.Secp256k1);let t;if(r.message.text)t=r.message.text;else{let g;if(r.publicKey?g=r.publicKey:g=(await this.getNewAddress({privateKey:r.privateKey,addressType:r.addressType,hrp:r.hrp,version:r.version})).publicKey,g.startsWith("0x")&&(g=g.substring(2)),!r.message.walletId)return Promise.reject("invalid walletId");t=(0,Je.buildCommonSignMsg)(g,r.message.walletId)}let n=v.base.magicHash(t),i=r.privateKeyHex?r.privateKeyHex:r.privateKey,a=v.base.fromHex(i);var l;switch(r.signType){case K.SignType.Secp256k1:let{v:g,r:S,s:b}=pe(o.Buffer.from(n),a);return Promise.resolve(ge(g,S,b));case K.SignType.ECDSA_P256:return l=v.signUtil.p256.sign(o.Buffer.from(n),a).signature,Promise.resolve(v.base.toHex(l));case K.SignType.ED25519:return l=v.signUtil.ed25519.sign(n,a),Promise.resolve(v.base.toHex(l));case K.SignType.StarknetSignType:return l=v.signUtil.schnorr.stark.sign(n,a).toCompactRawBytes(),Promise.resolve(v.base.toHex(l));case K.SignType.TezosSignType:return Promise.reject("not support")}}verifyMessage(r){return Promise.reject(h.NotImplementedError)}ecRecover(r,t){return Promise.reject(h.NotImplementedError)}getAddressByPublicKey(r){return Promise.reject(h.NotImplementedError)}getMPCRawTransaction(r){return Promise.reject(h.NotImplementedError)}getMPCTransaction(r){return Promise.reject(h.NotImplementedError)}getMPCRawMessage(r){return Promise.reject(h.NotImplementedError)}getMPCSignedMessage(r){return Promise.reject(h.NotImplementedError)}getHardWareRawTransaction(r){return Promise.reject(h.NotImplementedError)}getHardWareSignedTransaction(r){return Promise.reject(h.NotImplementedError)}getHardWareMessageHash(r){return Promise.reject(h.NotImplementedError)}calcTxHash(r){return Promise.reject(h.NotImplementedError)}getRawTransaction(r){return Promise.reject(h.NotImplementedError)}validSignedTransaction(r){return Promise.reject(h.NotImplementedError)}estimateFee(r){return Promise.reject(h.NotImplementedError)}};p.BaseWallet=R;var re=class extends R{mockData(r,t){this.mockAddress=r,this.mockPublicKey=t}getNewAddress(r){return Promise.resolve({address:this.mockAddress,publicKey:this.mockPublicKey})}validAddress(r){throw new Error("Method not implemented.")}signTransaction(r){throw new Error("Method not implemented.")}};p.SimpleWallet=re});var ve=E(I=>{"use strict";u();d();var $e=I&&I.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),L=I&&I.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&$e(r,e,t)};Object.defineProperty(I,"__esModule",{value:!0});L($(),I);L(ue(),I);L(C(),I);L(he(),I);L(Q(),I)});var z=E(W=>{"use strict";u();d();Object.defineProperty(W,"__esModule",{value:!0});W.validate=void 0;function Ce(e,r){if(!e)throw new Error(r)}W.validate=Ce});var Ee=E(F=>{"use strict";u();d();Object.defineProperty(F,"__esModule",{value:!0});F.convert=void 0;var me=z();function Qe(e,r,t,n){for(var i=n?Math.floor(e.length*r/t):Math.ceil(e.length*r/t),a=(1<<t)-1,l=new Uint8Array(i),g=0,S=0,b=0,Z=0;Z<e.length;++Z){var G=e[Z];for((0,me.validate)(0<=G&&G>>r===0,"Invalid value: "+G+"."),S=S<<r|G,b+=r;b>=t;)b-=t,l[g]=S>>b&a,++g}return n?(0,me.validate)(b<r&&(S<<t-b&a)===0,"Input cannot be converted to "+t+" bits without padding, but strict mode was used."):b>0&&(l[g]=S<<t-b&a,++g),l}F.convert=Qe});var we=E(A=>{"use strict";u();d();Object.defineProperty(A,"__esModule",{value:!0});A.decode=A.encode=void 0;var be=z(),er="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Se={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};function rr(e){for(var r="",t=0;t<e.length;++t){var n=e[t];(0,be.validate)(0<=n&&n<32,"Invalid value: "+n+"."),r+=er[n]}return r}A.encode=rr;function tr(e){for(var r=new Uint8Array(e.length),t=0;t<e.length;++t){var n=e[t];(0,be.validate)(n in Se,"Invalid value: "+n+"."),r[t]=Se[n]}return r}A.decode=tr});var te=E(T=>{"use strict";u();d();var nr=T&&T.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ir=T&&T.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),sr=T&&T.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&nr(r,e,t);return ir(r,e),r};Object.defineProperty(T,"__esModule",{value:!0});T.decodeAddress=T.encodePubKeyAddress=void 0;var N=z(),Te=Ee(),_e=sr(we()),or=j();function ar(e,r){let t=[0,0,0,0,0,0,0,0],n=Ie(r).concat([0]),i=0,a=Array.prototype.slice.call(or.base.fromHex(e),0),l=(0,Te.convert)(new Uint8Array([i].concat(a)),8,5,!1),g=new Uint8Array(n.length+l.length+t.length);g.set(n),g.set(l,n.length),g.set(t,n.length+l.length);let S=dr(ye(g)),b=new Uint8Array(l.length+S.length);return b.set(l),b.set(S,l.length),"kaspa:"+_e.encode(b)}T.encodePubKeyAddress=ar;function cr(e){(0,N.validate)(ur(e),"Mixed case"),e=e.toLowerCase();let r=e.split(":");(0,N.validate)(r.length===2,"Invalid format: "+e);let t=r[0];(0,N.validate)(t==="kaspa","Invalid prefix: "+e);let n=r[1],i=_e.decode(n);(0,N.validate)(lr(t,i),"Invalid checksum: "+e);let a=(0,Te.convert)(i.slice(0,-8),5,8,!0),l=a[0],g=a.slice(1);l===1?(0,N.validate)(g.length*8===264,"Invalid hash size: "+e):(0,N.validate)(g.length*8===256,"Invalid hash size: "+e);let S=gr(l);return{payload:o.Buffer.from(g),prefix:t,type:S}}T.decodeAddress=cr;function ur(e){return e===e.toLowerCase()||e===e.toUpperCase()}function Ie(e){let r=[];for(let t=0;t<e.length;t++)r.push(e.charCodeAt(t)&31);return r}function dr(e){let r=[];for(let t=0;t<8;++t)r.push(e&31),e/=32;return r.reverse()}function lr(e,r){let t=Ie(e),n=new Uint8Array(e.length+1+r.length);return n.set(t),n.set([0],t.length),n.set(r,t.length+1),ye(n)===0}function gr(e){switch(e&120){case 0:return"pubkey";case 8:return"scripthash";default:throw new Error("Invalid address type in version byte:"+e)}}var Pe=[152,121,243,174,30],fr=[4072443489,3077413346,1046459332,783016616,1329849456];function ye(e){for(var r=0,t=1,n=0,i=0;i<e.length;i++){n=r>>>3,r&=7,r<<=5,r|=t>>>27,t&=134217727,t<<=5,t^=e[i];for(var a=0;a<Pe.length;++a)n&1<<a&&(r^=Pe[a],t^=fr[a])}return t^=1,t<0&&(t^=1<<31,t+=(1<<30)*2),r*(1<<30)*4+t}});var ne=E(_=>{"use strict";u();d();Object.defineProperty(_,"__esModule",{value:!0});_.validateAddress=_.addressFromPrvKey=_.addressFromPubKey=_.checkPrvKey=_.pubKeyFromPrvKey=void 0;var D=j(),Oe=te();function He(e){if(!Me(e))throw new Error("invalid key");return D.base.toHex(D.signUtil.secp256k1.publicKeyCreate(D.base.fromHex(e.toLowerCase()),!0).slice(1))}_.pubKeyFromPrvKey=He;function Me(e){if(!D.base.validateHexString(e))return!1;let r=D.base.fromHex(e.toLowerCase());return r.length==32&&!r.every(t=>t===0)}_.checkPrvKey=Me;function Ke(e){return(0,Oe.encodePubKeyAddress)(e,"kaspa")}_.addressFromPubKey=Ke;function pr(e){return Ke(He(e))}_.addressFromPrvKey=pr;function hr(e){try{(0,Oe.decodeAddress)(e)}catch{return!1}return!0}_.validateAddress=hr});var oe=E(y=>{"use strict";u();d();Object.defineProperty(y,"__esModule",{value:!0});y.Transaction=y.signMessage=y.calcTxHash=y.transfer=void 0;var m=j(),vr=te(),mr=o.Buffer.from("TransactionSigningHash"),Er=o.Buffer.from("TransactionID"),Sr=o.Buffer.from("PersonalMessageSigningHash");function br(e,r){return x.fromTxData(e).sign(r).getMessage()}y.transfer=br;function wr(e){let r=new O;return r.writeUInt16LE(e.version),r.writeUInt64LE(BigInt(e.inputs.length)),e.inputs.forEach(t=>{r.writeHash(m.base.fromHex(t.previousOutpoint.transactionId)),r.writeUInt32LE(t.previousOutpoint.index),r.writeVarBytes(o.Buffer.alloc(0)),r.writeUInt64LE(BigInt(t.sequence))}),r.writeUInt64LE(BigInt(e.outputs.length)),e.outputs.forEach(t=>{r.writeUInt64LE(BigInt(t.amount)),r.writeUInt16LE(t.scriptPublicKey.version),r.writeVarBytes(m.base.fromHex(t.scriptPublicKey.scriptPublicKey))}),r.writeUInt64LE(BigInt(e.lockTime)),r.writeHash(m.base.fromHex(e.subnetworkId)),r.writeUInt64LE(0n),r.writeVarBytes(o.Buffer.alloc(0)),m.base.toHex(m.base.blake2(r.toBuffer(),256,Er))}y.calcTxHash=wr;function Pr(e,r){let t=m.base.blake2(o.Buffer.from(e),256,Sr),n=m.signUtil.schnorr.secp256k1.schnorr.sign(t,m.base.toHex(m.base.fromHex(r)));return m.base.toHex(n)}y.signMessage=Pr;var x=class{static fromTxData(r){return new x(r)}constructor(r){this.version=0,this.inputs=[],this.outputs=[],this.lockTime="0",this.subnetworkId="0000000000000000000000000000000000000000",this.utxos=[];let t=0n;r.inputs.forEach(a=>{this.inputs.push({previousOutpoint:{transactionId:a.txId,index:a.vOut},signatureScript:"",sequence:"0",sigOpCount:1}),this.utxos.push({pkScript:ie(a.address),amount:a.amount}),t+=BigInt(a.amount)});let n=0n;r.outputs.forEach(a=>{this.outputs.push({scriptPublicKey:{version:0,scriptPublicKey:m.base.toHex(ie(a.address))},amount:a.amount}),n+=BigInt(a.amount)});let i=t-n-BigInt(r.fee);i>=BigInt(r.dustSize||546)&&this.outputs.push({scriptPublicKey:{version:0,scriptPublicKey:m.base.toHex(ie(r.address))},amount:i.toString()})}sign(r){return this.inputs.forEach((t,n)=>{let i=Ir(this,Ae,n,{}),a=m.signUtil.schnorr.secp256k1.schnorr.sign(i,m.base.toHex(m.base.fromHex(r)));t.signatureScript=m.base.toHex(o.Buffer.concat([o.Buffer.from([65]),a,o.Buffer.from([Ae])]))}),this}getMessage(){return JSON.stringify({transaction:{version:this.version,inputs:this.inputs,outputs:this.outputs,lockTime:this.lockTime,subnetworkId:this.subnetworkId},allowOrphan:!1})}};y.Transaction=x;function ie(e){let{payload:r}=(0,vr.decodeAddress)(e);return o.Buffer.concat([o.Buffer.from([32]),r,o.Buffer.from([172])],34)}var Ae=1,Tr=2,_r=4,Ne=128,xe=7;function Ue(e){return(e&xe)===Tr}function je(e){return(e&xe)===_r}function se(e){return(e&Ne)===Ne}function Ir(e,r,t,n={}){let i=new O;i.writeUInt16LE(e.version),i.writeHash(Or(e,r,n)),i.writeHash(Hr(e,r,n)),i.writeHash(Mr(e,r,n));let a=e.inputs[t],l=e.utxos[t];return Be(i,a),i.writeUInt16LE(0),i.writeVarBytes(l.pkScript),i.writeUInt64LE(BigInt(l.amount)),i.writeUInt64LE(BigInt(a.sequence)),i.writeUInt8(1),i.writeHash(Kr(e,t,r,n)),i.writeUInt64LE(BigInt(e.lockTime)),i.writeHash(yr()),i.writeUInt64LE(0n),i.writeHash(U()),i.writeUInt8(r),i.finalize()}function U(){return o.Buffer.alloc(32)}function yr(){return o.Buffer.alloc(20)}function Or(e,r,t){if(se(r))return U();if(!t.previousOutputsHash){let n=new O;e.inputs.forEach(i=>Be(n,i)),t.previousOutputsHash=n.finalize()}return t.previousOutputsHash}function Hr(e,r,t){if(je(r)||se(r)||Ue(r))return U();if(!t.sequencesHash){let n=new O;e.inputs.forEach(i=>n.writeUInt64LE(BigInt(i.sequence))),t.sequencesHash=n.finalize()}return t.sequencesHash}function Mr(e,r,t){if(se(r))return U();if(!t.sigOpCountsHash){let n=new O;e.inputs.forEach(i=>n.writeUInt8(1)),t.sigOpCountsHash=n.finalize()}return t.sigOpCountsHash}function Kr(e,r,t,n){if(Ue(t))return U();if(je(t))return r>=e.outputs.length?U():new O().finalize();if(!n.outputsHash){let i=new O;e.outputs.forEach(a=>Ar(i,a)),n.outputsHash=i.finalize()}return n.outputsHash}function Be(e,r){e.writeHash(m.base.fromHex(r.previousOutpoint.transactionId)),e.writeUInt32LE(r.previousOutpoint.index)}function Ar(e,r){e.writeUInt64LE(BigInt(r.amount)),e.writeUInt16LE(0),e.writeVarBytes(m.base.fromHex(r.scriptPublicKey.scriptPublicKey))}var O=class{constructor(){this.bufLen=0,this.bufs=[]}toBuffer(){return this.concat()}concat(){return o.Buffer.concat(this.bufs,this.bufLen)}write(r){return this.bufs.push(r),this.bufLen+=r.length,this}writeReverse(r){return this.bufs.push(r.reverse()),this.bufLen+=r.length,this}writeHash(r){return this.write(r),this}writeVarBytes(r){return this.writeUInt64LE(BigInt(r.length)),this.write(r),this}writeUInt8(r){let t=o.Buffer.alloc(1);return t.writeUInt8(r),this.write(t),this}writeUInt16LE(r){let t=o.Buffer.alloc(2);return t.writeUInt16LE(r),this.write(t),this}writeUInt32LE(r){let t=o.Buffer.alloc(4);return t.writeUInt32LE(r,0),this.write(t),this}writeUInt64LE(r){let t=o.Buffer.alloc(8);return t.writeBigUInt64LE(r),this.write(t),this}finalize(){return m.base.blake2(this.toBuffer(),256,mr)}}});var Le=E(Y=>{"use strict";u();d();Object.defineProperty(Y,"__esModule",{value:!0});Y.KaspaWallet=void 0;var X=ve(),V=ne(),J=oe(),ae=class extends X.BaseWallet{async getDerivedPath(r){return`m/44'/111111'/0'/0/${r.index}`}async getNewAddress(r){return Promise.resolve({address:(0,V.addressFromPrvKey)(r.privateKey),publicKey:(0,V.pubKeyFromPrvKey)(r.privateKey)})}async validPrivateKey(r){let n={isValid:(0,V.checkPrvKey)(r.privateKey),privateKey:r.privateKey};return Promise.resolve(n)}async validAddress(r){return Promise.resolve({isValid:(0,V.validateAddress)(r.address),address:r.address})}async signTransaction(r){try{return Promise.resolve((0,J.transfer)(r.data,r.privateKey))}catch{return Promise.reject(X.SignTxError)}}async calcTxHash(r){try{return typeof r.data=="string"?Promise.resolve((0,J.calcTxHash)(JSON.parse(r.data).transaction)):Promise.resolve((0,J.calcTxHash)(r.data.transaction))}catch{return Promise.reject(X.CalcTxHashError)}}async signMessage(r){try{return Promise.resolve((0,J.signMessage)(r.data.message,r.privateKey))}catch{return Promise.reject(X.SignTxError)}}};Y.KaspaWallet=ae});var xr=E(H=>{u();d();var Nr=H&&H.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ce=H&&H.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Nr(r,e,t)};Object.defineProperty(H,"__esModule",{value:!0});ce(Le(),H);ce(ne(),H);ce(oe(),H)});export{xr as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-7AEKO5HV.js.map
