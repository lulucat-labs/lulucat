import{a as ws,b as Cd,c as ra,d as Td}from"./chunk-FR4BVCBN.js";import{a as Dt,b as md,c as ud,d as Po}from"./chunk-AILK5RJ4.js";import{a as gd}from"./chunk-FWRHOFW5.js";import{a as Es,b as id,c as ad,d as le,e as cd,f as X,g as Ps,h as fd,l as ld,m as pd,n as Lo}from"./chunk-7ZBIUJUY.js";import{a as ks,b as dd}from"./chunk-7BZO4HXD.js";import{a as Ad}from"./chunk-34DPDPSQ.js";import{a as bs}from"./chunk-QN3BHKDM.js";import"./chunk-LZOTZSLP.js";import{a as Xt}from"./chunk-V4WIOWAX.js";import{a as td}from"./chunk-4PJB7QLO.js";import"./chunk-5NBFHNE4.js";import"./chunk-3AYLRNPS.js";import{a as fe,b as nd}from"./chunk-5C7TELT6.js";import{a as ed,b as rd}from"./chunk-KV6H6PCU.js";import{a as sd}from"./chunk-YZV77OOT.js";import{b as Xu,k as ju}from"./chunk-LEEK32ZR.js";import{a as Qu,b as od}from"./chunk-MMD6HZVV.js";import{a as Ku,b as Yu,c as ys,e as Zu}from"./chunk-FRYK2ICE.js";import"./chunk-37XSQI5O.js";import{a as Ou,c as Sr,d as Ru,f as Uu,k as zu}from"./chunk-HNJT6VHX.js";import"./chunk-KWQDFT3S.js";import"./chunk-CLAWFLRW.js";import"./chunk-454I7KWD.js";import"./chunk-R6UCQXIY.js";import{a as Ju}from"./chunk-DIVFRUSZ.js";import"./chunk-OL23QTWJ.js";import{a as zr,b as Fs}from"./chunk-QNJJMAHT.js";import{a as $u}from"./chunk-RIBJE2RV.js";import{b as Xo,c as Ss,d as Nu,f as Bu,h as vu,i as Kr,j as xs,k as Jr,m as Ir,p as Lu,q as hs,r as Du,s as Mu}from"./chunk-JFV2UG4S.js";import{a as mu,d as uu,m as qu}from"./chunk-4VFXVCHS.js";import"./chunk-6G3RP33F.js";import"./chunk-GILBGQWV.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import{c as po}from"./chunk-GGC2CY5E.js";import"./chunk-JKSK4TNM.js";import"./chunk-UTSCFP3M.js";import{a as $t}from"./chunk-VPEGTYK6.js";import"./chunk-MZ62OMSF.js";import{a as ta}from"./chunk-HYFMV74Y.js";import"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import{a as vo}from"./chunk-FOJX7ELC.js";import{a as St,d as Hu}from"./chunk-NFPXRZGF.js";import{a as _s}from"./chunk-7P3TAB2X.js";import{c as Qm,e as ou}from"./chunk-F2DBKTIG.js";import{a as Yr,c as ea}from"./chunk-2AZAHALD.js";import{$ as wu,A as ps,B as gr,C as Lt,D as Iu,E as Su,F as As,G as Cs,H as xu,I as to,J as Me,K as hu,L as _u,M as yu,N as eo,P as Ts,Q as Ar,S as bu,U as Oo,V as de,W as Cr,X as Pu,Y as co,Z as Is,_ as ku,a as du,b as lr,e as Mo,f as S,g as Nt,h as N,i as Bt,j as fu,k as K,l as ce,m as $,n as lu,o as pu,p as ds,q as Bo,r as me,s as fs,t as pr,u as gu,v as _,w as Au,x as Cu,y as ls,z as vt}from"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import{a as ue,e as gs,f as Tu}from"./chunk-B2JJAXTZ.js";import{a as To,e as ru,f as us,m as nu,n as su,o as iu,p as ft,s as yo,t as lt,u as au,v as cu}from"./chunk-APUK5GYS.js";import{g as Fu,h as Eu}from"./chunk-55XCE2ZH.js";import{c as eu}from"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import{a as tu}from"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import{a as ms}from"./chunk-QHPYMFK2.js";import{d as Zo,f as Zt,g as Xm,j as jm}from"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import{a as dt}from"./chunk-2P7I7CKT.js";import{b as Wu,d as Gu,e as Vu}from"./chunk-52ESRIYZ.js";import{a as xr}from"./chunk-ELJZY4AU.js";import{a as Tr}from"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import{a as $m}from"./chunk-SBQTMPJM.js";import{a as cs}from"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-PJAFZEEL.js";import{a as ns}from"./chunk-MIHA7WB3.js";import{b as It,c as Om,d as Rm}from"./chunk-UEHNGOG4.js";import{b as km,d as wm,f as Nm,g as Bm,h as vm,i as Lm,j as Dm,n as Mm}from"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import{a as bm,b as qr,g as Pm}from"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import{a as JT}from"./chunk-ZCI4FWQR.js";import{$ as Xi,B as ur,C as Zn,D as $n,E as dr,F as ae,G as ct,H as mm,I as fr,J as um,K as dm,L as mt,M as fm,N as lm,O as Xn,P as $i,Q as pm,R as gm,S as Am,T as jn,U as Cm,V as Tm,W as Im,X as Gr,Y as Qn,Z as Vr,_ as os,aa as Sm,b as Qc,ba as xm,c as ir,ca as Tt,d as om,e as tm,ea as ts,f as em,fa as hm,g as ar,ga as es,h as Hn,ha as _m,i as cr,ia as rs,j as mr,ja as Yt,k as rm,ka as ji,l as it,la as Qi,m as nm,ma as ym,n as qn,o as Kn,p as Jn,q as ie,r as Yn,s as wt,t as Wr,u as sm,v as im,w as am,x as at,y as cm,z as zn}from"./chunk-JFXRJMNP.js";import"./chunk-ICS7QRDT.js";import"./chunk-2LFRM3KT.js";import"./chunk-GGZ73X5S.js";import{a as Gm,b as Vm}from"./chunk-IEUJSLGG.js";import"./chunk-QIV5EJPL.js";import"./chunk-4HIOE2KZ.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import{A as Zi,B as Gn,C as Ur,D as Zc,E as $c,H as se,I as J,J as R,K as mo,L as Xc,N as jc,P as bo,Q as kt,R as Vn,b as On,c as Gc,f as io,g as Rn,h as Un,k as Vc,l as Hc,m as st,n as qc,o as Wn,p as Pt,q as Kc,s as Jc,w as Yc,x as sr,z as zc}from"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import{d as oa}from"./chunk-4X3SKD2N.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import{c as Jm}from"./chunk-OGS4HURJ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import{a as Hm}from"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import{E as Tc,v as Ji}from"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import{a as ut,b as Ym,j as zm}from"./chunk-HZPID3WW.js";import{e as De}from"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{a as qm,e as Km,g as lo,h as is,l as as}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import{c as Um,f as Wm}from"./chunk-74FNJDB7.js";import{m as no}from"./chunk-AKJZXDVD.js";import"./chunk-E75DNWM4.js";import{a as Zm}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as ss}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{$a as Ln,a as Wc,f as zo,la as vn,ma as er,na as rr}from"./chunk-WSXZYUQ4.js";import{b as zt}from"./chunk-JRZXGORL.js";import{m as Le,n as Hr,q as Y}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{o as q}from"./chunk-AUURQ3HI.js";import{$ as vc,Ja as tr,K as Qe,L as or,M as Bn,T as Pc,Ta as Uc,V as kc,W as wc,Z as Nc,_ as Bc,aa as Lc,ca as Dc,cc as b,g as Ic,ha as Mc,ia as Oc,lb as Dn,m as Yi,p as bn,r as et,tb as Et,za as Rc}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import{a as Fm}from"./chunk-VOLYN562.js";import{a as No}from"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import{d as so,f as wo}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{a as nr,b as bt}from"./chunk-XRF6BZHR.js";import{e as Mn}from"./chunk-OWU5GWTN.js";import{A as Nn,_ as Yo,a as KT,ba as Ec,da as ve,ea as bc,f as Eo,h as _c,ha as Jt,ia as ro,q as yc,r as zi,t as Fc,v as wn,w as re,x as ne,y as Xe,z as je}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import{g as Em}from"./chunk-ELX2GHLL.js";import{c as V}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{Ac as Ne,Bc as Jo,Cc as Be,Ga as ja,Gc as Pn,Ha as Qa,Ib as Ho,Ja as oc,Jb as _o,Jc as xc,Ka as tc,Kb as uo,La as ec,Lb as qt,Lc as hc,Ma as rc,Mc as nt,Na as nc,Nb as qo,Oa as sc,Ob as we,Pa as ic,Pb as Ko,Qa as hn,Ra as ac,Rb as yn,Rc as W,Sa as cc,Tc as Rr,Xc as kn,Y as In,_a as Ao,_c as Fo,a as Ua,aa as Sn,b as VT,ba as za,bb as mc,bc as dc,cb as Ki,ha as Za,hc as go,ia as $a,ja as qi,jb as Or,lc as fc,nc as lc,qa as Xa,qc as qT,rb as uc,va as xn,vb as _n,vc as Sc,yb as ke,yc as rt}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{E as En,G as Cc,H as ee,O as $e,d as pc,f as Fn,o as tt,q as Kt,r as gc,s as Ac}from"./chunk-E44TZGUB.js";import{F as Je,K as Tn,d as Wa,da as Ja,e as Hi,f as Ga,fa as Mr,j as Va,ja as Ya,oa as $o,s as Ha,w as qa,y as Ka}from"./chunk-KBQXBPIW.js";import{O as H,l as B,v as Ye,w as F}from"./chunk-364XNTHB.js";import{b as HT}from"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as Ft,T as ze,Z as Ze,ca as fo}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as x}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-TKZ7N5JX.js";import"./chunk-CWRZ2WAJ.js";import"./chunk-OMIXKWD3.js";import"./chunk-PBODVK5S.js";import"./chunk-OENPHC74.js";import"./chunk-KHHBU7RQ.js";import"./chunk-TNAXYRKK.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as u,o as s,p as l,q as i}from"./chunk-FJHLV356.js";s();i();var Ct=u(x()),Fe=u(No());$o();s();i();var hr=u(x()),Ns=u(b()),Id=u(No());var YT=()=>{let o=(0,Id.useHistory)(),t=(0,Ns.useDispatch)(),e=(0,Ns.useSelector)(Gc),r=(0,hr.useRef)(e);return r.current=e,(0,hr.useEffect)(()=>{let{fromPage:n}=o.location?.state||{};return n&&t(Yc(n)),t(sr(!0)),()=>{r.current&&(t(Vn()),t(rs()))}},[]),null},Sd=(0,hr.memo)(YT);s();i();s();i();s();i();var kd=u(x());s();i();var Re=u(x());H();s();i();var xd=u(x()),hd=u(q());H();wo();var zT=()=>{let o=ut(),[t,e]=(0,xd.useState)(!1);return[(0,hd.useMemoizedFn)(async n=>{try{e(!0);let a=await so().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:c}=await Rc(n,{txSource:1},{headers:a}),m="";if(c?.canRecharge||(m=c.rechargeMsg),c?.canWithdraw||(m=c.withdrawMsg),m){let d=tt.warn({text:m,confirmText:F("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return ee.error(F("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},_d=zT;s();i();s();i();var pe=u(x());H();function ZT({loading:o,tag:t,customRender:e,focus:r,noMargin:n,noPadding:a,onChange:c,onRef:m,...d}){let g=(0,pe.useRef)(null);(0,pe.useLayoutEffect)(()=>{r&&g.current?.focus()},[]);let p=F("wallet_extension_transaction_placeholder_input_address");return pe.default.createElement(Xt.Row,{noMargin:n,noPadding:a},pe.default.createElement(Kt.TextArea,{placeholder:p,errorType:Kt.TIP_TYPE.always,size:Kt.SIZE.xl,autoResize:!0,...d,onRef:f=>{g.current=f,m&&m(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=pe.default.createElement(Xt.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var na=ZT;s();i();var So=u(x()),Oe=u(b()),Bs=u(q()),bd=u(Ft());$o();H();s();i();s();i();var $T=()=>84,yd=$T;var Fd=yd;s();i();var Ed={selected:"_selected_lvccx_1"};function XT({value:o,network:t}){let e=(0,Oe.useDispatch)(),r=(0,Oe.useSelector)(On),[n,a]=(0,So.useState)(!1),[c,m]=(0,So.useState)({}),[d,g]=(0,So.useState)(""),p=Vu(()=>{g(bs.TYPE.ADD),m({address:o,network:t}),a(!0)}),f=(T={})=>{a(!1),m({}),g(""),T.name&&e(Ur({name:T.name,type:zi.ADDRESS_BOOK}))},A=T=>{a(!1),setTimeout(()=>{g(bs.TYPE.EDIT),m({...T,network:t}),a(!0)})};return So.default.createElement(So.default.Fragment,null,So.default.createElement(Xt.InputBottomBar,{title:F("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:F("wallet_extension_send_anchor_add_now"),buttonClick:p}),So.default.createElement(bs,{visible:n,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>r}))}function jT({visible:o,options:t,onSelect:e,onChange:r}){let n=(0,Oe.useDispatch)();if(!o)return null;let a=({walletId:c,address:m,name:d,type:g,group:p,addressType:f})=>{if(e(),r(m),d){let A=p?`${p} - ${d}`:d;n(Ur({name:A,type:g,extra:{walletId:c,group:p,name:d,addressType:f}}))}};return So.default.createElement(Xt.SelectAddress,{options:t,onSelect:a})}function QT(o,t,e){let r=e?.matchAddress||((n,a)=>Mr(a.address).includes(Mr(n))||a.name&&Mr(a.name).includes(Mr(n)));return(0,So.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let n=[];return o.forEach(({group:a,list:c})=>{let m=[];c.forEach(d=>{r(t,d)&&m.push(d)}),m.length&&n.push({group:a,list:m})}),n},[o,t])}function oI({value:o,error:t,onChange:e,isCheckingError:r,extraProps:n,onBlur:a,onFocus:c,...m}){let d=(0,Oe.useDispatch)(),g=Mo(),{coin:p}=S(),{localType:f}=p,A=(0,Oe.useSelector)(Un),T=_(),{filterAddress:I,disableRequestDomain:C}=n||{},h=!o,y=!!o&&!t&&!A?.name&&!r,E=Gu(f,T),k=(0,So.useMemo)(()=>I?I(E):E,[E,I]),[M,w]=(0,So.useState)((!o||!!t)&&!y&&k?.length>0),P=QT(k,o,n),v=Wu(f),O=U=>{e(U);let oo=v(U),z=Boolean(U&&oo);d(Ur(z?oo:null))},{loading:L,abort:D}=du({domainInputValue:o,coinId:g},({address:U,domain:oo})=>{d(Gn({key:"",args:{}})),e(U),d(Ur({name:oo,type:zi.ENS}))},C),G=(0,Bs.useDebounce)(!!L||!!m.loading||!!r,{wait:200});(0,Bs.useThrottleEffect)(()=>{r||(!!o&&!t&&P.length===0?w(!1):!!t&&P?.length>0&&w(!0))},[o,t,r,P?.length],{wait:100});let Z=Fd();return So.default.createElement("div",{className:(0,bd.default)({[Ed.selected]:M}),style:{bottom:Z}},So.default.createElement(Xt.Row,{noMargin:M},So.default.createElement(na,{...m,noMargin:!0,noPadding:!0,loading:G,tag:A?.name,focus:h,value:o,error:!G&&t,onChange:O,onBlur:U=>{o&&!t&&setTimeout(()=>{w(!1)},100),a&&a(U)},onFocus:U=>{P?.length>0&&w(!0),c&&c(U)}}),y&&So.default.createElement(XT,{network:f,value:o})),So.default.createElement(jT,{visible:M,extraProps:n,value:o,options:P,onSelect:()=>{D(),w(!1)},onChange:e}))}var sa=oI;s();i();var Zr=u(x()),$r=u(b());H();function tI({Component:o=sa,loading:t=!1,extraProps:e,errorFns:r={fns:[],override:!1}}){let n=(0,$r.useDispatch)(),c=dt().get("address"),m=(0,$r.useSelector)(io),d=(0,$r.useSelector)(Rn),g=Su(),{isCheckingError:p,runErrorFns:f}=gr(g,r),A=I=>{f(I,C=>{n(Gn(C))})},T=I=>{A(I),n(Zi(I))};return(0,Zr.useEffect)(()=>{c&&n(Zi(c))},[]),(0,Zr.useEffect)(()=>{n(zc(p))},[p]),Zr.default.createElement(o,{value:m,onChange:T,loading:t,isCheckingError:p,error:d?.key?F(d?.key,d?.args):null,extraProps:e||{}})}var ia=tI;s();i();var Pd={content:"_content_12kl2_1"};function eI({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let r=Mo(),n=ls(),a=Cu(),c=vt(),[m,d]=_d(),g=(0,Re.useMemo)(()=>{let{disabled:p,loading:f,onClick:A,...T}=e||{},I=p||n,C=async()=>{let h=A||c;await m(r)&&await h()};return[{disabled:I,size:fo.SIZE.lg,type:fo.TYPE.highlight,category:fo.CATEGORY.fill,btnText:F("wallet_extension_send_btn_next_step"),loading:!I&&(f||a||d),onClick:C,...T}]},[e,n,a,c,m,d,r]);return Re.default.createElement(Es,{footerActions:g,slot:{header:Re.default.createElement(id,{...o,title:F("wallet_extension_send_title_recipient_address"),pageIndex:1})}},Re.default.createElement("div",{className:Pd.content},Re.default.createElement(ia,{...t})))}var j=eI;var rI=()=>kd.default.createElement(j,null),wd=rI;s();i();var Ud=u(x());s();i();var Dd=u(x()),Md=u(b()),Od=u(q());s();i();var vd=u(x());wo();s();i();var Nd=u(x()),Bd=u(b());Fo();function nI({transferType:o,fungibleAssetTransferType:t,tokenTransferType:e}){let{coin:r}=S(),n=(0,Bd.useSelector)(io),a=co(),{baseCoinId:c,protocolType:m,address:d}=r||{};return(0,Nd.useCallback)(g=>{let{sequenceNumber:p,chainId:f,expirationTimestampSecs:A,tyArg:T,maxGasAmount:I,gasUnitPrice:C}=g||{},h={recipientAddress:n,amount:a},y={base:{sequenceNumber:p,chainId:f,maxGasAmount:I,gasUnitPrice:C,expirationTimestampSecs:A}};return c===0&&(y.type=o,y.data={...h}),c!==0&&m===Rr.APTOS_FUNGIBLE_TOKEN&&(y.type=t,y.data={...h,fungibleAssetMetadataAddress:d}),c!==0&&m===Rr.APTOS_TOKEN&&(y.type=e,y.data={...h,tyArg:T}),y},[n,a,c,m,d])}var vs=nI;ke();function sI(){let o=vs({transferType:ne.SIMULATE_TRANSFER,fungibleAssetTransferType:ne.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ne.SIMULATE_TOKEN_TRANSFER_V2}),t=lo(),e=_();return(0,vd.useCallback)(async r=>{let{info:n={}}=r||{},a=o(n),{AptosWallet:c}=await Pm(),m=new c,d=await so().getPublicKey(e,Or,t);return m.buildSimulateTx({publicKey:d,data:a})},[o,e,t])}var Ld=sI;var iI=()=>{let[o,{setFalse:t}]=(0,Od.useBoolean)(!0),{coin:e}=S(),r=_(),n=(0,Md.useDispatch)(),a=Ld(),{chainId:c,coinId:m}=e;return(0,Dd.useEffect)(()=>{c&&r&&(async()=>{try{let g={coinId:m,chainId:c,address:r},p={fromAddr:r},{maxGasAmount:f,gasUnitPrice:A,fee:T}=await Dc(g,p,a);n(J(T)),n(um({maxGasAmount:f,gasUnitPrice:A})),n(R(!1))}catch{n(R(!0))}finally{t()}})()},[c,r,a]),o},Rd=iI;function aI(){let o=Rd();return to(),Ud.default.createElement(X,{confirmButtonProps:{loading:o}})}var Wd=aI;s();i();var of=u(x());s();i();var Ro=u(x()),Xr=u(b());$o();H();s();i();var Gd=u(x()),Vd=u(b());go();function Hd(){let o=(0,Vd.useDispatch)(),t=ce(),e=Oo();(0,Gd.useEffect)(()=>{if(t){let r=e;qo(r,0)&&(r="0"),o(Zc(r))}},[t,e])}s();i();s();i();var aa=u(x()),qd=u(No());var Kd=u(q()),cI=({disabled:o,onSubmit:t,feeLoading:e,loading:r,onClick:n,networkFee:a,renderActions:c,...m},d)=>{let g=(0,qd.useHistory)(),p=Nt(),{coin:f}=S(),A=_(),{loading:T,onClick:I}=wu(t),C=ku(),h=(0,Kd.useCreation)(()=>{if(c&&typeof c=="function"){let y=c(d);if(y)return y}return[{actionType:us.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},{loading:r||T,disabled:o||C||e,actionType:us.ACTION_TYPE.CONFIRM,onClick:n||I,...m}]},[e,r,f?.coinId,C,I,o,d,p?.coinId,A,T,n,m]);return aa.default.createElement(ss,{usePortal:!0,offsetBottom:0,placeholder:!0},aa.default.createElement(us,{buttonGroup:h}))},Jd=cI;var Yd=Jd;s();i();var zd=u(x());var mI=({loading:o,chainName:t,feeLevel:e,onClick:r,...n},a)=>{let c=$(),m=me(),d=Bo(),g=pu(),p=ds(),f=fe(),A=r?()=>{r(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,T=(0,zd.useMemo)(()=>e!==void 0?e:Yo?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:g&&c==="0"?void 0:c,loading:o||g,level:T,coinId:m,estimateFailed:!!p,onClick:A,...n}},Zd=mI;s();i();var ca=u(b()),$d=u(q());H();var uI=()=>{let o=ce(),t=S(),e=(0,ca.useSelector)(Kc),r=Bo(),n=t?.coin?.coinId,a=K(),c=jm(n,a,{currencyId:r,formatted:!1}),m=(0,ca.useSelector)(Vc);return(0,$d.useCreation)(()=>{let d=0,g=0;return e===eu?o?(g=B.mul(c,-1),d=B.mul(a,-1)):(d=void 0,g=B.mul(m,-1)):(d=B.mul(a,-1),g=void 0),{currencyId:r,coinId:n,assetChange:d,useMinPrecision:!0,currencyAssetChange:g}},[e,r,n,o,c,m,a])},Xd=uI;s();i();var jd={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function dI({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:r={},tipMessageProps:n={},slot:a={},checkEmpty:c=!0,addressType:m,renderMessage:d,renderTipActions:g,defaultMessage:p,canTransferAmount:f,tipActions:A=[]}){let T=(0,Xr.useSelector)(io),I=(0,Xr.useSelector)(Un),C=ut(),h=Ju(C),y=(0,Xr.useSelector)(Jc),E=(0,Xr.useSelector)(om),k=_(),M=Xd(),{coin:w,baseCoin:P}=S(),v=Zd({...t,chainName:w?.chainName},h),{loading:O,estimateFailed:L}=v,G=v?.gasReturn?.activity?.errorCode,{bottom:Z,networkFee:U,footer:oo}=a,z=Ro.default.createElement(St,{bordered:!1,verticalPadding:!1},Ro.default.createElement(_s,{...v}));U&&Hi(U)&&(z=U(v)),U&&!Hi(U)&&(z=U),ad(c),Hd(),(0,Ro.useEffect)(()=>{G===0&&Tc({wallet_address:k,chain_id:P.chainId,transaction_type:"transfer"})},[G]);let ho=Yd({...e,feeLoading:O},y?.type||E);return Ro.default.createElement(Es,{...r,loading:o,className:jd.root,slot:{header:Ro.default.createElement(Ru,{...n,address:k,coinId:w?.coinId,actions:A,renderActions:g,renderMessage:d,type:y?.type||E||L&&Hu.TIP_TYPE.FEE_ERROR,message:y?.text||!!y?.key&&F(y.key,y?.args)||!L&&p}),footer:oo||ho}},Ro.default.createElement(V.Space,{space:24,direction:V.DIRECTION.vertical},Ro.default.createElement(Uu,{txType:Eo.TRANS_OUT},Ro.default.createElement(V.FlexBox,{justify:"center"},Ro.default.createElement(Ou,{...M}))),z,Ro.default.createElement(St,{bordered:!1,verticalPadding:!1},Ro.default.createElement(ea,{address:k,addressType:m,title:F("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{h({trade:"send",network:w?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Ro.default.createElement(ed,{coinBalance:f,coinId:P.coinId})),Ro.default.createElement(ea,{tags:I?.name?[I?.name]:null,address:T,title:F("extension_send_mid_text_to"),onCopyCallback:()=>{h({trade:"send",all_confirmation:"to_address",network:w?.chainName})}})),Z))}var Q=dI;s();i();var ma=u(b());ke();go();var Qd=()=>{let{coin:o}=S(),t=_(),e=co(),r=(0,ma.useSelector)(io),n=(0,ma.useSelector)(Qc),a=lo(),{gasUnitPrice:c,maxGasAmount:m}=n,d=vs({transferType:ne.TRANSFER,fungibleAssetTransferType:ne.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ne.TOKEN_TRANSFER_V2}),g=ft(),p=yo({fromAddr:t,walletId:a,localType:Or}),f=lt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:r,networkFee:Ho(c,m),localType:Or});return po(async()=>await g({coinId:o.coinId,address:t,fromAddr:t,toAddr:r}),async(y={})=>{let E=d({...y,gasUnitPrice:c,maxGasAmount:m}),k=await p({params:E});return{signInfo:y,signedTx:k}},async({signInfo:y,signedTx:E})=>{let{sequenceNumber:k}=y,M={nonce:k},w={extJson:JSON.stringify(M)};return await f(E,w)},y=>(no({tx_id:y}),y))};function fI(){let o=Qd(),t=async()=>{await o()};return eo(),of.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}var tf=fI;var lI={match:o=>vm(o),pages:{AddressPage:wd,AmountPage:Wd,ConfirmPage:tf}},ef=lI;s();i();Fo();s();i();var sf=u(x()),Ls=u(No());s();i();function Mt(){return dt().get("type")||Dt.SEND}s();i();function pI(){let o=Lt(),t=Iu();return[o,t]}var rf=pI;s();i();var jr=u(x()),nf=u(No());Fo();Ao();var gI=()=>{let{coinId:o}=(0,nf.useParams)(),e=Zo(o)?.protocolId,r=Object.values(W),n=Km(),a=n.filter(({keyringIdentityType:f})=>Wm(f)),c=n.filter(({keyringIdentityType:f})=>f===hc.MPC),m=(f,A)=>!f.some(({walletIdentities:T})=>T.some(({addressType:I={}})=>{let C=I[In];return C?C.some(({address:h})=>A.address===h):!1})),d=(0,jr.useCallback)(f=>r.includes(e)?m(a,f):!0,[a,e,r]),g=(0,jr.useCallback)(f=>[W.BRC_20,W.FRACTAL_BRC20].includes(e)?!0:r.includes(e)?m(c,f):!0,[c,e,r]),p=(0,jr.useCallback)((f=[])=>f.filter(A=>d(A)&&g(A)),[d,g]);return(0,jr.useCallback)(f=>f.map(A=>({...A,list:p(A?.list)})).filter(A=>A?.list?.length),[p])},_r=gI;function AI(){let{coinId:o}=(0,Ls.useParams)(),t=_(),e=(0,Ls.useHistory)(),r=Mt(),n=rf(),a=_r();return sf.default.createElement(j,{addressProps:{errorFns:{fns:n,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${zo}/${o}${rr}?type=${r}&from=${t}`)}}})}var af=AI;s();i();var Uf=u(x());s();i();var jo=u(x()),Os=u(b()),Lf=u(No()),Df=u(Ft());H();go();s();i();var ao=u(x()),Ue=u(Ft());H();s();i();var pt={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var CI=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,pendingXrc:r,pendingXrcDisplay:n,availableWithoutSpending:a,availableWithoutSpendingDisplay:c,availableReceiving:m,availableReceivingDisplay:d,goToInscribe:g,addressType:p,coinId:f})=>{let{handleClick:A}=md(p,f);return ao.default.createElement(ao.default.Fragment,null,ao.default.createElement(V.Box,{className:(0,Ue.default)(pt.container)},Number(o)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between"},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_in_use"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:pt.amount},t),ao.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,Ue.default)(pt.link),onClick:A},F("extension_wallet_btc_btn_unlock_use")))),Number(r)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(pt.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:pt.amount},n))),Number(a)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between"},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:pt.amount},F("extension_wallet_btc_to_be_inscribed"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},c),ao.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,Ue.default)(pt.link),onClick:g},F("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(pt.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:pt.amount},d))),Number(e)>0&&ao.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(pt.pendingAssets)},ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("wallet_extension_cat_desc_total_amount"))),ao.default.createElement(V.Box,null,ao.default.createElement(Y.Text,{className:pt.amount},e)))))},yr=CI;s();i();function TI(){let o=_(),{coin:t}=S();return ud(t,o)}var ge=TI;s();i();var Io=u(x()),df=u(b()),ff=u(Ft());H();s();i();var xt=u(x()),ua=u(Ft());H();s();i();var II="md",SI="lg",cf=o=>{let{className:t,size:e,disabled:r,checked:n,coinImage:a,coinAmountText:c,inscriptionId:m,onChange:d}=o,g=`inscription-select-container-${e}`,p=r?"inscription-select-disabled":null;return xt.default.createElement("div",{className:(0,ua.default)("inscription-select-container",g),onClick:d},r?xt.default.createElement("div",{className:"inscription-select-confirm"},F("extension_wallet_send_tag_confirming")):null,xt.default.createElement("div",{className:(0,ua.default)("inscription-select",p,t)},r?null:xt.default.createElement("div",{className:"inscription-select-radio-container"},xt.default.createElement(gc.Circle,{checked:n})),xt.default.createElement("div",{className:"inscription-select-coin"},xt.default.createElement(En,{className:"inscription-select-coin-image",src:a,errorImg:Mn,width:14,height:14}),xt.default.createElement(ta,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),xt.default.createElement("div",{className:"inscription-select-id"},xt.default.createElement(ta,{text:m,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};cf.size={md:II,lg:SI};var Fr=cf;s();i();var ko=u(x()),mf=u(q());H();s();i();var Ae={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function xI(){let{coin:o}=S(),t=ge();return ko.default.createElement("div",{className:Ae.header},ko.default.createElement("div",{className:Ae.amount},ko.default.createElement(En,{className:Ae.logo,src:o.image,errorImg:Mn,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function hI({loading:o,list:t,visible:e,onClose:r,value:n,onSelected:a,request:c}){let{coin:m}=S(),[d,g]=(0,ko.useState)({}),{run:p}=(0,mf.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,ko.useEffect)(()=>{e&&g(n)},[e]),ko.default.createElement(tt,{isFull:!0,topContent:ko.default.createElement(xI,{list:t,value:d,onMax:f=>{g(t.reduce((A,T)=>({...A,[T.inscriptionId]:!f}),{}))}}),footer:ko.default.createElement(Xt.ConfirmButton,{onClick:()=>{a(d)}},F("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:r,renderContent:()=>ko.default.createElement("div",{className:Ae.scrollContent,onScroll:p},ko.default.createElement("div",{className:Ae.content},t.map((f,A)=>ko.default.createElement("div",{className:Ae.cell},ko.default.createElement(Fr,{key:A,size:Fr.size.lg,coinImage:m.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{g(T=>({...T,[f.inscriptionId]:!T[f.inscriptionId]}))}})))),o&&ko.default.createElement("div",{className:Ae.loading},ko.default.createElement(Ze.Circle,{size:Ze.SIZE.sm})))})}var uf=hI;s();i();var Er={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function _I({loading:o,list:t,request:e,onSelected:r},n){let{coin:a}=S(),[c,m]=(0,Io.useState)(!1),d=(0,df.useSelector)(at),[g,p]=(0,Io.useState)(d.reduce((T,I)=>({...T,[I.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,Io.useMemo)(()=>{let T=t.filter(C=>!!g[C.inscriptionId]),I=t.filter(C=>!g[C.inscriptionId]);return{selected:T,unselected:I,showed:t.map(C=>T.includes(C)?{...C,checked:!0}:C)}},[t,g]);return(0,Io.useEffect)(()=>{r(f)},[f]),(0,Io.useImperativeHandle)(n,()=>({onMax:()=>{p(t.reduce((T,I)=>({...T,[I.inscriptionId]:!0}),{}))}})),Io.default.createElement(Io.default.Fragment,null,Io.default.createElement("div",{className:Er.root},Io.default.createElement("div",{className:Er.title,onClick:()=>{m(!0)}},F("extension_wallet_send_text_select_transferable"),Io.default.createElement(ze,{className:(0,ff.default)(Er.arrow,"okds-arrow-chevron-right-centered-md")})),Io.default.createElement("div",{className:Er.content},A.map((T,I)=>Io.default.createElement("div",{className:Er.cell},Io.default.createElement(Fr,{key:I,coinImage:a.image,size:Fr.size.md,coinAmountText:`${T.tokenAmount} ${T.tick}`,inscriptionId:T.inscriptionId,checked:T.checked,onChange:C=>{C.stopPropagation(),p(h=>({...h,[T.inscriptionId]:!h[T.inscriptionId]}))}}))))),Io.default.createElement(uf,{visible:c,value:g,loading:o,list:t,request:e,onSelected:T=>{p(T),m(!1)},onClose:()=>{m(!1)}}))}var lf=(0,Io.forwardRef)(_I);s();i();var Ce=u(x()),pf=u(b());H();function yI(o){let{coin:t}=S();return(0,Ce.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function gf(){let o=Nt();return t=>{let e="";return t.key&&(e=F(t?.key,t?.args)),t?.type===ro.FEE_BALANCE_INSUFFICIENT?Ce.default.createElement(Ce.default.Fragment,null,e," ",Ce.default.createElement(le,{coin:o})):t?.type==="inscribe"?Ce.default.createElement(Ce.default.Fragment,null,e):e}}function FI(o,t){let e=(0,pf.useDispatch)(),r=As(),n=yI(t),a=[r,n],{runErrorFns:c}=gr(a);ps(c,m=>{e($c(m))},o)}var Af=FI;s();i();var Cf=u(No());var Tf=u(b());function EI(){let o=(0,Tf.useDispatch)(),t=(0,Cf.useHistory)(),{coin:e}=S(),r=_();return()=>{o(rs()),o(Vn()),t.push(`${zo}/${e.coinId}${vn}?type=${Dt.INSCRIBE}&from=${r}`)}}var If=EI;s();i();var hf=u(x()),_f=u(b());s();i();var Qr=u(x()),Sf=u(b());go();function da(){let{baseCoin:o}=S(),t=_(),[,e]=$t({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function bI(o,t){let n=(()=>255)(),a=o||t?.normal||"0",[c,m]=(0,Qr.useState)("0");return(0,Qr.useEffect)(()=>{if(n&&a){let d=Ho(n,a);m(d)}},[n,a]),{fee:c,satBytes:a,bytes:n}}function PI(o){let t=(0,Sf.useDispatch)(),e=da(),r=bI(o,e);return(0,Qr.useEffect)(()=>{t(Tt({name:"signInfo",value:e}))},[e]),{...r,signInfo:e}}var xf=PI;function kI(){let o=(0,_f.useDispatch)(),{fee:t}=xf();(0,hf.useEffect)(()=>{o(J(t))},[t])}var yf=kI;s();i();var Pf=u(x()),kf=u(b());s();i();var Ds=u(x()),Ef=u(b());s();i();var Ff=u(b());function wI(){let{selectedSat:o,signInfo:t}=(0,Ff.useSelector)(zn),e;return o.type===Yo.CUSTOM?e=o.satBytes:e=t?.[Ec[o.type]],e||0}var Ot=wI;function NI({coinId:o}){let[t,e]=(0,Ds.useState)(!0),r=(0,Ef.useDispatch)(),n=_(),a=Ps({coinId:o}),c=Ot();return(0,Ds.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:n,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),r(kt(d))})()},[n,c]),t}var bf=NI;function BI({coinId:o}={}){let t=(0,kf.useDispatch)(),e=ge(),r=bf({coinId:o});return(0,Pf.useEffect)(()=>{t(bo(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),r}var wf=BI;s();i();var br=u(x()),Nf=u(b()),Bf=u(q());wo();Fo();Be();Ne();go();function vI(){let{coin:o,baseCoin:t}=S(),e=_(),r=(0,Nf.useSelector)(Et),[n,a]=(0,br.useState)({from:1,size:10});return async()=>{let c=await so().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),m={utxoType:Xo.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:kn(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...m,...n}]},{data:g}=await rt(Jo.getBTCUTXO,d,{headers:c}),p=(g?.[0]?.utxoList||[]).map(A=>({...A,tokenAmountInt:A.tokenAmount,tokenAmount:_o(A.tokenAmount,10**o.decimals)})),f=p.length===n.size;return f&&a(A=>({...A,from:A.from+1})),{list:p,more:f}}}function LI(){let o=(0,br.useRef)(!0),[t,e]=(0,br.useState)(!0),[r,n]=(0,br.useState)([]),a=vI(),c=async()=>{if(!!o.current){e(!0);try{let{more:m,list:d}=await a();n(g=>[...g,...d]),o.current=m}finally{e(!1)}}};return(0,Bf.useMount)(()=>{c()}),{list:r,loading:t,request:c}}var vf=LI;s();i();var Ms={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function DI(){let o=(0,Lf.useHistory)(),t=(0,Os.useDispatch)(),{coin:e,baseCoin:r}=S(),n=(0,Os.useSelector)(at),a=If(),c=gf(),m=Mt(),d=_(),g=(0,jo.useMemo)(()=>n.reduce((w,{tokenAmount:P})=>uo(w,P),0),[n]),{loading:p,list:f,request:A}=vf(),T=wf({coinId:r.coinId}),I=f.length>0,C=p||T;yf(),Af(C,f);let{availableWithoutSpending:h,availableWithoutSpendingDisplay:y,availableReceiving:E,availableReceivingDisplay:k}=ge();if(f.length===0&&C)return jo.default.createElement("div",{className:Ms.loading},jo.default.createElement(Ze.Circle,{size:Ze.SIZE.xl}));let M=jo.default.createElement(ss.FooterActions,{usePortal:!0,className:(0,Df.default)(Ms.inscribeFooter)},jo.default.createElement(fo,{block:!0,type:fo.TYPE.highlight,size:fo.SIZE.lg,onClick:a},F("extension_wallet_btc_btn_inscribe")),jo.default.createElement(fo,{block:!0,type:fo.TYPE.highlight,size:fo.SIZE.lg,disabled:!0},F("wallet_extension_send_btn_continue")));return jo.default.createElement(X,{checkEmpty:!1,inputAmount:g,renderError:c,classes:{content:I?Ms.content:""},slot:{bottom:I?jo.default.createElement(lf,{loading:C,list:f,request:A,onSelected:w=>{t(Tt({name:"brc20UtxoList",value:w}))}}):null,footer:f.length===0&&Number(h)>0?M:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:n.length===0,onClick:()=>{o.push(`${zo}/${e.coinId}${er}?type=${m}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:F("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:jo.default.createElement(jo.default.Fragment,null,(Number(h)>0||Number(E)>0)&&jo.default.createElement(yr,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:h,availableWithoutSpendingDisplay:y,availableReceiving:E,availableReceivingDisplay:k,goToInscribe:a}))}}})}var Mf=DI;s();i();var Of=u(x()),Rs=u(No());function MI(){let{coinId:o}=(0,Rs.useParams)(),t=(0,Rs.useHistory)(),e=Mt(),r=_();return Of.default.createElement(ld,{onConfirm:()=>{t.push(`${zo}/${o}${rr}?type=${e}&from=${r}`)}})}var Rf=MI;var OI={[Dt.SEND]:Mf,[Dt.INSCRIBE]:Rf};function RI(){let o=Mt(),t=OI[o];return t?Uf.default.createElement(t,null):null}var Wf=RI;s();i();var il=u(x());s();i();var Do=u(x()),Ge=u(b()),el=u(No());H();s();i();var on=u(x());s();i();var Rt=u(x()),Gf=u(Ft());H();s();i();var We={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var UI=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:r,symbol:n}=o;return Rt.default.createElement(V.FlexBox,{justify:"space-between",align:V.ALIGN.center,className:We.utxoTextWrap},Rt.default.createElement(V.FlexBox,{align:V.ALIGN.center},Rt.default.createElement(Y.Text,{className:We.utxoText,ellipsis:{tooltip:!0}},t),e&&Rt.default.createElement(Fn,{className:We.badge,color:Fn.COLOR.green,type:Fn.TYPE.rect},F("extension_wallet_transaction_label_signature"))),Rt.default.createElement(V.FlexBox,{align:V.ALIGN.center,className:(0,Gf.default)(We.utxoText,We.utxoTextAmount)},Rt.default.createElement(Y.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},r),Rt.default.createElement(Y.Text,{inherit:!0,strong:!0,className:We.utxoTextSymbol},n)))},Vf=(0,Rt.memo)(UI);s();i();var Hf={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var WI=({utxos:o})=>on.default.createElement(V.Box,{className:Hf.utxosBlock},o.map((t={},e)=>{let{address:r,coinAmount:n,isNeedToSign:a,symbol:c}=t;return on.default.createElement(Vf,{key:e,address:r,coinAmount:n,isNeedToSign:a,symbol:c})})),fa=(0,on.memo)(WI);go();s();i();var tn=u(b());$o();s();i();go();wo();Ne();Be();Fo();var Us=async({walletId:o,signedTx:t,coinId:e,coinAmount:r,fromAdr:n,toAdr:a,serviceCharge:c,txHash:m,walletType:d,txType:g,extJson:p})=>{let f=Jo.postTx,A=await so().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),T={};e==1&&(T.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:I}=await rt(f,{signedTx:t,coinId:e,coinAmount:r,fromAdr:n,toAdr:a,serviceCharge:c,txSource:nt.NORMAL,txHash:m,accountId:o,walletType:d,...T,extJson:p,txType:g},{headers:A});return I};var qf=(o,t)=>!o||!o.length?"0":o.reduce((r,n)=>{let c=(n.nftLocaltionVOs||[]).reduce((m,d)=>d.nftId===t?uo(m,d.value):m,"0");return uo(r,c)},"0"),la=({address:o,amount:t="0",satAmount:e="0",tokenType:r="FT",atomicalId:n},a=546)=>(e=Ko(e,0)?e:t,{address:o,amount:we(e,a)?a:Number(e),data:[{atomicalId:n,type:r,amount:Number(t)}]}),Kf=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:qo(r,t)}),Jf=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:qo(r,t)});Fo();s();i();var Yf=u(x()),pa=u(b());Ao();function GI(o){let t=(0,pa.useSelector)(Et),e=_(),r=(0,pa.useSelector)(at),n=Ot(),a=N(),c=as(t);return(0,Yf.useCallback)(async m=>{if(!m.length)return null;let d={address:e,feePerB:n,inputs:[...r.map(({txHash:p,vout:f,coinAmount:A})=>({vOut:f,txId:p,amount:A})),...m.map(({txHash:p,vout:f,coinAmount:A})=>({vOut:f,txId:p,amount:A}))],outputs:[...r.map(({coinAmount:p})=>({amount:p,address:a}))]};return await Vm(d,e,In,t,{fake:o===Ss.CAL_FEE&&c})},[r,n])}var zf=GI;function VI(){let o=(0,tn.useDispatch)(),{coin:t,baseCoin:e}=S(),r=(0,tn.useSelector)(at),n=_(),a=N(),c=$(),m=K(),d=(0,tn.useSelector)(Et),g=zm(d),p=Bo(),A=Ic(t)?Eo.BRC20_SEND:Eo.BRC30_SEND,T=zf(Ss.CONFIRM),I=Ps({coinId:e?.coinId}),C=Ot(),h=Ir({address:n,coinId:t.coinId,currencyId:p,txType:A,protocolId:kn(t.chainId)}),y=cu(d),E=async M=>{try{await y();let w=await T(M.utxoList||[]),P=await To(t.localType,w),v=g?.serverWalletType,O={txSource:nt.NORMAL,toAdr:a,coinId:t.coinId,txHash:P,signedTx:w,walletId:d,serviceCharge:c,fromAdr:n,coinAmount:m,walletType:v,txType:A,extJson:JSON.stringify({nftIds:r.reduce((D,G)=>[...D,...(G.nftLocaltionVOs||[]).map(({nftId:Z})=>Z)],[])})},L=await Us(O);no({tx_id:L})}catch(w){w?.error_message&&ee.error(w?.error_message)}};return async()=>{let M=await I({from:n,coinAmount:0,serviceCharge:c,feeRate:C}),w=M.utxoList||[];return o(Tt({name:"feeUtxoList",value:w||[]})),await h([...r||[],...w||[]],Ga),await E(M)}}var Zf=VI;s();i();var $f=u(b());function HI(){let o=(0,$f.useDispatch)(),e=[hu()],{runErrorFns:r}=gr(e);ps(r,n=>{o(jc(n))})}var Xf=HI;s();i();var jf=u(x()),en=u(b());function Qf(){let o=(0,en.useDispatch)(),t=da();(0,jf.useEffect)(()=>{o(Tt({name:"signInfo",value:t}))},[t])}function ol(){let o=Mo(),t=(0,en.useDispatch)(),e=_(),r=N(),n=lo(),a=Ot(),c=(0,en.useSelector)(at),[m,d,g]=hs({coinId:o,toAddr:r,walletId:n,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(p,f)=>{t(J(p)),t(Tt({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:m,fee:d,feeError:g}}s();i();var tl={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function qI(){let o=lr(),t=_(),e=N(),r=$(),n=(0,Ge.useSelector)(at),a=(0,Ge.useSelector)(am),{baseCoin:c}=S(),m=(p,f)=>p.map(({coinAmount:A})=>{let T=_o(A,10**c.decimals);return{address:Yi(f),coinAmount:o(T,c,{useApproximate:!1}),symbol:c.symbol}}),d=(0,Do.useMemo)(()=>m([...n,...a],t),[n,a]),g=(0,Do.useMemo)(()=>{let p=m(n,e),f=a.reduce((A,{coinAmount:T})=>uo(A,T),"0");if(Ko(f,r)){let A=_o(qt(f,r),10**c.decimals);p.push({address:Yi(t),coinAmount:o(A,c,{useApproximate:!1}),symbol:c.symbol})}return p},[n,a,r]);return Do.default.createElement(St,{space:32},Do.default.createElement(Yr,{title:F("extension_wallet_transaction_text_input")},Do.default.createElement(fa,{utxos:d})),Do.default.createElement(Yr,{title:F("extension_wallet_transaction_text_output")},Do.default.createElement(fa,{utxos:g})))}function KI(){let o=(0,Ge.useDispatch)(),[t,e]=(0,Do.useState)(!1),{coinId:r}=(0,el.useParams)(),n=Bo(),a=(0,Ge.useSelector)(cm),c=Zf(),{signInfo:m}=(0,Ge.useSelector)(zn),d=pr(),g=Ot(),{feeLoading:p,fee:f,feeError:A}=ol(),T=_o(f,g),I=h=>{o(Tt({name:"selectedSat",value:h}))};Qf(),Xf();let C=m?.transferReminder;return Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(Q,{classes:{network:tl.network},slot:{bottom:Do.default.createElement(qI,null)},defaultMessage:C,networkFeeProps:{loading:p,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Do.default.createElement(fd,{currencyId:n,bytes:T,value:a,coinId:r,signInfo:m,onChange:I,visible:t,onClose:()=>{e(!1)},supportDecimal:!0}))}var rl=KI;s();i();var Ws=u(x()),nl=u(No());go();function JI(){let o=(0,nl.useHistory)(),t=Bt();return(0,Ws.useEffect)(()=>{yn(t,"0")&&o.go(-1)},[t]),Ws.default.createElement(pd,{onConfirm:()=>{o.replace(Wc)}})}var sl=JI;var YI={[Dt.SEND]:rl,[Dt.INSCRIBE]:sl};function zI(){let o=Mt(),t=YI[o];return t?il.default.createElement(t,null):null}var al=zI;s();i();var cl=u(x());function ZI({children:o}){let e=dt().get("from");return cl.default.createElement(Lo,{fromAddress:e},o)}var ml=ZI;var $I={match:(o,t,e)=>et({coinId:o})&&[W.BRC_20,W.FRACTAL_BRC20].includes(e),Container:ml,pages:{AddressPage:Wf,AmountPage:af,ConfirmPage:al}},ul=$I;s();i();s();i();var dl=u(x());s();i();var XI=()=>{let{initialType:o}=Ym();return async t=>{let{isValid:e}=await gs(t);return e&&Um(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},jI=()=>[XI()],Gs=jI;var QI=()=>{let o=Gs(),t=_r();return dl.default.createElement(j,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},fl=QI;s();i();var Ie=u(x());H();Fo();s();i();var Uo=u(x()),Te=u(b());$o();H();Fo();Ao();s();i();var tS=()=>{let o=(0,Te.useDispatch)(),t=(0,Te.useSelector)(ar),e=(0,Uo.useCallback)(r=>{o(Xn({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},eS=({fromAddr:o,toAddr:t,protocolId:e,minOutput:r,sendAmountInt:n,transferInputs:a})=>{let c=(0,Te.useDispatch)();return(0,Uo.useMemo)(()=>{if(W.ARC_20!==e)return null;if(!a||a.length===0||B.eq(n,0))return c($i([])),null;let m=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,g=la({address:t,amount:n,tokenType:m,atomicalId:d},r),p=qf(a,d),f=B.sub(p,n),A=la({address:o,amount:f,tokenType:m,atomicalId:d},r),T=[];return B.lte(f,0)?T.push(g):B.lt(f,r)?T.push(g,A):B.gte(f,r)&&T.push(A,g),c($i(T)),T},[e,a,n,t,r,o,c])},rS=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:r,minOutput:n,isXrc20Token:a,protocolId:c,sendAmountInt:m})=>{let d=eS({fromAddr:o,minOutput:n,protocolId:c,sendAmountInt:m,toAddr:t,transferInputs:r});return(0,Uo.useMemo)(()=>!a||W.SRC_20===c||!r?.length?null:W.ARC_20===c&&d?d:W.RUNES===c?[{address:t,amount:n,data:{id:e,amount:m}}]:W.RUNEMAIN===c||W.FRACTAL_RUNES?[{address:t,amount:n,data:{id:e,amount:m}}]:[{address:t,amount:Number(m),...Bu(r[0],c)}],[e,a,n,c,m,t,r,d])},nS=({coin:o,coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:c,isXrc20Token:m})=>{let[,d]=xs({coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:c,utxoType:Xo.BRC20_CONVERTIBLE},{ready:o&&m&&r!==W.SRC_20});return[null,d]},sS=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:r,inscriptionOutput:n})=>(0,Uo.useMemo)(()=>o===22?546:t?r===W.SRC_20?n||790:"0":e,[o,t,e,r,n]),iS=({coin:o,isXrc20Token:t,protocolId:e,satBytes:r,transferInputs:n})=>(0,Uo.useMemo)(()=>!o||!r?!1:!(e&&t&&e!==W.SRC_20&&!n?.length),[o,t,e,r,n?.length]),aS=({coin:o,protocolId:t})=>(0,Uo.useMemo)(()=>{if(o?.address&&[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(t))return Ha(o?.address?.split("-"))},[o?.address,t]),cS=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:r})=>(0,Uo.useMemo)(()=>{if(t&&e===W.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:r})}},[o?.name,t,e,r]),mS=({coinId:o,walletId:t,satBytes:e,address:r,isXrc20Token:n,coinBalance:a})=>{let c=(0,Te.useDispatch)(),[m,d]=Jr({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:g=>{c(o!==22&&!n?bo(g):bo(a?.coinAmountInt)),c(kt(g))}});return[m,d]},uS=({coinId:o,walletId:t,protocolId:e,tick:r,address:n})=>{let a=(0,Te.useDispatch)(),[c,m]=Jr({coinId:o,walletId:t,protocolId:e,tick:r,address:n,coinAmount:"0",utxoType:Xo.BRC20_CONVERTIBLE},{ready:[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(bo(d))}});return[c,m]},dS=({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:n,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:p,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:T,availableSendCoinAmountInt:I,sendAmountInt:C},{ready:h,networkFeeInt:y})=>{let E=(0,Te.useDispatch)(),[k,M,w]=hs({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:n,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:p,inscriptionData:f,canTransferAmount:o===22||A?T:I,...o===22?{omni:{coinType:31,amount:C}}:{}},{ready:h,onSuccess:P=>{Math.abs(Number(B.sub(P,y)))!==parseInt(n,10)&&(E(J(P)),E(R(!1)))},onError:P=>{E(R(P))}});return[k,M,w]},fS=()=>{let o=Mo(),t=_(),e=N(),r=lo(),n=Zo(o),a=n?.protocolId,c=vu(a),m=n?.baseCoinId||o,d=De(t,r,n?.localType),g=Bt(),p=$(),f=K(),A=pr(),T=Oo(),I=fs(),[,C]=$t({protocolId:a,coinId:o,address:t,chainId:n?.chainId}),{inscriptionOutput:h,minOutput:y}=C||{},[E,k]=tS(),M=E?.satBytes;(0,Uo.useEffect)(()=>{if(!M&&C?.normal&&k({level:Yo.STANDARD,satBytes:C?.normal}),M&&E?.level!==Yo.CUSTOM){let Pe=C[zr[E?.level]?.satBytes];k({...E,satBytes:Pe})}},[C]);let w=Zt(o,void 0,{addressType:d}),P=sS({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:h}),v=aS({coin:n,protocolId:a}),[,O]=nS({coin:n,coinId:o,walletId:r,protocolId:a,tick:v,address:t,coinAmount:f,isXrc20Token:c}),L=rS({fromAddr:t,toAddr:e,coinTick:v,transferInputs:O,minOutput:y,isXrc20Token:c,protocolId:a,sendAmountInt:f}),D=(0,Uo.useMemo)(()=>{if(O?.length)return O.map(({txHash:Pe,vout:Dr})=>`${Pe}-${Dr}`)},[O]),G=iS({coin:n,isXrc20Token:c,protocolId:a,satBytes:M,transferInputs:O}),Z=cS({coin:n,isXrc20Token:c,protocolId:a,sendAmount:g}),U=(0,Uo.useMemo)(()=>a===W.SRC_20?{protocolId:a,utxoType:Xo.BRC20_CONVERTIBLE}:{utxoType:Xo.TRANSFER,needFilteredUtxo:[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(a)?D:void 0},[D,a]),[oo,z]=mS({coinId:o,walletId:r,satBytes:M,address:t,isXrc20Token:c,coinBalance:w}),[ho,Vo]=uS({coinId:o,walletId:r,protocolId:a,tick:v,address:t}),[te,,Vt]=dS({coinId:o,toAddr:e,walletId:r,fromAddr:t,satBytes:M,inputs:O,outputs:L,networkFee:p,revealOutValue:h,coinAmount:P,utxoParams:U,inscriptionData:Z,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:I,sendAmountInt:f},{ready:G,networkFeeInt:p}),Ee=(0,Uo.useMemo)(()=>[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(a)?z===void 0||Vo===void 0:z===void 0,[z,a,Vo]),be=(0,Uo.useMemo)(()=>n?.chainId!==ac&&n?.chainId!==cc||o===22?!1:!!(n&&!a||W.RUNEMAIN===a),[n,o,a]);return{coin:n,toAddr:e,coinId:o,walletId:r,signInfo:C,feeError:Vt,fromAddr:t,protocolId:a,baseCoinId:m,feeLoading:te,addressType:d,sendAmountInt:f,networkFeeInt:p,transferInputs:O,transferOutputs:L,isXrc20Token:c,utxoParams:U,initLoading:Ee,mergedCoinAmount:P,src20InscriptionData:Z,sendCoinAvailableAmount:T,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:E,setSelectedNetworkFeeLevel:k,loading:oo||te||ho,supportDecimal:be}},Vs=fS;s();i();var Cl=u(x());H();Fo();s();i();var gl=u(x());H();s();i();s();i();var ll=u(b());var pl=()=>(0,ll.useSelector)(ar).transferOutputs;var Al=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:r,coin:n})=>{let a=pl();return(0,gl.useCallback)(c=>o?B.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:n?.symbol},type:ro.COMMON_ERROR}:Jf(a,r)?{key:"wallet_extension_error_dust_limit_transaction",type:ro.COMMON_ERROR}:Kf(a,r)?{key:"wallet_extension_error_dust_asset_continue",type:ro.COMMON_TIP}:null:null,[o,t,e,r,n,a])};var Tl=o=>{let t=Mo(),e=Zo(t),r=e?.baseCoinId===0,a=e?.protocolId===W.ARC_20,c=B.div(o,10**e?.decimals),m=Oo(),d=B.mul(c,2),g=Al({isArc20Token:a,sendCoinBalance:m,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,Cl.useCallback)(p=>{if(!o)return null;let f=g(p);return f||(r&&B.lt(p,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:ro.COMMON_ERROR}:null)},[o,g,r,c,e?.symbol])},Il=o=>{let t=Tl(o);to([t])},Sl=o=>{let t=Tl(o);eo([t])};s();i();var Qo=u(x());H();var lS=()=>{let o=Nt(),{coin:t}=S();return(0,Qo.useCallback)(r=>{let n="";return r.key&&(n=F(r?.key,r?.args)),r?.type===ro.BALANCE_INSUFFICIENT?Qo.default.createElement(Qo.default.Fragment,null,Qo.default.createElement(V.Box,{className:Po.wrap},n),Qo.default.createElement(V.Box,{className:Po.wrap},Qo.default.createElement(le,{coin:t,receiveOnly:!0}))):r?.type===ro.FEE_BALANCE_INSUFFICIENT?Qo.default.createElement(Qo.default.Fragment,null,Qo.default.createElement(V.Box,{className:Po.wrap},n),Qo.default.createElement(V.Box,{className:Po.wrap},Qo.default.createElement(le,{coin:o}))):n},[t,o])},xl=lS;s();i();var hl={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function pS(){let{coin:o,coinId:t,signInfo:e,initLoading:r,addressType:n,fromAddr:a}=Vs(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:m}=ge(),{lockedAmount:d}=dd(a,o),g=Le(d,{decimals:o.decimals});Il(e?.minOutput);let p=xl(),f=(0,Ie.useMemo)(()=>et({coinId:t})?F("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===W.SRC_20?F("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===W.ARC_20?F("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===W.RUNEMAIN||o?.protocolId===W.FRACTAL_RUNES?F("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return Ie.default.createElement(X,{isGlobalLoading:r,renderError:p,totalAmountProps:{type:"amount",title:Ie.default.createElement(Ie.default.Fragment,null,F("extension_defi_text_available_balance"),!!f&&Ie.default.createElement(zt,{size:zt.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:hl["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?Ie.default.createElement(yr,{lockedAmount:d,lockedAmountDisplay:g,pendingXrc:c,pendingXrcDisplay:m,addressType:n,coinId:t}):void 0}}})}var _l=pS;s();i();var gt=u(x()),Hs=u(b()),yl=u(No()),qs=u(q()),Fl=u(qm());H();Fo();xc();var gS=546;function AS(){let o=(0,yl.useHistory)(),t=(0,Hs.useDispatch)(),[e,{toggle:r}]=(0,qs.useBoolean)(!1),{coin:n,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:p,utxoParams:f,protocolId:A,baseCoinId:T,feeLoading:I,addressType:C,isXrc20Token:h,networkFeeInt:y,sendAmountInt:E,transferInputs:k,transferOutputs:M,mergedCoinAmount:w,availableFeeCoinAmountInt:P,selectedNetworkFeeLevel:v,setSelectedNetworkFeeLevel:O,src20InscriptionData:L,supportDecimal:D}=Vs(),G=Bo(),Z=(0,Hs.useSelector)(On),U=Pn[n?.localType]?.[C],{showManageUTXO:oo}=ks(n,U,!0);Sl(p?.minOutput,a);let z=as(d),[ho,Vo]=(0,gt.useState)(!1),te=(0,qs.useMemoizedFn)(Cn=>oo&&[Sr.BALANCE_INSUFFICIENT,Sr.FEE_BALANCE_INSUFFICIENT].includes(Cn)?[{onClick:async()=>{await t(sr(!1));let Ht=Fl.default.stringify({addressType:C,coinId:T},{skipEmptyString:!0,skipNull:!0}),Ke=Ht?`?${Ht}`:"";o.push(Ln+Ke)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),Vt=Kr({coinId:a,walletId:d,address:g,utxoType:Xo.TRANSFER,satBytes:v?.satBytes,...f}),Ee=Mu({coinId:a,toAddr:c,walletId:d,fromAddr:g,protocolId:A,networkFee:y,localType:n?.localType,outputs:M,inscriptionData:L,dustSize:h?void 0:p?.minOutput,satBytes:v?.satBytes,coinAmount:a===22?gS:E,...a===22?{omni:{coinType:31,amount:E}}:{},extraPublishParams:{coinAmount:E,txType:h?Eo.BRC20_SEND:Eo.TRANS_OUT}}),be=Ir({coinId:a,currencyId:G,txType:h?Eo.BRC20_SEND:Eo.TRANS_OUT,protocolId:A,address:g}),Pe=(0,gt.useCallback)(async()=>{if(await Tr()){let Ht=[];Ht=await Vt(w,y),Ht=[...k||[],...Ht],await be(Ht,()=>{o.goBack()}),Vo(!0);let Ke=await Ee({utxoList:Ht});return no({tx_id:Ke}),Ke}return Vo(!1),Promise.reject()},[Vt,w,y,k,be,Ee,o,Z]),Dr=(0,gt.useMemo)(()=>[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(A)&&!k?.length?!0:m,[m,A,k?.length]);return gt.default.createElement(gt.default.Fragment,null,gt.default.createElement(Q,{addressType:C,confirmButtonProps:{disabled:Dr,onSubmit:Pe},networkFeeProps:{onClick:r,loading:I,feeLevel:v?.level},renderTipActions:te,defaultMessage:et({coinId:T})&&p?.transferReminder,canTransferAmount:et({coinId:T})&&P}),gt.default.createElement(Fs,{visible:e,coinId:T,signInfo:p,currencyId:G,estimatedFee:y,value:v,onChange:O,onToggleVisible:r,supportDecimal:D}),gt.default.createElement(rd,{visible:z&&ho}))}var El=AS;s();i();var bl=u(x());function CS({children:o}){let e=dt().get("from");return bl.default.createElement(Lo,{fromAddress:e},o)}var Pl=CS;var TS={match:o=>Nm(o),Container:Pl,pages:{AddressPage:fl,AmountPage:_l,ConfirmPage:El}},kl=TS;s();i();Fo();s();i();var Bl=u(x()),vl=u(b()),Ks=u(No());H();s();i();var wl=u(x());var IS=()=>{let o=_r(),t=e=>e.filter(n=>/^(bc1p)/.test(n.address));return(0,wl.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},Nl=IS;var SS=()=>{let{coinId:o}=(0,Ks.useParams)(),t=_(),e=(0,Ks.useHistory)(),r=Nl(),n=(0,vl.useSelector)(io),a=Gs();return Bl.default.createElement(j,{addressProps:{errorFns:a,extraProps:{filterAddress:r}},confirmButtonProps:{onClick:async()=>{let{isValid:m}=await gs(n);if(m)e.push(`${zo}/${o}${er}?from=${t}`);else{let d=tt.warn({alignBottom:!1,title:F("wallet_extension_cat_dialog_title_risk_non_taproot"),text:F("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:F("wallet_extension_cat_icu_taproot")}),confirmText:F("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{d.destroy()}})}}}})},Ll=SS;s();i();var ht=u(x()),zl=u(b()),Aa=u(Ft());H();s();i();var Dl=u(x());H();var xS=o=>{let t=Mo(),e=Zo(t),r=Bt();return(0,Dl.useCallback)(()=>B.gt(r,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:ro.COMMON_ERROR}:null,[e?.symbol,o,r])},Ml=o=>{let t=xS(o);to([t])},Ol=()=>{eo()};s();i();var ot=u(x()),Se=u(b()),ga=u(q());H();wo();Fo();Be();Ne();var Rl=()=>{let o=(0,Se.useDispatch)(),t=(0,Se.useSelector)(ar),e=(0,ot.useCallback)(r=>{o(Xn({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},Ul=({coin:o,coinId:t,walletId:e,protocolId:r,tick:n,address:a})=>{let[,c]=xs({coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:"0",utxoType:Xo.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},Wl=({coin:o})=>(0,ot.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),Gl=({coinId:o,walletId:t,satBytes:e,address:r,coinBalance:n})=>{let a=(0,Se.useDispatch)(),[c,m]=Jr({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:d=>{a(bo(n?.coinAmountInt)),a(kt(d))}});return[c,m]},Vl=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((r,n)=>{let a=n?.tokenAmount;return B.add(r,a)},"0");return B.div(e,10**t?.decimals)},hS=({sendAmountInt:o,UTXOList:t})=>(0,ot.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],r="0";for(let n=0;n<t.length;n++){let a=t[n],c=a?.tokenAmount;if(r=B.add(r,c),e.push(a),B.gte(r,o))break}return e},[t,o]),_S=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:r})=>{let n=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,Se.useDispatch)(),{error:m,loading:d,data:g}=(0,ga.useRequest)(async()=>{if(!o||o.length===0)return[];if(!n||!a)return[];let p=o.map(I=>({txHash:I.txHash,tokenAddress:n,minterAddress:a,chainIndex:e})),f=await so().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),T=(await rt(Jo.getCat20GrandFatherRawTx,{rawTxRequestList:p},{headers:f}))?.data;if(T&&!T.find(I=>I.txStatus!==0))return T;throw c(R(!0)),Cc.error({title:F("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[m,d,g]},yS=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:r})=>(0,ot.useMemo)(()=>{if(!o||!e||!e.length)return null;let n=o?.extInfo,a={minterAddr:n?.minterAddr,tokenAddr:n?.tokenAddr,info:{max:n?.max,name:n?.name,limit:n?.limit,symbol:n?.symbol,premine:"0",decimals:n?.decimals,minterMd5:n?.minterMd5},tokenId:n?.tokenId,revealTxid:n?.revealTxid,revealHeight:n?.revealHeight,genesisTxid:n?.genesisTxid,name:n?.name,symbol:n?.symbol,decimals:n?.decimals,minterPubKey:n?.minterPubKey,tokenPubKey:n?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:n?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:r,amount:d.tokenAmount}})),m=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:m}},[o,e,t,r]),FS=({coinId:o,fromAddr:t,toAddr:e,satBytes:r,coinAmount:n,protocolId:a,CAT20TxParam:c,networkFeeInt:m,...d})=>{let g=(0,Se.useDispatch)(),p=Lu({coinId:o,fromAddr:t,toAddr:e,satBytes:r,coinAmount:n,protocolId:a,...d}),f=Kr({coinId:o,address:t,utxoType:Xo.TRANSFER}),A=async()=>{g(mo(!0));let C=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],h=JSON.stringify(c?.tokenMetadata),y=JSON.stringify(c?.tokens),E=c?.tokenPrevTxs,{commitTx:k,revealTx:M}=await p({feeInputs:C,tokenMetadata:h,tokens:y,tokenPrevTxs:E}),w=B.add(k,M);if(C=await f(w),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),C.length===1)return g(mo(!1)),{mergeTx:"0",commitTx:k,revealTx:M};let P=await p({feeInputs:C,tokenMetadata:h,tokens:y,tokenPrevTxs:E}),v=P.mergeTx,O=B.add(v,w),L=C.reduce((D,G)=>{let Z=G?.amount;return B.add(D,Z)},"0");for(;B.lt(L,O);)C=await f(O),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),L=C.reduce((D,G)=>{let Z=G?.amount;return B.add(D,Z)},"0"),P=await p({feeInputs:C,tokenMetadata:h,tokens:y,tokenPrevTxs:E}),v=P.mergeTx,O=B.add(v,w);return g(mo(!1)),{mergeTx:v,commitTx:k,revealTx:M}},{error:T,data:I}=(0,ga.useRequest)(async()=>await A(),{debounceWait:500,ready:!!r&&!!c,refreshDeps:[r],onSuccess:C=>{let h=B.add(B.add(C.mergeTx,C.commitTx),C.revealTx);Math.abs(Number(B.sub(h,m)))!==parseInt(r,10)&&(g(J(h)),g(R(!1)))},onError:C=>{g(R(C))}});return[T,I]},Hl=()=>{let o=Mo(),t=_(),e=lo(),r=Zo(o),n=r?.protocolId,a=De(t,e,r?.localType),c=K(),m=Oo(),[,d]=$t({protocolId:n,coinId:o,address:t,chainId:r?.chainId}),[g,p]=Rl(),f=g?.satBytes;(0,ot.useEffect)(()=>{if(!f&&d?.normal&&p({level:Yo.STANDARD,satBytes:d?.normal}),f&&g?.level!==Yo.CUSTOM){let k=d[zr[g?.level]?.satBytes];p({...g,satBytes:k})}},[d]);let A=Zt(o,void 0,{addressType:a}),T=Wl({coin:r}),[,I]=Ul({coin:r,coinId:o,walletId:e,protocolId:n,tick:T,address:t,coinAmount:c}),C=Vl({coin:r,UTXOList:I}),[h,y]=Gl({coinId:o,walletId:e,satBytes:f,address:t,coinBalance:A}),E=(0,ot.useMemo)(()=>y===void 0,[y]);return{initLoading:E,loading:h||E,sendCoinAvailableAmount:m,CAT20CanTransferAmount:C}},ql=()=>{let o=Mo(),t=_(),e=N(),r=lo(),n=Zo(o),a=n?.protocolId,c=n?.baseCoinId||o,m=De(t,r,n?.localType),d=Bt(),g=$(),p=K(),f=pr(),A=Oo(),T=fs(),[,I]=$t({protocolId:a,coinId:o,address:t,chainId:n?.chainId}),[C,h]=Rl(),y=C?.satBytes,E=(0,Se.useDispatch)();(0,ot.useEffect)(()=>{E(mo(!0))},[E]),(0,ot.useEffect)(()=>{if(!y&&I?.normal&&h({level:Yo.STANDARD,satBytes:I?.normal}),y&&C?.level!==Yo.CUSTOM){let ho=I[zr[C?.level]?.satBytes];h({...C,satBytes:ho})}},[I]);let k=Zt(o,void 0,{addressType:m}),M=Wl({coin:n}),[,w]=Ul({coin:n,coinId:o,walletId:r,protocolId:a,tick:M,address:t,coinAmount:p}),P=Vl({coin:n,UTXOList:w}),v=hS({sendAmountInt:p,UTXOList:w}),[O,L,D]=_S({selectedUtxo:v,signInfo:I,chainIndex:n?.chainId,walletId:r}),G=yS({signInfo:I,selectedUtxo:v,grandFatherRawTxs:D,address:t}),[,Z]=FS({coinId:o,fromAddr:t,toAddr:e,satBytes:y,coinAmount:p,protocolId:a,CAT20TxParam:G,networkFeeInt:g}),[U,oo]=Gl({coinId:o,walletId:r,satBytes:y,address:t,coinBalance:k}),z=(0,ot.useMemo)(()=>oo===void 0,[oo]);return{coin:n,toAddr:e,coinId:o,walletId:r,signInfo:I,satBytes:y,fromAddr:t,protocolId:a,baseCoinId:c,addressType:m,sendAmount:d,sendAmountInt:p,networkFeeInt:g,feeData:Z,selectedUtxo:v,initLoading:z,rawTxError:O,sendCoinAvailableAmount:A,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:C,setSelectedNetworkFeeLevel:h,CAT20CanTransferAmount:P,CAT20GrandFatherRawTxs:D,CAT20TxParam:G,loading:U||L}},Kl=({coinId:o,toAddr:t,fromAddr:e,satBytes:r,walletId:n,localType:a,networkFee:c,coinAmount:m,coinAmountInt:d,protocolId:g,dustSize:p=Nu,feeData:f,CAT20TxParam:A,history:T,...I})=>{let C=Zo(o),h=Bo(),y=lo(),E=n||y,k=km(a),M=Kr({coinId:o,address:e,utxoType:Xo.TRANSFER}),w=Ir({coinId:o,currencyId:h,txType:Eo.BRC20_SEND,protocolId:g,address:e}),P=Du({coinId:o,toAddr:t,walletId:n,fromAddr:e,satBytes:r,localType:k,coinAmount:d,networkFee:c,dustSize:p,protocolId:g,...I}),v=au({walletId:E});return(0,ot.useCallback)(async()=>{let O=await M(c),L=O.map(Vi=>({txId:Vi.txHash,vOut:Vi.vout,amount:Vi.coinAmount}));await w(O,()=>{T.goBack()});let D=JSON.stringify(A?.tokenMetadata),G=JSON.stringify(A?.tokens),Z=A?.tokenPrevTxs,U=await P({feeInputs:L,tokenMetadata:D,tokens:G,tokenPrevTxs:Z}),{mergeTx:oo,commitTx:z,revealTx:ho}=U,Vo=[],te=JSON.stringify({protocolId:W.CAT20,broadcastType:1,nftIds:[]}),Vt,Ee=await To(a,z),be=await To(a,ho);oo&&(Vt=await To(a,oo));let Pe={signedTx:oo,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:C?.baseCoinId,txHash:Vt,txType:Eo.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:te},Dr={signedTx:z,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:C?.baseCoinId,txHash:Ee,txType:Eo.CAT20_NOT_SHOWN,dependTx:Vt?[Vt]:[],itemId:"commitTx",extJson:te},Cn={signedTx:ho,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:be,txType:Eo.BRC20_SEND,dependTx:[Ee],itemId:"revealTx0",extJson:te};oo&&Vo.push(Pe),Vo.push(Dr,Cn);let Ke=(await v(Vo))[be];no({tx_id:Ke})},[M,c,w,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,P,a,e,f,C?.baseCoinId,t,d,o,v,T])};s();i();var Co=u(x());H();var Jl=u(Ft()),ES=()=>{let o=Nt(),{coin:t}=S();return(0,Co.useCallback)(r=>{let n="";if(r.key&&(n=F(r?.key,r?.args)),r?.type===ro.BALANCE_INSUFFICIENT)return Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(V.Box,{className:Po.wrap},n),Co.default.createElement(V.Box,{className:Po.wrap},Co.default.createElement(le,{coin:t,receiveOnly:!0})));if(r?.type===ro.FEE_BALANCE_INSUFFICIENT)return Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(V.Box,{className:Po.wrap},n),Co.default.createElement(V.Box,{className:Po.wrap},Co.default.createElement(le,{coin:o})));let a=()=>{tt.action({title:" ",children:Co.default.createElement("div",{className:Po.dlgContainer},Co.default.createElement("div",{className:Po.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),Co.default.createElement("div",{className:Po.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Co.default.createElement("div",{className:(0,Jl.default)(Po.dlgTitle,Po.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),Co.default.createElement("div",{className:Po.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return r?.key==="wallet_extension_cat_max_send_utxo"?Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(V.Box,{className:Po.wrap},n,Co.default.createElement(ze,{className:"okx-wallet-plugin-information-circle",onClick:a}))):n},[t,o])},Yl=ES;s();i();var Ut={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function bS(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:r}=Hl();Ml(r);let n=Yl(),a=(0,zl.useDispatch)(),c=Ts(),m=()=>{a(Xc(!1)),c()},d=()=>{tt.action({title:" ",children:ht.default.createElement("div",{className:Ut.dlgContainer},ht.default.createElement("div",{className:Ut.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),ht.default.createElement("div",{className:Ut.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),ht.default.createElement("div",{className:(0,Aa.default)(Ut.dlgTitle,Ut.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),ht.default.createElement("div",{className:Ut.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return ht.default.createElement(X,{isGlobalLoading:o,renderError:n,customMaxAmount:r,confirmButtonProps:{loading:t,onClick:m},totalAmountProps:{maxAmount:r,type:"amount",title:ht.default.createElement("div",{className:Ut.canTransferContainer},ht.default.createElement("div",{className:Ut.canTransferText},F("wallet_extension_cat_desc_available_utxo")),ht.default.createElement(ze,{className:(0,Aa.default)(Ut.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:d})),slot:{bottom:ht.default.createElement(yr,{catTotalAmount:e})}}})}var Zl=bS;s();i();var jt=u(x()),$l=u(b()),Xl=u(No()),Js=u(q()),jl=u(qm());H();xc();function PS(){let o=(0,Xl.useHistory)(),t=(0,$l.useDispatch)(),[e,{toggle:r}]=(0,Js.useBoolean)(!1),{coin:n,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:p,satBytes:f,sendAmount:A,sendAmountInt:T,protocolId:I,baseCoinId:C,addressType:h,networkFeeInt:y,feeData:E,selectedUtxo:k,availableFeeCoinAmountInt:M,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:P,CAT20TxParam:v}=ql(),O=Kl({coinId:a,toAddr:c,fromAddr:g,satBytes:f,walletId:d,feeData:E,localType:n?.localType,networkFee:y,coinAmount:A,coinAmountInt:T,protocolId:I,CAT20TxParam:v,history:o}),L=Bo(),D=Pn[n?.localType]?.[h],{showManageUTXO:G}=ks(n,D,!0);Ol();let Z=(0,Js.useMemoizedFn)(z=>G&&[Sr.BALANCE_INSUFFICIENT,Sr.FEE_BALANCE_INSUFFICIENT].includes(z)?[{onClick:async()=>{await t(sr(!1));let ho=jl.default.stringify({addressType:h,coinId:C},{skipEmptyString:!0,skipNull:!0}),Vo=ho?`?${ho}`:"";o.push(Ln+Vo)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),U=(0,jt.useCallback)(async()=>{await O()},[O]),oo=(0,jt.useMemo)(()=>!k?.length||m,[m,k?.length]);return jt.default.createElement(jt.default.Fragment,null,jt.default.createElement(Q,{addressType:h,confirmButtonProps:{disabled:oo,onSubmit:U},networkFeeProps:{onClick:r,feeLevel:w?.level},renderTipActions:Z,defaultMessage:et({coinId:C})&&p?.transferReminder,canTransferAmount:et({coinId:C})&&M}),jt.default.createElement(Fs,{visible:e,coinId:C,signInfo:p,currencyId:L,estimatedFee:y,value:w,onChange:P,onToggleVisible:r}))}var Ql=PS;s();i();var op=u(x());function kS({children:o}){let e=dt().get("from");return op.default.createElement(Lo,{fromAddress:e},o)}var tp=kS;var wS={match:(o,t,e)=>et({coinId:o})&&[W.CAT_20].includes(e),Container:tp,pages:{AddressPage:Ll,AmountPage:Zl,ConfirmPage:Ql}},ep=wS;s();i();Ao();s();i();var gp=u(x());var Zs=u(b());var Ta=u(q());H();s();i();var ip=u(x()),ap=u(q());s();i();H();$o();var rp=(o,t)=>{let[e,r]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:r}]}]},NS=(o,t)=>Ya(Ka([...o,...t],"assetName")).map(r=>{let n=o.find(c=>c?.assetName===r),a=t.find(c=>c?.assetName===r);return{assetName:r,amount:B.add(n?.amount||0,a?.amount||0)}}),BS=o=>{let t=o.reduce((r,n)=>{let{multiAsset:a}=n;return a?.length?[...r,...a]:r},[]),e=[];return t.forEach(r=>{let{policyId:n,assets:a}=r,c=qa(e,{policyId:n});if(c!==-1){let{assets:m}=e[c];e[c]={policyId:n,assets:NS(a,m)}}else e=[...e,r]}),e},np=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:r,contractAddress:n})=>{let{AdaWallet:a}=await qr(),c;return e===0&&t?.some(({multiAsset:m})=>!!m?.length)?c=BS(t):e!==0&&(c=rp(n,r)),a.minAda(o,c)},sp=async o=>{let{AdaWallet:t}=await qr();return t.minFee(o)},vS="999999999",LS="transfer",Ys=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:r,baseCoinId:n,contractAddress:a,minTransferAmountInt:c})=>{let m={address:o,inputs:t,ttl:vS,type:LS,changeAddress:e};return n===0?m={...m,amount:r}:m={...m,amount:c,multiAsset:rp(a,r)},m};var DS=({utxoList:o,toAddr:t,fromAddr:e,coinId:r,sendAmount:n,minTransferAmountInt:a},c)=>{let m=Zo(r),[d,g]=(0,ip.useState)("0");return(0,ap.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let p=Ys({toAddr:t,fromAddr:e,utxoList:o,contractAddress:m?.address,baseCoinId:m?.baseCoinId,sendAmount:n,minTransferAmountInt:a});try{let f=await sp({data:p});c?.(f),g(f)}catch(f){console.log(f)}})()},[m,t,e,n,a,o]),d},cp=DS;s();i();var dp=u(x()),fp=u(q());s();i();var up=u(q());Ne();Be();wo();H();s();i();var mp=u(No());var MS=()=>{let{coinId:o}=(0,mp.useParams)(),t=_(),e=lo(),[r,n]=Xm(o);return{address:t,walletId:e,coin:r||{},coinId:Number(o),baseCoin:n||{},baseCoinId:r?.baseCoinId}},Pr=MS;var OS=()=>{let o=de(),{coin:t,coinId:e,walletId:r,address:n}=Pr(),a=t?.baseCoinId;return(0,up.useMemoizedFn)(async(c,m,d)=>{let g=await so().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),p=m,f=c,A=B.add(B.add(a===0?c:d,m),d);a===0&&B.gte(A,o)&&(f=o,p="0"),a!==0&&(p=B.add(m,B.add(d,d)));let T={coinId:e,address:n,fee:p,amount:f},{data:I}=await rt(Jo.getSpecialUtxoList,T,{headers:g});return I},[e,r,n,a,o])},zs=OS;var RS=(o,t,e)=>{let[r,n]=(0,dp.useState)([]),a=zs();return(0,fp.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);n(c)})()},[o,t,e,a]),r},lp=RS;s();i();var Ca=u(q());H();var US=o=>{let t=S(),{coin:{symbol:e,baseCoinId:r,decimals:n}}=t,a=B.div(o,10**n);return(0,Ca.useMemoizedFn)(c=>r===0&&B.gt(a,0)&&B.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:Le(a,{symbol:e})},type:ro.COMMON_ERROR}:null,[a,e,r])},WS=o=>{let t=Nt(),{coin:e}=S(),r=$(),n=de(),{baseCoinId:a}=e;return(0,Ca.useMemoizedFn)(c=>{let m=B.mul(c,10**e?.decimals),d,g;a===0?(g=B.add(B.add(m,r),o),d=B.add(m,r)):(g=B.add(B.add(r,o),o),d=B.add(r,o));let p=B.sub(n,d);return Number(p)!==0&&B.lt(p,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:Le(g,{decimals:t?.decimals})},type:ro.COMMON_ERROR}:null},[a,r,n,t?.decimals,e?.decimals])},GS=o=>{let t=US(o),e=WS(o);to([t,e])},pp=GS;function VS(){let o=(0,Zs.useDispatch)(),t=$(),r=(0,Zs.useSelector)(Hn)?.minTransferInt,n=K(),a=N(),c=de(),{coin:m,coinId:d,baseCoinId:g,address:p}=Pr(),f=lp(n,t,r);return(0,Ta.useDeepCompareEffect)(()=>{(async()=>{let A=await np({contractAddress:m?.address,baseCoinId:g,utxoList:f,toAddr:a,sendAmountInt:n});o(pm({minTransferInt:A}))})()},[f,g,a,n,m?.address]),(0,Ta.useDeepCompareEffect)(()=>{g===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(bo(B.sub(c,r)))},[f,c,r]),pp(r),cp({coinId:d,toAddr:a,utxoList:f,fromAddr:p,minTransferAmountInt:r,sendAmount:n},A=>{o(J(A))}),gp.default.createElement(X,null)}var Ap=VS;s();i();var Sp=u(x());s();i();var Cp=u(b()),Tp=u(q());H();var HS=()=>{let t=(0,Cp.useSelector)(Hn)?.minTransferInt,{coin:e,coinId:r,address:n,walletId:a}=Pr(),c=is(a),m=K(),d=N(),g=$(),p=zs(),f=yo({fromAddr:n,walletId:a,localType:e?.localType});return(0,Tp.useMemoizedFn)(async()=>{try{let T=await p(m,g,t),I=Ys({toAddr:d,fromAddr:n,utxoList:T,minTransferAmountInt:t,sendAmount:m,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),C=await f({params:I}),h=await To(e?.localType,C),y={coinId:r,txHash:h,signedTx:C,walletId:a,toAdr:d,serviceCharge:g,fromAdr:n,coinAmount:m,walletType:c?.serverWalletType},E=await Us(y);no({tx_id:E})}catch(T){ee.error(T?.error_message||F("wallet_home_toast_network_error"))}},[e,m,d,t,g,c?.serverWalletType,p])},Ip=HS;function qS(){let o=Ip();return eo(),Sp.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})}var xp=qS;var KS={match:o=>o===rc,pages:{AmountPage:Ap,ConfirmPage:xp,AddressPage:j}},hp=KS;s();i();s();i();var yp=u(x());s();i();$o();Ao();var JS=()=>{let o=Lt(),t=Lm(),e=cs({factionType:xn});return[o,async r=>(await Promise.all(t.map(c=>{let m=Dn(e,c);return ue(r,c,m)}))).some(Wa)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},_p=JS;var YS=()=>{let o=_p();return yp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}}})},Fp=YS;s();i();var Pp=u(x());s();i();var Ep=u(b()),Xs=u(q());go();wo();s();i();var $s=u(x());Ao();function Ia(){let{baseCoin:o}=S(),t=N(),[e,r]=(0,$s.useState)(!1),n=cs({factionType:xn});return(0,$s.useEffect)(()=>{(async()=>{let c=Dn(n,o.coinId),m=await ue(t,o?.coinId,c);r(!m)})()},[o,t]),e}var zS=async({memo:o,fromAddress:t,toAddress:e,amountInt:r,isIBCTransfer:n,baseCoin:a,signInfo:c})=>{let{chainId:m,sequence:d,accountNumber:g,feeDemon:p,demon:f,sourceChannel:A,normal:T,gasLimit:I}=c,C={chainId:m,sequence:d,accountNumber:g,feeDemon:p,feeAmount:Ho(T,I),gasLimit:I,memo:o,fake:!0},h={fromAddress:t,toAddress:e,demon:f,amount:r},y={};if(n){let k=uo(Math.round(Date.now()/1e3),300);y={...C,type:Xe.IBC_TRANSFER,data:{...h,sourcePort:"transfer",sourceChannel:A,ibcTimeoutTimestamp:k}}}else y={...C,type:Xe.TRANSFER,data:{...h}};return await so().signTransaction(y,t,a.localType)},ZS=()=>{let o=(0,Ep.useDispatch)(),[t,{setFalse:e}]=(0,Xs.useBoolean)(!0),{coin:r}=S(),{coinId:n}=r,a=_(),c=N(),m=co(),d=Ia();return(0,Xs.useDebounceEffect)(()=>{n&&c&&m!=="0"&&(async()=>{try{let p=await Mc({coinId:n,from:a,to:c}),f=await zS({memo:"",fromAddress:a,toAddress:c,amountInt:m,isIBCTransfer:d,baseCoin:r,signInfo:p}),A=await Oc({coinId:n,from:a,inputData:f}),T=Math.ceil(Ho(p.normal,A));o(J(T)),o(es({inputData:f,signInfo:p,gasLimit:A,isIBCTransfer:d})),o(R(!1))}catch{o(R(!0))}finally{e()}})()},[n,a,c,m,d]),t},bp=ZS;function $S(){let o=bp();return to(),Pp.default.createElement(X,{confirmButtonProps:{loading:o}})}var kp=$S;s();i();var _t=u(x()),Qs=u(b()),Bp=u(q());s();i();var xe=u(x()),wp=u(Ft());H();s();i();var kr={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var XS=({value:o,onChange:t,placeholder:e,title:r=F("wallet_extension_title_memo_optional"),dashed:n=!0,error:a,errorType:c,maxLength:m=256})=>{let d=Hm();return xe.default.createElement(St,{bordered:!1},xe.default.createElement(Yr,{title:xe.default.createElement(Fm,{href:d?.sendMemoInput,className:(0,wp.default)(kr["memo-title__link"],{[kr["memo-title__link__dashed"]]:n})},xe.default.createElement(Y.Text,{inherit:!0},r))},xe.default.createElement(Kt.TextArea,{placeholder:e||F("wallet_extension_input_memoinfro"),size:Kt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:m,error:a,errorType:c,className:kr["memo-input"],inputClassName:kr["memo-input-core"],innerClassName:kr["memo-input-box"]})))},Wt=(0,xe.memo)(XS);s();i();var js=u(b());go();wo();var jS=o=>{let{coin:t,baseCoin:e}=S(),r=_(),n=co(),a=(0,js.useSelector)(io),c=(0,js.useSelector)(st),{gasLimit:m,signInfo:d,isIBCTransfer:g,gasPrice:p}=(0,js.useSelector)($n),f=vo();return po(async()=>{if(!await Tr())throw new Error("mpc error")},async()=>{let{chainId:h,sequence:y,accountNumber:E,feeDemon:k,demon:M,sourceChannel:w}=d,P={chainId:h,sequence:y,accountNumber:E,feeDemon:k,feeAmount:c,gasLimit:m,memo:o},v={fromAddress:r,toAddress:a,demon:M,amount:n},O={};if(g){let D=uo(Math.round(Date.now()/1e3),300);O={...P,type:Xe.IBC_TRANSFER,data:{...v,sourcePort:"transfer",sourceChannel:w,ibcTimeoutTimestamp:D}}}else O={...P,type:Xe.TRANSFER,data:{...v}};return await so().signTransaction(O,r,e.localType)},async h=>{let y={memo:o,gasPrice:p,gasLimit:m},E=await To(t.localType,h),k={signedTx:h,coinAmount:n,coinId:t.coinId,fromAdr:r,toAdr:a,serviceCharge:c,extJson:JSON.stringify(y),txHash:E};return await f(k)},h=>(no({tx_id:h}),h))},Np=jS;s();i();function Sa({feeInfo:o,callback:t}){let e=ds();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function QS(){let o=(0,Qs.useDispatch)(),[t,e]=(0,_t.useState)({}),[r,{toggle:n}]=(0,Bp.useToggle)(!1),{coin:a}=S(),{coinId:c}=a,m=_(),d=N(),g=co(),p=(0,Qs.useSelector)($n),f=Sa({feeInfo:t,callback:n}),[A,T]=(0,_t.useState)(""),I=Np(A),C=async()=>{await I()},h=E=>{T(E.target.value)},y=E=>{e(E),o(J(E.gasFee)),o(R(f.estimateFailed)),o(es({...p,gasLimit:E.gasAmount,gasPrice:E.gasPriceStep}))};return eo(),_t.default.createElement(_t.default.Fragment,null,_t.default.createElement(Q,{confirmButtonProps:{onSubmit:C},slot:{bottom:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement(Wt,{value:A,onChange:h}),_t.default.createElement(gd,{visible:r,coinId:String(c),address:m,inputData:p.inputData,to:d,value:g,onBack:n,onClose:n,onChange:y}))},networkFeeProps:f}))}var vp=QS;var ox={match:o=>Bm(o),pages:{AddressPage:Fp,AmountPage:kp,ConfirmPage:vp}},Lp=ox;s();i();s();i();var Vp=u(x());s();i();var Dp=u(q()),tx=()=>{let{baseCoin:o}=S();return(0,Dp.useMemoizedFn)(async t=>{let e=It(t,o.localType);return await ue(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},ex=()=>{let o=Lt(),t=tx();return[o,t]},Mp=ex;s();i();var Up=u(b()),Wp=u(q());$o();s();i();var Op=u(q());H();var rx=()=>{let o=zu();return(0,Op.useMemoizedFn)(async t=>{let e;try{e=(await Pc(t)).popupInfoList}catch(r){throw ee.error(F("wallet_extension_transaction_error_general_check_network")),r}return e?.length&&await o(e),e})},Rp=rx;var nx=10,sx=()=>{let o=(0,Up.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,Wp.useBoolean)(!1),{coin:n,baseCoin:a}=S(),c=_(),m=N(),d=vt(),g=Rp();return{onClick:async()=>{try{e();let f=await g({from:c,to:m,method:"wallet_inner_transfer",chainIndex:a?.chainId??n.chainId}),A=Va(f,"0.templeteId");o(Tm(A===nx)),d()}catch(f){console.log(f)}finally{r()}},loading:t}},Gp=sx;var ix=()=>{let o=Mp(),{onClick:t,loading:e}=Gp();return Vp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},Hp=ix;s();i();var Yp=u(x());$o();s();i();var qp=u(x()),Kp=u(b());function ax(){let o=(0,Kp.useDispatch)(),{coin:t}=S();(0,qp.useEffect)(()=>{t.systemToken&&o(se(t.coinId))},[t.coinId])}var Jp=ax;var cx=()=>{let o=Bt(),e=!!fu().key||Tn(o)||o==="",r=Ts(),n=cd({disabled:e,onClick:r});return to(),Jp(),Yp.default.createElement(X,{footerActions:n})},zp=cx;s();i();var Gt=u(x()),Nr=u(b());s();i();var Zp=u(x()),$p=u(b()),Xp=u(No());function mx(){let o=(0,Xp.useHistory)(),{baseCoin:t}=S(),e=ut(),r=_(),n=N(),a=K(),c=(0,$p.useSelector)(it),m=Au(),d=bn({from:r,to:n,value:bt(a),data:c}),g=()=>{o.go(-3)};return Zp.default.createElement(Zu,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:m,onCancel:g})}var jp=mx;s();i();var Qt=u(x());H();s();i();var wr={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function ux({visible:o,onClose:t,onConfirm:e}){let r=Em({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return Qt.default.createElement(tt.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},Qt.default.createElement("div",{className:wr.content},Qt.default.createElement(pc,{src:r,className:wr.img}),Qt.default.createElement("div",{className:wr.title},F("wallet_extension_transaction_dialog_title_change_type")),Qt.default.createElement("div",{className:wr.tip},F("wallet_extension_transaction_dialog_desc_change_type")),Qt.default.createElement("div",{className:wr.btns},Qt.default.createElement(fo,{category:fo.CATEGORY.fill,type:fo.TYPE.highlight,size:fo.SIZE.lg,onClick:t},F("commonall_text_btn_cancel")),Qt.default.createElement(fo,{category:fo.CATEGORY.outline,type:fo.TYPE.primary,size:fo.SIZE.lg,onClick:e},F("commonall_modal_btn_continue")))))}var Qp=ux;s();i();var xa=u(x()),oi=u(b());s();i();var rn={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function dx({errorMsg:o}){let t=(0,oi.useDispatch)(),{coin:e}=S(),r=(0,oi.useSelector)(it),n=a=>{t(Cm(a))};return e.baseCoinId!==0?null:xa.default.createElement(St,{verticalPadding:!1},xa.default.createElement(Yu,{className:rn.root,titleClass:rn.titleClass,headerClassName:rn.headerClassName,contentClassName:rn.contentClassName,value:r,onChange:n,error:o,autoResize:!0}))}var og=dx;s();i();var ha=u(b());function fx(){let{coin:o}=S(),t=(0,ha.useSelector)(nm),e=(0,ha.useSelector)(it);return o.baseCoinId===0&&t&&e}var tg=fx;s();i();var eg=u(b());var lx=()=>{let o=(0,eg.useSelector)(mr),{coin:t}=S(),e=co(),r=_(),n=N();return{fetchParams:{coinId:t.coinId,from:r,to:n,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},rg=lx;s();i();var nn=u(b());qT();Fo();ke();go();wo();s();i();var ng=u(x());var px=()=>(0,ng.useCallback)(o=>{try{typeof o=="string"&&!!o&&no({tx_id:o})}catch(t){console.log(t)}},[]),ti=px;s();i();var ig=u(x()),ag=u(b());s();i();var sg=({contractAddress:o,toAddress:t,amount:e})=>{try{let r=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return l.Buffer.from(r).toString("hex")}catch{return""}};var gx=()=>{let{coin:o}=S(),t=It(N(),o.localType),e=co(),r=(0,ag.useSelector)(cr),{isFacet:n,facetContractAddress:a}=r||{};return(0,ig.useMemo)(()=>!o.address||!Tu(t)?"":n?sg({contractAddress:a,toAddress:t,amount:e}):xr(t,e),[o,t,e,n,a])},ei=gx;var Ax=()=>{let o=(0,nn.useDispatch)(),{coin:t}=S(),e=bu(),r=Cr(),n=K(),a=ce(),c=_(),m=N(),d=It(c,t.localType),g=It(m,t.localType),p=ut(),{activityId:f,activity:A,status:T,tip:I}=fe(),C=ei(),h=(0,nn.useSelector)(it),y=(0,nn.useSelector)(cr),E=ti(),k=(L,D)=>{let{userGasInfo:G}=D,{updateGasInfo:Z}=L;return Z?{...Z,gasLimit:G.gasLimit,supportEip1559:G.supportEip1559,networkFee:G.networkFee}:{...G}},M=L=>{let D=L.supportEip1559?L.maxFeePerGas:L.gasPrice,G=L?.networkFee||Ho(D,L.gasLimit),Z=qt(r,G);if(qo(Z,0))return[!1,n];if(t.baseCoinId===0)return a?[Ko(Z,0),Z]:[we(n,Z),n];let U=e;t.systemToken&&(U=qt(U,G));let oo=a?U:n;return[we(oo,U),oo]},w=({updateData:L,finallyGasInfo:D,publishAmountInt:G})=>{let{nonce:Z}=L,U=G,oo=uc(t.localType)?.realChainIdHex,z={from:d,gasLimit:bt(D.gasLimit),nonce:bt(Z),chainId:oo};return D.supportEip1559?(z.maxFeePerGas=bt(D.maxFeePerGas),z.maxPriorityFeePerGas=bt(D.maxPriorityFeePerGas),z.type=yc.FEE_MARKET):z.gasPrice=bt(D.gasPrice),y?.isFacet?(z.value="0",z.to=y?.facetBlackHoleAddress,z.data=C):t.address?(z.value="0",z.to=It(t.address,t.localType),z.data=C):(z.value=bt(U),z.to=g,h&&(z.data=h)),bn(z)},P=({txParams:L,publishAmountInt:D})=>{let G={...L};return t.systemToken&&(G.value=fc(bt(D))),G.walletId=p,G},v=({txParams:L,publishAmountInt:D,dataForCheck:G={}})=>{let{userGasInfo:Z={}}=G,U=nr(L.value),oo=nr(L.gasLimit),z=nr(Z.supportEip1559?L.maxFeePerGas:L.gasPrice),ho={...L,value:U,from:c,to:m,gas:oo,gasPrice:z,priorityFee:nr(Z.supportEip1559?L.maxPriorityFeePerGas:0),nonce:nr(L.nonce),repeatTxType:_c.CONFIRMING,oldTxHash:"",gasType:Z?.gasType};return{coinId:t.coinId,coinAmount:D,fromAdr:c,toAdr:m,serviceCharge:Ho(oo,z),extJson:JSON.stringify(ho),txSource:nt.NORMAL,inputData:L.data?L.data:"",activityId:f}};return async(L,D={})=>{let G=k(L,D),[Z,U]=M(G);if(!Z)throw new Error("balance check error");let oo=w({updateData:L,finallyGasInfo:G,publishAmountInt:U}),z=P({txParams:oo,publishAmountInt:U}),ho=v({txParams:oo,publishAmountInt:U,dataForCheck:D});lc({activityId:f,activity:A,status:T,tip:I,walletId:p,address:d}),await o(Gm({txParams:z,walletId:p}));let Vo=await so().signAndPublishTransferTransaction({signParams:z,from:Om(oo.from,t.localType),baseChain:Rm(t.localType),publishParams:ho});E(Vo)}},cg=Ax;s();i();var ri=u(b());var Cx=()=>{let o=(0,ri.useDispatch)(),t=$(),e=(0,ri.useSelector)(mr),{gasLimit:r,gasPrice:n,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:p,gasType:f}=e,{minGasFee:A}=mu({gasLimit:r,gasPrice:n,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:p,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(jn(!0))}}},mg=Cx;var Tx=()=>{let o=(0,Nr.useDispatch)(),t=mg(),e=rg(),r=gu(),n=Ku(),a=cg(),{clear:c}=fe(),m=(0,Nr.useSelector)(it),d=ys(m),g=tg(),[p,f]=(0,Gt.useState)(!1),A=async()=>{if(g)return f(!0),{pause:!0};try{let I=await n({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:r});return await a(I,e),null}catch(I){if(I?.message===qu)throw new Error(Is);{let C=I?.data?.originalError;throw sd(C?.code)&&c?(c(),C):I}}},T=(0,Nr.useSelector)(ae);return eo(),Gt.default.createElement(Gt.default.Fragment,null,Gt.default.createElement(Q,{slot:{bottom:Gt.default.createElement(og,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:T}}),Gt.default.createElement(Qp,{visible:p,onClose:()=>{f(!1),Ji({action_after_pop_up:"cancel"})},onConfirm:()=>{o(Im(!0)),f(!1),Ji({action_after_pop_up:"confirm"})}}))};function Ix(o){return(0,Nr.useSelector)(qn)?Gt.default.createElement(jp,null):Gt.default.createElement(Tx,{...o||{}})}var ug=Ix;s();i();var At=u(x()),he=u(b()),_a=u(q());s();i();var dg=u(b());function Sx(){let{coin:o}=S(),t=_(),e=lu(),r=(0,dg.useSelector)(mr);return ou({txType:Qm.transfer,coinId:o.coinId,fromAddress:t,unavailable:r.gasType===Yo.CUSTOM,fee:e})}var fg=Sx;var xx=(0,At.memo)(()=>{let o=(0,he.useDispatch)(),t=(0,At.useRef)(!1),e=(0,At.useRef)(!1),r=(0,he.useSelector)(Pt),n=(0,he.useSelector)(rm),{coin:a}=S(),c=_(),m=N(),d=It(c,a.localType),g=It(m,a.localType),p=ei(),f=(0,he.useSelector)(it),A=a.baseCoinId===0?f:p,T=K(),I=Bo(),C=ls(),h=(0,he.useSelector)(cr),{isFacet:y,facetBlackHoleAddress:E}=h||{},{disabled:k,fetchOnce:M}=(0,At.useMemo)(()=>{let U=null,oo=a.baseCoinId===0&&ys(f);return r&&(a.baseCoinId!==0||!oo)&&(U=+new Date),{disabled:oo||C,fetchOnce:U}},[a.baseCoinId,f,C,r]),w=fe(),P=(0,At.useMemo)(()=>y?E:a.baseCoinId===0?g:a.address,[a.baseCoinId,a.address,g,y,E]),v=()=>{t.current||e.current?o(R(!0)):o(R(!1))},O=(0,_a.useMemoizedFn)(U=>{o(gm(U?.signInfo||{}))}),L=(0,_a.useMemoizedFn)(U=>{o(Am(U)),o(mo(U?.isNetworkFeeLoading));let oo=U.supportEip1559?U.maxFeePerGas:U.gasPrice,z=U.networkFee;oo==="0"?e.current=!0:e.current=!1,U?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(J(z)),v()}),D=()=>{o(jn(!1))},G=()=>{t.current=!1},Z=()=>{t.current=!0};return At.default.createElement(uu,{currencyId:I,visible:n,coinId:a.coinId,address:d,inputData:A,tokenAddress:P,value:a.address?"0":T,gasLimitOptions:{fetchOnce:M,disabled:k,onFetchSuccess:G,onFetchError:Z},estimatedL1FeeOptions:{fetchOnce:M,disabled:k},onBack:D,onServerDataChange:O,onGasChange:L,gasReturn:w})}),hx=({children:o})=>{let t=fg(),e=(0,he.useSelector)(qn);return At.default.createElement(nd,{gasReturn:t},o,!e&&At.default.createElement(xx,null))},lg=hx;var _x={match:o=>wm(o),Container:lg,pages:{AddressPage:Hp,AmountPage:zp,ConfirmPage:ug}},pg=_x;s();i();Ao();s();i();s();i();var ni=u(x()),gg=u(b()),Ag=u(q());var yx=()=>{let o=(0,gg.useDispatch)(),{coin:t}=S(),e=_(),r=(0,ni.useCallback)(async()=>{try{let{data:a={}}=await Qe({coinId:t.coinId,address:e});a?.info?.normal?o(J(a.info.normal)):o(R(!0))}catch{o(R(!0))}finally{o(mo(!1))}},[o,e,t.coinId]),{run:n}=(0,Ag.useDebounceFn)(r,{wait:500});(0,ni.useEffect)(()=>{o(mo(!0)),n()},[e,t.coinId,n,o])},Cg=yx;var Fx=({children:o})=>(Cg(),o),Tg=Fx;s();i();var Ig=u(x());var Ex=()=>(to(),Ig.default.createElement(X,null)),Sg=Ex;s();i();var hg=u(x());s();i();Be();Ne();wo();var bx=()=>{let{coin:o}=S(),t=_(),e=co(),r=$(),n=lo(),a=N(),c=yo({fromAddr:t,localType:o.localType,walletId:n}),m=lt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:r,localType:o.localType});return po(async()=>{let I=await so().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),C={coinId:o.coinId,address:t,amount:e,fee:r,accountId:n},{data:h}=await rt(Jo.getSpecialUtxoList,C,{headers:I});return h},I=>({inputs:I.map(E=>({txId:E.txId,vOut:E.index,address:E.address,amount:E.amount})),outputs:[{address:a,amount:e}],address:t,fee:r}),async I=>await c({params:I}),async I=>await m(I),I=>(no({tx_id:I}),I))},xg=bx;var Px=()=>{let o=xg();return eo(),hg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},_g=Px;var kx={match:o=>o===nc,Container:Tg,pages:{AddressPage:j,AmountPage:Sg,ConfirmPage:_g}},yg=kx;s();i();Ao();s();i();var Fg=u(x());var wx=({children:o})=>{let e=dt().get("from");return Fg.default.createElement(Lo,{fromAddress:e},o)},Eg=wx;s();i();var Lg=u(x());s();i();var bg=u(q());Be();Ne();var Nx=()=>{let{baseCoin:o}=S();return(0,bg.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:n}=await rt(Jo.postCheckAddress,e);if(n?.res)return null}catch(n){console.log(n)}return await ue(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},Pg=()=>{let o=Lt(),t=Nx();return[o,t]};s();i();var si=u(x()),kg=u(b()),wg=u(q());go();var Bx=()=>{let o=(0,kg.useDispatch)(),{coin:t}=S(),e=_(),r=N(),n=ft(),a=(0,si.useCallback)(async()=>{try{let m=await n({coinId:t.coinId,address:e,fromAddr:e,toAddr:r});o(_m({name:"signInfo",value:m}));let d=[],{fee:g,depositMinAmount:p,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:T}=m;t.baseCoinId===0?d.push(g):T===0?d.push(g,f,p,A):d.push(g,f);let I=d.reduce((C,h)=>uo(C,h),0);o(J(I))}catch{o(R(!0))}finally{o(mo(!1))}},[o,n,t.coinId,t.baseCoinId,e,r]),{run:c}=(0,wg.useDebounceFn)(a,{wait:500});(0,si.useEffect)(()=>{o(mo(!0)),o(R(!1)),c()},[o,a,c])},Ng=Bx;s();i();var Bg=u(x()),ii=u(b());go();Ao();var vx=()=>{let o=(0,ii.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:r}=t,n=_(),a=lo(),c=De(n,a,Xa),d=Zt(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,ii.useSelector)(dr)?.signInfo?.storageUsedAmount;(0,Bg.useEffect)(()=>{if(!d||!f)return;let A=qt(d,f);o(r===0?bo(A):kt(A))},[o,r,f,d])},vg=vx;var Lx=()=>{Ng(),vg();let o=Pg();return Lg.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Dg=Lx;s();i();var Wg=u(x());s();i();var Mg=u(b()),ya=u(q());go();var Og=()=>{let o=Oo(),t=Pu(),e=(0,Mg.useSelector)(dr),{coin:r,baseCoin:n}=S(),a=$(),c=lr();return(0,ya.useMemoizedFn)(m=>{let d=uo(e?.signInfo?.storageUsedAmount,a),g=_o(d,10**n.decimals);return(r.baseCoinId===0?qo(o,m):qo(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:c(g,n,{useApproximate:!1,isFee:!0})},type:ro.FEE_BALANCE_INSUFFICIENT}:null})},Rg=()=>{let o=Cs(),t=Og();to({fns:[o,t],override:!0})},Dx=()=>{let o=Og();return(0,ya.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:Me.AMOUNT}:null})},Ug=()=>{let o=_u(),t=Dx();eo({fns:[o,t],override:!0})};var Mx=()=>(Rg(),Wg.default.createElement(X,{totalAmountProps:{type:"amount"}})),Gg=Mx;s();i();var qg=u(x());s();i();var Vg=u(b()),Fa=u(JT());var Ox=()=>{let{coin:o}=S(),t=_(),e=N(),r=co(),n=$(),a=lo(),c=(0,Vg.useSelector)(dr),m=ft(),d=ti(),g=yo({fromAddr:t,localType:o.localType,walletId:a}),p=lt({coinId:o.coinId,coinAmount:r,fromAddr:t,toAddr:e,localType:o.localType,networkFee:n,walletId:a}),f=async()=>await m({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=h=>{let{blockHash:y,nonce:E}=h;return{from:t,blockHash:y,type:Fa.NearTypes.TransferNear,nonce:E,receiverId:e,amount:r}},T=h=>{let{blockHash:y,nonce:E}=h,{signInfo:k}=c,{toAddressCheck:M,minTransferTokenValue:w,depositGasFee:P,fee:v,depositMinAmount:O}=k;return{from:t,blockHash:y,type:Fa.NearTypes.TransferToken,nonce:E,receiverId:e,amount:r,contract:o.address,depositGas:P,transferGas:v,depositValue:O,minTransferTokenValue:w,shouldDeposit:Boolean(M===0)}};return po(f,h=>o.baseCoinId===0?{params:A(h)}:{params:T(h)},g,p,d)},Hg=Ox;var Rx=()=>{let o=Hg();return Ug(),qg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},Kg=Rx;var Ux={match:o=>o===sc,Container:Eg,pages:{AddressPage:Dg,AmountPage:Gg,ConfirmPage:Kg}},Jg=Ux;s();i();s();i();var Xg=u(x()),jg=u(b());H();s();i();var sn=u(x()),ai=u(b());go();var Yg=()=>{let{toRent:o}=(0,ai.useSelector)(Wr),{coin:t}=S(),e=Oo();return(0,sn.useCallback)(r=>{if(t.baseCoinId!==0)return null;let n=_o(o,10**t.decimals);return qo(r,n)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:n},type:ro.COMMON_ERROR}:null},[e,o])},zg=()=>{let{selfRent:o,toRent:t}=(0,ai.useSelector)(Wr),{coin:e,baseCoin:r}=S(),n=(0,ai.useSelector)(st),a=Cr();return(0,sn.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=uo(n,o);return qo(a,c)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:r.symbol,number:_o(c,10**r.decimals)},type:ro.FEE_BALANCE_INSUFFICIENT}:qo(a,uo(c,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:_o(uo(c,t),10**r.decimals)},type:ro.FEE_BALANCE_INSUFFICIENT}:null},[a,n,o])},Zg=()=>{let o=Yg(),t=zg();to([o,t])},Wx=()=>{let o=Yg();return(0,sn.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Me.AMOUNT}:null},[o])},Gx=()=>{let o=zg();return(0,sn.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Me.AMOUNT}:null},[o])},$g=()=>{let o=Wx(),t=Gx();eo([o,t])};function Vx(){let o=(0,jg.useSelector)(Kn);return Zg(),Xg.default.createElement(X,{totalAmountProps:{title:F("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var Qg=Vx;s();i();var _e=u(x()),Pa=u(b()),aA=u(q());s();i();H();ke();var Wo={JITO:"jito",PRIORITY_FEE:"priorityFee"},Ea="speedUpMode";function oA(o){let t=Ye.get(Ea);return t?typeof t=="string"&&(t={[mc]:t}):t={},t[o]||Wo.PRIORITY_FEE}function tA(o,t){let e=Ye.get(Ea);Ye.set(Ea,{...e||{},[o]:t})}var eA="jitoGuide";function rA(){return!!Ye.get(eA)}function nA(){Ye.set(eA,"1")}s();i();var xo=u(x()),yt=u(b());H();s();i();var an={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var Hx=xo.default.memo(({jitoGuide:o})=>{let t=(0,yt.useDispatch)(),e=(0,yt.useSelector)(ie),r=n=>{t(Vr(n))};return xo.default.createElement(Ac,{mask:!0,show:!o,title:F("wallet_extension_transfer_tooltips_title_express_mode"),description:F("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},xo.default.createElement($e.Segmented,{className:an.modeSwitch,color:$e.COLOR.grey,size:$e.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:r},xo.default.createElement($e.TabPane,{tab:F("wallet_extension_transfer_tab_standard"),id:Wo.PRIORITY_FEE}),xo.default.createElement($e.TabPane,{tab:F("wallet_extension_transfer_tab_express"),id:Wo.JITO})))}),qx=()=>{let{baseCoin:o}=S(),t=(0,yt.useSelector)(wt),e=(0,yt.useSelector)(Jn),{fee:r="0"}=t||{},{priorityFee:n}=e,a=Hr(r,{decimals:o.decimals,type:Y.CRYPTO}),c=Hr(n||"0",{decimals:o.decimals,type:Y.CRYPTO});return xo.default.createElement(xo.default.Fragment,null,F("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},Kx=()=>{let{baseCoin:o}=S(),t=(0,yt.useSelector)(wt),e=(0,yt.useSelector)(Yn),{fee:r}=t||{},{totalJitoFee:n}=e||{},a=Hr(r||"0",{decimals:o.decimals,type:Y.CRYPTO}),c=Hr(n||"0",{decimals:o.decimals,type:Y.CRYPTO});return xo.default.createElement(xo.default.Fragment,null,F("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),xo.default.createElement("div",{className:an.tipDetail},F("wallet_extension_transfer_tooltips_desc_express_mode")))},Jx=xo.default.memo(()=>{let o=(0,yt.useSelector)(ie);return xo.default.createElement("div",{className:an.tip},o===Wo.JITO?xo.default.createElement(Kx,null):xo.default.createElement(qx,null))});function Yx({jitoGuide:o,...t}){let e=(0,yt.useSelector)(ie),r=(0,yt.useSelector)(wt),n=e===Wo.JITO?F("wallet_extension_transfer_express_mode"):F("wallet_extension_transfer_standard_mode");return xo.default.createElement(St,{bordered:!1,verticalPadding:!1},xo.default.createElement(_s,{...t,titleClassName:an.title,titleAction:r?.supportJito&&xo.default.createElement(Hx,{jitoGuide:o}),level:n},xo.default.createElement(Jx,null)))}var sA=Yx;s();i();var Ve=u(b());Fo();Ao();var zx=()=>{let o=vo(),{coin:t}=S(),e=_(),r=(0,Ve.useSelector)(Et),n=(0,Ve.useSelector)(io),a=co(),c=(0,Ve.useSelector)(st),{computeUnitPrice:m,computeUnitLimit:d}=(0,Ve.useSelector)(Jn),g=(0,Ve.useSelector)(ie),p=(0,Ve.useSelector)(Yn),f=yo({fromAddr:e,localType:Sn,walletId:r}),{coinId:A}=t,T=async()=>await kc({coinId:A,address:e},{fromAddr:e,toAddr:n}),I=async()=>{if(t.baseCoinId===0||!n)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let P={coinId:A,address:n},{data:v={}}=await wc(P),{legal:O,tokenAccountAddress:L}=v;return{haveTokenAccountAddress:O,tokenAccountAddress:L}},C=async()=>{let[P,{haveTokenAccountAddress:v,tokenAccountAddress:O}]=await Promise.all([T(),I()]);return{recentBlockHash:P,haveTokenAccountAddress:v,tokenAccountAddress:O}},h=async P=>{let{recentBlockHash:v,haveTokenAccountAddress:O}=P,L={from:e,to:n,amount:a,blockHash:v,payer:e};g===Wo.PRIORITY_FEE&&(L={...L,computeUnitPrice:m,computeUnitLimit:d});let D;return t.baseCoinId===0?D={...L,type:wn.TRANSFER}:D={...L,type:wn.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===Rr.SPL_TOKEN_2022&&(D.token2022=!0,D.decimal=t.decimals),await f({params:D})},y=async P=>{if(g!==Wo.JITO||!p)return null;let{recentBlockHash:v}=P,{tipAccountAddress:O,clientGasPrice:L}=p,D={from:e,to:O,amount:L,blockHash:v,payer:e,type:wn.TRANSFER};return await f({params:D})};return po(C,async(P={})=>{let v=await h(P),O=await y(P);return{rawSignedTx:v,jitoSignedTx:O}},async({rawSignedTx:P,jitoSignedTx:v})=>{let O=await To(Sn,P),L=P,D;g===Wo.JITO&&v&&(L=JSON.stringify([P,v]),D=JSON.stringify({mev:"Jito",jitoHash:await To(Sn,v)}));let G={signedTx:L,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:c,txHash:O,extJson:D},Z=await o(G);return tA(t.localType,g),Z},P=>(no({tx_id:P}),P))},iA=zx;s();i();var ba={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function Zx(){let o=(0,Pa.useSelector)(Kn),t=(0,aA.useDebounce)(o,{wait:200}),e=(0,Pa.useSelector)(wt),[r,n]=(0,_e.useState)(!0),a=iA(),c=async()=>{o||await a()};return $g(),(0,_e.useEffect)(()=>{if(e?.supportJito){let m=rA();n(m),m||nA()}},[e?.supportJito]),_e.default.createElement("div",{className:ba.root,onClick:()=>{n(!0)}},_e.default.createElement(Q,{tipMessageProps:{hidden:o},containerProps:{contentClassName:r?"":ba.contentJitoGuide},slot:{networkFee:m=>_e.default.createElement(sA,{...m,jitoGuide:r})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var cA=Zx;s();i();s();i();var mA=u(x()),ci=u(b());function $x(){let o=(0,ci.useDispatch)(),{coin:t}=S(),e=(0,ci.useSelector)(wt);(0,mA.useEffect)(()=>{!e||(e.supportJito?o(Vr(oA(t.localType))):o(Vr(Wo.PRIORITY_FEE)))},[e,t.localType])}var uA=$x;s();i();var gA=u(x());go();var AA=u(b());s();i();var oe=u(x()),ye=u(b()),dA=u(q());$o();go();function Xx(){let o=(0,ye.useDispatch)(),t=_(),{baseCoin:e}=S(),r=(0,oe.useRef)(null),n=(0,oe.useRef)(!1),[a,c]=(0,oe.useState)("0"),m=async p=>{if(!n.current){try{let f=await Nc({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},T=uo(A||"0",p?.fee||"0");c(T),o(os({...f,totalJitoFee:T})),o(R(!1))}catch{c("0"),o(os(null)),o(R(!0))}finally{o(Gr(!1))}r.current=setTimeout(()=>{m(p)},7e3)}};return[a,p=>{n.current=!1,m(p)},()=>{clearTimeout(r.current),n.current=!0,r.current=null,c("0"),o(os(null))}]}function jx(){let o=(0,ye.useDispatch)(),t=$u(),e=_(),{coin:r,baseCoin:n}=S(),{coinId:a}=r,[c,m]=(0,oe.useState)("0"),d=()=>{m("0"),o(Qn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(R(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:n.chainId});if(Tn(A)){d();return}let{computeUnitPrice:T,feelimit:I}=f,{priorityFee:C,priorityGasPrice:h,priorityGasLimit:y}=Uc(I,T,A);m(C),o(Qn({priorityFee:C,computeUnitPrice:h||"",computeUnitLimit:y||""})),o(R(!1))}catch{d()}finally{o(Gr(!1))}},()=>{m("0"),o(Qn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function Qx(){let o=(0,ye.useDispatch)(),t=(0,ye.useSelector)(ie),e=(0,ye.useSelector)(wt),r=(0,ye.useSelector)(qc),n=(0,dA.useLatest)(r),[a,c,m]=Xx(),[d,g,p]=jx();return(0,oe.useEffect)(()=>{n.current?o(Gr(!1)):o(Gr(!0))},[t]),(0,oe.useEffect)(()=>(!e||!t||(t===Wo.PRIORITY_FEE?g(e):c(e)),()=>{m(),p()}),[e,t]),{speedUpFee:t===Wo.PRIORITY_FEE?d:a}}var fA=Qx;s();i();var mi=u(x()),lA=u(b());function oh(){let o=(0,lA.useDispatch)(),[t,e]=(0,mi.useState)(null),{coin:r}=S(),n=_(),a=N(),{coinId:c}=r;return(0,mi.useEffect)(()=>{c&&n&&a&&(async()=>{try{let{data:d}=await Qe({coinId:c,address:n},{fromAddr:n,toAddr:a}),{info:g}=d||{},{fee:p}=g||{};o(R(!p)),o(Xi(g)),e(g)}catch{o(R(!0)),o(Xi(null)),e(null)}})()},[c,n,a]),{baseFee:t?.fee||"0"}}var pA=oh;function th(){let o=(0,AA.useDispatch)(),{baseFee:t}=pA(),{speedUpFee:e}=fA();(0,gA.useEffect)(()=>{o(J(uo(t,e)))},[t,e])}var CA=th;s();i();var ui=u(b());var TA=u(x());go();function eh(){let o=(0,ui.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,ui.useSelector)(Wr),r=Ar();(0,TA.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let n=qt(r||"0",e||"0");o(bo(Ko(n,"0")?n:"0"))}else o(bo(null))})()},[t,e,r])}var IA=eh;function rh({children:o}){return uA(),CA(),IA(),o}var SA=rh;var nh={match:o=>Mm(o),Container:SA,pages:{AddressPage:j,AmountPage:Qg,ConfirmPage:cA}},xA=nh;s();i();Ao();s();i();s();i();var ka=u(x()),cn=u(b());$o();var di=u(q());s();i();HT();var sh=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:n="",signInfo:a={}})=>{let{getRawTransaction:c}=await bm(),m={};if(o.baseCoinId===0)m={data:{type:je.TRANSFER,data:{to:e,amount:r,memo:n}}};else{let{info:g={}}=a,{contractAddress:p,contractName:f,tokenName:A}=g;m={data:{type:je.TOKEN_TRANSFER,data:{from:t,to:e,memo:n,contract:p,contractName:f,functionName:Nn.TRANSFER,tokenName:A,amount:r}}}}return await c(5757,m)},hA=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:n="",signInfo:a={}})=>{let c=await sh({coin:o,fromAddress:t,toAddress:e,value:r,memo:n,signInfo:a});return(await Qu({coinId:o.coinId,fromAddress:t,value:r,inputData:c}))?.gasLimit||"0"};var ih=()=>{let o=(0,cn.useDispatch)(),t=_(),e=N(),r=(0,cn.useSelector)(Pt),n=K(),a=(0,di.usePrevious)(n),{coin:c,baseCoin:m}=S(),{signInfo:d,memo:g}=(0,cn.useSelector)(ur),p=async()=>{try{o(R(!1));let A;c.baseCoinId!==0&&Je(d)?(A=await od({coinId:c.coinId,fromAddress:t,toAddress:e,value:n}),o(ts({name:"signInfo",value:A}))):A=d;let T=await hA({coin:c,baseCoin:m,fromAddress:t,toAddress:e,value:n,signInfo:A,memo:g});o(J(T))}catch{o(R(!0))}finally{o(mo(!1))}},{run:f}=(0,di.useDebounceFn)(p,{wait:500});(0,ka.useEffect)(()=>{r&&(o(mo(!0)),f())},[r]),(0,ka.useEffect)(()=>{r&&n!==a||(o(mo(!0)),f())},[n,e,r,g])},_A=ih;var ah=({children:o})=>(_A(),o),yA=ah;s();i();var FA=u(x());var ch=()=>(to(),FA.default.createElement(X,null)),EA=ch;s();i();var wa=u(x()),li=u(b());H();s();i();var fi=u(b());var mh=()=>{let{coin:o,baseCoin:t}=S(),e=_(),r=(0,fi.useSelector)(io),n=K(),a=(0,fi.useSelector)(st),{memo:c}=(0,fi.useSelector)(ur),m=ft(),d=yo({fromAddr:e,localType:t.localType}),g=lt({coinAmount:n,coinId:o.coinId,fromAddr:e,toAddr:r,networkFee:a}),p=async()=>await m({coinId:o.coinId,address:e,fromAddr:e,toAddr:r,value:n}),f=E=>{let{nonce:k}=E;return{type:je.TRANSFER,data:{to:r,amount:n,nonce:k,fee:a,memo:c}}},A=E=>{let{nonce:k,contractAddress:M,contractName:w,tokenName:P}=E;return{type:je.TOKEN_TRANSFER,data:{from:e,to:r,amount:n,nonce:k,fee:a,memo:c,contract:M,contractName:w,functionName:Nn.TRANSFER,tokenName:P}}};return po(p,E=>o.baseCoinId===0?f(E):A(E),async E=>{let{data:k}=E,{nonce:M}=k,{txId:w,txSerializedHexString:P}=await d({params:E,needCapture:!0});return{txId:w,txSerializedHexString:P,nonce:M}},async({txId:E,txSerializedHexString:k,nonce:M})=>{let w={nonce:M},P=JSON.stringify(w);return await g(k,{txHash:E,memo:c,extJson:P})},E=>(no({tx_id:E}),E))},bA=mh;var PA=34,uh=()=>{let o=(0,li.useDispatch)(),{memo:t}=(0,li.useSelector)(ur),e=bA(),r=n=>{let a=n.target.value;new TextEncoder().encode(a).length<=PA&&o(ts({name:"memo",value:n.target.value}))};return eo(),wa.default.createElement(Q,{confirmButtonProps:{onSubmit:e},slot:{bottom:wa.default.createElement(Wt,{value:t,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:PA}),onChange:r})}})},kA=uh;var dh={match:o=>o===oc,Container:yA,pages:{AddressPage:j,AmountPage:EA,ConfirmPage:kA}},wA=dh;s();i();Ao();s();i();s();i();var Na=u(x()),pi=u(b());$o();wo();var gi=u(q());var fh=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:r,feeInt:n,coin:a,isMax:c})=>{let m=(0,pi.useDispatch)(),{signInfo:d}=(0,pi.useSelector)(Zn),g=(0,gi.usePrevious)(e),p=async()=>{let C=await or({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return m(hm({name:"signInfo",value:C})),C},f=async C=>{let h={type:"transfer",nonce:C?.info?.nonce,maxFee:n||"0",transferData:{contractAddress:C?.info?.contractAddress,from:o,to:t,amount:e}};return(await so().signTransaction(h,o,a.localType))?.signature},A=async C=>{let{data:h}=await Bn({coinId:a.coinId,address:o,inputData:C});if(h?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return h?.gasLimit},T=async()=>{try{let C;Je(d)?C=await p():C=d;let h=await f(C),y=await A(h);m(J(y)),m(R(!1))}catch{m(R(!0))}finally{m(mo(!1))}},{run:I}=(0,gi.useDebounceFn)(T,{wait:500});(0,Na.useEffect)(()=>{c&&(m(mo(!0)),I())},[c,r]),(0,Na.useEffect)(()=>{c&&e!==g||(m(mo(!0)),I())},[t,e,c])},NA=fh;var lh=({children:o})=>{let t=_(),e=N(),r=K(),n=Ar(),a=$(),{coin:c}=S(),m=ce();return NA({fromAddress:t,toAddress:e,amountInputValueInt:r,sendCoinBalanceInt:n,feeInt:a,coin:c,isMax:m}),o},BA=lh;s();i();var vA=u(x());var ph=()=>(to(),vA.default.createElement(X,null)),LA=ph;s();i();var MA=u(x()),OA=u(b());s();i();wo();var gh=({coin:o,baseCoin:t,fromAddress:e,toAddress:r,amountInt:n,feeInt:a,nonce:c,contractAddress:m})=>{let d=vo();return po(async()=>{let T={type:"transfer",nonce:c,maxFee:a,transferData:{contractAddress:m,from:e,to:r,amount:n}},{txId:I,signature:C}=await so().signTransaction(T,e,t.localType);return{txId:I,signature:C}},async({txId:T,signature:I})=>{let C={serviceChargeCoinId:t.coinId,nonce:c},h=JSON.stringify(C),y={signedTx:I,coinAmount:n,coinId:o.coinId,fromAdr:e,toAdr:r,serviceCharge:a,txType:Eo.TRANS_OUT,txHash:T,extJson:h};return await d(y)},T=>(no({tx_id:T}),T))},DA=gh;var Ah=()=>{let o=_(),t=N(),e=co(),r=$(),{coin:n,baseCoin:a}=S(),{signInfo:c}=(0,OA.useSelector)(Zn),m=DA({coin:n,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:r,nonce:c?.info?.nonce,contractAddress:c?.info?.contractAddress});return eo(),MA.default.createElement(Q,{confirmButtonProps:{onSubmit:m}})},RA=Ah;var Ch={match:o=>o===ec,Container:BA,pages:{AddressPage:j,AmountPage:LA,ConfirmPage:RA}},UA=Ch;s();i();Ao();s();i();var HA=u(x());s();i();var WA=u(b()),GA=u(q());s();i();Ao();var Th=()=>{let o=nu(),t=iu(),e=su();return async({coinId:n,from:a,to:c,amount:m,inputData:d,localType:g})=>{let p=[ve.SAFE_ADDRESS,ve.CONTRACT_ADDRESS];g===za&&p.push(ve.TRON_PERMISSTION);let f=await o({checkTypes:p,coinId:n,from:a,to:c,amount:m,txType:bc.TRANSFER,inputData:d||"0x"}),{result:A,msg:T}=f[ve.TRON_PERMISSTION]||{},I=f[ve.SAFE_ADDRESS],C={...I,...f[ve.CONTRACT_ADDRESS],tronPermission:{msg:T,wrongPermission:!A},address:c};return await e({...I,...I?.blackAddressWarning}),await t(C),C}},Br=Th;var Ih=()=>{let o=(0,WA.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,GA.useBoolean)(!1),{coin:n}=S(),a=_(),c=N(),m=K(),{coinId:d,localType:g}=n,p=vt(),f=Br();return{onClick:async()=>{try{e();let T=await f({coinId:d,from:a,to:c,amount:m,inputData:"",localType:g}),{isDefraud:I,isSimilar:C,blackAddressWarning:h}=T;I?(o(mt(Jt.DEFRAUD)),o(Yt(h))):C?(o(mt(Jt.SIMILAR)),o(Yt(h))):o(mt("")),p()}catch(T){console.log(T)}finally{r()}},loading:t}},VA=Ih;var Sh=()=>{let{onClick:o,loading:t}=VA();return HA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},qA=Sh;s();i();var YA=u(x());s();i();var He=u(x()),Ci=u(b()),Ti=u(q());s();i();VT();function xh({from:o,to:t,coin:e,error:r}){Ua.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:r?.message}]},level:"info"})}function hh(){let{coin:o}=S(),t=_();return async({value:e,to:r,signInfo:n})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:m=[],budget:d}=n||{},g=c.map((A={})=>{let{digest:T,version:I,objectId:C}=A;return{digest:T,version:I,objectId:C}}),p=new ju;if(p.setGasPrice(a),p.setGasPayment(g||[]),p.setSender(t),d&&p.setGasBudget(d),o.baseCoinId===0){let A=p.splitCoins(p.gas,[e]);p.transferObjects([A],p.pure.address(r))}else if(m.length>1){let A=m.slice(1).map(C=>p.object(C.objectId)),T=p.object(m[0].objectId);p.mergeCoins(T,A);let I=p.splitCoins(T,[e]);p.transferObjects([I],p.pure.address(r))}else{let A=p.splitCoins(p.object(m[0].objectId),[e]);p.transferObjects([A],p.pure.address(r))}let f=Xu(await p.build({client:Ad}));return{tx:p,txBytes:f}}catch(a){throw xh({from:t,to:r,coin:o,error:a}),a}}}var Ai=hh;s();i();function _h(){let{coin:o}=S(),t=_(),e=o.coinId;return async({to:r,value:n})=>(await or({address:t,coinId:e},{fromAddr:t,toAddr:r,value:n})).info||{}}var KA=_h;function JA(){let o=(0,Ci.useDispatch)(),t=(0,Ci.useSelector)(Pt),{coin:e}=S(),r=_(),n=K(),a=N(),{coinId:c}=e,[m,d]=(0,He.useState)(!1),g=(0,He.useRef)(0),p=KA(),f=Ai(),A=(0,Ti.usePrevious)(n),{run:T}=(0,Ti.useDebounceFn)(async()=>{g.current++;try{o(R(!1));let I={value:n,to:a},C=await p(I),y=(await f({...I,signInfo:C}))?.tx?.blockData?.gasConfig?.budget||"0";o(xm(C)),o(J(y))}catch{o(R(!0))}finally{g.current--,g.current===0&&d(!1)}},{wait:300});return(0,He.useEffect)(()=>{t&&(d(!0),T())},[t]),(0,He.useEffect)(()=>{t&&n!==A||(d(!0),T())},[c,r,a,n,t]),m}function yh(){let o=JA();return to(),YA.default.createElement(X,{confirmButtonProps:{loading:o}})}var zA=yh;s();i();var $A=u(x()),va=u(b());s();i();var Ba=u(b());Ao();var ZA=()=>{let{coin:o}=S(),t=_(),e=co(),r=(0,Ba.useSelector)(io),n=(0,Ba.useSelector)(im),a=$(),c=yo({fromAddr:t,localType:qi}),m=lt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:r,localType:qi}),d=Ai();return po(async()=>await d({value:e,to:r,signInfo:{...n||{},budget:a}}),async({tx:I,txBytes:C})=>{let y=await c({params:{type:"raw",data:C}});return{tx:I,txBytes:C,signedTx:y}},async({tx:I,txBytes:C,signedTx:h}={})=>{let{signature:y,hash:E}=h||{};return await m({request_type:"WaitForEffectsCert",tx_bytes:C,signatures:[y]},{txHash:E,serviceCharge:I?.blockData?.gasConfig?.budget||"0"})},I=>(no({tx_id:I}),I))};function Fh(){let o=ZA(),t=async()=>{await o()};eo();let e=(0,va.useSelector)(ae),r=(0,va.useSelector)(Wn);return $A.default.createElement(Q,{tipMessageProps:{hidden:r,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var XA=Fh;var Eh={match:o=>o===Qa,pages:{AddressPage:qA,AmountPage:zA,ConfirmPage:XA}},jA=Eh;s();i();Ao();s();i();var eC=u(x());s();i();var QA=u(b()),oC=u(q());s();i();var hi=u(x()),_i=u(b());s();i();var Si=u(x()),Ii=u(b());function bh({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),r=N(),n=Ar(),a=K(),c=(0,Ii.useSelector)(ct),m=(0,Ii.useSelector)(fr),d=(0,Ii.useSelector)(Pt),g=!!c,{fromJettonAccount:p,nonce:f}=c||{},A=(0,Si.useCallback)((T,I)=>{if(!g)return null;let C={to:r,seqno:f,decimal:e.decimals,amount:T,memo:m};return e.baseCoinId===0?C={...C,type:ra.TRANSFER,sendMode:I}:(C={...C,type:ra.JETTON_TRANSFER,fromJettonAccount:p,messageAttachedTons:o,invokeNotificationFee:t,sendMode:tr.PAY_GAS_SEPARATELY+tr.IGNORE_ERRORS},c.customPayload&&(C={...C,customPayload:c.customPayload,stateInit:c.stateInit})),C},[r,g,p,m,o,t]);return(0,Si.useMemo)(()=>d?A(n,tr.CARRY_ALL_REMAINING_BALANCE):A(a,tr.PAY_GAS_SEPARATELY+tr.IGNORE_ERRORS),[d,n,a,A])}var xi=bh;function Ph({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,_i.useDispatch)(),r=ut(),n=_(),a=(0,_i.useSelector)(ct),{ttl:c}=a||{},m=xi({messageAttachedTons:o,invokeNotificationFee:t}),[d,g]=(0,hi.useState)(null);return(0,hi.useEffect)(()=>{(async()=>{if(!!m)try{m.expireAt=ws(c);let p=await Cd({fromAddress:n,body:m,walletId:r});g(JSON.stringify(p))}catch{g(null),e(R(!0)),e(mo(!1))}})()},[m,c]),d}var yi=Ph;var kh=()=>{let o=(0,QA.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,oC.useBoolean)(!1),{coin:n}=S(),a=_(),c=N(),m=K(),d=yi(),{coinId:g,localType:p}=n,f=vt(),A=Br();return{onClick:async()=>{try{e();let I=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:p}),{isDefraud:C,isSimilar:h,blackAddressWarning:y}=I;C?(o(mt(Jt.DEFRAUD)),o(Yt(y))):h?(o(mt(Jt.SIMILAR)),o(Yt(y))):o(mt("")),f()}catch(I){console.log(I)}finally{r()}},loading:t}},tC=kh;var wh=()=>{let{onClick:o,loading:t}=tC();return eC.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},rC=wh;s();i();var aC=u(x());s();i();var nC=u(x()),sC=u(b());go();function La(){let{coin:o,baseCoin:t}=S(),e=(0,sC.useSelector)(ct),r=$(),n=e?.minTonLimit,a=uo(n||"0",r||"0"),c=Cr();return(0,nC.useCallback)(()=>{if(o.baseCoinId!==0&&Ko(a,c)){let m=_o(a,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:m}}}return null},[a,c,o.baseCoinId,t.decimals])}function Nh(){let o=La();to([o])}var iC=Nh;function Bh(){return iC(),aC.default.createElement(X,null)}var cC=Bh;s();i();var dn=u(x()),un=u(b());s();i();var uC=u(x());var mn=u(b());H();var mC=250;function vh({error:o,onChange:t}){let e=(0,mn.useDispatch)(),r=(0,mn.useSelector)(ct),n=(0,mn.useSelector)(fr),c=r?.checkMemo?F("wallet_extension_import_desc_comment_required"):F("wallet_extension_import_desc_comment_optional");return uC.default.createElement(Wt,{value:n,placeholder:F("wallet_extension_ton_placeholder_comment_max_character2",{amount:mC}),dashed:!1,title:c,error:o,errorType:Kt.TIP_TYPE.always,maxLength:mC,onChange:m=>{let d=m.target.value;e(ym(d)),t()}})}var dC=vh;s();i();var Fi=u(b());wo();Fo();function Lh(){let o=lo(),t=is(o),e=ft(),{coin:r,baseCoin:n}=S(),a=_(),c=N(),m=(0,Fi.useSelector)(st),d=(0,Fi.useSelector)(ct),g=(0,Fi.useSelector)(mm),p=K(),f=xi({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:g?.invokeNotificationFee}),A=vo();return po(async()=>(await e({coinId:r.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async E=>(f.seqno=E,f.expireAt=ws(d?.ttl),(await so().signTransaction(f,a,n.localType))?.boc),async E=>{let k=await To(n.localType,E),M={signedTx:E,coinId:r.coinId,coinAmount:p,fromAdr:a,toAdr:f.to,serviceCharge:m,txHash:k,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:nt.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(M)},E=>(no({tx_id:E}),E))}var fC=Lh;s();i();var Ei=u(x());function Dh(o){return(0,Ei.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:ro.COMMON_ERROR}:null,[o])}function Mh(o){return(0,Ei.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:ro.COMMON_ERROR}:null,[o])}function Oh(){let o=La();return(0,Ei.useCallback)(()=>{let t=o();return t?{...t,highlight:ro.FEE_BALANCE_INSUFFICIENT}:null},[o])}function Rh(o,t){let e=Dh(o),r=Mh(t),n=Oh();eo([r,e,n])}var lC=Rh;function Uh(){let o=(0,un.useSelector)(ct),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,r=(0,un.useSelector)(fr),n=(0,un.useSelector)(Wn),[a,c]=(0,dn.useState)(!1),m=fC(),d=async()=>t&&(!r||r.trim()==="")?(c(!0),{pause:!0}):(await m(),null);lC(a,e);let g=(0,un.useSelector)(ae);return dn.default.createElement(Q,{tipMessageProps:{hidden:n,blockAddressInfo:g},slot:{bottom:dn.default.createElement(dC,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var pC=Uh;s();i();s();i();var bi=u(x());var gC=u(b());var Pi=u(q());go();function Wh(){let o=(0,gC.useDispatch)(),t=_(),{coin:e,baseCoin:r}=S(),n=(0,bi.useRef)(null),a=(0,Pi.useDebounce)(yi(),{wait:500});(0,Pi.useMount)(()=>{o(mo(!0))}),(0,bi.useEffect)(()=>{let c=()=>{o(R(!0)),o(Qi(null)),o(J("0"))},m=async()=>{try{let{code:g,data:p}=await Bn({address:t,tokenAddress:e.address,chainId:r.chainId,coinId:r.coinId,value:"0",inputData:a});if(g!==0||!p||p?.queryGasLimitErrorUseDefault)c();else{o(R(!1)),o(Qi(p));let{invokeNotificationFee:f="0",gasLimit:A="0"}=p;o(J(e.baseCoinId===0?A:uo(A,f)))}}catch{c()}finally{o(mo(!1))}};return(()=>{!a||(n.current=setInterval(m,7e3),m())})(),()=>{clearInterval(n.current)}},[a])}var AC=Wh;s();i();var CC=u(x()),TC=u(b()),IC=u(q());function Gh(){let o=(0,TC.useDispatch)(),t=ft(),e=Td(),{coin:r}=S(),n=_(),a=(0,IC.useDebounce)(N(),{wait:500}),{coinId:c,baseCoinId:m}=r;(0,CC.useEffect)(()=>{c&&n&&a&&(async()=>{try{let g=await t({coinId:c,address:n,fromAddr:n,toAddr:a,value:"0"}),p=await e(g,m);o(R(!p)),o(ji(p))}catch{o(R(!0)),o(ji(null)),o(mo(!1))}})()},[a])}var SC=Gh;function Vh({children:o}){return SC(),AC(),o}var xC=Vh;var Hh={match:o=>o===ic,Container:xC,pages:{AddressPage:rC,AmountPage:cC,ConfirmPage:pC}},hC=Hh;s();i();ke();s();i();var BC=u(x());s();i();var _C=u(b()),yC=u(q());s();i();var wi=u(x()),ki=u(b());var qh=()=>{let o=(0,ki.useSelector)(ir),t=(0,ki.useSelector)(io),e=K(),r=(0,ki.useSelector)(Rn),n=!t||!!r.key,[a,c]=(0,wi.useState)("");return(0,wi.useEffect)(()=>{(async()=>{if(!n)try{let d=await ns(t);c(o?xr(d,e):"")}catch(d){console.log(d)}})()},[o,n,t,e]),a},Ni=qh;var Kh=()=>{let o=(0,_C.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,yC.useBoolean)(!1),{coin:n}=S(),a=_(),c=N(),m=K(),d=Ni(),{coinId:g,localType:p}=n,f=vt(),A=Br();return{onClick:async()=>{try{e();let I=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:p}),{isDefraud:C,isSimilar:h,tronPermission:y,blackAddressWarning:E}=I;y&&y.wrongPermission?o(lm({wrongPermission:y.wrongPermission,msg:y.msg})):C?(o(mt(Jt.DEFRAUD)),o(Yt(E))):h?(o(mt(Jt.SIMILAR)),o(Yt(E))):o(mt("")),f()}catch(I){console.log(I)}finally{r()}},loading:t}},FC=Kh;s();i();var EC=u(x()),bC=u(b());var PC=u(q());ke();var Jh=()=>{let[o,{setFalse:t}]=(0,PC.useBoolean)(!0),{coin:e}=S(),r=_(),n=(0,bC.useDispatch)(),{coinId:a}=e;return(0,EC.useEffect)(()=>{(async()=>{if(Number(a)!==_n){let d=await Bc({coinId:a,address:r});n(dm(d))}t()})()},[a,r]),o},kC=Jh;s();i();var wC=u(x());function Yh(){let o=_();return(0,wC.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function zh(){return[Yh()]}var NC=zh;var Zh=()=>{let o=kC(),{onClick:t,loading:e}=FC(),r=NC();return BC.default.createElement(j,{addressProps:{errorFns:r},confirmButtonProps:{onClick:t,loading:e||o}})},vC=Zh;s();i();var DC=u(x());s();i();var Da=u(x()),fn=u(b());var vr=u(q());var $h=()=>{let[o,{setTrue:t,setFalse:e}]=(0,vr.useBoolean)(!1),r=(0,fn.useDispatch)(),n=N(),a=(0,fn.useSelector)(ir),c=(0,fn.useSelector)(Pt),m=K(),d=(0,vr.usePrevious)(m),g=Jm(),{coin:p}=S(),f=Ni(),{coinId:A}=p,T=async()=>{let C=a?"0":m,h={coinId:A,address:g},y={fromAddr:g,value:C,toAddr:n,inputData:f};try{let E=await Lc(h,y);r(J(E)),r(R(!1))}catch{r(R(!0))}finally{e()}},{run:I}=(0,vr.useDebounceFn)(T,{wait:500});return(0,Da.useEffect)(()=>{c&&(t(),I())},[c]),(0,Da.useEffect)(()=>{c&&m!==d||(t(),I())},[m,f,c]),o},LC=$h;var Xh=()=>{let o=LC();return to(),DC.default.createElement(X,{confirmButtonProps:{loading:o}})},MC=Xh;s();i();var GC=u(x()),VC=u(b());s();i();var ln=u(b()),OC=u(KT());ke();var jh=()=>{let o=vo(),{coin:t}=S(),e=_(),r=(0,ln.useSelector)(io),n=(0,ln.useSelector)(st),a=(0,ln.useSelector)(ir),c=K(),m=(0,ln.useSelector)(Et),d=yo({fromAddr:e,localType:Ki,walletId:m});return po(async()=>{if(!await Tr())throw new Error("mpc error")},async()=>{let I=a?"0":c,C=await ns(r),h=a?xr(C,c):"",y={coinId:t.coinId,address:e};return await vc(y,{fromAddr:e,toAddr:r,value:I,inputData:h})},async(I={})=>{let{info:C={}}=I,{timestamp:h,expiration:y,ref_block_bytes:E,ref_block_hash:k,feelimit:M,contractAddress:w,asset:P}=C,v={fromAddress:e,toAddress:r,amount:c,timestamp:h,expiration:y,refBlockBytes:E,refBlockHash:k},O={};return t.baseCoinId===0?O={type:re.TRANSFER,data:v}:a?O={type:re.TOKEN_TRANSFER,data:{...v,feeLimit:M,contractAddress:w}}:O={type:re.ASSET_TRANSFER,data:{...v,assetName:(0,OC.bufferToHex)(l.Buffer.from(P))}},await d({params:O})},async I=>{let C=await To(Ki,I),h={signedTx:I,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:n,txHash:C};return await o(h)},I=>(no({tx_id:I}),I))},RC=jh;s();i();var UC=u(x()),WC=u(b());function Qh(o,t){return(0,UC.useCallback)(()=>o?{text:t,type:ro.COMMON_ERROR}:null,[o,t])}function Ma(){let o=yu(),t=(0,WC.useSelector)(tm),e=Qh(t.wrongPermission,t.msg);eo({fns:[e,...o],override:!0})}function o_(){let o=RC(),t=async()=>{await o()},e=(0,VC.useSelector)(ae);return Ma(),GC.default.createElement(Q,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var HC=o_;var t_={match:o=>o===_n,pages:{AddressPage:vC,AmountPage:MC,ConfirmPage:HC}},qC=t_;s();i();Ao();s();i();var YC=u(x());s();i();var KC=u(q());Ne();Be();var e_=()=>{let{baseCoin:o}=S();return(0,KC.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},r;try{r=await Sc(Jo.queryAccountExist,e)}catch(n){console.log(n)}return r?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function r_(){let o=Lt(),t=e_();return[o,t]}var JC=r_;var n_=()=>{let o=JC();return YC.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},zC=n_;s();i();var ZC=u(x());function s_(){return to(),ZC.default.createElement(X,null)}var $C=s_;s();i();var pn=u(x());H();s();i();var XC=u(b());wo();var i_=o=>{let{coin:t,baseCoin:e}=S(),r=_(),n=(0,XC.useSelector)(io),a=co(),c=vo();return po(async()=>await or({coinId:t.coinId,address:r},{fromAddr:r,toAddr:n}),async A=>{let{info:T}=A,{chainid:I,compression:C,refBlockNumber:h,refBlockId:y,refBlockTimestamp:E,expireSeconds:k,precision:M,symbol:w,contract:P}=T,v={type:0,from:r,to:n,amount:a,memo:o,precision:M,symbol:w,contract:P,common:{chainId:I,compression:C,refBlockNumber:h,refBlockId:y,refBlockTimestamp:E,expireSeconds:k}};return await so().signTransaction(v,r,e.localType)},async A=>{let T={memo:o},I=await To(t.localType,A),C={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:n,serviceCharge:"0",extJson:JSON.stringify(T),txHash:I};return await c(C)},A=>(no({tx_id:A}),A))},jC=i_;var QC=256;function a_(){let[o,t]=(0,pn.useState)(""),e=jC(o),r=async()=>{await e()},n=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=QC&&t(a.target.value)};return eo(),pn.default.createElement(Q,{slot:{bottom:pn.default.createElement(Wt,{value:o,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:QC}),onChange:n})},confirmButtonProps:{onSubmit:r}})}var oT=a_;var c_={match:o=>o===tc,pages:{AddressPage:zC,AmountPage:$C,ConfirmPage:oT}},tT=c_;s();i();s();i();var Di=u(x());s();i();var sT=u(x()),iT=u(q());var Li=u(b());$o();s();i();var eT=u(No());var rT=u(b());var nT=u(q());function m_(){let{coinId:o}=(0,eT.useParams)(),t=_(),e=(0,rT.useSelector)(io);return(0,nT.useMemoizedFn)(async()=>(await Qe({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var Bi=m_;s();i();go();function u_(){let o=$m();return(t,e,r)=>{let n=e||0,a=Ko(r,0)?_o(n,r):"0",c=o[t];return dc(Ho(a,10**(c.decimals||0)),0)}}var vi=u_;function d_(){let o=(0,Li.useDispatch)(),[t,e]=(0,sT.useState)(!1),r=(0,Li.useSelector)(Hc),n=Bi(),a=Eu(),c=vi();return(0,iT.useMount)(()=>{e(!0),(async()=>{try{let g=(await n())?.info||{},p={};if(r!==-1)p=(g?.coinFeeList||[]).find(({coinId:A})=>A===r);else{let A=Ja(g?.coinFeeList||[],T=>a(T.coinId).currencyAmount||0);A&&(p=A.pop())}let f=c(p?.coinId,g?.methodFeeList?.transfer,p?.rate);o(se(p?.coinId)),o(J(f)),o(fm(g))}finally{e(!1)}})()}),t}var aT=d_;function f_(){let o=aT();return to(),Di.default.createElement(X,{confirmButtonProps:{loading:o}})}function l_(){let{coin:o}=S();return Di.default.createElement(Lo,{fixed:!!o.vdecimalNum},Di.default.createElement(f_,null))}var cT=l_;s();i();var qe=u(x());var lT=u(q());s();i();var mT=u(b());wo();Fo();Ao();function p_(){let o=vo(),{coin:t}=S(),e=_(),r=(0,mT.useSelector)(io),n=$(),a=me(),c=co(),m=Bi(),{coin:d}=ms(a,!1);return po(m,async(f={})=>{let{info:A={}}=f,{chainId:T,accountId:I,nonce:C,tokenId:h,coinFeeList:y=[]}=A,E=y.find(({coinId:w})=>w===a)||{},k={type:re.TRANSFER,accountId:parseInt(I,10),nonce:C,from:e,chainId:T,to:r,tokenId:parseInt(h,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(E.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:n,amounts:c};return await so().signTransaction(k,e,Za)},async f=>{let{signature:A,tx:T}=f||{},{txHash:I,...C}=T||{},h={txSource:nt.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:C}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:r,serviceCharge:f?.tx?.fee,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(h)})}var uT=p_;s();i();var Go=u(x()),dT=u(Ft());H();var Mi=u(q()),Oi=u(b());s();i();var Lr={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var g_=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:r,setSupplyGas:n,...a})=>{let c=Zt(o),m=c?.coinAmountInt,d=B.gte(m,t);return Go.default.createElement(oa.Card,{hovered:d,onClick:()=>{d&&r?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Go.default.createElement(V.Space,{space:12,className:(0,dT.default)(Lr["select-networkFee-card-content"],{[Lr["select-networkFee-card-content-disable"]]:!d})},Go.default.createElement(zt,{size:zt.SIZE.lg,src:c?.image,text:c?.text}),Go.default.createElement(V.Space,{space:2,direction:V.DIRECTION.vertical,...a},Go.default.createElement(Y.Text,{strong:!0},c?.symbol),Go.default.createElement(Y.Text,{size:Y.SIZE.xs,type:Y.TYPE.secondary},d?F("developer_mode_send_text_balanceprice",{balance:Le(m,{decimals:c?.decimals,useApproximate:!1})}):F("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Go.default.createElement(fo,{category:fo.CATEGORY.fill,type:fo.TYPE.gray,size:fo.SIZE.xxs,onClick:g=>{g?.stopPropagation(),n({supplyGasVisible:!0,supplyGasCoinId:o})}},F("extension_send_btn_fill_up_token",{token:c?.symbol})))},A_=({visible:o,onToggle:t})=>{let e=me(),r=(0,Oi.useDispatch)(),n=_(),a=ut(),c=vi(),[{supplyGasVisible:m,supplyGasCoinId:d},g]=(0,Mi.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),p=(0,Oi.useSelector)(em),f=p?.coinFeeList||[],A=p?.methodFeeList?.transfer,T=(0,Mi.useCreation)(()=>f.map(({rate:h,coinId:y})=>{let E=c(y,A,h);return{coinId:y,feeCoinAmountInt:E}}),[f,A]),I=({coinId:h,feeCoinAmountInt:y})=>{t?.(),r(se(h)),r(J(y))},C=({coinId:h,feeCoinAmountInt:y})=>Go.default.createElement(g_,{coinId:h,selectedCoinId:e,feeCoinAmountInt:y,onSelect:I,setSupplyGas:g});return o?Go.default.createElement(V.Portal,{component:V.Container,className:Lr["select-networkFee"]},Go.default.createElement(Zm,{onBack:t,onClose:t,title:F("wallet_transfer_subtitle_network_fee")}),Go.default.createElement(V.Box,{className:Lr["select-networkFee-content"]},Go.default.createElement(Y.Text,{className:Lr["select-networkFee-title"]},F("wallet_extension_send_alert_choose_token")),Go.default.createElement(oa,{space:16,dataSource:T,renderItem:C})),Go.default.createElement(ru,{walletId:a,address:n,visible:m,closeCallback:()=>{g({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},fT=A_;function C_(){let[o,{toggle:t}]=(0,lT.useBoolean)(!1),e=uT(),r=async()=>{await e()};return eo(),qe.default.createElement(qe.default.Fragment,null,qe.default.createElement(Q,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:r}}),qe.default.createElement(fT,{visible:o,onToggle:t}))}function T_(){let{coin:o}=S();return qe.default.createElement(Lo,{fixed:!!o.vdecimalNum},qe.default.createElement(C_,null))}var pT=T_;var I_={match:o=>Dm(o),pages:{AddressPage:j,AmountPage:cT,ConfirmPage:pT}},gT=I_;s();i();Ao();s();i();var Ui=u(x());s();i();var AT=u(x()),CT=u(q());var Ri=u(b());function S_(){let o=(0,Ri.useDispatch)(),{coin:t}=S(),e=_(),r=(0,Ri.useSelector)(io),n=td(),[a,c]=(0,AT.useState)(!1);return(0,CT.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},g={fromAddr:e,toAddr:r,value:"0"};try{let p=await n("Transfer",d,g);if(p){let{info:f,feeCoin:A,fee:T}=p;o(Sm({info:f,feeCoin:A})),o(se(A.coinId)),o(J(T)),o(R(!1))}}catch{o(R(!0))}finally{c(!1)}})()}),a}var TT=S_;s();i();var IT=u(x());H();go();function Oa(){let{coin:o}=S();return(0,IT.useCallback)(async t=>{let{ZksyncWallet:e}=await qr(),r=Ho(t,10**o.decimals),n=await e.getCloseAmounts(r);return yn(n,r)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:B.showFloorTruncation(_o(n,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:ro.COMMON_ERROR}},[])}function x_(){let t=[Oa()];to(t)}var ST=x_;function h_(){let o=TT();return ST(),Ui.default.createElement(X,{confirmButtonProps:{loading:o}})}function __(){let{coin:o}=S();return Ui.default.createElement(Lo,{fixed:!!o.vdecimalNum},Ui.default.createElement(h_,null))}var xT=__;s();i();var Wi=u(x());s();i();var Ra=u(b());wo();Ao();Fo();function y_(){let o=vo(),{coin:t}=S(),e=_(),r=(0,Ra.useSelector)(io),n=$(),a=me(),c=K(),m=(0,Ra.useSelector)(sm),d=async()=>{let{info:p,feeCoin:f}=m||{},{accountId:A,nonce:T}=p||{},I={type:re.TRANSFER,from:e,to:r,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:n,decimals:t.decimals,nonce:parseInt(T,10)};return await so().signTransaction(I,e,$a)},g=async p=>{if(p?.code)throw new Error(Is);let{signature:f,tx:A}=p||{},{txHash:T,...I}=A||{},C={txSource:nt.NORMAL,signedTx:JSON.stringify({signature:f,tx:I}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(C)};return async()=>{let p=await d();return g(p)}}var hT=y_;s();i();var _T=u(x());function F_(){let o=Oa();return(0,_T.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:Me.AMOUNT}:null},[o])}function E_(){let t=[F_()];eo(t)}var yT=E_;function b_(){let o=hT(),t=async()=>o();return yT(),Wi.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}function P_(){let{coin:o}=S();return Wi.default.createElement(Lo,{fixed:!!o.vdecimalNum},Wi.default.createElement(b_,null))}var FT=P_;var k_={match:o=>o===ja,pages:{AddressPage:j,AmountPage:xT,ConfirmPage:FT}},ET=k_;s();i();Ao();s();i();var kT=u(x());s();i();var bT=u(q());var w_=()=>{let{coin:o}=S();return(0,bT.useMemoizedFn)(async t=>{let e={address:t,chainId:o?.chainId},r=!1;try{let{status:n}=await tu(e);r=n===Fc.COMPLETED}catch{r=!1}return r?null:{key:"wallet_extension_transfer_input_error_add_unregistered",args:{}}})};function N_(){return[w_()]}var PT=N_;var B_=()=>{let o=PT();return kT.default.createElement(j,{addressProps:{errorFns:{override:!1,fns:o},extraProps:{disableRequestDomain:!0}}})},wT=B_;s();i();var gn=u(x());H();s();i();var NT=u(x()),BT=u(b());Ao();var v_=({coinId:o,address:t})=>{let e=(0,BT.useDispatch)(),[r,n]=$t({coinId:o,address:t});return(0,NT.useEffect)(()=>{n.normal&&e(J(n.normal)),n.maxTransferAmount&&e(o===hn?bo(n.maxTransferAmount):kt(n.maxTransferAmount))},[o,e,n.maxTransferAmount,n.normal]),[r,n]},Gi=v_;s();i();var vT=u(x());H();go();var L_=o=>{let{coin:t}=S(),e=de(),r=Fu(e,t?.decimals),n=lr(),a=Oo();return(0,vT.useCallback)(c=>t?.baseCoinId===0&&Ko(c,a)&&we(c,r)?{key:"wallet_extension_transfer_input_error_pi_minimum",args:{amount:n(B.div(o,10**t.decimals),t,{useApproximate:!1})},type:ro.BALANCE_INSUFFICIENT}:null,[r,o,a])},D_=o=>{let t=As(),e=Cs(),r=xu(),n=L_(o);to({fns:[t,n,e,r],override:!0})},LT=D_;function M_(){let{coin:o}=S(),t=_(),[e,r]=Gi({coinId:o?.coinId,address:t});return LT(r?.maxTransferAmount),gn.default.createElement(X,{isGlobalLoading:e,totalAmountProps:{type:"amount",title:gn.default.createElement(gn.default.Fragment,null,F("extension_wallet_send_text_transfer_available"),gn.default.createElement(zt,{size:zt.SIZE.xxs,style:{marginLeft:"4px"},tooltip:F("wallet_extension_transfer_input_error_pi_available_balance"),icon:"okx-wallet-plugin-information-circle"}))}})}var DT=M_;s();i();var An=u(x());H();s();i();var MT=u(x());var O_="transfer",R_=(o,t)=>{let{coin:e}=S(),r=_(),n=lo(),a=co(),c=$(),m=N(),d=yo({walletId:n,fromAddr:r,localType:e.localType}),g=lt({walletId:n,coinId:e.coinId,coinAmount:a,fromAddr:r,toAddr:m,networkFee:c,localType:e.localType});return(0,MT.useCallback)(async()=>{let p={memo:o,amount:a,source:r,fee:t?.normal,sequence:t?.nonce,type:O_,decimals:e?.decimals,toAddress:m,networkPassphrase:t?.networkPassphrase},f=await d({params:p}),A=await To(e?.localType,{tx:f,networkPassphrase:t?.networkPassphrase}),T=await g(f,{txHash:A});no({tx_id:T})},[o,a,r,t?.normal,t?.nonce,t?.networkPassphrase,e?.decimals,e?.localType,m,d,g])},OT=R_;var RT=28;function U_(){let{coin:o}=S(),t=_(),[e,r]=(0,An.useState)(""),[n,a]=Gi({coinId:o?.coinId,address:t}),c=OT(e,a),m=d=>{let g=d.target.value;new TextEncoder().encode(g).length<=RT&&r(d.target.value)};return eo(),An.default.createElement(Q,{slot:{bottom:An.default.createElement(Wt,{value:e,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:RT}),onChange:m})},confirmButtonProps:{loading:n,onSubmit:c}})}var UT=U_;var W_={match:o=>o===hn,pages:{AddressPage:wT,AmountPage:DT,ConfirmPage:UT}},WT=W_;var G_=[ep,ul,ef,kl,Lp,pg,xA,qC,gT,ET,jA,wA,tT,UA,hp,yg,Jg,hC,WT],GT=G_;var V_=({coinId:o,protocolId:t,baseCoinId:e})=>{let r=GT.find(({match:d})=>d(e,o,t))||{},{Container:n=({children:d})=>Ct.default.createElement(Ct.default.Fragment,null,d)}=r,{AddressPage:a,AmountPage:c,ConfirmPage:m}=r.pages||{};return Je(r)?null:Ct.default.createElement(n,null,Ct.default.createElement(Fe.Switch,null,Ct.default.createElement(Fe.Route,{exact:!0,path:`${zo}/:coinId?${vn}`,component:a}),Ct.default.createElement(Fe.Route,{exact:!0,path:`${zo}/:coinId?${er}`,component:c}),Ct.default.createElement(Fe.Route,{exact:!0,path:`${zo}/:coinId?${rr}`,component:m})),Ct.default.createElement(Sd,null))},H_=(0,Ct.memo)(V_),q_=()=>{let{coinId:o}=(0,Fe.useParams)(),{coin:t,baseCoin:e}=ms(o,!0);return Ct.default.createElement(H_,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},u8=q_;export{u8 as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-7TV35ERU.js.map
