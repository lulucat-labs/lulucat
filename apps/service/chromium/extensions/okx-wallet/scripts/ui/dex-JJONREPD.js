import{a as Te}from"./chunk-KW2AFYVX.js";import{a as Eo,b as Po}from"./chunk-O4AUMYZ5.js";import{a as Io,b as So}from"./chunk-QIAIB722.js";import{a as no,b as io}from"./chunk-NRBSVWMB.js";import"./chunk-WGGUVNMX.js";import"./chunk-7H73XLDQ.js";import"./chunk-CUQ3APPN.js";import{a as wo,b as ho}from"./chunk-QEWWDRCI.js";import"./chunk-I2R6SGZU.js";import"./chunk-BAUTUSPJ.js";import"./chunk-4TXBJTY4.js";import"./chunk-JA6DNDTG.js";import"./chunk-7SGHPBSV.js";import{a as To}from"./chunk-CUTSXOOS.js";import"./chunk-ZAFBI5BD.js";import"./chunk-YSW2YY4I.js";import"./chunk-YDKVBWIO.js";import"./chunk-4PFFVHVY.js";import"./chunk-2QOKJOXY.js";import"./chunk-JSJTP4EG.js";import"./chunk-B7XHX4LU.js";import{k as xo}from"./chunk-LEEK32ZR.js";import{a as Fo}from"./chunk-MMD6HZVV.js";import{a as uo,d as po,e as go}from"./chunk-FRYK2ICE.js";import"./chunk-37XSQI5O.js";import{b as to,d as oo,e as ro,g as ao}from"./chunk-HNJT6VHX.js";import"./chunk-KWQDFT3S.js";import"./chunk-CLAWFLRW.js";import"./chunk-454I7KWD.js";import"./chunk-R6UCQXIY.js";import"./chunk-DIVFRUSZ.js";import"./chunk-PEC3MSS4.js";import"./chunk-OL23QTWJ.js";import{a as Co}from"./chunk-7ZAUZKU4.js";import{b as yo}from"./chunk-QNJJMAHT.js";import"./chunk-RIBJE2RV.js";import{i as jt,m as Zt,q as Qt,s as $t}from"./chunk-JFV2UG4S.js";import{a as Kt,b as ye,c as Jt,d as qt}from"./chunk-4VFXVCHS.js";import"./chunk-6G3RP33F.js";import"./chunk-GILBGQWV.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import"./chunk-GGC2CY5E.js";import"./chunk-JKSK4TNM.js";import{a as Xt}from"./chunk-UTSCFP3M.js";import"./chunk-VPEGTYK6.js";import"./chunk-MZ62OMSF.js";import"./chunk-HYFMV74Y.js";import"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import{a as ar}from"./chunk-YUYN4WIC.js";import{a as lo}from"./chunk-F2P7PYLX.js";import"./chunk-UN53AGLN.js";import"./chunk-5BFBWHMC.js";import"./chunk-FOJX7ELC.js";import{a as fo}from"./chunk-NFPXRZGF.js";import{a as mo}from"./chunk-7P3TAB2X.js";import{e as Bt}from"./chunk-F2DBKTIG.js";import{a as eo,c as co}from"./chunk-2AZAHALD.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import"./chunk-B2JJAXTZ.js";import{a as Ot,e as Ht,m as Vt,r as Ut,t as zt}from"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import{a as Gt}from"./chunk-QHPYMFK2.js";import{d as vt,f as Mt}from"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import"./chunk-2P7I7CKT.js";import{a as so}from"./chunk-52ESRIYZ.js";import"./chunk-UNBGCT5E.js";import"./chunk-FOZHYRP7.js";import"./chunk-ELJZY4AU.js";import"./chunk-4L5OPDYI.js";import{a as Yt}from"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import"./chunk-7YQLUBDN.js";import{a as Wt}from"./chunk-4WN6OBDI.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-ZOUFDRHZ.js";import{n as Q}from"./chunk-QZXD2Q4G.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import{c as Pt}from"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import{a as ue,i as Et}from"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import{a as rr}from"./chunk-PC3VBAVS.js";import"./chunk-T4JYRYUW.js";import"./chunk-XWNVCXH2.js";import"./chunk-76YYXJZQ.js";import"./chunk-WQZIG74O.js";import{a as Oe,b as He,g as pt}from"./chunk-KE4OYCXI.js";import"./chunk-MFSPDO3X.js";import"./chunk-ICS7QRDT.js";import"./chunk-2LFRM3KT.js";import"./chunk-GGZ73X5S.js";import{a as kt,b as Lt}from"./chunk-IEUJSLGG.js";import"./chunk-FUXD4L32.js";import"./chunk-QIV5EJPL.js";import"./chunk-4HIOE2KZ.js";import"./chunk-WRZIZFIL.js";import{a as pe}from"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import{j as Rt}from"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-4X3SKD2N.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import{a as de}from"./chunk-OGS4HURJ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import{a as ge}from"./chunk-HZPID3WW.js";import{a as Nt}from"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{h as Dt}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-ROB5HGLC.js";import{a as At}from"./chunk-74FNJDB7.js";import"./chunk-E75DNWM4.js";import{a as bt}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as _t}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{a as ut}from"./chunk-WSXZYUQ4.js";import"./chunk-JRZXGORL.js";import"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import{e as dt}from"./chunk-DZHQUYHS.js";import{o as le}from"./chunk-AUURQ3HI.js";import{$a as lt,Db as St,Eb as Z,F as je,K as me,L as Y,M as j,Na as mt,Pa as ft,Q as it,Sb as wt,T as st,U as ct,cc as xt,p as Je,tb as gt,vb as yt,xb as Tt,zb as It}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as or}from"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import{d as w,f as ne}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{a as ht,b as M}from"./chunk-XRF6BZHR.js";import"./chunk-OWU5GWTN.js";import{B as et,H as tt,J as ot,Q as ce,_ as rt,da as at,ka as nt,t as $e,z as se}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import{a as Ft,u as Ct}from"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as fe}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{Ab as Me,Ac as $o,Ba as X,Bc as Ye,Ca as Re,Cc as er,Db as Ge,Eb as Be,Fb as jo,Ib as V,Ja as We,Jb as Ve,Kb as K,La as re,Lc as _,Mc as J,W as oe,Xb as Ue,Y as Le,_a as L,_c as q,aa as W,ba as F,d as Fe,e as qo,ea as _e,fc as ze,hc as Xe,ic as Ke,ja as De,jc as Zo,ka as Ne,kc as ae,ma as z,o as te,pb as H,qc as Qo,ra as v,u as Ae,uc as qe,yb as ve,z as ke,za as be}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import"./chunk-E44TZGUB.js";import{f as Ce,j as E,o as Ee,oa as O,r as Pe}from"./chunk-KBQXBPIW.js";import{O as ee,w as P}from"./chunk-364XNTHB.js";import{b as Yo}from"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as R}from"./chunk-PDSGFBX4.js";import{W as Qe,t as ie,v as Ze}from"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import{a as tr}from"./chunk-CGP26AOO.js";import"./chunk-PXMID6CS.js";import"./chunk-RXPNGY6Q.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-TKZ7N5JX.js";import"./chunk-CWRZ2WAJ.js";import"./chunk-OMIXKWD3.js";import"./chunk-PBODVK5S.js";import"./chunk-OENPHC74.js";import"./chunk-KHHBU7RQ.js";import"./chunk-TNAXYRKK.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as y,n as process,o as I,q as S}from"./chunk-FJHLV356.js";I();S();var U=y(R()),C=y(xt()),$=y(or()),Jo=y(le());O();ee();Zo();qo();ke();q();ve();L();er();$o();jo();I();S();var Ie=y(R());ee();L();var Ao=({visible:t,onClose:e,onChange:o,walletId:a})=>Ie.default.createElement(Te,{visible:t,onClose:e,onChange:o,coinId:be,walletId:a},Ie.default.createElement(Te.Header,{title:P("extension_defi_top_header_title_select_address_type"),subTitle:P("extension_defi_popup_desc_new_address_default")}));I();S();var ko=y(R()),Lo=y(le());O();var _o=y(rr());ne();q();L();var nr=({walletId:t,txParams:e,onConfirm:o,onCancel:a,backable:n=!1,onBack:r,asPage:i})=>{let s=Dt(t),f=Nt(F,s?.walletId),c=zt({coinAmount:0,localType:F,coinId:Re,fromAddr:f,walletId:s?.walletId,txSource:J.DAPP}),m={localType:F,params:{transaction:e},walletId:s?.walletId},l=(0,Lo.useMemoizedFn)(async({networkFee:u})=>{let{raw_data:p,raw_data_hex:d,txID:h,visible:x}=e||{};try{let T=await w().signCommonMessage(f,{type:"protobuf",message:JSON.stringify({txID:h,visible:x,raw_data:p,raw_data_hex:d})},F),D=_o.default.address.fromHex(E(p,"contract[0].parameter.value.contract_address",f)),N=await Ot(F,T);await c(T,{toAdr:D,txHash:N,serviceCharge:u}),o?.({txHash:N})}catch(T){o({error:T})}});return ko.default.createElement(So,{backable:n,onBack:r,asPage:i,unapproved:m,onCancel:a,onConfirm:l})},Do=nr;I();S();var k=y(R()),Ho=y(xt());var Vo=y(le());O();ee();I();S();var No=y(R());Yo();L();var ir=async(t={})=>{let{contractAddress:e,contractName:o,functionName:a,functionArgs:n}=t,{getRawTransaction:r}=await ue(),i={data:{type:se.CONTRACT_CALL,data:{contract:e,contractName:o,functionName:a,functionArgs:n}}};return await r(5757,i)},sr=async(t={})=>{let{recipient:e,amount:o,memo:a}=t,{getRawTransaction:n}=await ue(),r={data:{type:se.TRANSFER,data:{to:e,amount:o,memo:a}}};return await n(5757,r)},cr=async(t={})=>t.txType===ce.CONTRACT_CALL?ir(t):t.txType===ce.STX_TRANSFER?sr(t):"",bo=async({transaction:t={},fromAddress:e,value:o})=>{let a=await cr(t);return(await Fo({coinId:We,fromAddress:e,value:o,inputData:a}))?.gasLimit||"0"};I();S();var mr=y(R());O();L();ne();async function Ro(t,e){let o=async()=>await Y({coinId:re,address:t},{fromAddr:t,toAddr:""}),a=async f=>{let c=E(f,"info.nonce",0),m={type:et.MULTI_CONTRACT_CALL,nonce:c,maxFee:0,chainId:no.StarknetChainId.SN_MAIN,multiContractCallData:{from:t,calls:e}};return(await w().signTransaction(m,t,z))?.signature},n=async f=>{let{data:c}=await j({coinId:re,address:t,inputData:f});return c?.gasLimit},r=await o(),i=await a(r);return await n(i)}Qo();ke();q();L();Xe();ne();I();S();var Wo=y(ar()),Se=y(tr());O();q();ve();L();Xe();async function vo(t,e){return(await Et()).address.fromHex(E(t,"raw_data.contract[0].parameter.value.contract_address",e))}function Mo(t){return E(t,"raw_data.contract[0].parameter.value.data","")}function Go(t){let e=E(t,"raw_data.contract[0].parameter.value.call_value"),o=E(t,"raw_data.contract[0].parameter.value.amount","");return e||o}async function fr(t){let{data:e={}}=await me({coinId:X,address:t},{fromAddr:t}),{info:o={}}=e;return o}async function lr(t,e){let{transaction:o,bizType:a,bizId:n=[],notReplaceBlockhash:r=!1}=t,i=null,s=()=>typeof t?.toJSON=="function"?t:t?.instruction,{recentBlockhash:f,lastValidBlockHeight:c}=await fr(e),m=s();return m?i=new ie({feePayer:e,blockhash:f,lastValidBlockHeight:c}).add(m):o&&(r||(o instanceof Ze?o.message.recentBlockhash=f:(o.signatures=[],o.recentBlockhash=f),o.lastValidBlockHeight=c,n.forEach(l=>{let u=(0,Wo.mnemonicToSeed)(a,l),p=Qe.fromSeed(u.slice(0,32));o?.version>=0?o.sign([p]):o.partialSign(p)})),i=o),i}async function Bo(t,e){let o=await lr(t,e);return o instanceof ie?Se.default.encode(o.serialize({requireAllSignatures:!1,verifySignatures:!1})):Se.default.encode(o.serialize())}function B(t){let e=H({netWorkId:String(t)}),o=e?.baseChain||"",a=e?.localType||"",n=e?.coinId||3,r=e?.realChainIdHex;return{baseCoinId:n,networkType:a,chainId:r,baseChain:o}}async function we({networkId:t,address:e,data:o,tokenAddress:a}){let n={},{baseCoinId:r}=B(t),i={coinId:r,address:e},s={fromAddr:e,value:"0"},f={address:e,inputData:o,coinId:r,value:"0",tokenAddress:a},{data:c}=await j(f),{gasLimit:m}=c,{data:{info:l}}=await me(i,s),u=l?.needExtFee||!1,p=l?.gasPrice||{},{normal:d,proposePriorityFee:h,supportEip1559:x}=p;if(!u)return n={maxFeePerGas:d,maxPriorityFeePerGas:h,gasPrice:d,gasLimit:m,supportEip1559:x,networkFee:V(d,m)},n;let T={from:e,to:a,data:o,value:M(0),gasPrice:M(d),gasLimit:M(m)},D=Je(T),N=await Xt(D),b=await it({coinId:r},{inputData:N}),g=K(V(d,m),b);return n.networkFee=g,n.extFee=b,n}function A(t,e){return ze(Ve(t,10**e))}var ur=({code:t,data:e,error_message:o,error:a})=>{if(t!==0||!e||e.queryGasLimitErrorUseDefault||a)return{fee:0,error:o};let{gasLimit:n="0"}=e;return{...e,fee:n,error:!1}};async function he({walletId:t,coinId:e,fromAddr:o,tx:a}){let n=a[0],r=a.extParams||{},i=n?.messages||[],s=n?.network||1,f=i?.valid_until||Math.floor(Date.now()/1e3)+600,{address:c}=i[0]||{},m=await Y({coinId:e,address:o,toAddr:c,fromAddr:o}),l=m?.chainId,u=m?.info?.nonce,p=await Eo({nonce:u,localType:v,fromAddr:o,walletId:t,messages:i,network:s,validUntil:f}),d=JSON.stringify(p.stringInputParams),h=await Po({fromAddr:o,chainId:l,coinId:e,inputData:d}),x=ur(h),T={coinId:e,coinAmount:0,inputData:d,fromAdr:o,toAdr:c,serviceCharge:x?.fee,extJson:JSON.stringify({nonce:u}),txSource:J.DEX,accountId:t,walletType:nt.IMPORT,transactionParams:p?.transactionParams,...r};return{feeInfo:x,extParams:T}}var Oo=-42412,pr=-42418,dr=Pe(Jt,500);function Uo(t,e){let{baseCoinId:o}=B(t),a=ge(),n=vt(e?void 0:o,void 0,e?{chainId:+t,address:e}:void 0);return Mt(n?.coinId,a,{withBalanceStatus:!0})}async function gr({coinId:t=3},{gasInfo:e={},calldata:o}){let{networkFee:a,isNetworkFeeLoading:n,isGasLimitLoading:r}=e,i=n||r,{minGasFee:s}=Kt(e),f=Ue(s),c=ye(e,"swap"),m=await dr(t,o),l=c||m;return l===!0&&(l=P("swaptrade_extension_cinteraction_might_error")),{fee:f,feeInt:s,maxFeeInt:a,loading:i,error:l}}async function yr(t,{decimals:e},{calldata:o}){let{transaction:a}=o,{fee:n}=await ct({coinId:X,address:t}),r;if(a){let c=ft(a);r=mt(a,c)}let{totalPriorityFee:i}=await wo([r]),s=K(n,i);return{fee:A(s,e),feeInt:s}}async function Tr(t,{decimals:e},{calldata:o}){let a=await Co({address:t,transaction:o});return{fee:A(a,e),feeInt:a}}async function Ir(t,{decimals:e},{calldata:o}){let a=await Io({address:t,inputData:Mo(o),toAddr:await vo(o,t),value:Go(o)});return{fee:A(a,e),feeInt:a}}async function Sr(t,{decimals:e},{calldata:o}){let a=xo.from(o.transactionBlock);a.setSenderIfNotSet(t);let n=a?.blockData?.gasConfig?.budget||"0";return{fee:A(n,e),feeInt:n}}async function wr(t,{decimals:e},{calldata:o}){let a=await bo({transaction:o,fromAddress:t,value:"0"});return{fee:A(a,e),feeInt:a}}async function hr(t,{decimals:e},{calldata:o}){let a=await Ro(t,o);return{fee:A(a,e),feeInt:a}}async function xr(t,{decimals:e,coinId:o,chainId:a},n,{calldata:r}){let i=await he({walletId:n,fromAddr:t,coinId:o,chainId:a,tx:r}),s=i.feeInfo.fee,f=i.feeInfo.error;return{fee:A(s,e),feeInt:s,error:f}}function zo(t,e){let o=ge(),{baseChain:a,baseCoinId:n}=B(t),{baseCoin:r}=Gt(n,!0),i=de(a),{symbol:s}=(0,Ho.useSelector)(Z),f=Rt(n)||0,[c,m]=(0,k.useState)(0),[l,u]=(0,k.useState)(0),[p,d]=(0,k.useState)(0),[h,x]=(0,k.useState)(!1),[T,D]=(0,k.useState)(!1),N=(0,k.useMemo)(()=>{let b=V(c,f);return{estimatedGasFeeInt:l,maxGasFeeInt:p,decimals:r?.decimals,currencyAmount:b,currencySymbol:s,coinSymbol:r?.symbol,loading:h,error:T}},[r.decimals,r.symbol,s,T,l,p,h,f,t,e,e?.gasInfo?.isNetworkFeeLoading,e?.gasInfo?.isGasLimitLoading]);return(0,Vo.useDeepCompareEffect)(()=>{async function b(){let g={fee:0,feeInt:0};x(!0),D(!1);try{a===oe?g=await gr(r,e):a===W?g=await yr(i,r,e):a===_e?g=await Tr(i,r,e):a===De?g=await Sr(i,r,e):a===F?g=await Ir(i,r,e):a===Ne?g=await wr(i,r,e):a===z?g=await hr(i,r,e):a===v&&(g=await xr(i,r,o,e)),m(g.fee),u(g.feeInt),d(g.maxFeeInt||g.feeInt)}catch{m(0),u(0)}finally{x(!!g.loading),D(g.error)}}b()},[t,e]),N}async function Fr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:a,currentWallet:n}){let r=e,{baseChain:i,chainId:s,baseCoinId:f}=B(t);if(i===W){let{account:c}=n,m=c[W];return r.transaction=await Bo(e,m),{target:r}}if(i===oe){if(ye(e?.gasInfo,"swap"))throw new Error(P("wallet_home_toast_network_error"));let m=r.value||r.amount||0,l=B(t).baseCoinId;r={...r,...r.gasInfo};let u=await a({...r,userGasInfo:r.gasInfo,coinId:l,amount:m,baseCoinAmountUse:m}),{nonce:p,updateGasInfo:d={}}=u||{};r.nonce=p,r.maxFeePerGas=d.maxFeePerGas||r.maxFeePerGas,r.maxPriorityFeePerGas=d.maxPriorityFeePerGas||r.maxPriorityFeePerGas,r.gasPrice=d.gasPrice||r.gasPrice;let h=await w().getSelectedWallet(),x=await w().generateFormatedTxParams(t,r),{dispatch:T}=o||{};return T&&(await T(kt({txParams:x,walletId:h})),r.result=x.result,r.walletId=h),{target:r}}if(i===Le){let c=await w().getSelectedWallet(),m=await w().generateFormatedTxParams(t,r),l=await Lt(m,m.address,i,c);return r.result=l,r.walletId=c,{target:r}}if(i===v){let{walletId:c,account:m}=n,l=m[v],{extParams:u}=await he({walletId:c,fromAddr:l,coinId:f,chainId:s,tx:e});return delete r.extParams,{target:r,extParams:u}}return{target:r}}async function xe({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:a,currentWallet:n}){if(!e)throw new Error("tx is required");let r=e;try{let{target:i,extParams:s}=await Fr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:a,currentWallet:n});return r=i,await w().dexSignAndSubmitTransaction(t,r,s)}catch(i){throw i?.data?.originalError?(i.message=i?.data?.originalError?.error_message,i.code=Oo):i?.message===Ct?(i.message=P("wallet_extension_swap_error_hardware_not_support"),i.code=Oo):i.code=pr,i}finally{ae()===te&&w().focusLastOkPopupWithCache()}}async function Xo(t,e){let o=e;try{return typeof e=="string"&&(o=JSON.parse(e)),await w().dexSignTypedDataV4(t,o)}finally{ae()===te&&w().focusLastOkPopupWithCache()}}var Ko=t=>{let{chainId:e}=je(t),o=pe(t).some(c=>Pt(c.coinId)),a=o?wt(t):pe(t),n;o?n=a.find(c=>c.realChainIdHex===e)||{}:n=a[0]||{};let r=Number(o?n.netWorkId:n.chainId),i=gt(t),s=Tt(t);return{walletType:{isMNEMONIC:s[i].keyringIdentityType===_.MNEMONIC,isPRIVATE:s[i].keyringIdentityType===_.PRIVATE_KEY,isHARDWARE:s[i].keyringIdentityType===_.HARDWARE,isMPC:s[i].keyringIdentityType===_.MPC},chainId:r}};Q.initSentry(He,Oe,process.env.APP_VERSION);Q.setGlobal({HARDWALLETERROR:Ft,getApiHostname:Me,getStaticHostname:Be,getWssHostname:Ge,LocalStore:Fe,interceptorHeaders:qe,urlConfig:Ye,FeeTypeEnum:rt,TxToastCheckTypeEnum:at,SolanaTransactionInstanceTypeEnum:ot,netWorkIdToLocalType:new Proxy({},{get(t,e){return H({netWorkId:String(e)})?.localType}}),localTypeToBaseCoinId:new Proxy({},{get(t,e){return H({localType:e})?.coinId}}),isTelegramMiniApp:Ke()===Ae,KeyringIdentityTypeEnum:_,RegisterLocalStatusEnum:$e,hexToDecimal:ht,decimalToHex:M,signAndSubmitTransaction:xe,signTypedDataV4:Xo,signSolanaCommonTransaction:lt,getGasPrice:we,checkMPCStatus:Yt,preExecTransaction:st,EvmRequestEnum:tt,hooks:{useCoin:Uo,useUtxoListFn:jt,useFeeDisplay:zo,useRegisterStatus:io,useGasReturnActivity:Bt,useSignInfo:Ut,useUtxoEstimateFee:Qt,useUtxoCheckBeforePublishFn:Zt,useUtxoSignAndPublishTransactionFn:$t,usePreExecuteFn:Vt},components:{EvmConfirm:go,TronConfirm:Do,EthereumNetworkFee:qt,SupplyGas:Ht,StarknetRegister:lo,Affix:_t,InteractiveAddress:co,NetworkFeeEnter:mo,ViewData:To,SectionWrap:fo,ModuleWrap:eo,MultipleChangeSummary:to,UtxoNetworkFeePanel:yo,Mev:po,Layout:fe,SwitchAddress:Ao,Navigator:bt,SolanaEntry:ho,HeaderTip:oo,TxTypeWithTools:ao,AssetDiff:ro}});var Cr=()=>{let t=(0,$.useHistory)(),{pathname:e}=(0,$.useLocation)(),o=(0,C.useSelector)(St);return(0,U.useCallback)((a,n)=>{if(o&&n){t.replace(ut);return}a()},[o,e])},ai=({visibleBar:t})=>{let e=(0,C.useDispatch)(),o=(0,C.useSelector)(Z),a=(0,C.useSelector)(It),n=(0,C.useSelector)(pt),r=so(),i=(0,C.useSelector)(yt),s=(0,C.useSelector)(dt),f=(0,C.useSelector)(Ko),c=i.map(u=>{if(At(u.initialType)){u=Ee(u);try{delete u.account[W],delete u.account[F]}catch{Ce()}}return u}),m=Cr(),l=uo();return(0,Jo.useMount)(()=>{Q.updateGlobal({signAndSubmitTransaction:async(u,p,d)=>await xe({networkId:u,tx:p,hardwareExtParams:d,checkTxBeforePublish:l,currentWallet:a})})}),U.default.createElement(fe.Box,{style:{height:t?"calc(100% - 54px)":"100%"}},U.default.createElement(Wt,{t:P,dispatch:e,onBack:m,currency:o,currentWallet:a,localeData:n,addressBookList:r,walletList:c,locale:s,walletInfo:f}))};export{ai as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=dex-JJONREPD.js.map
