import{g as Le,h as Ae}from"./chunk-5YK5XB6Y.js";import{a as Pe,d as Ne}from"./chunk-GGC2CY5E.js";import{b as Fe}from"./chunk-JKSK4TNM.js";import{a as Ge}from"./chunk-HYFMV74Y.js";import{b as ye}from"./chunk-2AZAHALD.js";import{f as M}from"./chunk-APUK5GYS.js";import{c as Ee,d as ve}from"./chunk-4L5OPDYI.js";import{b as ie,c as re,f as se,i as ne,m as ae,w as ce,x as I}from"./chunk-42UMOS57.js";import{b as oe}from"./chunk-FK74IDTO.js";import{h as te,l as _e,n as xe,p as he,r as ge,v as be,w as Te,y as we}from"./chunk-GCAD5G3O.js";import{a as pe}from"./chunk-PS6ETN2V.js";import{b as ke}from"./chunk-OGS4HURJ.js";import{a as fe}from"./chunk-GRXKA7HE.js";import{x as R}from"./chunk-ZV6IBWDM.js";import{a as de}from"./chunk-HZNY4MK4.js";import{a as Ce}from"./chunk-GOMM7VSE.js";import{a as ue}from"./chunk-MZFOYMI4.js";import{o as me}from"./chunk-AUURQ3HI.js";import{Eb as ee,cc as le}from"./chunk-B32MCU7F.js";import{c as L}from"./chunk-AIPMH74P.js";import{Ib as q,Kb as Y,Ub as v,Wb as y,Xb as K,_b as V,ac as Z,fc as j,hc as B}from"./chunk-Q23SA7M6.js";import{o as Q,q as T,r as X}from"./chunk-E44TZGUB.js";import{G as U,oa as Re}from"./chunk-KBQXBPIW.js";import{O as $,l as O,w as m}from"./chunk-364XNTHB.js";import{H as eo,T as J}from"./chunk-W7JONHX2.js";import{a as E}from"./chunk-PDSGFBX4.js";import{f as _,o as c,q as l}from"./chunk-FJHLV356.js";c();l();var A=_(E()),d=_(le());c();l();B();$();function De(r,{symbol:i,decimals:o}={}){let t;return r=j(Z(r,o||18)),r==="0"?t="0":t=O.thousandFormat(r),i&&(t+=` ${i}`),t}B();function Se(r){let i=(0,d.useSelector)(ae),o=r||i,t=o?.isSupportEip1559?o?.maxFeePerGas||0:o?.gasPrice||0,s=o?.gasLimit||0;return Pe(V,K)(t,s)}function Be(r){let i=he(),{symbol:o,usdToThisRate:t}=(0,d.useSelector)(ee),s=q(i?.price,t),n=De(r,{symbol:i?.symbol,decimals:i?.decimals}),p=Ne({amount:r,rate:s,symbol:o},{useApproximate:!0});return`${n} ${p}`}function To(){let r=(0,d.useDispatch)(),i=ke(),o=(0,d.useSelector)(re),t=(0,d.useSelector)(se),s=(0,d.useSelector)(ne),n=(0,d.useSelector)(ie),{chainGasPrice:p,chainGasLimit:a,chainGasLoading:C,chainGasLoadFailed:x,stopPollingGasPrice:F,chainGasLimitLoading:h,chainGasLimitLoadFailed:P}=Ae({to:o,from:i,value:t,data:s,tokenAddress:n});return(0,A.useEffect)(()=>{r(I(p))},[p]),(0,A.useEffect)(()=>{r(I({gasLimit:a}))},[a]),{chainGasLoading:C,chainGasLoadFailed:x,stopPollingGasPrice:F,chainGasLimitLoading:h,chainGasLimitLoadFailed:P}}function wo(){let r=(0,d.useDispatch)(),{loadingNonce:i,nonce:o,suggestedNonce:t,request:s}=Le();return(0,A.useEffect)(()=>{r(ce(t))},[t]),{loadingNonce:i,nonce:o,suggestedNonce:t,request:s}}c();l();var D=_(E()),S=_(le());var Ie=_(me());var oo={mainTokens:[],chainTokens:[]},to=(r,i)=>{let o=(0,D.useRef)(oo),t=(0,S.useDispatch)(),s=(0,S.useSelector)(oe),n=be(i),p=ge(i),a=de(),C=r||a,x=()=>{let{chainTokens:F}=o.current;F.forEach(async({rpcUrl:h,chainId:P,account:g,address:N})=>{if(C!==g)return;let G=await p(N,g,N?null:await _e(h));t(te({chainId:P,account:g,address:N,balance:G}))})};(0,D.useEffect)(()=>{o.current=n},[n]),(0,Ie.useUpdateEffect)(()=>{s!==0&&x()},[s])},Lo=to;c();l();var e=_(E()),We=_(me()),He=_(eo());$();c();l();var io=()=>{let r=fe();return()=>globalThis.platform.openTab({url:r.rpcGasUrl})},Me=io;B();c();l();var u={"retina-border-basic":"_retina-border-basic_1xrkr_1",retinaBorderBasic:"_retina-border-basic_1xrkr_1",RpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",rpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",content:"_content_1xrkr_34",title:"_title_1xrkr_37","info-icon":"_info-icon_1xrkr_41",infoIcon:"_info-icon_1xrkr_41",box:"_box_1xrkr_46",customize:"_customize_1xrkr_51",money:"_money_1xrkr_94",row:"_row_1xrkr_97",defaultTip:"_defaultTip_1xrkr_100",checkBoxWrap:"_checkBoxWrap_1xrkr_106"};function ro({onBack:r,rpcInfo:i={},customGasInfo:o={},chainGasInfo:t={},updateCustomGasInfo:s,stopPollingGasPrice:n,chainGasLimitLoadFailed:p=!1}){let{isSupportEip1559:a}=o,C=y(a?t.baseFeePerGas:t.gasPrice),[x,F]=(0,e.useState)(y(a?o.baseFeePerGas:o.gasPrice)),[h,P]=(0,e.useState)(y(o.maxPriorityFeePerGas)),[g,N]=(0,e.useState)(o.gasLimit),[G,W]=(0,e.useState)(o.isDefault),k=(0,e.useMemo)(()=>{let f={gasLimit:g,isDefault:G};return a?(f.baseFeePerGas=v(x),f.maxPriorityFeePerGas=v(h),f.maxFeePerGas=Y(f.baseFeePerGas,f.maxPriorityFeePerGas)):f.gasPrice=v(x),{...o,...f}},[g,x,G,o,a,h]),Ue=Se(k),Oe=Be(Ue),{extensionConfig:H,setExtensionConfig:$e}=pe("rpc_info"),[,qe,Ye]=Fe(H?.chainId),Ke=Me(),Ve=(0,e.useMemo)(()=>{let f=!Number(k.gasPrice);return k.isSupportEip1559&&(f=!Number(k.maxPriorityFeePerGas)),f||!Number(k.gasLimit)},[k]),Ze=(0,We.useMemoizedFn)(async()=>{let{gasLimit:f,...b}=k;b.isDefault&&(n(),await qe(b),Ee(i,H)&&await $e(i)),s(k)}),{loading:je,onClick:Je}=ye(Ze),Qe=[{actionType:M.ACTION_TYPE.CONFIRM,disabled:Ve,onClick:Je,loading:je}],Xe=async f=>{let b=f.target.checked;if(b)W(b),R();else{let z=Q.tip({children:m("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:m("wallet_extension_btn_general_confirm"),cancelText:m("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){await Ye(i?.chainId),W(b),z.destroy()},onCancel(){z.destroy()}})}};return e.default.createElement(L.Portal,{component:L.Container,className:u.RpcEvmSendEditNetworkFee},e.default.createElement(Ce,{title:m("wallet_transfer_subtitle_network_fee"),onBack:r,closeable:!1}),e.default.createElement("div",{className:u.content},e.default.createElement(T.Label,{title:e.default.createElement("div",{className:u.title},m("wallet_extension_transaction_input_label_network_fee"),e.default.createElement(J,{className:(0,He.default)("okx-wallet-plugin-information-circle",u["info-icon"]),onClick:Ke}))}),e.default.createElement("div",{className:u.box},e.default.createElement("div",{className:u.customize},e.default.createElement("div",{className:u.title},m("wallet_transfer_gasfee_subtitle_custom_gas_fee")),e.default.createElement("div",null,e.default.createElement("div",{className:u.money},e.default.createElement(Ge,{text:Oe,maxWidth:"215px"})))),e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:C,title:a?m("extension_wallet_transaction_text_maxbase_fee"):m("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:x,onChange:F})),a?e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:y(t.maxPriorityFeePerGas),title:m("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:h,onChange:P})):null,e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:t.gasLimit,title:m("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:T.TIP_TYPE.always,error:p&&m("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:g,onChange:N}))),e.default.createElement("div",{className:u.defaultTip},m("wallet_extension_mid_checkbox_setting_default"))),e.default.createElement(ue,{usePortal:!0,placeholder:!0,style:{zIndex:101}},e.default.createElement(L.Box,{className:u.checkBoxWrap},e.default.createElement(X,{onChange:Xe,checked:G},m("wallet_extension_bot_alert_default_gas",{networkName:i.name}))),e.default.createElement(M,{buttonGroup:Qe})))}var lt=e.default.memo(ro);c();l();var ze=_(E());Re();var kt=()=>{let r=Te(),i=we(),{rpcNetworks:o=[]}=ve(),t=xe(()=>o,o,(s,n)=>!U(s,n));ze.default.useEffect(()=>{let s=i?.reduce((n,{walletIdentities:p})=>[...n,...p.map(({account:{mainnet:a}})=>a)],[]);t.forEach(async n=>{s.forEach(p=>{let a=n.chainId;r(a,void 0,{...n,account:p})})})},[i,t])};export{De as a,Se as b,Be as c,To as d,wo as e,Lo as f,lt as g,kt as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-2PFUDPEL.js.map
