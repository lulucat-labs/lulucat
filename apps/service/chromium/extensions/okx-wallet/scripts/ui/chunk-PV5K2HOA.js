import{b as Ne}from"./chunk-KLQ5LRUF.js";import{c as St}from"./chunk-5NZYX7T6.js";import{a as Tt}from"./chunk-FYV4ZBAP.js";import{a as Ye}from"./chunk-DPLPUTOK.js";import{l as Ct}from"./chunk-DQ2IBJ6G.js";import{b as B,c as Et,d as Xe}from"./chunk-IYVZOFWF.js";import{Sa as j,m as xt}from"./chunk-LUYLQDIU.js";import{l as kt}from"./chunk-ZOUFDRHZ.js";import{n as ne}from"./chunk-QZXD2Q4G.js";import{g as pe,o as le,r as je}from"./chunk-E44TZGUB.js";import{fa as vt,ja as bt,oa as wt}from"./chunk-KBQXBPIW.js";import{O as ge,a as De,c as ie}from"./chunk-364XNTHB.js";import{ca as ve}from"./chunk-W7JONHX2.js";import{a as te}from"./chunk-PDSGFBX4.js";import{c as M,f as z,h as O,n as process,o as d,q as h}from"./chunk-FJHLV356.js";var xe=M(F=>{"use strict";d();h();var an=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function on(i,t){return Object.prototype.hasOwnProperty.call(i,t)}F.assign=function(i){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var n in e)on(e,n)&&(i[n]=e[n])}}return i};F.shrinkBuf=function(i,t){return i.length===t?i:i.subarray?i.subarray(0,t):(i.length=t,i)};var sn={arraySet:function(i,t,e,n,c){if(t.subarray&&i.subarray){i.set(t.subarray(e,e+n),c);return}for(var r=0;r<n;r++)i[c+r]=t[e+r]},flattenChunks:function(i){var t,e,n,c,r,l;for(n=0,t=0,e=i.length;t<e;t++)n+=i[t].length;for(l=new Uint8Array(n),c=0,t=0,e=i.length;t<e;t++)r=i[t],l.set(r,c),c+=r.length;return l}},cn={arraySet:function(i,t,e,n,c){for(var r=0;r<n;r++)i[c+r]=t[e+r]},flattenChunks:function(i){return[].concat.apply([],i)}};F.setTyped=function(i){i?(F.Buf8=Uint8Array,F.Buf16=Uint16Array,F.Buf32=Int32Array,F.assign(F,sn)):(F.Buf8=Array,F.Buf16=Array,F.Buf32=Array,F.assign(F,cn))};F.setTyped(an)});var Ut=M((pa,Ot)=>{"use strict";d();h();function ln(i,t,e,n){for(var c=i&65535|0,r=i>>>16&65535|0,l=0;e!==0;){l=e>2e3?2e3:e,e-=l;do c=c+t[n++]|0,r=r+c|0;while(--l);c%=65521,r%=65521}return c|r<<16|0}Ot.exports=ln});var Ft=M((wa,Bt)=>{"use strict";d();h();function fn(){for(var i,t=[],e=0;e<256;e++){i=e;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;t[e]=i}return t}var dn=fn();function hn(i,t,e,n){var c=dn,r=n+e;i^=-1;for(var l=n;l<r;l++)i=i>>>8^c[(i^t[l])&255];return i^-1}Bt.exports=hn});var Wt=M((Sa,Ht)=>{"use strict";d();h();var Ae=30,un=12;Ht.exports=function(t,e){var n,c,r,l,s,g,o,a,D,_,f,k,p,x,v,L,I,S,u,N,C,b,T,A,w;n=t.state,c=t.next_in,A=t.input,r=c+(t.avail_in-5),l=t.next_out,w=t.output,s=l-(e-t.avail_out),g=l+(t.avail_out-257),o=n.dmax,a=n.wsize,D=n.whave,_=n.wnext,f=n.window,k=n.hold,p=n.bits,x=n.lencode,v=n.distcode,L=(1<<n.lenbits)-1,I=(1<<n.distbits)-1;e:do{p<15&&(k+=A[c++]<<p,p+=8,k+=A[c++]<<p,p+=8),S=x[k&L];t:for(;;){if(u=S>>>24,k>>>=u,p-=u,u=S>>>16&255,u===0)w[l++]=S&65535;else if(u&16){N=S&65535,u&=15,u&&(p<u&&(k+=A[c++]<<p,p+=8),N+=k&(1<<u)-1,k>>>=u,p-=u),p<15&&(k+=A[c++]<<p,p+=8,k+=A[c++]<<p,p+=8),S=v[k&I];i:for(;;){if(u=S>>>24,k>>>=u,p-=u,u=S>>>16&255,u&16){if(C=S&65535,u&=15,p<u&&(k+=A[c++]<<p,p+=8,p<u&&(k+=A[c++]<<p,p+=8)),C+=k&(1<<u)-1,C>o){t.msg="invalid distance too far back",n.mode=Ae;break e}if(k>>>=u,p-=u,u=l-s,C>u){if(u=C-u,u>D&&n.sane){t.msg="invalid distance too far back",n.mode=Ae;break e}if(b=0,T=f,_===0){if(b+=a-u,u<N){N-=u;do w[l++]=f[b++];while(--u);b=l-C,T=w}}else if(_<u){if(b+=a+_-u,u-=_,u<N){N-=u;do w[l++]=f[b++];while(--u);if(b=0,_<N){u=_,N-=u;do w[l++]=f[b++];while(--u);b=l-C,T=w}}}else if(b+=_-u,u<N){N-=u;do w[l++]=f[b++];while(--u);b=l-C,T=w}for(;N>2;)w[l++]=T[b++],w[l++]=T[b++],w[l++]=T[b++],N-=3;N&&(w[l++]=T[b++],N>1&&(w[l++]=T[b++]))}else{b=l-C;do w[l++]=w[b++],w[l++]=w[b++],w[l++]=w[b++],N-=3;while(N>2);N&&(w[l++]=w[b++],N>1&&(w[l++]=w[b++]))}}else if((u&64)===0){S=v[(S&65535)+(k&(1<<u)-1)];continue i}else{t.msg="invalid distance code",n.mode=Ae;break e}break}}else if((u&64)===0){S=x[(S&65535)+(k&(1<<u)-1)];continue t}else if(u&32){n.mode=un;break e}else{t.msg="invalid literal/length code",n.mode=Ae;break e}break}}while(c<r&&l<g);N=p>>3,c-=N,p-=N<<3,k&=(1<<p)-1,t.next_in=c,t.next_out=l,t.avail_in=c<r?5+(r-c):5-(c-r),t.avail_out=l<g?257+(g-l):257-(l-g),n.hold=k,n.bits=p}});var Yt=M((Ta,jt)=>{"use strict";d();h();var Zt=xe(),de=15,Mt=852,Kt=592,zt=0,$e=1,Gt=2,mn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],gn=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],pn=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];jt.exports=function(t,e,n,c,r,l,s,g){var o=g.bits,a=0,D=0,_=0,f=0,k=0,p=0,x=0,v=0,L=0,I=0,S,u,N,C,b,T=null,A=0,w,H=new Zt.Buf16(de+1),m=new Zt.Buf16(de+1),P=null,Z=0,Q,ee,ce;for(a=0;a<=de;a++)H[a]=0;for(D=0;D<c;D++)H[e[n+D]]++;for(k=o,f=de;f>=1&&H[f]===0;f--);if(k>f&&(k=f),f===0)return r[l++]=1<<24|64<<16|0,r[l++]=1<<24|64<<16|0,g.bits=1,0;for(_=1;_<f&&H[_]===0;_++);for(k<_&&(k=_),v=1,a=1;a<=de;a++)if(v<<=1,v-=H[a],v<0)return-1;if(v>0&&(t===zt||f!==1))return-1;for(m[1]=0,a=1;a<de;a++)m[a+1]=m[a]+H[a];for(D=0;D<c;D++)e[n+D]!==0&&(s[m[e[n+D]]++]=D);if(t===zt?(T=P=s,w=19):t===$e?(T=mn,A-=257,P=_n,Z-=257,w=256):(T=gn,P=pn,w=-1),I=0,D=0,a=_,b=l,p=k,x=0,N=-1,L=1<<k,C=L-1,t===$e&&L>Mt||t===Gt&&L>Kt)return 1;for(;;){Q=a-x,s[D]<w?(ee=0,ce=s[D]):s[D]>w?(ee=P[Z+s[D]],ce=T[A+s[D]]):(ee=32+64,ce=0),S=1<<a-x,u=1<<p,_=u;do u-=S,r[b+(I>>x)+u]=Q<<24|ee<<16|ce|0;while(u!==0);for(S=1<<a-1;I&S;)S>>=1;if(S!==0?(I&=S-1,I+=S):I=0,D++,--H[a]===0){if(a===f)break;a=e[n+s[D]]}if(a>k&&(I&C)!==N){for(x===0&&(x=k),b+=_,p=a-x,v=1<<p;p+x<f&&(v-=H[p+x],!(v<=0));)p++,v<<=1;if(L+=1<<p,t===$e&&L>Mt||t===Gt&&L>Kt)return 1;N=I&C,r[N]=k<<24|p<<16|b-l|0}}return I!==0&&(r[b+I]=a-x<<24|64<<16|0),g.bits=k,0}});var Ni=M(G=>{"use strict";d();h();var W=xe(),nt=Ut(),Y=Ft(),vn=Wt(),Se=Yt(),bn=0,bi=1,wi=2,Xt=4,wn=5,Re=6,re=0,kn=1,xn=2,K=-2,ki=-3,rt=-4,Sn=-5,Vt=8,xi=1,Jt=2,$t=3,qt=4,Qt=5,ei=6,ti=7,ii=8,ni=9,ri=10,Ue=11,V=12,qe=13,ai=14,Qe=15,oi=16,si=17,ci=18,li=19,Pe=20,Oe=21,fi=22,di=23,hi=24,ui=25,mi=26,et=27,_i=28,gi=29,y=30,at=31,En=32,Cn=852,Tn=592,Dn=15,Nn=Dn;function pi(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function In(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new W.Buf16(320),this.work=new W.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Si(i){var t;return!i||!i.state?K:(t=i.state,i.total_in=i.total_out=t.total=0,i.msg="",t.wrap&&(i.adler=t.wrap&1),t.mode=xi,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new W.Buf32(Cn),t.distcode=t.distdyn=new W.Buf32(Tn),t.sane=1,t.back=-1,re)}function Ei(i){var t;return!i||!i.state?K:(t=i.state,t.wsize=0,t.whave=0,t.wnext=0,Si(i))}function Ci(i,t){var e,n;return!i||!i.state||(n=i.state,t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?K:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Ei(i))}function Ti(i,t){var e,n;return i?(n=new In,i.state=n,n.window=null,e=Ci(i,t),e!==re&&(i.state=null),e):K}function Ln(i){return Ti(i,Nn)}var vi=!0,tt,it;function yn(i){if(vi){var t;for(tt=new W.Buf32(512),it=new W.Buf32(32),t=0;t<144;)i.lens[t++]=8;for(;t<256;)i.lens[t++]=9;for(;t<280;)i.lens[t++]=7;for(;t<288;)i.lens[t++]=8;for(Se(bi,i.lens,0,288,tt,0,i.work,{bits:9}),t=0;t<32;)i.lens[t++]=5;Se(wi,i.lens,0,32,it,0,i.work,{bits:5}),vi=!1}i.lencode=tt,i.lenbits=9,i.distcode=it,i.distbits=5}function Di(i,t,e,n){var c,r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new W.Buf8(r.wsize)),n>=r.wsize?(W.arraySet(r.window,t,e-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(c=r.wsize-r.wnext,c>n&&(c=n),W.arraySet(r.window,t,e-n,c,r.wnext),n-=c,n?(W.arraySet(r.window,t,e-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=c,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=c))),0}function An(i,t){var e,n,c,r,l,s,g,o,a,D,_,f,k,p,x=0,v,L,I,S,u,N,C,b,T=new W.Buf8(4),A,w,H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return K;e=i.state,e.mode===V&&(e.mode=qe),l=i.next_out,c=i.output,g=i.avail_out,r=i.next_in,n=i.input,s=i.avail_in,o=e.hold,a=e.bits,D=s,_=g,b=re;e:for(;;)switch(e.mode){case xi:if(e.wrap===0){e.mode=qe;break}for(;a<16;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(e.wrap&2&&o===35615){e.check=0,T[0]=o&255,T[1]=o>>>8&255,e.check=Y(e.check,T,2,0),o=0,a=0,e.mode=Jt;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((o&255)<<8)+(o>>8))%31){i.msg="incorrect header check",e.mode=y;break}if((o&15)!==Vt){i.msg="unknown compression method",e.mode=y;break}if(o>>>=4,a-=4,C=(o&15)+8,e.wbits===0)e.wbits=C;else if(C>e.wbits){i.msg="invalid window size",e.mode=y;break}e.dmax=1<<C,i.adler=e.check=1,e.mode=o&512?ri:V,o=0,a=0;break;case Jt:for(;a<16;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(e.flags=o,(e.flags&255)!==Vt){i.msg="unknown compression method",e.mode=y;break}if(e.flags&57344){i.msg="unknown header flags set",e.mode=y;break}e.head&&(e.head.text=o>>8&1),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=Y(e.check,T,2,0)),o=0,a=0,e.mode=$t;case $t:for(;a<32;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.head&&(e.head.time=o),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,T[2]=o>>>16&255,T[3]=o>>>24&255,e.check=Y(e.check,T,4,0)),o=0,a=0,e.mode=qt;case qt:for(;a<16;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.head&&(e.head.xflags=o&255,e.head.os=o>>8),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=Y(e.check,T,2,0)),o=0,a=0,e.mode=Qt;case Qt:if(e.flags&1024){for(;a<16;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.length=o,e.head&&(e.head.extra_len=o),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=Y(e.check,T,2,0)),o=0,a=0}else e.head&&(e.head.extra=null);e.mode=ei;case ei:if(e.flags&1024&&(f=e.length,f>s&&(f=s),f&&(e.head&&(C=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),W.arraySet(e.head.extra,n,r,f,C)),e.flags&512&&(e.check=Y(e.check,n,f,r)),s-=f,r+=f,e.length-=f),e.length))break e;e.length=0,e.mode=ti;case ti:if(e.flags&2048){if(s===0)break e;f=0;do C=n[r+f++],e.head&&C&&e.length<65536&&(e.head.name+=String.fromCharCode(C));while(C&&f<s);if(e.flags&512&&(e.check=Y(e.check,n,f,r)),s-=f,r+=f,C)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=ii;case ii:if(e.flags&4096){if(s===0)break e;f=0;do C=n[r+f++],e.head&&C&&e.length<65536&&(e.head.comment+=String.fromCharCode(C));while(C&&f<s);if(e.flags&512&&(e.check=Y(e.check,n,f,r)),s-=f,r+=f,C)break e}else e.head&&(e.head.comment=null);e.mode=ni;case ni:if(e.flags&512){for(;a<16;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(o!==(e.check&65535)){i.msg="header crc mismatch",e.mode=y;break}o=0,a=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),i.adler=e.check=0,e.mode=V;break;case ri:for(;a<32;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}i.adler=e.check=pi(o),o=0,a=0,e.mode=Ue;case Ue:if(e.havedict===0)return i.next_out=l,i.avail_out=g,i.next_in=r,i.avail_in=s,e.hold=o,e.bits=a,xn;i.adler=e.check=1,e.mode=V;case V:if(t===wn||t===Re)break e;case qe:if(e.last){o>>>=a&7,a-=a&7,e.mode=et;break}for(;a<3;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}switch(e.last=o&1,o>>>=1,a-=1,o&3){case 0:e.mode=ai;break;case 1:if(yn(e),e.mode=Pe,t===Re){o>>>=2,a-=2;break e}break;case 2:e.mode=si;break;case 3:i.msg="invalid block type",e.mode=y}o>>>=2,a-=2;break;case ai:for(o>>>=a&7,a-=a&7;a<32;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if((o&65535)!==(o>>>16^65535)){i.msg="invalid stored block lengths",e.mode=y;break}if(e.length=o&65535,o=0,a=0,e.mode=Qe,t===Re)break e;case Qe:e.mode=oi;case oi:if(f=e.length,f){if(f>s&&(f=s),f>g&&(f=g),f===0)break e;W.arraySet(c,n,r,f,l),s-=f,r+=f,g-=f,l+=f,e.length-=f;break}e.mode=V;break;case si:for(;a<14;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(e.nlen=(o&31)+257,o>>>=5,a-=5,e.ndist=(o&31)+1,o>>>=5,a-=5,e.ncode=(o&15)+4,o>>>=4,a-=4,e.nlen>286||e.ndist>30){i.msg="too many length or distance symbols",e.mode=y;break}e.have=0,e.mode=ci;case ci:for(;e.have<e.ncode;){for(;a<3;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.lens[H[e.have++]]=o&7,o>>>=3,a-=3}for(;e.have<19;)e.lens[H[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,A={bits:e.lenbits},b=Se(bn,e.lens,0,19,e.lencode,0,e.work,A),e.lenbits=A.bits,b){i.msg="invalid code lengths set",e.mode=y;break}e.have=0,e.mode=li;case li:for(;e.have<e.nlen+e.ndist;){for(;x=e.lencode[o&(1<<e.lenbits)-1],v=x>>>24,L=x>>>16&255,I=x&65535,!(v<=a);){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(I<16)o>>>=v,a-=v,e.lens[e.have++]=I;else{if(I===16){for(w=v+2;a<w;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(o>>>=v,a-=v,e.have===0){i.msg="invalid bit length repeat",e.mode=y;break}C=e.lens[e.have-1],f=3+(o&3),o>>>=2,a-=2}else if(I===17){for(w=v+3;a<w;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}o>>>=v,a-=v,C=0,f=3+(o&7),o>>>=3,a-=3}else{for(w=v+7;a<w;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}o>>>=v,a-=v,C=0,f=11+(o&127),o>>>=7,a-=7}if(e.have+f>e.nlen+e.ndist){i.msg="invalid bit length repeat",e.mode=y;break}for(;f--;)e.lens[e.have++]=C}}if(e.mode===y)break;if(e.lens[256]===0){i.msg="invalid code -- missing end-of-block",e.mode=y;break}if(e.lenbits=9,A={bits:e.lenbits},b=Se(bi,e.lens,0,e.nlen,e.lencode,0,e.work,A),e.lenbits=A.bits,b){i.msg="invalid literal/lengths set",e.mode=y;break}if(e.distbits=6,e.distcode=e.distdyn,A={bits:e.distbits},b=Se(wi,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,A),e.distbits=A.bits,b){i.msg="invalid distances set",e.mode=y;break}if(e.mode=Pe,t===Re)break e;case Pe:e.mode=Oe;case Oe:if(s>=6&&g>=258){i.next_out=l,i.avail_out=g,i.next_in=r,i.avail_in=s,e.hold=o,e.bits=a,vn(i,_),l=i.next_out,c=i.output,g=i.avail_out,r=i.next_in,n=i.input,s=i.avail_in,o=e.hold,a=e.bits,e.mode===V&&(e.back=-1);break}for(e.back=0;x=e.lencode[o&(1<<e.lenbits)-1],v=x>>>24,L=x>>>16&255,I=x&65535,!(v<=a);){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(L&&(L&240)===0){for(S=v,u=L,N=I;x=e.lencode[N+((o&(1<<S+u)-1)>>S)],v=x>>>24,L=x>>>16&255,I=x&65535,!(S+v<=a);){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}o>>>=S,a-=S,e.back+=S}if(o>>>=v,a-=v,e.back+=v,e.length=I,L===0){e.mode=mi;break}if(L&32){e.back=-1,e.mode=V;break}if(L&64){i.msg="invalid literal/length code",e.mode=y;break}e.extra=L&15,e.mode=fi;case fi:if(e.extra){for(w=e.extra;a<w;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.length+=o&(1<<e.extra)-1,o>>>=e.extra,a-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=di;case di:for(;x=e.distcode[o&(1<<e.distbits)-1],v=x>>>24,L=x>>>16&255,I=x&65535,!(v<=a);){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if((L&240)===0){for(S=v,u=L,N=I;x=e.distcode[N+((o&(1<<S+u)-1)>>S)],v=x>>>24,L=x>>>16&255,I=x&65535,!(S+v<=a);){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}o>>>=S,a-=S,e.back+=S}if(o>>>=v,a-=v,e.back+=v,L&64){i.msg="invalid distance code",e.mode=y;break}e.offset=I,e.extra=L&15,e.mode=hi;case hi:if(e.extra){for(w=e.extra;a<w;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}e.offset+=o&(1<<e.extra)-1,o>>>=e.extra,a-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){i.msg="invalid distance too far back",e.mode=y;break}e.mode=ui;case ui:if(g===0)break e;if(f=_-g,e.offset>f){if(f=e.offset-f,f>e.whave&&e.sane){i.msg="invalid distance too far back",e.mode=y;break}f>e.wnext?(f-=e.wnext,k=e.wsize-f):k=e.wnext-f,f>e.length&&(f=e.length),p=e.window}else p=c,k=l-e.offset,f=e.length;f>g&&(f=g),g-=f,e.length-=f;do c[l++]=p[k++];while(--f);e.length===0&&(e.mode=Oe);break;case mi:if(g===0)break e;c[l++]=e.length,g--,e.mode=Oe;break;case et:if(e.wrap){for(;a<32;){if(s===0)break e;s--,o|=n[r++]<<a,a+=8}if(_-=g,i.total_out+=_,e.total+=_,_&&(i.adler=e.check=e.flags?Y(e.check,c,_,l-_):nt(e.check,c,_,l-_)),_=g,(e.flags?o:pi(o))!==e.check){i.msg="incorrect data check",e.mode=y;break}o=0,a=0}e.mode=_i;case _i:if(e.wrap&&e.flags){for(;a<32;){if(s===0)break e;s--,o+=n[r++]<<a,a+=8}if(o!==(e.total&4294967295)){i.msg="incorrect length check",e.mode=y;break}o=0,a=0}e.mode=gi;case gi:b=kn;break e;case y:b=ki;break e;case at:return rt;case En:default:return K}return i.next_out=l,i.avail_out=g,i.next_in=r,i.avail_in=s,e.hold=o,e.bits=a,(e.wsize||_!==i.avail_out&&e.mode<y&&(e.mode<et||t!==Xt))&&Di(i,i.output,i.next_out,_-i.avail_out)?(e.mode=at,rt):(D-=i.avail_in,_-=i.avail_out,i.total_in+=D,i.total_out+=_,e.total+=_,e.wrap&&_&&(i.adler=e.check=e.flags?Y(e.check,c,_,i.next_out-_):nt(e.check,c,_,i.next_out-_)),i.data_type=e.bits+(e.last?64:0)+(e.mode===V?128:0)+(e.mode===Pe||e.mode===Qe?256:0),(D===0&&_===0||t===Xt)&&b===re&&(b=Sn),b)}function Rn(i){if(!i||!i.state)return K;var t=i.state;return t.window&&(t.window=null),i.state=null,re}function Pn(i,t){var e;return!i||!i.state||(e=i.state,(e.wrap&2)===0)?K:(e.head=t,t.done=!1,re)}function On(i,t){var e=t.length,n,c,r;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==Ue)?K:n.mode===Ue&&(c=1,c=nt(c,t,e,0),c!==n.check)?ki:(r=Di(i,t,e,e),r?(n.mode=at,rt):(n.havedict=1,re))}G.inflateReset=Ei;G.inflateReset2=Ci;G.inflateResetKeep=Si;G.inflateInit=Ln;G.inflateInit2=Ti;G.inflate=An;G.inflateEnd=Rn;G.inflateGetHeader=Pn;G.inflateSetDictionary=On;G.inflateInfo="pako inflate (from Nodeca project)"});var Ai=M(he=>{"use strict";d();h();var Be=xe(),Ii=!0,Li=!0;try{String.fromCharCode.apply(null,[0])}catch{Ii=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Li=!1}var Ee=new Be.Buf8(256);for(J=0;J<256;J++)Ee[J]=J>=252?6:J>=248?5:J>=240?4:J>=224?3:J>=192?2:1;var J;Ee[254]=Ee[254]=1;he.string2buf=function(i){var t,e,n,c,r,l=i.length,s=0;for(c=0;c<l;c++)e=i.charCodeAt(c),(e&64512)===55296&&c+1<l&&(n=i.charCodeAt(c+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),c++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Be.Buf8(s),r=0,c=0;r<s;c++)e=i.charCodeAt(c),(e&64512)===55296&&c+1<l&&(n=i.charCodeAt(c+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),c++)),e<128?t[r++]=e:e<2048?(t[r++]=192|e>>>6,t[r++]=128|e&63):e<65536?(t[r++]=224|e>>>12,t[r++]=128|e>>>6&63,t[r++]=128|e&63):(t[r++]=240|e>>>18,t[r++]=128|e>>>12&63,t[r++]=128|e>>>6&63,t[r++]=128|e&63);return t};function yi(i,t){if(t<65534&&(i.subarray&&Li||!i.subarray&&Ii))return String.fromCharCode.apply(null,Be.shrinkBuf(i,t));for(var e="",n=0;n<t;n++)e+=String.fromCharCode(i[n]);return e}he.buf2binstring=function(i){return yi(i,i.length)};he.binstring2buf=function(i){for(var t=new Be.Buf8(i.length),e=0,n=t.length;e<n;e++)t[e]=i.charCodeAt(e);return t};he.buf2string=function(i,t){var e,n,c,r,l=t||i.length,s=new Array(l*2);for(n=0,e=0;e<l;){if(c=i[e++],c<128){s[n++]=c;continue}if(r=Ee[c],r>4){s[n++]=65533,e+=r-1;continue}for(c&=r===2?31:r===3?15:7;r>1&&e<l;)c=c<<6|i[e++]&63,r--;if(r>1){s[n++]=65533;continue}c<65536?s[n++]=c:(c-=65536,s[n++]=55296|c>>10&1023,s[n++]=56320|c&1023)}return yi(s,n)};he.utf8border=function(i,t){var e;for(t=t||i.length,t>i.length&&(t=i.length),e=t-1;e>=0&&(i[e]&192)===128;)e--;return e<0||e===0?t:e+Ee[i[e]]>t?e:t}});var Pi=M((Oa,Ri)=>{"use strict";d();h();Ri.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Ui=M((Fa,Oi)=>{"use strict";d();h();Oi.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Fi=M((Za,Bi)=>{"use strict";d();h();function Un(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Bi.exports=Un});var Wi=M((za,Hi)=>{"use strict";d();h();function Bn(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Hi.exports=Bn});var Mi=M(Te=>{"use strict";d();h();var ue=Ni(),Ce=xe(),Fe=Ai(),R=Pi(),ot=Ui(),Fn=Fi(),Hn=Wi(),Zi=Object.prototype.toString;function ae(i){if(!(this instanceof ae))return new ae(i);this.options=Ce.assign({chunkSize:16384,windowBits:0,to:""},i||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(i&&i.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Fn,this.strm.avail_out=0;var e=ue.inflateInit2(this.strm,t.windowBits);if(e!==R.Z_OK)throw new Error(ot[e]);if(this.header=new Hn,ue.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Fe.string2buf(t.dictionary):Zi.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=ue.inflateSetDictionary(this.strm,t.dictionary),e!==R.Z_OK)))throw new Error(ot[e])}ae.prototype.push=function(i,t){var e=this.strm,n=this.options.chunkSize,c=this.options.dictionary,r,l,s,g,o,a=!1;if(this.ended)return!1;l=t===~~t?t:t===!0?R.Z_FINISH:R.Z_NO_FLUSH,typeof i=="string"?e.input=Fe.binstring2buf(i):Zi.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;do{if(e.avail_out===0&&(e.output=new Ce.Buf8(n),e.next_out=0,e.avail_out=n),r=ue.inflate(e,R.Z_NO_FLUSH),r===R.Z_NEED_DICT&&c&&(r=ue.inflateSetDictionary(this.strm,c)),r===R.Z_BUF_ERROR&&a===!0&&(r=R.Z_OK,a=!1),r!==R.Z_STREAM_END&&r!==R.Z_OK)return this.onEnd(r),this.ended=!0,!1;e.next_out&&(e.avail_out===0||r===R.Z_STREAM_END||e.avail_in===0&&(l===R.Z_FINISH||l===R.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=Fe.utf8border(e.output,e.next_out),g=e.next_out-s,o=Fe.buf2string(e.output,s),e.next_out=g,e.avail_out=n-g,g&&Ce.arraySet(e.output,e.output,s,g,0),this.onData(o)):this.onData(Ce.shrinkBuf(e.output,e.next_out))),e.avail_in===0&&e.avail_out===0&&(a=!0)}while((e.avail_in>0||e.avail_out===0)&&r!==R.Z_STREAM_END);return r===R.Z_STREAM_END&&(l=R.Z_FINISH),l===R.Z_FINISH?(r=ue.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===R.Z_OK):(l===R.Z_SYNC_FLUSH&&(this.onEnd(R.Z_OK),e.avail_out=0),!0)};ae.prototype.onData=function(i){this.chunks.push(i)};ae.prototype.onEnd=function(i){i===R.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ce.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function st(i,t){var e=new ae(t);if(e.push(i,!0),e.err)throw e.msg||ot[e.err];return e.result}function Wn(i,t){return t=t||{},t.raw=!0,st(i,t)}Te.Inflate=ae;Te.inflate=st;Te.inflateRaw=Wn;Te.ungzip=st});d();h();var At=z(te());d();h();var X=z(te()),Lt=z(Xe());d();h();var Ve=z(te());var be=({className:i,onChangeAgreed:t,agreed:e,size:n})=>Ve.default.createElement("div",{className:i},Ve.default.createElement(je,{onChange:t,checked:e,size:n||je.SIZE.md},B("swaptrade_confirmation_checkbox_aware_risk")));d();h();var we=z(te());d();h();var U={body:"_body_1vdwi_1",content:"_content_1vdwi_5","freeze-assets":"_freeze-assets_1vdwi_8",freezeAssets:"_freeze-assets_1vdwi_8","terms-service":"_terms-service_1vdwi_11",termsService:"_terms-service_1vdwi_11",checkbox:"_checkbox_1vdwi_15","checkbox-web":"_checkbox-web_1vdwi_18",checkboxWeb:"_checkbox-web_1vdwi_18","checkbox-wallet":"_checkbox-wallet_1vdwi_21",checkboxWallet:"_checkbox-wallet_1vdwi_21","market-disclaimer-wrapper":"_market-disclaimer-wrapper_1vdwi_24",marketDisclaimerWrapper:"_market-disclaimer-wrapper_1vdwi_24","market-top":"_market-top_1vdwi_44",marketTop:"_market-top_1vdwi_44","market-title":"_market-title_1vdwi_44",marketTitle:"_market-title_1vdwi_44","market-content":"_market-content_1vdwi_50",marketContent:"_market-content_1vdwi_50","market-bottom":"_market-bottom_1vdwi_58",marketBottom:"_market-bottom_1vdwi_58","market-checkbox":"_market-checkbox_1vdwi_58",marketCheckbox:"_market-checkbox_1vdwi_58","widget-content":"_widget-content_1vdwi_63",widgetContent:"_widget-content_1vdwi_63","a-link":"_a-link_1vdwi_70",aLink:"_a-link_1vdwi_70"};var en=({linkSize:i})=>{let t=B("swaptrade_general_dialog_text_terms_service_link");return we.default.createElement(pe,{className:U.termsService,href:t,type:pe.TYPE.primary,weight:pe.WEIGHT.muted,size:i||pe.SIZE.sm,underline:!0},B("swaptrade_general_dialog_text_terms_service"))},ke=({className:i,linkSize:t})=>we.default.createElement("div",{className:i},Et("swaptrade_general_dialog_desc_legal_disclaimer",{freezeAssets:we.default.createElement("span",{className:U.freezeAssets},B("swaptrade_general_dialog_text_freeze_content")),termsService:we.default.createElement(en,{linkSize:t})}));d();h();var ye=z(te());d();h();d();h();var tn=null;function Dt(){return!!tn?.isTradeDialog}var Nt="DISCLAIMER_VISIBLE",nn=()=>{let i=Ye.get(Nt);return typeof i=="boolean"?i:!0},Ie=i=>{Ye.set(Nt,i)},Le=()=>Dt()||Tt()?!1:nn();var It=({setStoreDisclaimerVisible:i})=>{let t=typeof i=="function"?i:()=>{},e=(0,ye.useMemo)(()=>Le(),[]);return(0,ye.useEffect)(()=>{t(e)},[e]),{agreeDisclaimer:()=>{t(!1),Ie(!1)}}};var yt=({infoType:i,disclaimerVisible:t,setDisclaimerVisible:e,onAgree:n})=>{let[c,r]=(0,X.useState)(!1),{agreeDisclaimer:l}=It({setStoreDisclaimerVisible:e}),s=()=>{e(!1)},g=D=>{r(D?.target?.checked)},o=()=>{l(),n&&n()};(0,X.useEffect)(()=>(t||r(!1),()=>{r(!1)}),[t]);let a=j();return X.default.createElement(le.Tip,{visible:t,btnFull:!1,infoType:i||le.Tip.INFO_TYPE.default,title:B("swaptrade_general_dialog_title_legal_disclaimer"),confirmText:B("swaptrade_general_dialog_btn_start_trading"),confirmDisabled:!c,onConfirm:o,confirmBtnProps:{type:ve.TYPE.primary},cancelText:B("commonall_text_btn_cancel"),onClose:s},X.default.createElement("div",{className:U.body},X.default.createElement(ke,{className:U.content}),X.default.createElement(be,{className:(0,Lt.default)({[U.checkbox]:!0,[U.checkboxWeb]:!a,[U.checkboxWallet]:a}),onChangeAgreed:g,agreed:c})))};var Br=kt(()=>{let{commonStore:i}=St();return At.default.createElement(yt,{disclaimerVisible:i.disclaimerVisible,setDisclaimerVisible:i.setDisclaimerVisible})});d();h();d();h();var Je=z(te()),rn=z(Xe());d();h();var fe=z(te()),Pt=z(Xe());function Rt({agreed:i,onChangeAgreed:t}){let e=j();return fe.default.createElement("div",{className:U.body},fe.default.createElement(ke,{className:U.content}),fe.default.createElement(be,{className:(0,Pt.default)({[U.checkbox]:!0,[U.checkboxWeb]:!e,[U.checkboxWallet]:e}),onChangeAgreed:t,agreed:i}))}function ta(){if(!Le())return()=>Promise.resolve(!0);let t=null,e=!1,n=c=>{e=c?.target?.checked,t?.update({children:fe.default.createElement(Rt,{agreed:e,onChangeAgreed:n}),confirmBtnProps:{disabled:!e,type:ve.TYPE.primary}})};return()=>new Promise((c,r)=>{t=le.tip({infoType:le.Tip.INFO_TYPE.warn,btnFull:!1,title:B("swaptrade_general_dialog_title_legal_disclaimer"),children:fe.default.createElement(Rt,{agreed:e,onChangeAgreed:n}),confirmText:B("swaptrade_general_dialog_btn_start_trading"),confirmBtnProps:{disabled:!e,type:ve.TYPE.primary},cancelText:B("commonall_text_btn_cancel"),onConfirm:()=>{Ie(!1),t?.destroy(),c(!0)},onClose:()=>{t?.destroy(),t=null,r(new Error("Risk prompt closed"))},onCancel:()=>{r(new Error("Risk prompt closed"))}})})}d();h();ge();d();h();var Gi=z(Mi());d();h();d();h();d();h();d();h();var He=()=>Boolean(typeof window>"u"||process.env.SSR_ENV);d();h();var ct={PING:"ping",PONG:"pong"},me={CONNECTED:0,DISCONNECTED:1,PING_PENDING:2,PING_PENDING_OVER:3},$=!He(),We=$&&!window.inOKXExtension;var Zn=/^\{|\[/,Ki="";$&&(Ki=window?.okGlobal?.socketBaseUrls?.trade);var Ze={isPushingJSON(i){return Zn.test(i)},getRealConnectUrl(i=Ki){return i}};d();h();var zi={decode(i){let t=0,e,n,c,r,l,s=[],g=i.length;for(;t<g;)e=i[t++],e<128?l=e:e<224?(n=i[t++],l=(e&31)<<6|n&63):e<240?(n=i[t++],c=i[t++],l=(e&15)<<12|(n&63)<<6|c&63):(n=i[t++],c=i[t++],r=i[t++],l=(e&7)<<18|(n&63)<<12|(c&63)<<6|r&63),s.push(String.fromCodePoint(l));return s.join("")}};var ji=zi;if($&&We){let{location:i,TextDecoder:t}=window;t&&(ji=new t("utf-8")),window.$has_debug_push_param$=i.href.indexOf("debug_push=true")>-1}var lt={};function ft(i={}){let t=this,e=Ze.getRealConnectUrl(i.connectUrl),n={maxPendingTime:5e3,maxReconnectTime:1e4,maxWaitingResponseTime:1e4,maxSleepRecoveringTime:3e3,...i,connectUrl:e},c=lt[n.connectUrl];if(c)return c;let r={isConnected:!1,isConnectPending:!1,isClosingByClient:!1,isKillingUnWakeUp:!1,isPingPending:!1},l,s={reconnectTimer:0,handlePendingTimer:0,discontinueTimer:0,killingUnWakeUpTimer:0,pingPendingTimer:0},g={currReconnectTime:0,lastReceivingTime:0},o=[],a=[],D=[],_=[],f=[],k=()=>{},p=()=>{this.isConnected()&&(k(),s.pingPendingTimer=setTimeout(()=>{r.isPingPending=!0,_.forEach(m=>{m(me.PING_PENDING)})},n.maxPendingTime))},x=(m,P)=>{for(let Z=0;Z<m.length;Z++)if(m[Z]===P){m.splice(Z,1);break}},v=()=>{r.isPingPending=!1,clearTimeout(s.pingPendingTimer)},L=()=>{clearInterval(s.handlePendingTimer)},I=()=>{g.currReconnectTime=0,s.reconnectTimer&&(clearTimeout(s.reconnectTimer),delete s.reconnectTimer)},S=()=>{!this.isConnected()&&!r.isConnectPending&&(I(),u())},u=function(){l=new WebSocket(n.connectUrl),r.isConnectPending=!0,l.onopen=N,l.onmessage=b,l.onclose=A,l.onerror=w,s.handlePendingTimer=setInterval(t.handleConnectPending,n.maxPendingTime)},N=function(){r.isConnected=!0,r.isConnectPending=!1,r.isClosingByClient=!1,I(),L(),a.forEach(m=>{m(),m.triggered=!0}),_.forEach(m=>{m(me.CONNECTED)})},C=function(){r.isPingPending&&_.forEach(m=>{m(me.PING_PENDING_OVER)}),v()},b=function(m){if(g.lastReceivingTime=Date.now(),clearTimeout(s.discontinueTimer),clearTimeout(s.killingUnWakeUpTimer),s.discontinueTimer=setTimeout(p,n.maxPendingTime),m.data instanceof Blob){let P=m.data,Z=new FileReader,Q={done:!1,resultString:""};f.push(Q),Z.onload=function(ee){if(ee.target.readyState==FileReader.DONE){let ce=(0,Gi.inflateRaw)(ee.target.result);for(Q.done=!0,Q.resultString=ji.decode(ce);f[0]&&f[0].done;){let{resultString:_e}=f.shift();_e===ct.PONG&&C();let pt=Ze.isPushingJSON(_e)?JSON.parse(_e):_e;H(pt),window.$has_debug_push_param$&&(console.log(_e),window.$ok_debug_push_callback$&&window.$ok_debug_push_callback$(pt))}}},Z.readAsArrayBuffer(P)}else{let P=m.data;P===ct.PONG&&C(),H(Ze.isPushingJSON(P)?JSON.parse(P):P),window.$has_debug_push_param$&&console.log(P)}},T=function(){r.isConnected=!1,r.isConnectPending=!1,v(),a.forEach(m=>{m.triggered=!1})},A=function(){if(r.isKillingUnWakeUp){r.isKillingUnWakeUp=!1;return}r.isClosingByClient?T():s.reconnectTimer||w()},w=function(){T(),L(),o.forEach(P=>{P()}),_.forEach(P=>{P(me.DISCONNECTED)}),s.reconnectTimer=setTimeout(u,g.currReconnectTime);let m=g.currReconnectTime+1e3;m>n.maxReconnectTime&&(m=n.maxReconnectTime),g.currReconnectTime=m},H=function(m){if(m.event==="error"&&Number(m.errorCode)===30026){l.close();return}D.forEach(Z=>Z(m))};if(this.setPushDataResolver=function(m){return D.push(m),()=>{x(D,m)}},this.connect=function(){if($){if(this.isConnected()){a.forEach(m=>{m.triggered||(m(),m.triggered=!0)});return}!this.isConnected()&&!r.isConnectPending&&u()}},this.disconnect=function(){clearTimeout(s.reconnectTimer),clearTimeout(s.discontinueTimer),delete s.reconnectTimer,delete s.discontinueTimer,r.isClosingByClient=!0,l.close(),o.length=0,a.length=0,D.length=0,k=()=>{},delete lt[n.connectUrl];let{connection:m}=navigator;m&&m.removeEventListener&&m.removeEventListener("change",this.handleConnectionChange),We&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},this.isConnected=function(){return r.isConnected},this.sendChannel=function(m){l.readyState===WebSocket.OPEN?l.send(m):console.error("WebSocket is not in open state, can not send!")},this.onSocketConnected=function(m){return a.push(m),()=>{x(a,m)}},this.onSocketError=function(m){return o.push(m),()=>{x(o,m)}},this.onPushDiscontinue=function(m){return k=m,()=>{}},this.onStatusChange=function(m){return _.push(m),()=>{x(_,m)}},this.handleConnectPending=function(){r.isConnectPending&&o.forEach(m=>{m()})},this.handleConnectionChange=()=>{navigator.onLine===!0&&S()},this.handleVisibilityChange=()=>{if(!document.hidden){if(!this.isConnected()){S();return}Date.now()-g.lastReceivingTime>n.maxWaitingResponseTime&&(p(),s.killingUnWakeUpTimer=setTimeout(()=>{T(),I(),r.isKillingUnWakeUp=!0,l.close(),u()},n.maxSleepRecoveringTime))}},$){let{connection:m}=navigator;m&&m.addEventListener&&m.addEventListener("change",this.handleConnectionChange),We&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}return lt[n.connectUrl]=this,this}ft.STATUS=me;$&&!window.WebSocketCore&&(window.WebSocketCore=ft);var Me=ft;d();h();ge();var Yi=()=>{let i="";return j()?i=`wss://${ne.global?.getWssHostname()}`:i=ie.socketBaseUrls?.dex,i||Ne.error("SOCKET_BASE_URL_EMPTY",{wallet:`wss://${ne.global?.getWssHostname()}`,webDev:process.env.SOCKET_URL_DEX,web:ie.socketBaseUrls?.dex}),i};var Xi={DEX_PUSH_ENGINE:"dex-across-order-info",WALLET_ASSET:"wallet-asset"},Mn=i=>i.reduce((t,e)=>{let{channel:n}=e;return t.has(n)||t.set(n,new Set),t},new Map),Vi=i=>i?i.split(",").map(e=>({token:e})):[],dt=class{constructor(){O(this,"initEventList",()=>{this.errorHandlerList=new Set,this.connectedHandlerList=new Set,this.channelList=Object.keys(Xi).map(t=>({channel:Xi[t]})),this.eventList=Mn(this.channelList)});O(this,"connectUrl",()=>`${Yi()}/ws/v5/iprivate`);O(this,"init",t=>{if(!De()){if(this.isLoginDone=!1,!t){this.tokens="";return}if(this.tokens=t,this.isConnected()){this.connectedCallback();return}this.wsInstance||(this.wsInstance=new Me({connectUrl:this.connectUrl(),reconnectTime:1e4,maxPendingTime:2e4}),this.setCallbacks(),this.wsInstance.connect())}});O(this,"getInstance",()=>this.wsInstance);O(this,"setCallbacks",()=>{this.wsInstance.onSocketConnected(this.connectedCallback),this.wsInstance.onSocketError(this.errorCallback),this.wsInstance.onPushDiscontinue(()=>{this.wsInstance.sendChannel("ping")}),this.wsInstance.setPushDataResolver(t=>this.dataCallback(t))});O(this,"connectedCallback",()=>{this.login(this.tokens).then(()=>(this.subscribe(),this.isLoginDone=!0,!0)).catch(()=>{Ne.stuff("ws login fail")}),this.connectedHandlerList.forEach(t=>{t()})});O(this,"errorCallback",t=>{this.errorHandlerList.forEach(e=>{e(t)})});O(this,"dataCallback",t=>{this.isLoginDone?this.dataHandler(t):this.loginHandler(t)});O(this,"login",t=>new Promise((e,n)=>{this.isLoginDone=!1,this.wsInstance.sendChannel(JSON.stringify({op:"login",args:Vi(t)})),this.loginResolveFn=e,this.loginRejectFn=n}));O(this,"loginHandler",t=>{let{event:e,code:n}=t;if(e==="login"){if(Number(n)===0){this.loginResolveFn();return}this.loginRejectFn()}});O(this,"dataHandler",t=>{let{arg:e,data:n}=t,c=e?.channel,r=this.eventList.get(c);r?.size>0&&r.forEach(l=>{l(n)})});O(this,"logout",t=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"logout",args:Vi(t)}))});O(this,"subscribe",()=>{this.wsInstance.sendChannel(JSON.stringify({op:"subscribe",args:this.channelList}))});O(this,"unsubscribe",()=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"unsubscribe",args:this.channelList}))});O(this,"addListen",(t,e)=>{if(t==="error"){this.errorHandlerList.add(e);return}if(t==="connect"){this.connectedHandlerList.add(e);return}this.eventList.has(t)&&this.eventList.get(t).add(e)});O(this,"removeListen",(t,e=()=>{})=>{if(t==="error"){this.errorHandlerList.delete(e);return}this.eventList.has(t)&&this.eventList.get(t).delete(e)});O(this,"removeAll",()=>{this.initEventList()});O(this,"isConnected",()=>!!this.wsInstance?.isConnected());O(this,"disconnect",()=>{this.wsInstance?.disconnect(),this.initEventList()});this.wsInstance=null,this.initEventList()}},Xo=new dt;d();h();wt();d();h();var Ke={JWT:"jwt",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",PING:"ping",PONG:"pong"};d();h();ge();d();h();d();h();ge();function q(i,t){!i||i.forEach(e=>{e(t)})}function ht(i,t){i.has(t)&&i.delete(t)}function oe(i,t){return De()||i.add(t),()=>ht(i,t)}function ut(i){return Array.isArray(i)?i:[i]}function ze(i){if(!i)return"";let t={};return Object.keys(i).sort().forEach(e=>{t[e]=i[e]}),JSON.stringify(t)}function Ge(i){switch(i){case"dex-token-candle1m":case"dex-token-candle15m":case"dex-token-candle4H":return i;default:return""}}var{SUBSCRIBE:mt,UNSUBSCRIBE:Kn,PING:zn}=Ke,se=class{constructor(){this.wsInstance=null;this.initDone=!1;this.disconnected=!1;this.dataFnsMap=new Map;this.channelCache=new Map;this.wsDataCache={};this.errorFnsList=new Set}connect(){if(this.initDone)return;this.initDone=!0;let t=this.getWsUrl();this.wsInstance=new Me({connectUrl:t,reconnectTime:1e4,maxPendingTime:2e4}),this.wsInstance.onSocketConnected(this.connectedCallback.bind(this)),this.wsInstance.setPushDataResolver(this.dataCallback.bind(this)),this.wsInstance.onSocketError(this.errorCallback.bind(this)),this.wsInstance.onPushDiscontinue(()=>{this.wsInstance.sendChannel(zn)}),this.wsInstance.connect()}subscribe(t){let e=ut(t),n=[];if(e.forEach(c=>{let r=ze(c),l=this.channelCache.get(r);if(l){this.channelCache.set(r,l+1);let{channel:s}=c,g=Ge(s),o=this.wsDataCache[g]?.[r];o&&q(this.dataFnsMap.get(g),o);return}this.channelCache.set(r,1),n.push(c)}),!this.initDone){this.connect();return}!this.isConnected()||this.sendChannel({op:mt,args:n})}unsubscribe(t){let e=ut(t),n=[];e.forEach(c=>{let r=ze(c),l=this.channelCache.get(r);if(l>1){this.channelCache.set(r,l-1);return}this.channelCache.delete(r),n.push(c);let s=Ge(c.channel);s&&delete this.wsDataCache[s]?.[r]}),!(!this.initDone||!this.isConnected())&&this.sendChannel({op:Kn,args:n})}sendChannel({op:t,args:e=[]}){this.isConnected()&&e.length&&this.wsInstance.sendChannel(JSON.stringify({op:t,args:e}))}dataCallback(t={}){let{arg:e}=t;if(!e?.channel)return;q(this.dataFnsMap.get(e.channel),t);let n=Ge(e?.channel);if(!n)return;let c=ze(e);this.wsDataCache[n]?this.wsDataCache[n][c]=t:this.wsDataCache[n]={[c]:t}}addListenerData(t,e){return this.dataFnsMap.get(t)||this.dataFnsMap.set(t,new Set),this.wsDataCache[t]&&Object.values(this.wsDataCache[t]).forEach(n=>{e({event:mt}),e(n)}),oe(this.dataFnsMap.get(t),e)}remoteListenerData(t,e){return ht(this.dataFnsMap.get(t),e)}addListenerError(t){return oe(this.errorFnsList,t)}errorCallback(t){this.disconnected=!0,q(this.errorFnsList,t)}connectedCallback(){let t=[];this.channelCache.forEach((e,n)=>{try{t.push(JSON.parse(n))}catch{}}),this.sendChannel({op:mt,args:t})}isConnected(){return!!this.wsInstance?.isConnected()}getWsUrl(){return""}};var _t=class extends se{constructor(){super(...arguments);this.connectedFnsList=new Set}connectedCallback(){super.connectedCallback(),q(this.connectedFnsList,{disconnected:this.disconnected})}addListenerConnected(e){return oe(this.connectedFnsList,e)}getWsUrl(){let e="";return j()?process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"wss://wsdexpre.coinall.ltd:8443/ws/v5/iprivate":ne.global.urlConfig.serverPushUrl:(e=ie.socketBaseUrls?.dex||"",`${e}/ws/v5/iprivate`)}},Ji=new _t;d();h();ge();var gt=class extends se{constructor(){super(...arguments);this.connectedFnsList=new Set}connectedCallback(){super.connectedCallback(),q(this.connectedFnsList,{disconnected:this.disconnected})}addListenerConnected(e){return oe(this.connectedFnsList,e)}getWsUrl(){let e=localStorage.getItem("dev_ct_wsPress"),n="";return j()?process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?n="wss://wsdexpre.coinall.ltd:8443":n=`wss://${ne.global?.getWssHostname()}`:n=ie.socketBaseUrls?.dex,e||`${n||""}/ws/v5/ipublic`}},$i=new gt;var As=({isPri:i=!1,subscribeParams:t,onSubscribeSuccess:e,onListenData:n,onListenError:c,onListenReconnected:r})=>{let l=i?Ji:$i,s=Array.isArray(t)?t:[t];if(s.length<=0||!t)return()=>{};l.subscribe(s);let o=bt(s.map(_=>_.channel)).map(_=>{let f=!1;return l.addListenerData(_,k=>{let{data:p,event:x,arg:v}=k;if(x===Ke.SUBSCRIBE){e?.(_),f=!0;return}!p||!f||n?.(p,v)})}),a=l.addListenerError(_=>{c?.(_)}),D=l.addListenerConnected(()=>{r?.()});return()=>{l.unsubscribe(s),o.forEach(_=>{_?.()}),a(),D()}};d();h();var Us={DEX_MARKET_CHANNEL:"dex-market",DEX_MARKET_TX_CHANNEL:"dex-market-v3",DEX_MARKET_HOLDER_CHANNEL:"dex-market-holder",DEX_MARKET_TRANSACTION_HISTORY_CHANNEL:"dex-market-trade-history",DEX_MARKET_ADDRESS_SWAP_HISTORY:"dex-market-address-swap-history",DEX_MARKET_POOL_CHANGES_CHANNEL:"dex-market-pool-history",DEX_MARKET_PNL_LATEST:"dex-market-pnl-latest",DEX_MARKET_PNL_HISTORY:"dex-market-pnl-history",DEX_MARKET_TOKEN_KLINE_BAR:"dex-token-candle{bar}",DEX_MARKET_KLINE_HOLDER_BS:"dex-market-kline-bs",DEX_MARKET_HOLDER_TRADE_STATISTICS:"dex-market-trade-history-statistics"};d();h();wt();var qi=i=>!!(Number(i?.isNativeToken)===xt.TRUE||i?.isNativeToken===!0||i?.isBaseCoin),zs=i=>i?Ct(i.chainId)&&i.tokenContractAddress:!1,Gs=({chainId:i,tokenContractAddress:t,tokenAddress:e=void 0}={})=>`${i}_${(t||e)?.toLowerCase()}`;function Qi(i,t=!1){let e=i?.tokenContractAddress||i?.tokenAddress||"";return t?e:vt(e)}function Gn(i,t){return Number(i?.chainId)===Number(t?.chainId)}function js(i,t,e=!1){if(!Gn(i,t))return!1;let c=Qi(i,e),r=Qi(t,e);return c&&r?c===r:qi(i)&&qi(t)}export{Xi as a,Xo as b,As as c,Us as d,Le as e,yt as f,Br as g,ta as h,zs as i,Gs as j,Qi as k,Gn as l,js as m};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-PV5K2HOA.js.map
