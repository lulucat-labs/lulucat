import{a as Ru}from"./chunk-YO76A5JK.js";import{a as Ni}from"./chunk-7MZSFBF4.js";import{b as ut}from"./chunk-TKZ7N5JX.js";import{N as pt}from"./chunk-SHMKQUVK.js";import{c as S,n as process,o as l,p as f,q as u}from"./chunk-FJHLV356.js";var oo=S(wr=>{"use strict";l();u();Object.defineProperty(wr,"__esModule",{value:!0});wr.SignType=void 0;var ku;(function(t){t[t.Secp256k1=1]="Secp256k1",t[t.ECDSA_P256=2]="ECDSA_P256",t[t.ED25519=3]="ED25519",t[t.StarknetSignType=4]="StarknetSignType",t[t.TezosSignType=5]="TezosSignType"})(ku=wr.SignType||(wr.SignType={}))});var qi=S(pe=>{"use strict";l();u();Object.defineProperty(pe,"__esModule",{value:!0});pe.CoinCurveMap=pe.MultiAddressCoins=pe.segwitType=pe.Currency=void 0;var K;(function(t){t[t.NULL=-1]="NULL",t[t.BTC=0]="BTC",t[t.TBTC=1]="TBTC",t[t.ETH=60]="ETH",t[t.LTC=2]="LTC",t[t.DOGE=3]="DOGE",t[t.BCH=145]="BCH",t[t.BSV=236]="BSV",t[t.TRX=195]="TRX",t[t.SOL=501]="SOL",t[t.APTOS=637]="APTOS",t[t.OMNI_USDT=20001]="OMNI_USDT",t[t.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",t[t.SUI=784]="SUI",t[t.ATOM=118]="ATOM",t[t.OSMO=1e3]="OSMO",t[t.EVMOS=1001]="EVMOS",t[t.AXL=1002]="AXL",t[t.CRO=1003]="CRO",t[t.Iris=1004]="Iris",t[t.Juno=1005]="Juno",t[t.Kava=1006]="Kava",t[t.Kujira=1007]="Kujira",t[t.SCRT=1008]="SCRT",t[t.Stargaze=1009]="Stargaze",t[t.Terra=1010]="Terra",t[t.ZKSPACE=1011]="ZKSPACE",t[t.ZKSYNC=804]="ZKSYNC",t[t.Stx=5757]="Stx",t[t.SEI=2837]="SEI",t[t.WAX=14001]="WAX",t[t.Starknet=9004]="Starknet",t[t.ADA=1815]="ADA",t[t.INJ=2892]="INJ",t[t.Celestia=2854]="Celestia",t[t.DYDX=2897]="DYDX",t[t.Kaspa=111111]="Kaspa",t[t.TON=607]="TON",t[t.NostrAssets=1237]="NostrAssets",t[t.Near=397]="Near"})(K=pe.Currency||(pe.Currency={}));var Nu;(function(t){t[t.SEGWIT_NESTED=1]="SEGWIT_NESTED",t[t.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",t[t.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",t[t.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})(Nu=pe.segwitType||(pe.segwitType={}));pe.MultiAddressCoins=[K.BTC,K.TBTC,K.LTC,K.DOGE,K.BSV,K.OMNI_USDT,K.OMNI_USDT_TEST];var F="secp256k1",Gr="ed25519";pe.CoinCurveMap=new Map([[K.BTC,F],[K.TBTC,F],[K.ETH,F],[K.LTC,F],[K.DOGE,F],[K.BCH,F],[K.BSV,F],[K.TRX,F],[K.OMNI_USDT,F],[K.OMNI_USDT_TEST,F],[K.ATOM,F],[K.OSMO,F],[K.EVMOS,F],[K.AXL,F],[K.CRO,F],[K.Iris,F],[K.Juno,F],[K.Kava,F],[K.Kujira,F],[K.SCRT,F],[K.Stargaze,F],[K.Terra,F],[K.SEI,F],[K.Celestia,F],[K.DYDX,F],[K.SOL,Gr],[K.APTOS,Gr],[K.SUI,Gr],[K.TON,Gr]])});var io=S(T=>{"use strict";l();u();Object.defineProperty(T,"__esModule",{value:!0});T.SignCommonMsgError=T.EstimateFeeError=T.validSignedTransactionError=T.GetPayLoadError=T.HardwareDerivePubKeyError=T.CalcTxHashError=T.SignMsgStep3Error=T.SignMsgSetupError=T.Ed25519Step3Error=T.Ed25519Step2Error=T.Ed25519Step1Error=T.Ed25519SetupError=T.EcdsaStep3Error=T.EcdsaStep2Error=T.EcdsaStep1Error=T.EcdsaSetupError=T.MPCShakeHandsError=T.MPCStepError=T.MPCAesKeyMissError=T.GetHardWareMessageHashError=T.GetHardwareSignedTransactionError=T.GetHardwareRawTransactionError=T.GetMpcTransactionError=T.GetMpcRawTransactionError=T.DerivePathError=T.GenMnemonicError=T.GenPrivateKeyError=T.UnsupportedCoinError=T.SignMsgError=T.SignTxError=T.ValidAddressError=T.NewAddressError=T.NotImplementedError=void 0;T.NotImplementedError="no implementation method";T.NewAddressError="generate address error";T.ValidAddressError="valid address error";T.SignTxError="sign tx error";T.SignMsgError="sign message error";T.UnsupportedCoinError="unsupported currency";T.GenPrivateKeyError="generate private key error";T.GenMnemonicError="generate mnemonic error";T.DerivePathError="derive hdPath error";T.GetMpcRawTransactionError="get mpc raw transaction error";T.GetMpcTransactionError="get mpc transaction error";T.GetHardwareRawTransactionError="get hardware raw transaction error";T.GetHardwareSignedTransactionError="get hardware signed transaction error";T.GetHardWareMessageHashError="get hardware message hash error";T.MPCAesKeyMissError="mpc get aes key error";T.MPCStepError="mpc step error";T.MPCShakeHandsError="mpc shake hands error";T.EcdsaSetupError="ecdsa setup error";T.EcdsaStep1Error="ecdsa step1 error";T.EcdsaStep2Error="ecdsa step2 error";T.EcdsaStep3Error="ecdsa step3 error";T.Ed25519SetupError="ed25519 setup error";T.Ed25519Step1Error="ed25519 step1 error";T.Ed25519Step2Error="ed25519 step2 error";T.Ed25519Step3Error="ed25519 step3 error";T.SignMsgSetupError="sign message setup error";T.SignMsgStep3Error="sign message step3 error";T.CalcTxHashError="calculate tx hash error";T.HardwareDerivePubKeyError="derive sub pub key error";T.GetPayLoadError="get payload error";T.validSignedTransactionError="valid signed transaction error";T.EstimateFeeError="estimate fee error";T.SignCommonMsgError="sign common msg error"});var ji=S(le=>{"use strict";l();u();Object.defineProperty(le,"__esModule",{value:!0});le.jsonStringifyUniform=le.cloneObject=le.assertBufferLength=le.convert2BigNumber=le.convert2Number=le.buildCommonSignMsg=void 0;var $r=ut();function qu(t,e){return`OKX Wallet Sign In

publicKey: ${t}
walletId: ${e}
host: api.wallet.okx
OKX Wallet Sign In`}le.buildCommonSignMsg=qu;function ju(t){if(t!=null)return typeof t=="string"?parseInt(t):t}le.convert2Number=ju;function Ku(t){if(t!=null)return $r.BigNumber.isBigNumber(t)?t:new $r.BigNumber(t)}le.convert2BigNumber=Ku;function Du(t,e){if(t.length!=e)throw Error("buffer length is illegal")}le.assertBufferLength=Du;function Lu(t){return JSON.parse(JSON.stringify(t))}le.cloneObject=Lu;function Hu(t){return JSON.stringify(t,(e,r)=>r&&(r.type==="Buffer"||r instanceof Uint8Array?$r.base.toHex(r):typeof r=="bigint"?r.toString():r))}le.jsonStringifyUniform=Hu});var so=S(dt=>{"use strict";l();u();var Vu=dt&&dt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fu=dt&&dt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vu(e,t,r)};Object.defineProperty(dt,"__esModule",{value:!0});Fu(ji(),dt)});var Vi=S(W=>{"use strict";l();u();Object.defineProperty(W,"__esModule",{value:!0});W.SimpleWallet=W.BaseWallet=W.ecdsaSign=W.fromSigned=W.padWithZeroes=W.toUnsigned=W.intToHex=W.makeSignature=W.secp256k1SignTest=void 0;var Q=io(),yt=oo(),X=ut(),zu=so();function Ki(t){let e=X.base.sha256("secp256k1-test"),r=X.signUtil.secp256k1.publicKeyCreate(t,!1),{signature:n,recovery:o}=X.signUtil.secp256k1.sign(f.Buffer.from(e),t);return X.signUtil.secp256k1.verify(e,n,o,r)}W.secp256k1SignTest=Ki;function Di(t,e,r){let n=(0,W.fromSigned)(e),o=(0,W.fromSigned)(r),s=t,p=ao((0,W.toUnsigned)(n).toString("hex"),64),d=ao((0,W.toUnsigned)(o).toString("hex"),64);return X.base.stripHexPrefix(Li(s)).concat(p,d)}W.makeSignature=Di;function Li(t){return`0x${t.toString(16)}`}W.intToHex=Li;var Wu=function(t){return f.Buffer.from(t.toTwos(256).toArray())};W.toUnsigned=Wu;function ao(t,e){if(t!==""&&!/^[a-f0-9]+$/iu.test(t))throw new Error(`Expected an unprefixed hex string. Received: ${t}`);if(e<0)throw new Error(`Expected a non-negative integer target length. Received: ${e}`);return String.prototype.padStart.call(t,e,"0")}W.padWithZeroes=ao;var Gu=function(t){return new X.BN(t).fromTwos(256)};W.fromSigned=Gu;function Hi(t,e,r){let{signature:n,recovery:o}=X.signUtil.secp256k1.sign(t,e),s=f.Buffer.from(n.slice(0,32)),p=f.Buffer.from(n.slice(32,64));if(r&&!Number.isSafeInteger(r))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:r?o+(r*2+35):o+27,r:s,s:p}}W.ecdsaSign=Hi;var Yr=class{getRandomPrivateKey(){try{for(;;){let e=X.base.randomBytes(32);if(Ki(e))return Promise.resolve(X.base.toHex(e,!0))}}catch{}return Promise.reject(Q.GenPrivateKeyError)}getDerivedPrivateKey(e){return X.bip39.mnemonicToSeed(e.mnemonic).then(r=>{let n=X.bip32.fromSeed(r).derivePath(e.hdPath);if(n.privateKey){let o=X.base.toHex(n.privateKey);return Promise.resolve("0x"+o)}else return Promise.reject(Q.GenPrivateKeyError)}).catch(r=>Promise.reject(Q.GenPrivateKeyError))}getDerivedPath(e){return Promise.reject(Q.NotImplementedError)}validPrivateKey(e){return Promise.reject(Q.NotImplementedError)}signMessage(e){return Promise.reject(Q.NotImplementedError)}async signCommonMsg(e){e.signType||(e.signType=yt.SignType.Secp256k1);let r;if(e.message.text)r=e.message.text;else{let d;if(e.publicKey?d=e.publicKey:d=(await this.getNewAddress({privateKey:e.privateKey,addressType:e.addressType,hrp:e.hrp,version:e.version})).publicKey,d.startsWith("0x")&&(d=d.substring(2)),!e.message.walletId)return Promise.reject("invalid walletId");r=(0,zu.buildCommonSignMsg)(d,e.message.walletId)}let n=X.base.magicHash(r),o=e.privateKeyHex?e.privateKeyHex:e.privateKey,s=X.base.fromHex(o);var p;switch(e.signType){case yt.SignType.Secp256k1:let{v:d,r:_,s:B}=Hi(f.Buffer.from(n),s);return Promise.resolve(Di(d,_,B));case yt.SignType.ECDSA_P256:return p=X.signUtil.p256.sign(f.Buffer.from(n),s).signature,Promise.resolve(X.base.toHex(p));case yt.SignType.ED25519:return p=X.signUtil.ed25519.sign(n,s),Promise.resolve(X.base.toHex(p));case yt.SignType.StarknetSignType:return p=X.signUtil.schnorr.stark.sign(n,s).toCompactRawBytes(),Promise.resolve(X.base.toHex(p));case yt.SignType.TezosSignType:return Promise.reject("not support")}}verifyMessage(e){return Promise.reject(Q.NotImplementedError)}ecRecover(e,r){return Promise.reject(Q.NotImplementedError)}getAddressByPublicKey(e){return Promise.reject(Q.NotImplementedError)}getMPCRawTransaction(e){return Promise.reject(Q.NotImplementedError)}getMPCTransaction(e){return Promise.reject(Q.NotImplementedError)}getMPCRawMessage(e){return Promise.reject(Q.NotImplementedError)}getMPCSignedMessage(e){return Promise.reject(Q.NotImplementedError)}getHardWareRawTransaction(e){return Promise.reject(Q.NotImplementedError)}getHardWareSignedTransaction(e){return Promise.reject(Q.NotImplementedError)}getHardWareMessageHash(e){return Promise.reject(Q.NotImplementedError)}calcTxHash(e){return Promise.reject(Q.NotImplementedError)}getRawTransaction(e){return Promise.reject(Q.NotImplementedError)}validSignedTransaction(e){return Promise.reject(Q.NotImplementedError)}estimateFee(e){return Promise.reject(Q.NotImplementedError)}};W.BaseWallet=Yr;var lo=class extends Yr{mockData(e,r){this.mockAddress=e,this.mockPublicKey=r}getNewAddress(e){return Promise.resolve({address:this.mockAddress,publicKey:this.mockPublicKey})}validAddress(e){throw new Error("Method not implemented.")}signTransaction(e){throw new Error("Method not implemented.")}};W.SimpleWallet=lo});var Fi=S(Se=>{"use strict";l();u();var $u=Se&&Se.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vr=Se&&Se.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$u(e,t,r)};Object.defineProperty(Se,"__esModule",{value:!0});vr(oo(),Se);vr(qi(),Se);vr(io(),Se);vr(Vi(),Se);vr(so(),Se)});var Wi=S((Cp,zi)=>{"use strict";l();u();zi.exports=Symbol.for("nodejs.util.inspect.custom")});var ft=S((Ip,Gi)=>{"use strict";l();u();typeof process<"u",Gi.exports=Wi()});var Xr=S(Qr=>{"use strict";l();u();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.crc16=void 0;function Yu(t){let r=0,n=f.Buffer.alloc(t.length+2);n.set(t);for(let o of n){let s=128;for(;s>0;)r<<=1,o&s&&(r+=1),s>>=1,r>65535&&(r&=65535,r^=4129)}return f.Buffer.from([Math.floor(r/256),r%256])}Qr.crc16=Yu});var Re=S(ze=>{"use strict";l();u();var Qu=ze&&ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Yi;Object.defineProperty(ze,"__esModule",{value:!0});ze.address=ze.Address=void 0;var Xu=Qu(ft()),Qi=Xr(),uo=17,Xi=81,fo=128;function $i(t){if(typeof t=="string"&&!ge.isFriendly(t))throw new Error("Unknown address type");let e=f.Buffer.isBuffer(t)?t:f.Buffer.from(t,"base64");if(e.length!==36)throw new Error("Unknown address type: byte length is not equal to 36");let r=e.subarray(0,34),n=e.subarray(34,36),o=(0,Qi.crc16)(r);if(!(o[0]===n[0]&&o[1]===n[1]))throw new Error("Invalid checksum: "+t);let s=r[0],p=!1,d=!1;if(s&fo&&(p=!0,s=s^fo),s!==uo&&s!==Xi)throw"Unknown address tag";d=s===uo;let _=null;r[1]===255?_=-1:_=r[1];let B=r.subarray(2,34);return{isTestOnly:p,isBounceable:d,workchain:_,hashPart:B}}var ge=class{static isAddress(e){return e instanceof ge}static isFriendly(e){return!(e.length!==48||!/[A-Za-z0-9+/_-]+/.test(e))}static isRaw(e){if(e.indexOf(":")===-1)return!1;let[r,n]=e.split(":");return!(!Number.isInteger(parseFloat(r))||!/[a-f0-9]+/.test(n.toLowerCase())||n.length!==64)}static normalize(e){return typeof e=="string"?ge.parse(e).toString():e.toString()}static parse(e){if(ge.isFriendly(e))return this.parseFriendly(e).address;if(ge.isRaw(e))return this.parseRaw(e);throw new Error("Unknown address type: "+e)}static parseRaw(e){let r=parseInt(e.split(":")[0]),n=f.Buffer.from(e.split(":")[1],"hex");return new ge(r,n)}static parseFriendly(e){if(f.Buffer.isBuffer(e)){let r=$i(e);return{isBounceable:r.isBounceable,isTestOnly:r.isTestOnly,address:new ge(r.workchain,r.hashPart)}}else{let r=e.replace(/\-/g,"+").replace(/_/g,"/"),n=$i(r);return{isBounceable:n.isBounceable,isTestOnly:n.isTestOnly,isUrlSafe:!(e.includes("/")||e.includes("+")),address:new ge(n.workchain,n.hashPart)}}}constructor(e,r){if(this.toRawString=()=>this.workChain+":"+this.hash.toString("hex"),this.toRaw=()=>{let n=f.Buffer.alloc(36);return n.set(this.hash),n.set([this.workChain,this.workChain,this.workChain,this.workChain],32),n},this.toStringBuffer=n=>{let o=n&&n.testOnly!==void 0?n.testOnly:!1,p=(n&&n.bounceable!==void 0?n.bounceable:!0)?uo:Xi;o&&(p|=fo);let d=f.Buffer.alloc(34);d[0]=p,d[1]=this.workChain,d.set(this.hash,2);let _=f.Buffer.alloc(36);return _.set(d),_.set((0,Qi.crc16)(d),34),_},this.toString=n=>{let o=n&&n.urlSafe!==void 0?n.urlSafe:!0,s=this.toStringBuffer(n);return o?s.toString("base64").replace(/\+/g,"-").replace(/\//g,"_"):s.toString("base64")},this[Yi]=()=>this.toString(),r.length!==32)throw new Error("Invalid address hash length: "+r.length);this.workChain=e,this.hash=r,Object.freeze(this)}equals(e){return e.workChain!==this.workChain?!1:e.hash.equals(this.hash)}};ze.Address=ge;Yi=Xu.default;function Zu(t){return ge.parse(t)}ze.address=Zu});var Zr=S(_t=>{"use strict";l();u();var Ju=_t&&_t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Zi;Object.defineProperty(_t,"__esModule",{value:!0});_t.ExternalAddress=void 0;var ed=Ju(ft()),Mr=class{static isAddress(e){return e instanceof Mr}constructor(e,r){this[Zi]=()=>this.toString(),this.value=e,this.bits=r}toString(){return`External<${this.bits}:${this.value}>`}};_t.ExternalAddress=Mr;Zi=ed.default});var ho=S(bt=>{"use strict";l();u();Object.defineProperty(bt,"__esModule",{value:!0});bt.base32Decode=bt.base32Encode=void 0;var co="abcdefghijklmnopqrstuvwxyz234567";function td(t){let e=t.byteLength,r=0,n=0,o="";for(let s=0;s<e;s++)for(n=n<<8|t[s],r+=8;r>=5;)o+=co[n>>>r-5&31],r-=5;return r>0&&(o+=co[n<<5-r&31]),o}bt.base32Encode=td;function rd(t,e){let r=t.indexOf(e);if(r===-1)throw new Error("Invalid character found: "+e);return r}function nd(t){let e;e=t.toLowerCase();let{length:r}=e,n=0,o=0,s=0,p=f.Buffer.alloc(r*5/8|0);for(let d=0;d<r;d++)o=o<<5|rd(co,e[d]),n+=5,n>=8&&(p[s++]=o>>>n-8&255,n-=8);return p}bt.base32Decode=nd});var rs=S(Bt=>{"use strict";l();u();var od=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ts;Object.defineProperty(Bt,"__esModule",{value:!0});Bt.ADNLAddress=void 0;var id=od(ft()),Ji=ho(),es=Xr(),mt=class{static parseFriendly(e){if(e.length!==55)throw Error("Invalid address");e="f"+e;let r=(0,Ji.base32Decode)(e);if(r[0]!==45)throw Error("Invalid address");let n=r.slice(33);if(!(0,es.crc16)(r.slice(0,33)).equals(n))throw Error("Invalid address");return new mt(r.slice(1,33))}static parseRaw(e){let r=f.Buffer.from(e,"base64");return new mt(r)}constructor(e){if(this.toRaw=()=>this.address.toString("hex").toUpperCase(),this.toString=()=>{let r=f.Buffer.concat([f.Buffer.from([45]),this.address]),n=(0,es.crc16)(r);return r=f.Buffer.concat([r,n]),(0,Ji.base32Encode)(r).slice(1)},this[ts]=()=>this.toString(),e.length!==32)throw Error("Invalid address");this.address=e}equals(e){return this.address.equals(e.address)}};Bt.ADNLAddress=mt;ts=id.default});var Ar=S(St=>{"use strict";l();u();Object.defineProperty(St,"__esModule",{value:!0});St.paddedBufferToBits=St.bitsToPaddedBuffer=void 0;var sd=Pr(),ad=ke();function ld(t){let e=new sd.BitBuilder(Math.ceil(t.length/8)*8);e.writeBits(t);let r=Math.ceil(t.length/8)*8-t.length;for(let n=0;n<r;n++)n===0?e.writeBit(1):e.writeBit(0);return e.buffer()}St.bitsToPaddedBuffer=ld;function ud(t){let e=0;for(let r=t.length-1;r>=0;r--)if(t[r]!==0){let n=t[r],o=n&-n;(o&1)==0&&(o=Math.log2(o)+1),r>0&&(e=r<<3),e+=8-o;break}return new ad.BitString(t,0,e)}St.paddedBufferToBits=ud});var ke=S(wt=>{"use strict";l();u();var dd=wt&&wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ns;Object.defineProperty(wt,"__esModule",{value:!0});wt.BitString=void 0;var fd=Ar(),cd=dd(ft()),Ne=class{static isBitString(e){return e instanceof Ne}constructor(e,r,n){if(this[ns]=()=>this.toString(),n<0)throw new Error(`Length ${n} is out of bounds`);this._length=n,this._data=e,this._offset=r}get length(){return this._length}at(e){if(e>=this._length)throw new Error(`Index ${e} > ${this._length} is out of bounds`);if(e<0)throw new Error(`Index ${e} < 0 is out of bounds`);let r=this._offset+e>>3,n=7-(this._offset+e)%8;return(this._data[r]&1<<n)!==0}substring(e,r){if(e>this._length)throw new Error(`Offset(${e}) > ${this._length} is out of bounds`);if(e<0)throw new Error(`Offset(${e}) < 0 is out of bounds`);if(r===0)return Ne.EMPTY;if(e+r>this._length)throw new Error(`Offset ${e} + Length ${r} > ${this._length} is out of bounds`);return new Ne(this._data,this._offset+e,r)}subbuffer(e,r){if(e>this._length)throw new Error(`Offset ${e} is out of bounds`);if(e<0)throw new Error(`Offset ${e} is out of bounds`);if(e+r>this._length)throw new Error(`Offset + Lenght = ${e+r} is out of bounds`);if(r%8!==0||(this._offset+e)%8!==0)return null;let n=this._offset+e>>3,o=n+(r>>3);return this._data.subarray(n,o)}equals(e){if(this._length!==e._length)return!1;for(let r=0;r<this._length;r++)if(this.at(r)!==e.at(r))return!1;return!0}toString(){let e=(0,fd.bitsToPaddedBuffer)(this);if(this._length%4===0){let r=e.subarray(0,Math.ceil(this._length/8)).toString("hex").toUpperCase();return this._length%8===0?r:r.substring(0,r.length-1)}else{let r=e.toString("hex").toUpperCase();return this._length%8<=4?r.substring(0,r.length-1)+"_":r+"_"}}};wt.BitString=Ne;ns=cd.default;Ne.EMPTY=new Ne(f.Buffer.alloc(0),0,0)});var Pr=S(Jr=>{"use strict";l();u();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.BitBuilder=void 0;var hd=Re(),gd=Zr(),pd=ke(),go=class{constructor(e=1023){this._buffer=f.Buffer.alloc(Math.ceil(e/8)),this._length=0}get length(){return this._length}writeBit(e){let r=this._length;if(r>this._buffer.length*8)throw new Error("BitBuilder overflow");(typeof e=="boolean"&&e===!0||typeof e=="number"&&e>0)&&(this._buffer[r/8|0]|=1<<7-r%8),this._length++}writeBits(e){for(let r=0;r<e.length;r++)this.writeBit(e.at(r))}writeBuffer(e){if(this._length%8===0){if(this._length+e.length*8>this._buffer.length*8)throw new Error("BitBuilder overflow");e.copy(this._buffer,this._length/8),this._length+=e.length*8}else for(let r=0;r<e.length;r++)this.writeUint(e[r],8)}writeUint(e,r){if(r<0||!Number.isSafeInteger(r))throw Error(`invalid bit length. Got ${r}`);let n=BigInt(e);if(r===0){if(n!==0n)throw Error(`value is not zero for ${r} bits. Got ${e}`);return}let o=1n<<BigInt(r);if(n<0||n>=o)throw Error(`bitLength is too small for a value ${e}. Got ${r}`);if(this._length+r>this._buffer.length*8)throw new Error("BitBuilder overflow");let s=8-this._length%8;if(s>0){let p=Math.floor(this._length/8);if(r<s){let d=Number(n);this._buffer[p]|=d<<s-r,this._length+=r}else{let d=Number(n>>BigInt(r-s));this._buffer[p]|=d,this._length+=s}}for(r-=s;r>0;)r>=8?(this._buffer[this._length/8]=Number(n>>BigInt(r-8)&0xffn),this._length+=8,r-=8):(this._buffer[this._length/8]=Number(n<<BigInt(8-r)&0xffn),this._length+=r,r=0)}writeInt(e,r){let n=BigInt(e);if(r<0||!Number.isSafeInteger(r))throw Error(`invalid bit length. Got ${r}`);if(r===0){if(e!==0n)throw Error(`value is not zero for ${r} bits. Got ${e}`);return}if(r===1){if(e!==-1n&&e!==0n)throw Error(`value is not zero or -1 for ${r} bits. Got ${e}`);this.writeBit(e===-1n);return}let o=1n<<BigInt(r)-1n;if(n<-o||n>=o)throw Error(`value is out of range for ${r} bits. Got ${e}`);n<0?(this.writeBit(!0),n=o+n):this.writeBit(!1),this.writeUint(n,r-1)}writeVarUint(e,r){let n=BigInt(e);if(r<0||!Number.isSafeInteger(r))throw Error(`invalid bit length. Got ${r}`);if(n<0)throw Error(`value is negative. Got ${e}`);if(n===0n){this.writeUint(0,r);return}let o=Math.ceil(n.toString(2).length/8),s=o*8;this.writeUint(o,r),this.writeUint(n,s)}writeVarInt(e,r){let n=BigInt(e);if(r<0||!Number.isSafeInteger(r))throw Error(`invalid bit length. Got ${r}`);if(n===0n){this.writeUint(0,r);return}let o=n>0?n:-n,s=1+Math.ceil(o.toString(2).length/8),p=s*8;this.writeUint(s,r),this.writeInt(n,p)}writeCoins(e){this.writeVarUint(e,4)}writeAddress(e){if(e==null){this.writeUint(0,2);return}if(hd.Address.isAddress(e)){this.writeUint(2,2),this.writeUint(0,1),this.writeInt(e.workChain,8),this.writeBuffer(e.hash);return}if(gd.ExternalAddress.isAddress(e)){this.writeUint(1,2),this.writeUint(e.bits,9),this.writeUint(e.value,e.bits);return}throw Error(`Invalid address. Got ${e}`)}build(){return new pd.BitString(this._buffer,0,this._length)}buffer(){if(this._length%8!==0)throw new Error("BitBuilder buffer is not byte aligned");return this._buffer.subarray(0,this._length/8)}};Jr.BitBuilder=go});var vt=S(Cr=>{"use strict";l();u();Object.defineProperty(Cr,"__esModule",{value:!0});Cr.CellType=void 0;var yd;(function(t){t[t.Ordinary=-1]="Ordinary",t[t.PrunedBranch=1]="PrunedBranch",t[t.Library=2]="Library",t[t.MerkleProof=3]="MerkleProof",t[t.MerkleUpdate=4]="MerkleUpdate"})(yd=Cr.CellType||(Cr.CellType={}))});var os=S(en=>{"use strict";l();u();Object.defineProperty(en,"__esModule",{value:!0});en.readUnaryLength=void 0;function _d(t){let e=0;for(;t.loadBit();)e++;return e}en.readUnaryLength=_d});var qe=S(tn=>{"use strict";l();u();Object.defineProperty(tn,"__esModule",{value:!0});tn.BitReader=void 0;var bd=Re(),md=Zr(),Er=class{constructor(e,r=0){this._checkpoints=[],this._bits=e,this._offset=r}get offset(){return this._offset}get remaining(){return this._bits.length-this._offset}skip(e){if(e<0||this._offset+e>this._bits.length)throw new Error(`Index ${this._offset+e} is out of bounds`);this._offset+=e}reset(){this._checkpoints.length>0?this._offset=this._checkpoints.pop():this._offset=0}save(){this._checkpoints.push(this._offset)}loadBit(){let e=this._bits.at(this._offset);return this._offset++,e}preloadBit(){return this._bits.at(this._offset)}loadBits(e){let r=this._bits.substring(this._offset,e);return this._offset+=e,r}preloadBits(e){return this._bits.substring(this._offset,e)}loadBuffer(e){let r=this._preloadBuffer(e,this._offset);return this._offset+=e*8,r}preloadBuffer(e){return this._preloadBuffer(e,this._offset)}loadUint(e){return Number(this.loadUintBig(e))}loadUintBig(e){let r=this.preloadUintBig(e);return this._offset+=e,r}preloadUint(e){return Number(this._preloadUint(e,this._offset))}preloadUintBig(e){return this._preloadUint(e,this._offset)}loadInt(e){let r=this._preloadInt(e,this._offset);return this._offset+=e,Number(r)}loadIntBig(e){let r=this._preloadInt(e,this._offset);return this._offset+=e,r}preloadInt(e){return Number(this._preloadInt(e,this._offset))}preloadIntBig(e){return this._preloadInt(e,this._offset)}loadVarUint(e){let r=Number(this.loadUint(e));return Number(this.loadUintBig(r*8))}loadVarUintBig(e){let r=Number(this.loadUint(e));return this.loadUintBig(r*8)}preloadVarUint(e){let r=Number(this._preloadUint(e,this._offset));return Number(this._preloadUint(r*8,this._offset+e))}preloadVarUintBig(e){let r=Number(this._preloadUint(e,this._offset));return this._preloadUint(r*8,this._offset+e)}loadVarInt(e){let r=Number(this.loadUint(e));return Number(this.loadIntBig(r*8))}loadVarIntBig(e){let r=Number(this.loadUint(e));return this.loadIntBig(r*8)}preloadVarInt(e){let r=Number(this._preloadUint(e,this._offset));return Number(this._preloadInt(r*8,this._offset+e))}preloadVarIntBig(e){let r=Number(this._preloadUint(e,this._offset));return this._preloadInt(r*8,this._offset+e)}loadCoins(){return this.loadVarUintBig(4)}preloadCoins(){return this.preloadVarUintBig(4)}loadAddress(){let e=Number(this._preloadUint(2,this._offset));if(e===2)return this._loadInternalAddress();throw new Error("Invalid address: "+e)}loadMaybeAddress(){let e=Number(this._preloadUint(2,this._offset));if(e===0)return this._offset+=2,null;if(e===2)return this._loadInternalAddress();throw new Error("Invalid address")}loadExternalAddress(){if(Number(this._preloadUint(2,this._offset))===1)return this._loadExternalAddress();throw new Error("Invalid address")}loadMaybeExternalAddress(){let e=Number(this._preloadUint(2,this._offset));if(e===0)return this._offset+=2,null;if(e===1)return this._loadExternalAddress();throw new Error("Invalid address")}loadAddressAny(){let e=Number(this._preloadUint(2,this._offset));if(e===0)return this._offset+=2,null;if(e===2)return this._loadInternalAddress();if(e===1)return this._loadExternalAddress();throw Error(e===3?"Unsupported":"Unreachable")}loadPaddedBits(e){if(e%8!==0)throw new Error("Invalid number of bits");let r=e;for(;;)if(this._bits.at(this._offset+r-1)){r--;break}else r--;let n=this._bits.substring(this._offset,r);return this._offset+=e,n}clone(){return new Er(this._bits,this._offset)}_preloadInt(e,r){if(e==0)return 0n;let n=this._bits.at(r),o=0n;for(let s=0;s<e-1;s++)this._bits.at(r+1+s)&&(o+=1n<<BigInt(e-s-1-1));return n&&(o=o-(1n<<BigInt(e-1))),o}_preloadUint(e,r){if(e==0)return 0n;let n=0n;for(let o=0;o<e;o++)this._bits.at(r+o)&&(n+=1n<<BigInt(e-o-1));return n}_preloadBuffer(e,r){let n=this._bits.subbuffer(r,e*8);if(n)return n;let o=f.Buffer.alloc(e);for(let s=0;s<e;s++)o[s]=Number(this._preloadUint(8,r+s*8));return o}_loadInternalAddress(){if(Number(this._preloadUint(2,this._offset))!==2||this._preloadUint(1,this._offset+2)!==0n)throw Error("Invalid address");let r=Number(this._preloadInt(8,this._offset+3)),n=this._preloadBuffer(32,this._offset+11);return this._offset+=267,new bd.Address(r,n)}_loadExternalAddress(){if(Number(this._preloadUint(2,this._offset))!==1)throw Error("Invalid address");let r=Number(this._preloadUint(9,this._offset+2)),n=this._preloadUint(r,this._offset+11);return this._offset+=11+r,new md.ExternalAddress(n,r)}};tn.BitReader=Er});var xr=S(Mt=>{"use strict";l();u();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.convertToMerkleProof=Mt.exoticMerkleProof=void 0;var Bd=qe(),Sd=Y();function wd(t,e){let r=new Bd.BitReader(t),n=8+256+16;if(t.length!==n)throw new Error(`Merkle Proof cell must have exactly (8 + 256 + 16) bits, got "${t.length}"`);if(e.length!==1)throw new Error(`Merkle Proof cell must have exactly 1 ref, got "${e.length}"`);let o=r.loadUint(8);if(o!==3)throw new Error(`Merkle Proof cell must have type 3, got "${o}"`);let s=r.loadBuffer(32),p=r.loadUint(16),d=e[0].hash(0),_=e[0].depth(0);if(p!==_)throw new Error(`Merkle Proof cell ref depth must be exactly "${p}", got "${_}"`);if(!s.equals(d))throw new Error(`Merkle Proof cell ref hash must be exactly "${s.toString("hex")}", got "${d.toString("hex")}"`);return{proofDepth:p,proofHash:s}}Mt.exoticMerkleProof=wd;function vd(t){return(0,Sd.beginCell)().storeUint(3,8).storeBuffer(t.hash(0)).storeUint(t.depth(0),16).storeRef(t).endCell({exotic:!0})}Mt.convertToMerkleProof=vd});var rn=S(At=>{"use strict";l();u();Object.defineProperty(At,"__esModule",{value:!0});At.generateMerkleProof=At.generateMerkleProofDirect=void 0;var yo=Y(),Md=os(),Ad=xr();function Pd(t){return(0,yo.beginCell)().storeUint(1,8).storeUint(1,8).storeBuffer(t.hash(0)).storeUint(t.depth(0),16).endCell({exotic:!0})}function po(t,e,r,n){let o=e.asCell();if(n.length==0)return Pd(o);let s=e.loadBit()?1:0,p=0,d=t;if(s===0){p=(0,Md.readUnaryLength)(e);for(let _=0;_<p;_++)d+=e.loadBit()?"1":"0"}else if((e.loadBit()?1:0)===0){p=e.loadUint(Math.ceil(Math.log2(r+1)));for(let B=0;B<p;B++)d+=e.loadBit()?"1":"0"}else{let B=e.loadBit()?"1":"0";p=e.loadUint(Math.ceil(Math.log2(r+1)));for(let x=0;x<p;x++)d+=B}if(r-p===0)return o;{let _=o.beginParse(),B=_.loadRef(),x=_.loadRef();if(!B.isExotic){let R=n.filter(U=>d+"0"===U.slice(0,d.length+1));B=po(d+"0",B.beginParse(),r-p-1,R)}if(!x.isExotic){let R=n.filter(U=>d+"1"===U.slice(0,d.length+1));x=po(d+"1",x.beginParse(),r-p-1,R)}return(0,yo.beginCell)().storeSlice(_).storeRef(B).storeRef(x).endCell()}}function is(t,e,r){e.forEach(o=>{if(!t.has(o))throw new Error(`Trying to generate merkle proof for a missing key "${o}"`)});let n=(0,yo.beginCell)().storeDictDirect(t).asSlice();return po("",n,r.bits,e.map(o=>r.serialize(o).toString(2).padStart(r.bits,"0")))}At.generateMerkleProofDirect=is;function Cd(t,e,r){return(0,Ad.convertToMerkleProof)(is(t,e,r))}At.generateMerkleProof=Cd});var _o=S(nn=>{"use strict";l();u();Object.defineProperty(nn,"__esModule",{value:!0});nn.generateMerkleUpdate=void 0;var Ed=Y(),ss=rn();function xd(t,e){return(0,Ed.beginCell)().storeUint(4,8).storeBuffer(t.hash(0)).storeBuffer(e.hash(0)).storeUint(t.depth(0),16).storeUint(e.depth(0),16).storeRef(t).storeRef(e).endCell({exotic:!0})}function Id(t,e,r,n){let o=(0,ss.generateMerkleProof)(t,[e],r).refs[0];t.set(e,n);let s=(0,ss.generateMerkleProof)(t,[e],r).refs[0];return xd(o,s)}nn.generateMerkleUpdate=Id});var as=S(on=>{"use strict";l();u();Object.defineProperty(on,"__esModule",{value:!0});on.parseDict=void 0;function Ud(t){let e=0;for(;t.loadBit();)e++;return e}function bo(t,e,r,n,o){let s=e.loadBit()?1:0,p=0,d=t;if(s===0){p=Ud(e);for(let _=0;_<p;_++)d+=e.loadBit()?"1":"0"}else if((e.loadBit()?1:0)===0){p=e.loadUint(Math.ceil(Math.log2(r+1)));for(let B=0;B<p;B++)d+=e.loadBit()?"1":"0"}else{let B=e.loadBit()?"1":"0";p=e.loadUint(Math.ceil(Math.log2(r+1)));for(let x=0;x<p;x++)d+=B}if(r-p===0)n.set(BigInt("0b"+d),o(e));else{let _=e.loadRef(),B=e.loadRef();_.isExotic||bo(d+"0",_.beginParse(),r-p-1,n,o),B.isExotic||bo(d+"1",B.beginParse(),r-p-1,n,o)}}function Td(t,e,r){let n=new Map;return t&&bo("",t,e,n,r),n}on.parseDict=Td});var ls=S(sn=>{"use strict";l();u();Object.defineProperty(sn,"__esModule",{value:!0});sn.findCommonPrefix=void 0;function Od(t,e=0){if(t.length===0)return"";let r=t[0].slice(e);for(let n=1;n<t.length;n++){let o=t[n];for(;o.indexOf(r,e)!==e;)if(r=r.substring(0,r.length-1),r==="")return r}return r}sn.findCommonPrefix=Od});var ps=S(ue=>{"use strict";l();u();Object.defineProperty(ue,"__esModule",{value:!0});ue.serializeDict=ue.detectLabelType=ue.writeLabelSame=ue.writeLabelLong=ue.writeLabelShort=ue.buildTree=void 0;var us=Y(),Rd=ls();function kd(t,e){for(;t.length<e;)t="0"+t;return t}function Nd(t,e){if(t.size===0)throw Error("Internal inconsistency");let r=new Map,n=new Map;for(let[o,s]of t.entries())o[e]==="0"?r.set(o,s):n.set(o,s);if(r.size===0)throw Error("Internal inconsistency. Left emtpy.");if(n.size===0)throw Error("Internal inconsistency. Right emtpy.");return{left:r,right:n}}function qd(t,e){if(t.size===0)throw Error("Internal inconsistency");if(t.size===1)return{type:"leaf",value:Array.from(t.values())[0]};let{left:r,right:n}=Nd(t,e);return{type:"fork",left:mo(r,e+1),right:mo(n,e+1)}}function mo(t,e=0){if(t.size===0)throw Error("Internal inconsistency");let r=(0,Rd.findCommonPrefix)(Array.from(t.keys()),e);return{label:r,node:qd(t,r.length+e)}}function ds(t,e){let r=new Map;for(let n of Array.from(t.keys())){let o=kd(n.toString(2),e);r.set(o,t.get(n))}return mo(r)}ue.buildTree=ds;function fs(t,e){e.storeBit(0);for(let r=0;r<t.length;r++)e.storeBit(1);return e.storeBit(0),t.length>0&&e.storeUint(BigInt("0b"+t),t.length),e}ue.writeLabelShort=fs;function jd(t){return 1+t.length+1+t.length}function cs(t,e,r){r.storeBit(1),r.storeBit(0);let n=Math.ceil(Math.log2(e+1));return r.storeUint(t.length,n),t.length>0&&r.storeUint(BigInt("0b"+t),t.length),r}ue.writeLabelLong=cs;function Kd(t,e){return 1+1+Math.ceil(Math.log2(e+1))+t.length}function hs(t,e,r,n){n.storeBit(1),n.storeBit(1),n.storeBit(t);let o=Math.ceil(Math.log2(r+1));n.storeUint(e,o)}ue.writeLabelSame=hs;function Dd(t){return 1+1+1+Math.ceil(Math.log2(t+1))}function Ld(t){if(t.length===0||t.length===1)return!0;for(let e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0}function gs(t,e){let r="short",n=jd(t),o=Kd(t,e);if(o<n&&(n=o,r="long"),Ld(t)){let s=Dd(e);s<n&&(n=s,r="same")}return r}ue.detectLabelType=gs;function Hd(t,e,r){let n=gs(t,e);n==="short"?fs(t,r):n==="long"?cs(t,e,r):n==="same"&&hs(t[0]==="1",t.length,e,r)}function Vd(t,e,r,n){if(t.type==="leaf"&&r(t.value,n),t.type==="fork"){let o=(0,us.beginCell)(),s=(0,us.beginCell)();Bo(t.left,e-1,r,o),Bo(t.right,e-1,r,s),n.storeRef(o),n.storeRef(s)}}function Bo(t,e,r,n){Hd(t.label,e,n),Vd(t.node,e-t.label.length,r,n)}function Fd(t,e,r,n){let o=ds(t,e);Bo(o,e,r,n)}ue.serializeDict=Fd});var _s=S(Pt=>{"use strict";l();u();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.deserializeInternalKey=Pt.serializeInternalKey=void 0;var ys=Re(),So=ke(),zd=Ar();function Wd(t){if(typeof t=="number"){if(!Number.isSafeInteger(t))throw Error("Invalid key type: not a safe integer: "+t);return"n:"+t.toString(10)}else{if(typeof t=="bigint")return"b:"+t.toString(10);if(ys.Address.isAddress(t))return"a:"+t.toString();if(f.Buffer.isBuffer(t))return"f:"+t.toString("hex");if(So.BitString.isBitString(t))return"B:"+t.toString();throw Error("Invalid key type")}}Pt.serializeInternalKey=Wd;function Gd(t){let e=t.slice(0,2),r=t.slice(2);if(e==="n:")return parseInt(r,10);if(e==="b:")return BigInt(r);if(e==="a:")return ys.Address.parse(r);if(e==="f:")return f.Buffer.from(r,"hex");if(e==="B:"){let n=r.slice(-1)=="_";if(n||r.length%2!=0){let s=n?r.length-1:r.length,p=r.substr(0,s)+"0";return!n&&(s&1)!==0?new So.BitString(f.Buffer.from(p,"hex"),0,s<<2):(0,zd.paddedBufferToBits)(f.Buffer.from(p,"hex"))}else return new So.BitString(f.Buffer.from(r,"hex"),0,r.length<<2)}throw Error("Invalid key type: "+e)}Pt.deserializeInternalKey=Gd});var We=S(an=>{"use strict";l();u();Object.defineProperty(an,"__esModule",{value:!0});an.Dictionary=void 0;var $d=Re(),ie=Y(),bs=Ge(),Yd=ke(),ms=rn(),Qd=_o(),Xd=as(),Bs=ps(),je=_s(),de=class{static empty(e,r){return e&&r?new de(new Map,e,r):new de(new Map,null,null)}static load(e,r,n){let o;if(n instanceof bs.Cell){if(n.isExotic)return de.empty(e,r);o=n.beginParse()}else o=n;let s=o.loadMaybeRef();return s&&!s.isExotic?de.loadDirect(e,r,s.beginParse()):de.empty(e,r)}static loadDirect(e,r,n){if(!n)return de.empty(e,r);let o;n instanceof bs.Cell?o=n.beginParse():o=n;let s=(0,Xd.parseDict)(o,e.bits,r.parse),p=new Map;for(let[d,_]of s)p.set((0,je.serializeInternalKey)(e.parse(d)),_);return new de(p,e,r)}constructor(e,r,n){this._key=r,this._value=n,this._map=e}get size(){return this._map.size}get(e){return this._map.get((0,je.serializeInternalKey)(e))}has(e){return this._map.has((0,je.serializeInternalKey)(e))}set(e,r){return this._map.set((0,je.serializeInternalKey)(e),r),this}delete(e){let r=(0,je.serializeInternalKey)(e);return this._map.delete(r)}clear(){this._map.clear()}*[Symbol.iterator](){for(let[e,r]of this._map)yield[(0,je.deserializeInternalKey)(e),r]}keys(){return Array.from(this._map.keys()).map(e=>(0,je.deserializeInternalKey)(e))}values(){return Array.from(this._map.values())}store(e,r,n){if(this._map.size===0)e.storeBit(0);else{let o=this._key;r!=null&&(o=r);let s=this._value;if(n!=null&&(s=n),!o)throw Error("Key serializer is not defined");if(!s)throw Error("Value serializer is not defined");let p=new Map;for(let[_,B]of this._map)p.set(o.serialize((0,je.deserializeInternalKey)(_)),B);e.storeBit(1);let d=(0,ie.beginCell)();(0,Bs.serializeDict)(p,o.bits,s.serialize,d),e.storeRef(d.endCell())}}storeDirect(e,r,n){if(this._map.size===0)throw Error("Cannot store empty dictionary directly");let o=this._key;r!=null&&(o=r);let s=this._value;if(n!=null&&(s=n),!o)throw Error("Key serializer is not defined");if(!s)throw Error("Value serializer is not defined");let p=new Map;for(let[d,_]of this._map)p.set(o.serialize((0,je.deserializeInternalKey)(d)),_);(0,Bs.serializeDict)(p,o.bits,s.serialize,e)}generateMerkleProof(e){return(0,ms.generateMerkleProof)(this,e,this._key)}generateMerkleProofDirect(e){return(0,ms.generateMerkleProofDirect)(this,e,this._key)}generateMerkleUpdate(e,r){return(0,Qd.generateMerkleUpdate)(this,e,this._key,r)}};an.Dictionary=de;de.Keys={Address:()=>Zd(),BigInt:t=>Jd(t),Int:t=>ef(t),BigUint:t=>tf(t),Uint:t=>rf(t),Buffer:t=>nf(t),BitString:t=>of(t)};de.Values={BigInt:t=>af(t),Int:t=>sf(t),BigVarInt:t=>lf(t),BigUint:t=>ff(t),Uint:t=>df(t),BigVarUint:t=>uf(t),Bool:()=>cf(),Address:()=>hf(),Cell:()=>gf(),Buffer:t=>yf(t),BitString:t=>_f(t),Dictionary:(t,e)=>pf(t,e)};function Zd(){return{bits:267,serialize:t=>{if(!$d.Address.isAddress(t))throw Error("Key is not an address");return(0,ie.beginCell)().storeAddress(t).endCell().beginParse().preloadUintBig(267)},parse:t=>(0,ie.beginCell)().storeUint(t,267).endCell().beginParse().loadAddress()}}function Jd(t){return{bits:t,serialize:e=>{if(typeof e!="bigint")throw Error("Key is not a bigint");return(0,ie.beginCell)().storeInt(e,t).endCell().beginParse().loadUintBig(t)},parse:e=>(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadIntBig(t)}}function ef(t){return{bits:t,serialize:e=>{if(typeof e!="number")throw Error("Key is not a number");if(!Number.isSafeInteger(e))throw Error("Key is not a safe integer: "+e);return(0,ie.beginCell)().storeInt(e,t).endCell().beginParse().loadUintBig(t)},parse:e=>(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadInt(t)}}function tf(t){return{bits:t,serialize:e=>{if(typeof e!="bigint")throw Error("Key is not a bigint");if(e<0)throw Error("Key is negative: "+e);return(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadUintBig(t)},parse:e=>(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadUintBig(t)}}function rf(t){return{bits:t,serialize:e=>{if(typeof e!="number")throw Error("Key is not a number");if(!Number.isSafeInteger(e))throw Error("Key is not a safe integer: "+e);if(e<0)throw Error("Key is negative: "+e);return(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadUintBig(t)},parse:e=>Number((0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadUint(t))}}function nf(t){return{bits:t*8,serialize:e=>{if(!f.Buffer.isBuffer(e))throw Error("Key is not a buffer");return(0,ie.beginCell)().storeBuffer(e).endCell().beginParse().loadUintBig(t*8)},parse:e=>(0,ie.beginCell)().storeUint(e,t*8).endCell().beginParse().loadBuffer(t)}}function of(t){return{bits:t,serialize:e=>{if(!Yd.BitString.isBitString(e))throw Error("Key is not a BitString");return(0,ie.beginCell)().storeBits(e).endCell().beginParse().loadUintBig(t)},parse:e=>(0,ie.beginCell)().storeUint(e,t).endCell().beginParse().loadBits(t)}}function sf(t){return{serialize:(e,r)=>{r.storeInt(e,t)},parse:e=>e.loadInt(t)}}function af(t){return{serialize:(e,r)=>{r.storeInt(e,t)},parse:e=>e.loadIntBig(t)}}function lf(t){return{serialize:(e,r)=>{r.storeVarInt(e,t)},parse:e=>e.loadVarIntBig(t)}}function uf(t){return{serialize:(e,r)=>{r.storeVarUint(e,t)},parse:e=>e.loadVarUintBig(t)}}function df(t){return{serialize:(e,r)=>{r.storeUint(e,t)},parse:e=>e.loadUint(t)}}function ff(t){return{serialize:(e,r)=>{r.storeUint(e,t)},parse:e=>e.loadUintBig(t)}}function cf(){return{serialize:(t,e)=>{e.storeBit(t)},parse:t=>t.loadBit()}}function hf(){return{serialize:(t,e)=>{e.storeAddress(t)},parse:t=>t.loadAddress()}}function gf(){return{serialize:(t,e)=>{e.storeRef(t)},parse:t=>t.loadRef()}}function pf(t,e){return{serialize:(r,n)=>{r.store(n)},parse:r=>de.load(t,e,r)}}function yf(t){return{serialize:(e,r)=>{if(e.length!==t)throw Error("Invalid buffer size");r.storeBuffer(e)},parse:e=>e.loadBuffer(t)}}function _f(t){return{serialize:(e,r)=>{if(e.length!==t)throw Error("Invalid BitString size");r.storeBits(e)},parse:e=>e.loadBits(t)}}});var vo=S($e=>{"use strict";l();u();Object.defineProperty($e,"__esModule",{value:!0});$e.writeString=$e.stringToCell=$e.readString=void 0;var Ss=Y();function ws(t){if(t.remainingBits%8!==0)throw new Error(`Invalid string length: ${t.remainingBits}`);if(t.remainingRefs!==0&&t.remainingRefs!==1)throw new Error(`invalid number of refs: ${t.remainingRefs}`);let e;return t.remainingBits===0?e=f.Buffer.alloc(0):e=t.loadBuffer(t.remainingBits/8),t.remainingRefs===1&&(e=f.Buffer.concat([e,ws(t.loadRef().beginParse())])),e}function bf(t){return ws(t).toString()}$e.readString=bf;function wo(t,e){if(t.length>0){let r=Math.floor(e.availableBits/8);if(t.length>r){let n=t.subarray(0,r),o=t.subarray(r);e=e.storeBuffer(n);let s=(0,Ss.beginCell)();wo(o,s),e=e.storeRef(s.endCell())}else e=e.storeBuffer(t)}}function mf(t){let e=(0,Ss.beginCell)();return wo(f.Buffer.from(t),e),e.endCell()}$e.stringToCell=mf;function Bf(t,e){wo(f.Buffer.from(t),e)}$e.writeString=Bf});var un=S(Et=>{"use strict";l();u();var Sf=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},As;Object.defineProperty(Et,"__esModule",{value:!0});Et.Slice=void 0;var wf=Sf(ft()),vs=We(),Ms=Y(),ln=vo(),Ct=class{constructor(e,r){this[As]=()=>this.toString(),this._reader=e.clone(),this._refs=[...r],this._refsOffset=0}get remainingBits(){return this._reader.remaining}get offsetBits(){return this._reader.offset}get remainingRefs(){return this._refs.length-this._refsOffset}get offsetRefs(){return this._refsOffset}skip(e){return this._reader.skip(e),this}loadBit(){return this._reader.loadBit()}preloadBit(){return this._reader.preloadBit()}loadBoolean(){return this.loadBit()}loadMaybeBoolean(){return this.loadBit()?this.loadBoolean():null}loadBits(e){return this._reader.loadBits(e)}preloadBits(e){return this._reader.preloadBits(e)}loadUint(e){return this._reader.loadUint(e)}loadUintBig(e){return this._reader.loadUintBig(e)}preloadUint(e){return this._reader.preloadUint(e)}preloadUintBig(e){return this._reader.preloadUintBig(e)}loadMaybeUint(e){return this.loadBit()?this.loadUint(e):null}loadMaybeUintBig(e){return this.loadBit()?this.loadUintBig(e):null}loadInt(e){return this._reader.loadInt(e)}loadIntBig(e){return this._reader.loadIntBig(e)}preloadInt(e){return this._reader.preloadInt(e)}preloadIntBig(e){return this._reader.preloadIntBig(e)}loadMaybeInt(e){return this.loadBit()?this.loadInt(e):null}loadMaybeIntBig(e){return this.loadBit()?this.loadIntBig(e):null}loadVarUint(e){return this._reader.loadVarUint(e)}loadVarUintBig(e){return this._reader.loadVarUintBig(e)}preloadVarUint(e){return this._reader.preloadVarUint(e)}preloadVarUintBig(e){return this._reader.preloadVarUintBig(e)}loadVarInt(e){return this._reader.loadVarInt(e)}loadVarIntBig(e){return this._reader.loadVarIntBig(e)}preloadVarInt(e){return this._reader.preloadVarInt(e)}preloadVarIntBig(e){return this._reader.preloadVarIntBig(e)}loadCoins(){return this._reader.loadCoins()}preloadCoins(){return this._reader.preloadCoins()}loadMaybeCoins(){return this._reader.loadBit()?this._reader.loadCoins():null}loadAddress(){return this._reader.loadAddress()}loadMaybeAddress(){return this._reader.loadMaybeAddress()}loadExternalAddress(){return this._reader.loadExternalAddress()}loadMaybeExternalAddress(){return this._reader.loadMaybeExternalAddress()}loadAddressAny(){return this._reader.loadAddressAny()}loadRef(){if(this._refsOffset>=this._refs.length)throw new Error("No more references");return this._refs[this._refsOffset++]}preloadRef(){if(this._refsOffset>=this._refs.length)throw new Error("No more references");return this._refs[this._refsOffset]}loadMaybeRef(){return this.loadBit()?this.loadRef():null}preloadMaybeRef(){return this.preloadBit()?this.preloadRef():null}loadBuffer(e){return this._reader.loadBuffer(e)}preloadBuffer(e){return this._reader.preloadBuffer(e)}loadStringTail(){return(0,ln.readString)(this)}loadMaybeStringTail(){return this.loadBit()?(0,ln.readString)(this):null}loadStringRefTail(){return(0,ln.readString)(this.loadRef().beginParse())}loadMaybeStringRefTail(){let e=this.loadMaybeRef();return e?(0,ln.readString)(e.beginParse()):null}loadDict(e,r){return vs.Dictionary.load(e,r,this)}loadDictDirect(e,r){return vs.Dictionary.loadDirect(e,r,this)}endParse(){if(this.remainingBits>0||this.remainingRefs>0)throw new Error("Slice is not empty")}asCell(){return(0,Ms.beginCell)().storeSlice(this).endCell()}asBuilder(){return(0,Ms.beginCell)().storeSlice(this)}clone(e=!1){if(e){let r=this._reader.clone();return r.reset(),new Ct(r,this._refs)}else{let r=new Ct(this._reader,this._refs);return r._refsOffset=this._refsOffset,r}}toString(){return this.asCell().toString()}};Et.Slice=Ct;As=wf.default});var Mo=S(dn=>{"use strict";l();u();Object.defineProperty(dn,"__esModule",{value:!0});dn.exoticLibrary=void 0;var vf=qe();function Mf(t,e){let r=new vf.BitReader(t),n=8+256;if(t.length!==n)throw new Error(`Library cell must have exactly (8 + 256) bits, got "${t.length}"`);let o=r.loadUint(8);if(o!==2)throw new Error(`Library cell must have type 2, got "${o}"`);return{}}dn.exoticLibrary=Mf});var cn=S(fn=>{"use strict";l();u();Object.defineProperty(fn,"__esModule",{value:!0});fn.exoticMerkleUpdate=void 0;var Af=qe();function Pf(t,e){let r=new Af.BitReader(t),n=8+2*(256+16);if(t.length!==n)throw new Error(`Merkle Update cell must have exactly (8 + (2 * (256 + 16))) bits, got "${t.length}"`);if(e.length!==2)throw new Error(`Merkle Update cell must have exactly 2 refs, got "${e.length}"`);let o=r.loadUint(8);if(o!==4)throw new Error(`Merkle Update cell type must be exactly 4, got "${o}"`);let s=r.loadBuffer(32),p=r.loadBuffer(32),d=r.loadUint(16),_=r.loadUint(16);if(d!==e[0].depth(0))throw new Error(`Merkle Update cell ref depth must be exactly "${d}", got "${e[0].depth(0)}"`);if(!s.equals(e[0].hash(0)))throw new Error(`Merkle Update cell ref hash must be exactly "${s.toString("hex")}", got "${e[0].hash(0).toString("hex")}"`);if(_!==e[1].depth(0))throw new Error(`Merkle Update cell ref depth must be exactly "${_}", got "${e[1].depth(0)}"`);if(!p.equals(e[1].hash(0)))throw new Error(`Merkle Update cell ref hash must be exactly "${p.toString("hex")}", got "${e[1].hash(0).toString("hex")}"`);return{proofDepth1:d,proofDepth2:_,proofHash1:s,proofHash2:p}}fn.exoticMerkleUpdate=Pf});var gn=S(hn=>{"use strict";l();u();Object.defineProperty(hn,"__esModule",{value:!0});hn.LevelMask=void 0;var Ir=class{constructor(e=0){this._mask=0,this._mask=e,this._hashIndex=Cf(this._mask),this._hashCount=this._hashIndex+1}get value(){return this._mask}get level(){return 32-Math.clz32(this._mask)}get hashIndex(){return this._hashIndex}get hashCount(){return this._hashCount}apply(e){return new Ir(this._mask&(1<<e)-1)}isSignificant(e){return e===0||(this._mask>>e-1)%2!==0}};hn.LevelMask=Ir;function Cf(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>24}});var yn=S(pn=>{"use strict";l();u();Object.defineProperty(pn,"__esModule",{value:!0});pn.exoticPruned=void 0;var Ef=qe(),Ps=gn();function xf(t,e){let r=new Ef.BitReader(t),n=r.loadUint(8);if(n!==1)throw new Error(`Pruned branch cell must have type 1, got "${n}"`);if(e.length!==0)throw new Error(`Pruned Branch cell can't has refs, got "${e.length}"`);let o;if(t.length===280)o=new Ps.LevelMask(1);else{if(o=new Ps.LevelMask(r.loadUint(8)),o.level<1||o.level>3)throw new Error(`Pruned Branch cell level must be >= 1 and <= 3, got "${o.level}/${o.value}"`);let _=8+8+o.apply(o.level-1).hashCount*(256+16);if(t.length!==_)throw new Error(`Pruned branch cell must have exactly ${_} bits, got "${t.length}"`)}let s=[],p=[],d=[];for(let _=0;_<o.level;_++)p.push(r.loadBuffer(32));for(let _=0;_<o.level;_++)d.push(r.loadUint(16));for(let _=0;_<o.level;_++)s.push({depth:d[_],hash:p[_]});return{mask:o.value,pruned:s}}pn.exoticPruned=xf});var Cs=S(mn=>{"use strict";l();u();Object.defineProperty(mn,"__esModule",{value:!0});mn.resolveExotic=void 0;var If=qe(),_n=vt(),Uf=Mo(),Tf=xr(),Of=cn(),Rf=yn(),bn=gn();function kf(t,e){let r=(0,Rf.exoticPruned)(t,e),n=[],o=[],s=new bn.LevelMask(r.mask);for(let p=0;p<r.pruned.length;p++)n.push(r.pruned[p].depth),o.push(r.pruned[p].hash);return{type:_n.CellType.PrunedBranch,depths:n,hashes:o,mask:s}}function Nf(t,e){let r=(0,Uf.exoticLibrary)(t,e),n=[],o=[],s=new bn.LevelMask;return{type:_n.CellType.Library,depths:n,hashes:o,mask:s}}function qf(t,e){let r=(0,Tf.exoticMerkleProof)(t,e),n=[],o=[],s=new bn.LevelMask(e[0].level()>>1);return{type:_n.CellType.MerkleProof,depths:n,hashes:o,mask:s}}function jf(t,e){let r=(0,Of.exoticMerkleUpdate)(t,e),n=[],o=[],s=new bn.LevelMask((e[0].level()|e[1].level())>>1);return{type:_n.CellType.MerkleUpdate,depths:n,hashes:o,mask:s}}function Kf(t,e){let n=new If.BitReader(t).preloadUint(8);if(n===1)return kf(t,e);if(n===2)return Nf(t,e);if(n===3)return qf(t,e);if(n===4)return jf(t,e);throw Error("Invalid exotic cell type: "+n)}mn.resolveExotic=Kf});var Ao=S(Ye=>{"use strict";l();u();Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getRepr=Ye.getBitsDescriptor=Ye.getRefsDescriptor=void 0;var Ur=vt(),Df=Ar();function Es(t,e,r){return t.length+(r!==Ur.CellType.Ordinary?1:0)*8+e*32}Ye.getRefsDescriptor=Es;function xs(t){let e=t.length;return Math.ceil(e/8)+Math.floor(e/8)}Ye.getBitsDescriptor=xs;function Lf(t,e,r,n,o,s){let p=Math.ceil(e.length/8),d=f.Buffer.alloc(2+p+(2+32)*r.length),_=0;d[_++]=Es(r,o,s),d[_++]=xs(t),(0,Df.bitsToPaddedBuffer)(e).copy(d,_),_+=p;for(let B of r){let x;s==Ur.CellType.MerkleProof||s==Ur.CellType.MerkleUpdate?x=B.depth(n+1):x=B.depth(n),d[_++]=Math.floor(x/256),d[_++]=x%256}for(let B of r){let x;s==Ur.CellType.MerkleProof||s==Ur.CellType.MerkleUpdate?x=B.hash(n+1):x=B.hash(n),x.copy(d,_),_+=32}return d}Ye.getRepr=Lf});var Bn=S((Po,Co)=>{l();u();(function(t,e){typeof Po=="object"&&typeof Co<"u"?Co.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).jsSHA=e()})(Po,function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="ARRAYBUFFER not supported by this environment",r="UINT8ARRAY not supported by this environment";function n(g,i,c,h){var y,a,w,v=i||[0],M=(c=c||0)>>>3,C=h===-1?3:0;for(y=0;y<g.length;y+=1)a=(w=y+M)>>>2,v.length<=a&&v.push(0),v[a]|=g[y]<<8*(C+h*(w%4));return{value:v,binLen:8*g.length+c}}function o(g,i,c){switch(i){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(g){case"HEX":return function(h,y,a){return function(w,v,M,C){var k,P,I,q;if(w.length%2!=0)throw new Error("String of HEX type must be in byte increments");var A=v||[0],L=(M=M||0)>>>3,D=C===-1?3:0;for(k=0;k<w.length;k+=2){if(P=parseInt(w.substr(k,2),16),isNaN(P))throw new Error("String of HEX type contains invalid characters");for(I=(q=(k>>>1)+L)>>>2;A.length<=I;)A.push(0);A[I]|=P<<8*(D+C*(q%4))}return{value:A,binLen:4*w.length+M}}(h,y,a,c)};case"TEXT":return function(h,y,a){return function(w,v,M,C,k){var P,I,q,A,L,D,V,z,Oe=0,he=M||[0],Be=(C=C||0)>>>3;if(v==="UTF8")for(V=k===-1?3:0,q=0;q<w.length;q+=1)for(I=[],128>(P=w.charCodeAt(q))?I.push(P):2048>P?(I.push(192|P>>>6),I.push(128|63&P)):55296>P||57344<=P?I.push(224|P>>>12,128|P>>>6&63,128|63&P):(q+=1,P=65536+((1023&P)<<10|1023&w.charCodeAt(q)),I.push(240|P>>>18,128|P>>>12&63,128|P>>>6&63,128|63&P)),A=0;A<I.length;A+=1){for(L=(D=Oe+Be)>>>2;he.length<=L;)he.push(0);he[L]|=I[A]<<8*(V+k*(D%4)),Oe+=1}else for(V=k===-1?2:0,z=v==="UTF16LE"&&k!==1||v!=="UTF16LE"&&k===1,q=0;q<w.length;q+=1){for(P=w.charCodeAt(q),z===!0&&(P=(A=255&P)<<8|P>>>8),L=(D=Oe+Be)>>>2;he.length<=L;)he.push(0);he[L]|=P<<8*(V+k*(D%4)),Oe+=2}return{value:he,binLen:8*Oe+C}}(h,i,y,a,c)};case"B64":return function(h,y,a){return function(w,v,M,C){var k,P,I,q,A,L,D=0,V=v||[0],z=(M=M||0)>>>3,Oe=C===-1?3:0,he=w.indexOf("=");if(w.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(w=w.replace(/=/g,""),he!==-1&&he<w.length)throw new Error("Invalid '=' found in base-64 string");for(k=0;k<w.length;k+=4){for(q=w.substr(k,4),I=0,P=0;P<q.length;P+=1)I|=t.indexOf(q.charAt(P))<<18-6*P;for(P=0;P<q.length-1;P+=1){for(A=(L=D+z)>>>2;V.length<=A;)V.push(0);V[A]|=(I>>>16-8*P&255)<<8*(Oe+C*(L%4)),D+=1}}return{value:V,binLen:8*D+M}}(h,y,a,c)};case"BYTES":return function(h,y,a){return function(w,v,M,C){var k,P,I,q,A=v||[0],L=(M=M||0)>>>3,D=C===-1?3:0;for(P=0;P<w.length;P+=1)k=w.charCodeAt(P),I=(q=P+L)>>>2,A.length<=I&&A.push(0),A[I]|=k<<8*(D+C*(q%4));return{value:A,binLen:8*w.length+M}}(h,y,a,c)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(e)}return function(h,y,a){return function(w,v,M,C){return n(new Uint8Array(w),v,M,C)}(h,y,a,c)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(r)}return function(h,y,a){return n(h,y,a,c)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function s(g,i,c,h){switch(g){case"HEX":return function(y){return function(a,w,v,M){var C,k,P="0123456789abcdef",I="",q=w/8,A=v===-1?3:0;for(C=0;C<q;C+=1)k=a[C>>>2]>>>8*(A+v*(C%4)),I+=P.charAt(k>>>4&15)+P.charAt(15&k);return M.outputUpper?I.toUpperCase():I}(y,i,c,h)};case"B64":return function(y){return function(a,w,v,M){var C,k,P,I,q,A="",L=w/8,D=v===-1?3:0;for(C=0;C<L;C+=3)for(I=C+1<L?a[C+1>>>2]:0,q=C+2<L?a[C+2>>>2]:0,P=(a[C>>>2]>>>8*(D+v*(C%4))&255)<<16|(I>>>8*(D+v*((C+1)%4))&255)<<8|q>>>8*(D+v*((C+2)%4))&255,k=0;k<4;k+=1)A+=8*C+6*k<=w?t.charAt(P>>>6*(3-k)&63):M.b64Pad;return A}(y,i,c,h)};case"BYTES":return function(y){return function(a,w,v){var M,C,k="",P=w/8,I=v===-1?3:0;for(M=0;M<P;M+=1)C=a[M>>>2]>>>8*(I+v*(M%4))&255,k+=String.fromCharCode(C);return k}(y,i,c)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(e)}return function(y){return function(a,w,v){var M,C=w/8,k=new ArrayBuffer(C),P=new Uint8Array(k),I=v===-1?3:0;for(M=0;M<C;M+=1)P[M]=a[M>>>2]>>>8*(I+v*(M%4))&255;return k}(y,i,c)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(r)}return function(y){return function(a,w,v){var M,C=w/8,k=v===-1?3:0,P=new Uint8Array(C);for(M=0;M<C;M+=1)P[M]=a[M>>>2]>>>8*(k+v*(M%4))&255;return P}(y,i,c)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var p=4294967296,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],B=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],x="Chosen SHA variant is not supported",R="Cannot set numRounds with MAC";function U(g,i){var c,h,y=g.binLen>>>3,a=i.binLen>>>3,w=y<<3,v=4-y<<3;if(y%4!=0){for(c=0;c<a;c+=4)h=y+c>>>2,g.value[h]|=i.value[c>>>2]<<w,g.value.push(0),g.value[h+1]|=i.value[c>>>2]>>>v;return(g.value.length<<2)-4>=a+y&&g.value.pop(),{value:g.value,binLen:g.binLen+i.binLen}}return{value:g.value.concat(i.value),binLen:g.binLen+i.binLen}}function O(g){var i={outputUpper:!1,b64Pad:"=",outputLen:-1},c=g||{},h="Output length must be a multiple of 8";if(i.outputUpper=c.outputUpper||!1,c.b64Pad&&(i.b64Pad=c.b64Pad),c.outputLen){if(c.outputLen%8!=0)throw new Error(h);i.outputLen=c.outputLen}else if(c.shakeLen){if(c.shakeLen%8!=0)throw new Error(h);i.outputLen=c.shakeLen}if(typeof i.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof i.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return i}function N(g,i,c,h){var y=g+" must include a value and format";if(!i){if(!h)throw new Error(y);return h}if(i.value===void 0||!i.format)throw new Error(y);return o(i.format,i.encoding||"UTF8",c)(i.value)}var j=function(){function g(i,c,h){var y=h||{};if(this.t=c,this.i=y.encoding||"UTF8",this.numRounds=y.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=i,this.u=[],this.h=0,this.v=!1,this.A=0,this.l=!1,this.S=[],this.H=[]}return g.prototype.update=function(i){var c,h=0,y=this.p>>>5,a=this.m(i,this.u,this.h),w=a.binLen,v=a.value,M=w>>>5;for(c=0;c<M;c+=y)h+this.p<=w&&(this.U=this.R(v.slice(c,c+y),this.U),h+=this.p);return this.A+=h,this.u=v.slice(h>>>5),this.h=w%this.p,this.v=!0,this},g.prototype.getHash=function(i,c){var h,y,a=this.T,w=O(c);if(this.C){if(w.outputLen===-1)throw new Error("Output length must be specified in options");a=w.outputLen}var v=s(i,a,this.F,w);if(this.l&&this.K)return v(this.K(w));for(y=this.g(this.u.slice(),this.h,this.A,this.L(this.U),a),h=1;h<this.numRounds;h+=1)this.C&&a%32!=0&&(y[y.length-1]&=16777215>>>24-a%32),y=this.g(y,a,0,this.B(this.o),a);return v(y)},g.prototype.setHMACKey=function(i,c,h){if(!this.k)throw new Error("Variant does not support HMAC");if(this.v)throw new Error("Cannot set MAC key after calling update");var y=o(c,(h||{}).encoding||"UTF8",this.F);this.Y(y(i))},g.prototype.Y=function(i){var c,h=this.p>>>3,y=h/4-1;if(this.numRounds!==1)throw new Error(R);if(this.l)throw new Error("MAC key already set");for(h<i.binLen/8&&(i.value=this.g(i.value,i.binLen,0,this.B(this.o),this.T));i.value.length<=y;)i.value.push(0);for(c=0;c<=y;c+=1)this.S[c]=909522486^i.value[c],this.H[c]=1549556828^i.value[c];this.U=this.R(this.S,this.U),this.A=this.p,this.l=!0},g.prototype.getHMAC=function(i,c){var h=O(c);return s(i,this.T,this.F,h)(this.N())},g.prototype.N=function(){var i;if(!this.l)throw new Error("Cannot call getHMAC without first setting MAC key");var c=this.g(this.u.slice(),this.h,this.A,this.L(this.U),this.T);return i=this.R(this.H,this.B(this.o)),i=this.g(c,this.T,this.p,i,this.T)},g}(),Z=function(g,i){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])},Z(g,i)};function ae(g,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=g}Z(g,i),g.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}function ce(g,i){return g<<i|g>>>32-i}function $(g,i){return g>>>i|g<<32-i}function Fe(g,i){return g>>>i}function eo(g,i,c){return g^i^c}function Ai(g,i,c){return g&i^~g&c}function Pi(g,i,c){return g&i^g&c^i&c}function cu(g){return $(g,2)^$(g,13)^$(g,22)}function te(g,i){var c=(65535&g)+(65535&i);return(65535&(g>>>16)+(i>>>16)+(c>>>16))<<16|65535&c}function hu(g,i,c,h){var y=(65535&g)+(65535&i)+(65535&c)+(65535&h);return(65535&(g>>>16)+(i>>>16)+(c>>>16)+(h>>>16)+(y>>>16))<<16|65535&y}function mr(g,i,c,h,y){var a=(65535&g)+(65535&i)+(65535&c)+(65535&h)+(65535&y);return(65535&(g>>>16)+(i>>>16)+(c>>>16)+(h>>>16)+(y>>>16)+(a>>>16))<<16|65535&a}function gu(g){return $(g,7)^$(g,18)^Fe(g,3)}function pu(g){return $(g,6)^$(g,11)^$(g,25)}function yu(g){return[1732584193,4023233417,2562383102,271733878,3285377520]}function Ci(g,i){var c,h,y,a,w,v,M,C=[];for(c=i[0],h=i[1],y=i[2],a=i[3],w=i[4],M=0;M<80;M+=1)C[M]=M<16?g[M]:ce(C[M-3]^C[M-8]^C[M-14]^C[M-16],1),v=M<20?mr(ce(c,5),Ai(h,y,a),w,1518500249,C[M]):M<40?mr(ce(c,5),eo(h,y,a),w,1859775393,C[M]):M<60?mr(ce(c,5),Pi(h,y,a),w,2400959708,C[M]):mr(ce(c,5),eo(h,y,a),w,3395469782,C[M]),w=a,a=y,y=ce(h,30),h=c,c=v;return i[0]=te(c,i[0]),i[1]=te(h,i[1]),i[2]=te(y,i[2]),i[3]=te(a,i[3]),i[4]=te(w,i[4]),i}function _u(g,i,c,h){for(var y,a=15+(i+65>>>9<<4),w=i+c;g.length<=a;)g.push(0);for(g[i>>>5]|=128<<24-i%32,g[a]=4294967295&w,g[a-1]=w/p|0,y=0;y<g.length;y+=16)h=Ci(g.slice(y,y+16),h);return h}typeof SuppressedError=="function"&&SuppressedError;var bu=function(g){function i(c,h,y){var a=this;if(c!=="SHA-1")throw new Error(x);var w=y||{};return(a=g.call(this,c,h,y)||this).k=!0,a.K=a.N,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=Ci,a.L=function(v){return v.slice()},a.B=yu,a.g=_u,a.U=[1732584193,4023233417,2562383102,271733878,3285377520],a.p=512,a.T=160,a.C=!1,w.hmacKey&&a.Y(N("hmacKey",w.hmacKey,a.F)),a}return ae(i,g),i}(j);function Ei(g){return g=="SHA-224"?_.slice():B.slice()}function xi(g,i){var c,h,y,a,w,v,M,C,k,P,I,q,A=[];for(c=i[0],h=i[1],y=i[2],a=i[3],w=i[4],v=i[5],M=i[6],C=i[7],I=0;I<64;I+=1)A[I]=I<16?g[I]:hu($(q=A[I-2],17)^$(q,19)^Fe(q,10),A[I-7],gu(A[I-15]),A[I-16]),k=mr(C,pu(w),Ai(w,v,M),d[I],A[I]),P=te(cu(c),Pi(c,h,y)),C=M,M=v,v=w,w=te(a,k),a=y,y=h,h=c,c=te(k,P);return i[0]=te(c,i[0]),i[1]=te(h,i[1]),i[2]=te(y,i[2]),i[3]=te(a,i[3]),i[4]=te(w,i[4]),i[5]=te(v,i[5]),i[6]=te(M,i[6]),i[7]=te(C,i[7]),i}var mu=function(g){function i(c,h,y){var a=this;if(c!=="SHA-224"&&c!=="SHA-256")throw new Error(x);var w=y||{};return(a=g.call(this,c,h,y)||this).K=a.N,a.k=!0,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=xi,a.L=function(v){return v.slice()},a.B=Ei,a.g=function(v,M,C,k){return function(P,I,q,A,L){for(var D,V=15+(I+65>>>9<<4),z=I+q;P.length<=V;)P.push(0);for(P[I>>>5]|=128<<24-I%32,P[V]=4294967295&z,P[V-1]=z/p|0,D=0;D<P.length;D+=16)A=xi(P.slice(D,D+16),A);return L==="SHA-224"?[A[0],A[1],A[2],A[3],A[4],A[5],A[6]]:A}(v,M,C,k,c)},a.U=Ei(c),a.p=512,a.T=c==="SHA-224"?224:256,a.C=!1,w.hmacKey&&a.Y(N("hmacKey",w.hmacKey,a.F)),a}return ae(i,g),i}(j),b=function(g,i){this.I=g,this.M=i};function Ii(g,i){var c;return i>32?(c=64-i,new b(g.M<<i|g.I>>>c,g.I<<i|g.M>>>c)):i!==0?(c=32-i,new b(g.I<<i|g.M>>>c,g.M<<i|g.I>>>c)):g}function Ae(g,i){var c;return i<32?(c=32-i,new b(g.I>>>i|g.M<<c,g.M>>>i|g.I<<c)):(c=64-i,new b(g.M>>>i|g.I<<c,g.I>>>i|g.M<<c))}function Ui(g,i){return new b(g.I>>>i,g.M>>>i|g.I<<32-i)}function Bu(g,i,c){return new b(g.I&i.I^~g.I&c.I,g.M&i.M^~g.M&c.M)}function Su(g,i,c){return new b(g.I&i.I^g.I&c.I^i.I&c.I,g.M&i.M^g.M&c.M^i.M&c.M)}function wu(g){var i=Ae(g,28),c=Ae(g,34),h=Ae(g,39);return new b(i.I^c.I^h.I,i.M^c.M^h.M)}function me(g,i){var c,h;c=(65535&g.M)+(65535&i.M);var y=(65535&(h=(g.M>>>16)+(i.M>>>16)+(c>>>16)))<<16|65535&c;return c=(65535&g.I)+(65535&i.I)+(h>>>16),h=(g.I>>>16)+(i.I>>>16)+(c>>>16),new b((65535&h)<<16|65535&c,y)}function vu(g,i,c,h){var y,a;y=(65535&g.M)+(65535&i.M)+(65535&c.M)+(65535&h.M);var w=(65535&(a=(g.M>>>16)+(i.M>>>16)+(c.M>>>16)+(h.M>>>16)+(y>>>16)))<<16|65535&y;return y=(65535&g.I)+(65535&i.I)+(65535&c.I)+(65535&h.I)+(a>>>16),a=(g.I>>>16)+(i.I>>>16)+(c.I>>>16)+(h.I>>>16)+(y>>>16),new b((65535&a)<<16|65535&y,w)}function Mu(g,i,c,h,y){var a,w;a=(65535&g.M)+(65535&i.M)+(65535&c.M)+(65535&h.M)+(65535&y.M);var v=(65535&(w=(g.M>>>16)+(i.M>>>16)+(c.M>>>16)+(h.M>>>16)+(y.M>>>16)+(a>>>16)))<<16|65535&a;return a=(65535&g.I)+(65535&i.I)+(65535&c.I)+(65535&h.I)+(65535&y.I)+(w>>>16),w=(g.I>>>16)+(i.I>>>16)+(c.I>>>16)+(h.I>>>16)+(y.I>>>16)+(a>>>16),new b((65535&w)<<16|65535&a,v)}function Br(g,i){return new b(g.I^i.I,g.M^i.M)}function Au(g){var i=Ae(g,1),c=Ae(g,8),h=Ui(g,7);return new b(i.I^c.I^h.I,i.M^c.M^h.M)}function Pu(g){var i=Ae(g,14),c=Ae(g,18),h=Ae(g,41);return new b(i.I^c.I^h.I,i.M^c.M^h.M)}var Cu=[new b(d[0],3609767458),new b(d[1],602891725),new b(d[2],3964484399),new b(d[3],2173295548),new b(d[4],4081628472),new b(d[5],3053834265),new b(d[6],2937671579),new b(d[7],3664609560),new b(d[8],2734883394),new b(d[9],1164996542),new b(d[10],1323610764),new b(d[11],3590304994),new b(d[12],4068182383),new b(d[13],991336113),new b(d[14],633803317),new b(d[15],3479774868),new b(d[16],2666613458),new b(d[17],944711139),new b(d[18],2341262773),new b(d[19],2007800933),new b(d[20],1495990901),new b(d[21],1856431235),new b(d[22],3175218132),new b(d[23],2198950837),new b(d[24],3999719339),new b(d[25],766784016),new b(d[26],2566594879),new b(d[27],3203337956),new b(d[28],1034457026),new b(d[29],2466948901),new b(d[30],3758326383),new b(d[31],168717936),new b(d[32],1188179964),new b(d[33],1546045734),new b(d[34],1522805485),new b(d[35],2643833823),new b(d[36],2343527390),new b(d[37],1014477480),new b(d[38],1206759142),new b(d[39],344077627),new b(d[40],1290863460),new b(d[41],3158454273),new b(d[42],3505952657),new b(d[43],106217008),new b(d[44],3606008344),new b(d[45],1432725776),new b(d[46],1467031594),new b(d[47],851169720),new b(d[48],3100823752),new b(d[49],1363258195),new b(d[50],3750685593),new b(d[51],3785050280),new b(d[52],3318307427),new b(d[53],3812723403),new b(d[54],2003034995),new b(d[55],3602036899),new b(d[56],1575990012),new b(d[57],1125592928),new b(d[58],2716904306),new b(d[59],442776044),new b(d[60],593698344),new b(d[61],3733110249),new b(d[62],2999351573),new b(d[63],3815920427),new b(3391569614,3928383900),new b(3515267271,566280711),new b(3940187606,3454069534),new b(4118630271,4000239992),new b(116418474,1914138554),new b(174292421,2731055270),new b(289380356,3203993006),new b(460393269,320620315),new b(685471733,587496836),new b(852142971,1086792851),new b(1017036298,365543100),new b(1126000580,2618297676),new b(1288033470,3409855158),new b(1501505948,4234509866),new b(1607167915,987167468),new b(1816402316,1246189591)];function Ti(g){return g==="SHA-384"?[new b(3418070365,_[0]),new b(1654270250,_[1]),new b(2438529370,_[2]),new b(355462360,_[3]),new b(1731405415,_[4]),new b(41048885895,_[5]),new b(3675008525,_[6]),new b(1203062813,_[7])]:[new b(B[0],4089235720),new b(B[1],2227873595),new b(B[2],4271175723),new b(B[3],1595750129),new b(B[4],2917565137),new b(B[5],725511199),new b(B[6],4215389547),new b(B[7],327033209)]}function Oi(g,i){var c,h,y,a,w,v,M,C,k,P,I,q,A,L,D,V,z=[];for(c=i[0],h=i[1],y=i[2],a=i[3],w=i[4],v=i[5],M=i[6],C=i[7],I=0;I<80;I+=1)I<16?(q=2*I,z[I]=new b(g[q],g[q+1])):z[I]=vu((A=z[I-2],L=void 0,D=void 0,V=void 0,L=Ae(A,19),D=Ae(A,61),V=Ui(A,6),new b(L.I^D.I^V.I,L.M^D.M^V.M)),z[I-7],Au(z[I-15]),z[I-16]),k=Mu(C,Pu(w),Bu(w,v,M),Cu[I],z[I]),P=me(wu(c),Su(c,h,y)),C=M,M=v,v=w,w=me(a,k),a=y,y=h,h=c,c=me(k,P);return i[0]=me(c,i[0]),i[1]=me(h,i[1]),i[2]=me(y,i[2]),i[3]=me(a,i[3]),i[4]=me(w,i[4]),i[5]=me(v,i[5]),i[6]=me(M,i[6]),i[7]=me(C,i[7]),i}var Eu=function(g){function i(c,h,y){var a=this;if(c!=="SHA-384"&&c!=="SHA-512")throw new Error(x);var w=y||{};return(a=g.call(this,c,h,y)||this).K=a.N,a.k=!0,a.F=-1,a.m=o(a.t,a.i,a.F),a.R=Oi,a.L=function(v){return v.slice()},a.B=Ti,a.g=function(v,M,C,k){return function(P,I,q,A,L){for(var D,V=31+(I+129>>>10<<5),z=I+q;P.length<=V;)P.push(0);for(P[I>>>5]|=128<<24-I%32,P[V]=4294967295&z,P[V-1]=z/p|0,D=0;D<P.length;D+=32)A=Oi(P.slice(D,D+32),A);return L==="SHA-384"?[A[0].I,A[0].M,A[1].I,A[1].M,A[2].I,A[2].M,A[3].I,A[3].M,A[4].I,A[4].M,A[5].I,A[5].M]:[A[0].I,A[0].M,A[1].I,A[1].M,A[2].I,A[2].M,A[3].I,A[3].M,A[4].I,A[4].M,A[5].I,A[5].M,A[6].I,A[6].M,A[7].I,A[7].M]}(v,M,C,k,c)},a.U=Ti(c),a.p=1024,a.T=c==="SHA-384"?384:512,a.C=!1,w.hmacKey&&a.Y(N("hmacKey",w.hmacKey,a.F)),a}return ae(i,g),i}(j),xu=[new b(0,1),new b(0,32898),new b(2147483648,32906),new b(2147483648,2147516416),new b(0,32907),new b(0,2147483649),new b(2147483648,2147516545),new b(2147483648,32777),new b(0,138),new b(0,136),new b(0,2147516425),new b(0,2147483658),new b(0,2147516555),new b(2147483648,139),new b(2147483648,32905),new b(2147483648,32771),new b(2147483648,32770),new b(2147483648,128),new b(0,32778),new b(2147483648,2147483658),new b(2147483648,2147516545),new b(2147483648,32896),new b(0,2147483649),new b(2147483648,2147516424)],Iu=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function to(g){var i,c=[];for(i=0;i<5;i+=1)c[i]=[new b(0,0),new b(0,0),new b(0,0),new b(0,0),new b(0,0)];return c}function Uu(g){var i,c=[];for(i=0;i<5;i+=1)c[i]=g[i].slice();return c}function Fr(g,i){var c,h,y,a,w,v,M,C,k,P=[],I=[];if(g!==null)for(h=0;h<g.length;h+=2)i[(h>>>1)%5][(h>>>1)/5|0]=Br(i[(h>>>1)%5][(h>>>1)/5|0],new b(g[h+1],g[h]));for(c=0;c<24;c+=1){for(a=to(),h=0;h<5;h+=1)P[h]=(w=i[h][0],v=i[h][1],M=i[h][2],C=i[h][3],k=i[h][4],new b(w.I^v.I^M.I^C.I^k.I,w.M^v.M^M.M^C.M^k.M));for(h=0;h<5;h+=1)I[h]=Br(P[(h+4)%5],Ii(P[(h+1)%5],1));for(h=0;h<5;h+=1)for(y=0;y<5;y+=1)i[h][y]=Br(i[h][y],I[h]);for(h=0;h<5;h+=1)for(y=0;y<5;y+=1)a[y][(2*h+3*y)%5]=Ii(i[h][y],Iu[h][y]);for(h=0;h<5;h+=1)for(y=0;y<5;y+=1)i[h][y]=Br(a[h][y],new b(~a[(h+1)%5][y].I&a[(h+2)%5][y].I,~a[(h+1)%5][y].M&a[(h+2)%5][y].M));i[0][0]=Br(i[0][0],xu[c])}return i}function Ri(g){var i,c,h=0,y=[0,0],a=[4294967295&g,g/p&2097151];for(i=6;i>=0;i--)(c=a[i>>2]>>>8*i&255)===0&&h===0||(y[h+1>>2]|=c<<8*(h+1),h+=1);return h=h!==0?h:1,y[0]|=h,{value:h+1>4?y:[y[0]],binLen:8+8*h}}function ro(g){return U(Ri(g.binLen),g)}function ki(g,i){var c,h=Ri(i),y=i>>>2,a=(y-(h=U(h,g)).value.length%y)%y;for(c=0;c<a;c++)h.value.push(0);return h.value}var Tu=function(g){function i(c,h,y){var a=this,w=6,v=0,M=y||{};if((a=g.call(this,c,h,y)||this).numRounds!==1){if(M.kmacKey||M.hmacKey)throw new Error(R);if(a.o==="CSHAKE128"||a.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(a.F=1,a.m=o(a.t,a.i,a.F),a.R=Fr,a.L=Uu,a.B=to,a.U=to(),a.C=!1,c){case"SHA3-224":a.p=v=1152,a.T=224,a.k=!0,a.K=a.N;break;case"SHA3-256":a.p=v=1088,a.T=256,a.k=!0,a.K=a.N;break;case"SHA3-384":a.p=v=832,a.T=384,a.k=!0,a.K=a.N;break;case"SHA3-512":a.p=v=576,a.T=512,a.k=!0,a.K=a.N;break;case"SHAKE128":w=31,a.p=v=1344,a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"SHAKE256":w=31,a.p=v=1088,a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"KMAC128":w=4,a.p=v=1344,a.X(y),a.T=-1,a.C=!0,a.k=!1,a.K=a.O;break;case"KMAC256":w=4,a.p=v=1088,a.X(y),a.T=-1,a.C=!0,a.k=!1,a.K=a.O;break;case"CSHAKE128":a.p=v=1344,w=a.j(y),a.T=-1,a.C=!0,a.k=!1,a.K=null;break;case"CSHAKE256":a.p=v=1088,w=a.j(y),a.T=-1,a.C=!0,a.k=!1,a.K=null;break;default:throw new Error(x)}return a.g=function(C,k,P,I,q){return function(A,L,D,V,z,Oe,he){var Be,no,zr=0,Sr=[],Wr=z>>>5,Ou=L>>>5;for(Be=0;Be<Ou&&L>=z;Be+=Wr)V=Fr(A.slice(Be,Be+Wr),V),L-=z;for(A=A.slice(Be),L%=z;A.length<Wr;)A.push(0);for(A[(Be=L>>>3)>>2]^=Oe<<Be%4*8,A[Wr-1]^=2147483648,V=Fr(A,V);32*Sr.length<he&&(no=V[zr%5][zr/5|0],Sr.push(no.M),!(32*Sr.length>=he));)Sr.push(no.I),64*(zr+=1)%z==0&&(Fr(null,V),zr=0);return Sr}(C,k,0,I,v,w,q)},M.hmacKey&&a.Y(N("hmacKey",M.hmacKey,a.F)),a}return ae(i,g),i.prototype.j=function(c,h){var y=function(M){var C=M||{};return{funcName:N("funcName",C.funcName,1,{value:[],binLen:0}),customization:N("Customization",C.customization,1,{value:[],binLen:0})}}(c||{});h&&(y.funcName=h);var a=U(ro(y.funcName),ro(y.customization));if(y.customization.binLen!==0||y.funcName.binLen!==0){for(var w=ki(a,this.p>>>3),v=0;v<w.length;v+=this.p>>>5)this.U=this.R(w.slice(v,v+(this.p>>>5)),this.U),this.A+=this.p;return 4}return 31},i.prototype.X=function(c){var h=function(w){var v=w||{};return{kmacKey:N("kmacKey",v.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:N("Customization",v.customization,1,{value:[],binLen:0})}}(c||{});this.j(c,h.funcName);for(var y=ki(ro(h.kmacKey),this.p>>>3),a=0;a<y.length;a+=this.p>>>5)this.U=this.R(y.slice(a,a+(this.p>>>5)),this.U),this.A+=this.p;this.l=!0},i.prototype.O=function(c){var h=U({value:this.u.slice(),binLen:this.h},function(y){var a,w,v=0,M=[0,0],C=[4294967295&y,y/p&2097151];for(a=6;a>=0;a--)(w=C[a>>2]>>>8*a&255)==0&&v===0||(M[v>>2]|=w<<8*v,v+=1);return M[(v=v!==0?v:1)>>2]|=v<<8*v,{value:v+1>4?M:[M[0]],binLen:8+8*v}}(c.outputLen));return this.g(h.value,h.binLen,this.A,this.L(this.U),c.outputLen)},i}(j);return function(){function g(i,c,h){if(i=="SHA-1")this._=new bu(i,c,h);else if(i=="SHA-224"||i=="SHA-256")this._=new mu(i,c,h);else if(i=="SHA-384"||i=="SHA-512")this._=new Eu(i,c,h);else{if(i!="SHA3-224"&&i!="SHA3-256"&&i!="SHA3-384"&&i!="SHA3-512"&&i!="SHAKE128"&&i!="SHAKE256"&&i!="CSHAKE128"&&i!="CSHAKE256"&&i!="KMAC128"&&i!="KMAC256")throw new Error(x);this._=new Tu(i,c,h)}}return g.prototype.update=function(i){return this._.update(i),this},g.prototype.getHash=function(i,c){return this._.getHash(i,c)},g.prototype.setHMACKey=function(i,c,h){this._.setHMACKey(i,c,h)},g.prototype.getHMAC=function(i,c){return this._.getHMAC(i,c)},g}()})});var Us=S(Qe=>{"use strict";l();u();var Hf=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getSecureRandomWords=Qe.getSecureRandomBytes=void 0;var Is=Hf(pt());function Vf(t){return Is.default.randomBytes(t)}Qe.getSecureRandomBytes=Vf;function Ff(t){let e=new Uint16Array(t);return Is.default.randomFillSync(e),e}Qe.getSecureRandomWords=Ff});var Ts=S(xt=>{"use strict";l();u();var zf=xt&&xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});xt.hmac_sha512=void 0;var Wf=zf(pt());async function Gf(t,e){let r=typeof t=="string"?f.Buffer.from(t,"utf-8"):t,n=typeof e=="string"?f.Buffer.from(e,"utf-8"):e;return Wf.default.createHmac("sha512",r).update(n).digest()}xt.hmac_sha512=Gf});var Os=S(It=>{"use strict";l();u();var $f=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(It,"__esModule",{value:!0});It.pbkdf2_sha512=void 0;var Yf=$f(pt());function Qf(t,e,r,n){return new Promise((o,s)=>Yf.default.pbkdf2(t,e,r,n,"sha512",(p,d)=>{p?s(p):o(d)}))}It.pbkdf2_sha512=Qf});var Rs=S(Ut=>{"use strict";l();u();var Xf=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.sha256=void 0;var Zf=Xf(pt());async function Jf(t){return Zf.default.createHash("sha256").update(t).digest()}Ut.sha256=Jf});var ks=S(Tt=>{"use strict";l();u();var ec=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.sha512=void 0;var tc=ec(pt());async function rc(t){return tc.default.createHash("sha512").update(t).digest()}Tt.sha512=rc});var Ot=S(fe=>{"use strict";l();u();Object.defineProperty(fe,"__esModule",{value:!0});fe.sha512=fe.sha256=fe.pbkdf2_sha512=fe.hmac_sha512=fe.getSecureRandomWords=fe.getSecureRandomBytes=void 0;var Ns=Us();Object.defineProperty(fe,"getSecureRandomBytes",{enumerable:!0,get:function(){return Ns.getSecureRandomBytes}});Object.defineProperty(fe,"getSecureRandomWords",{enumerable:!0,get:function(){return Ns.getSecureRandomWords}});var nc=Ts();Object.defineProperty(fe,"hmac_sha512",{enumerable:!0,get:function(){return nc.hmac_sha512}});var oc=Os();Object.defineProperty(fe,"pbkdf2_sha512",{enumerable:!0,get:function(){return oc.pbkdf2_sha512}});var ic=Rs();Object.defineProperty(fe,"sha256",{enumerable:!0,get:function(){return ic.sha256}});var sc=ks();Object.defineProperty(fe,"sha512",{enumerable:!0,get:function(){return sc.sha512}})});var js=S(Pe=>{"use strict";l();u();var ac=Pe&&Pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.sha256=Pe.sha256_fallback=Pe.sha256_sync=void 0;var lc=ac(Bn()),uc=Ot();function qs(t){let e;typeof t=="string"?e=f.Buffer.from(t,"utf-8").toString("hex"):e=t.toString("hex");let r=new lc.default("SHA-256","HEX");r.update(e);let n=r.getHash("HEX");return f.Buffer.from(n,"hex")}Pe.sha256_sync=qs;async function dc(t){return qs(t)}Pe.sha256_fallback=dc;function fc(t){return(0,uc.sha256)(t)}Pe.sha256=fc});var Ds=S(Ce=>{"use strict";l();u();var cc=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.sha512=Ce.sha512_fallback=Ce.sha512_sync=void 0;var hc=cc(Bn()),gc=Ot();function Ks(t){let e;typeof t=="string"?e=f.Buffer.from(t,"utf-8").toString("hex"):e=t.toString("hex");let r=new hc.default("SHA-512","HEX");r.update(e);let n=r.getHash("HEX");return f.Buffer.from(n,"hex")}Ce.sha512_sync=Ks;async function pc(t){return Ks(t)}Ce.sha512_fallback=pc;async function yc(t){return(0,gc.sha512)(t)}Ce.sha512=yc});var Ls=S(Sn=>{"use strict";l();u();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.pbkdf2_sha512=void 0;var _c=Ot();function bc(t,e,r,n){return(0,_c.pbkdf2_sha512)(t,e,r,n)}Sn.pbkdf2_sha512=bc});var Hs=S(Xe=>{"use strict";l();u();var mc=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.hmac_sha512=Xe.hmac_sha512_fallback=void 0;var Bc=mc(Bn()),Sc=Ot();async function wc(t,e){let r=typeof t=="string"?f.Buffer.from(t,"utf-8"):t,n=typeof e=="string"?f.Buffer.from(e,"utf-8"):e,o=new Bc.default("SHA-512","HEX",{hmacKey:{value:r.toString("hex"),format:"HEX"}});o.update(n.toString("hex"));let s=o.getHash("HEX");return f.Buffer.from(s,"hex")}Xe.hmac_sha512_fallback=wc;function vc(t,e){return(0,Sc.hmac_sha512)(t,e)}Xe.hmac_sha512=vc});var zs=S(Ze=>{"use strict";l();u();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getSecureRandomNumber=Ze.getSecureRandomWords=Ze.getSecureRandomBytes=void 0;var Mc=Ot();async function Vs(t){return(0,Mc.getSecureRandomBytes)(t)}Ze.getSecureRandomBytes=Vs;async function Fs(t){return Fs(t)}Ze.getSecureRandomWords=Fs;async function Ac(t,e){let r=e-t;var n=Math.ceil(Math.log2(r));if(n>53)throw new Error("Range is too large");for(var o=Math.ceil(n/8),s=Math.pow(2,n)-1;;){let d=await Vs(n),_=(o-1)*8,B=0;for(var p=0;p<o;p++)B+=d[p]*Math.pow(2,_),_-=8;if(B=B&s,!(B>=r))return t+B}}Ze.getSecureRandomNumber=Ac});var Eo=S(re=>{"use strict";l();u();var Pc=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(re,"__esModule",{value:!0});re.openBox=re.sealBox=re.signVerify=re.sign=re.keyPairFromSeed=re.keyPairFromSecretKey=void 0;var Rt=Pc(Ni());function Cc(t){let e=Rt.default.sign.keyPair.fromSecretKey(new Uint8Array(t));return{publicKey:f.Buffer.from(e.publicKey),secretKey:f.Buffer.from(e.secretKey)}}re.keyPairFromSecretKey=Cc;function Ec(t){let e=Rt.default.sign.keyPair.fromSeed(new Uint8Array(t));return{publicKey:f.Buffer.from(e.publicKey),secretKey:f.Buffer.from(e.secretKey)}}re.keyPairFromSeed=Ec;function xc(t,e){return f.Buffer.from(Rt.default.sign.detached(new Uint8Array(t),new Uint8Array(e)))}re.sign=xc;function Ic(t,e,r){return Rt.default.sign.detached.verify(new Uint8Array(t),new Uint8Array(e),new Uint8Array(r))}re.signVerify=Ic;function Uc(t,e,r){return f.Buffer.from(Rt.default.secretbox(t,e,r))}re.sealBox=Uc;function Tc(t,e,r){let n=Rt.default.secretbox.open(t,e,r);return n?f.Buffer.from(n):null}re.openBox=Tc});var vn=S(H=>{"use strict";l();u();Object.defineProperty(H,"__esModule",{value:!0});H.signVerify=H.sign=H.keyPairFromSecretKey=H.keyPairFromSeed=H.openBox=H.sealBox=H.getSecureRandomNumber=H.getSecureRandomWords=H.getSecureRandomBytes=H.hmac_sha512=H.pbkdf2_sha512=H.sha512_sync=H.sha512=H.sha256_sync=H.sha256=void 0;var Ws=js();Object.defineProperty(H,"sha256",{enumerable:!0,get:function(){return Ws.sha256}});Object.defineProperty(H,"sha256_sync",{enumerable:!0,get:function(){return Ws.sha256_sync}});var Gs=Ds();Object.defineProperty(H,"sha512",{enumerable:!0,get:function(){return Gs.sha512}});Object.defineProperty(H,"sha512_sync",{enumerable:!0,get:function(){return Gs.sha512_sync}});var Oc=Ls();Object.defineProperty(H,"pbkdf2_sha512",{enumerable:!0,get:function(){return Oc.pbkdf2_sha512}});var Rc=Hs();Object.defineProperty(H,"hmac_sha512",{enumerable:!0,get:function(){return Rc.hmac_sha512}});var xo=zs();Object.defineProperty(H,"getSecureRandomBytes",{enumerable:!0,get:function(){return xo.getSecureRandomBytes}});Object.defineProperty(H,"getSecureRandomWords",{enumerable:!0,get:function(){return xo.getSecureRandomWords}});Object.defineProperty(H,"getSecureRandomNumber",{enumerable:!0,get:function(){return xo.getSecureRandomNumber}});var $s=Eo();Object.defineProperty(H,"sealBox",{enumerable:!0,get:function(){return $s.sealBox}});Object.defineProperty(H,"openBox",{enumerable:!0,get:function(){return $s.openBox}});var wn=Eo();Object.defineProperty(H,"keyPairFromSeed",{enumerable:!0,get:function(){return wn.keyPairFromSeed}});Object.defineProperty(H,"keyPairFromSecretKey",{enumerable:!0,get:function(){return wn.keyPairFromSecretKey}});Object.defineProperty(H,"sign",{enumerable:!0,get:function(){return wn.sign}});Object.defineProperty(H,"signVerify",{enumerable:!0,get:function(){return wn.signVerify}})});var Ys=S(Mn=>{"use strict";l();u();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.wonderCalculator=void 0;var kc=ke(),Ee=vt(),Tr=gn(),Nc=yn(),qc=xr(),jc=Ao(),Kc=vn(),Dc=cn(),Lc=Mo();function Hc(t,e,r){let n,o=null;if(t===Ee.CellType.Ordinary){let U=0;for(let O of r)U=U|O.mask.value;n=new Tr.LevelMask(U)}else if(t===Ee.CellType.PrunedBranch)o=(0,Nc.exoticPruned)(e,r),n=new Tr.LevelMask(o.mask);else if(t===Ee.CellType.MerkleProof){let U=(0,qc.exoticMerkleProof)(e,r);n=new Tr.LevelMask(r[0].mask.value>>1)}else if(t===Ee.CellType.MerkleUpdate){let U=(0,Dc.exoticMerkleUpdate)(e,r);n=new Tr.LevelMask((r[0].mask.value|r[1].mask.value)>>1)}else if(t===Ee.CellType.Library){let U=(0,Lc.exoticLibrary)(e,r);n=new Tr.LevelMask}else throw new Error("Unsupported exotic type");let s=[],p=[],d=t===Ee.CellType.PrunedBranch?1:n.hashCount,B=n.hashCount-d;for(let U=0,O=0;U<=n.level;U++){if(!n.isSignificant(U))continue;if(O<B){O++;continue}let N;if(O===B){if(!(U===0||t===Ee.CellType.PrunedBranch))throw Error("Invalid");N=e}else{if(!(U!==0&&t!==Ee.CellType.PrunedBranch))throw Error("Invalid: "+U+", "+t);N=new kc.BitString(p[O-B-1],0,256)}let j=0;for(let $ of r){let Fe;t==Ee.CellType.MerkleProof||t==Ee.CellType.MerkleUpdate?Fe=$.depth(U+1):Fe=$.depth(U),j=Math.max(j,Fe)}r.length>0&&j++;let Z=(0,jc.getRepr)(e,N,r,U,n.apply(U).value,t),ae=(0,Kc.sha256_sync)(Z),ce=O-B;s[ce]=j,p[ce]=ae,O++}let x=[],R=[];if(o)for(let U=0;U<4;U++){let{hashIndex:O}=n.apply(U),{hashIndex:N}=n;O!==N?(x.push(o.pruned[O].hash),R.push(o.pruned[O].depth)):(x.push(p[0]),R.push(s[0]))}else for(let U=0;U<4;U++)x.push(p[n.apply(U).hashIndex]),R.push(s[n.apply(U).hashIndex]);return{mask:n,hashes:x,depths:R}}Mn.wonderCalculator=Hc});var Qs=S(An=>{"use strict";l();u();Object.defineProperty(An,"__esModule",{value:!0});An.topologicalSort=void 0;function Vc(t){let e=[t],r=new Map,n=new Set,o=[];for(;e.length>0;){let B=[...e];e=[];for(let x of B){let R=x.hash().toString("hex");if(!r.has(R)){n.add(R),r.set(R,{cell:x,refs:x.refs.map(U=>U.hash().toString("hex"))});for(let U of x.refs)e.push(U)}}}let s=new Set;function p(B){if(!n.has(B))return;if(s.has(B))throw Error("Not a DAG");s.add(B);let x=r.get(B).refs;for(let R=x.length-1;R>=0;R--)p(x[R]);o.push(B),s.delete(B),n.delete(B)}for(;n.size>0;){let B=Array.from(n)[0];p(B)}let d=new Map;for(let B=0;B<o.length;B++)d.set(o[o.length-B-1],B);let _=[];for(let B=o.length-1;B>=0;B--){let x=o[B],R=r.get(x);_.push({cell:R.cell,refs:R.refs.map(U=>d.get(U))})}return _}An.topologicalSort=Vc});var Xs=S(Pn=>{"use strict";l();u();Object.defineProperty(Pn,"__esModule",{value:!0});Pn.bitsForNumber=void 0;function Fc(t,e){let r=BigInt(t);if(e==="int")return r===0n||r===-1n?1:(r>0?r:-r).toString(2).length+1;if(e==="uint"){if(r<0)throw Error(`value is negative. Got ${t}`);return r.toString(2).length}else throw Error(`invalid mode. Got ${e}`)}Pn.bitsForNumber=Fc});var Io=S(Cn=>{"use strict";l();u();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.crc32c=void 0;var Je=2197175160;function zc(t){let e=-1;for(let n=0;n<t.length;n++)e^=t[n],e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1,e=e&1?e>>>1^Je:e>>>1;e=e^4294967295;let r=f.Buffer.alloc(4);return r.writeInt32LE(e),r}Cn.crc32c=zc});var na=S(et=>{"use strict";l();u();Object.defineProperty(et,"__esModule",{value:!0});et.serializeBoc=et.deserializeBoc=et.parseBoc=void 0;var ta=qe(),To=ke(),Wc=Ge(),Gc=Qs(),Zs=Xs(),$c=Pr(),Js=Ao(),Yc=Ar(),Uo=Io();function ea(t){return Qc(t&7)}function Qc(t){let e=0;for(let r=0;r<3;r++)e+=t&1,t=t>>1;return e+1}function Xc(t,e){let r=t.loadUint(8),n=r%8,o=!!(r&8),s=t.loadUint(8),p=Math.ceil(s/2),d=!!(s%2),_=r>>5,B=(r&16)!=0,x=32,R=B?ea(_)*x:0,U=B?ea(_)*2:0;t.skip(R*8),t.skip(U*8);let O=To.BitString.EMPTY;p>0&&(d?O=t.loadPaddedBits(p*8):O=t.loadBits(p*8));let N=[];for(let j=0;j<n;j++)N.push(t.loadUint(e*8));return{bits:O,refs:N,exotic:o}}function Zc(t,e){return 2+Math.ceil(t.bits.length/8)+t.refs.length*e}function ra(t){let e=new ta.BitReader(new To.BitString(t,0,t.length*8)),r=e.loadUint(32);if(r===1761568243){let n=e.loadUint(8),o=e.loadUint(8),s=e.loadUint(n*8),p=e.loadUint(n*8),d=e.loadUint(n*8),_=e.loadUint(o*8),B=e.loadBuffer(s*o),x=e.loadBuffer(_);return{size:n,offBytes:o,cells:s,roots:p,absent:d,totalCellSize:_,index:B,cellData:x,root:[0]}}else if(r===2898503464){let n=e.loadUint(8),o=e.loadUint(8),s=e.loadUint(n*8),p=e.loadUint(n*8),d=e.loadUint(n*8),_=e.loadUint(o*8),B=e.loadBuffer(s*o),x=e.loadBuffer(_),R=e.loadBuffer(4);if(!(0,Uo.crc32c)(t.subarray(0,t.length-4)).equals(R))throw Error("Invalid CRC32C");return{size:n,offBytes:o,cells:s,roots:p,absent:d,totalCellSize:_,index:B,cellData:x,root:[0]}}else if(r===3052313714){let n=e.loadUint(1),o=e.loadUint(1),s=e.loadUint(1),p=e.loadUint(2),d=e.loadUint(3),_=e.loadUint(8),B=e.loadUint(d*8),x=e.loadUint(d*8),R=e.loadUint(d*8),U=e.loadUint(_*8),O=[];for(let Z=0;Z<x;Z++)O.push(e.loadUint(d*8));let N=null;n&&(N=e.loadBuffer(B*_));let j=e.loadBuffer(U);if(o){let Z=e.loadBuffer(4);if(!(0,Uo.crc32c)(t.subarray(0,t.length-4)).equals(Z))throw Error("Invalid CRC32C")}return{size:d,offBytes:_,cells:B,roots:x,absent:R,totalCellSize:U,index:N,cellData:j,root:O}}else throw Error("Invalid magic")}et.parseBoc=ra;function Jc(t){let e=ra(t),r=new ta.BitReader(new To.BitString(e.cellData,0,e.cellData.length*8)),n=[];for(let s=0;s<e.cells;s++){let p=Xc(r,e.size);n.push({...p,result:null})}for(let s=n.length-1;s>=0;s--){if(n[s].result)throw Error("Impossible");let p=[];for(let d of n[s].refs){if(!n[d].result)throw Error("Invalid BOC file");p.push(n[d].result)}n[s].result=new Wc.Cell({bits:n[s].bits,refs:p,exotic:n[s].exotic})}let o=[];for(let s=0;s<e.root.length;s++)o.push(n[e.root[s]].result);return o}et.deserializeBoc=Jc;function eh(t,e,r,n){let o=(0,Js.getRefsDescriptor)(t.refs,t.mask.value,t.type),s=(0,Js.getBitsDescriptor)(t.bits);n.writeUint(o,8),n.writeUint(s,8),n.writeBuffer((0,Yc.bitsToPaddedBuffer)(t.bits));for(let p of e)n.writeUint(p,r*8)}function th(t,e){let r=(0,Gc.topologicalSort)(t),n=r.length,o=e.idx,s=e.crc32,p=!1,d=0,_=Math.max(Math.ceil((0,Zs.bitsForNumber)(n,"uint")/8),1),B=0,x=[];for(let j of r)B+=Zc(j.cell,_),x.push(B);let R=Math.max(Math.ceil((0,Zs.bitsForNumber)(B,"uint")/8),1),U=(4+1+1+3*_+R+1*_+(o?n*R:0)+B+(s?4:0))*8,O=new $c.BitBuilder(U);if(O.writeUint(3052313714,32),O.writeBit(o),O.writeBit(s),O.writeBit(p),O.writeUint(d,2),O.writeUint(_,3),O.writeUint(R,8),O.writeUint(n,_*8),O.writeUint(1,_*8),O.writeUint(0,_*8),O.writeUint(B,R*8),O.writeUint(0,_*8),o)for(let j=0;j<n;j++)O.writeUint(x[j],R*8);for(let j=0;j<n;j++)eh(r[j].cell,r[j].refs,_,O);if(s){let j=(0,Uo.crc32c)(O.buffer());O.writeBuffer(j)}let N=O.buffer();if(N.length!==U/8)throw Error("Internal error");return N}et.serializeBoc=th});var Ge=S(kt=>{"use strict";l();u();var rh=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},sa;Object.defineProperty(kt,"__esModule",{value:!0});kt.Cell=void 0;var nh=rh(ft()),oh=ke(),ct=vt(),ih=un(),sh=Cs(),oa=Ys(),ia=na(),ah=qe(),lh=Y(),ht=class{static fromBoc(e){return(0,ia.deserializeBoc)(e)}static fromBase64(e){let r=ht.fromBoc(f.Buffer.from(e,"base64"));if(r.length!==1)throw new Error("Deserialized more than one cell");return r[0]}constructor(e){this._hashes=[],this._depths=[],this.beginParse=(_=!1)=>{if(this.isExotic&&!_)throw new Error("Exotic cells cannot be parsed");return new ih.Slice(new ah.BitReader(this.bits),this.refs)},this.hash=(_=3)=>this._hashes[Math.min(this._hashes.length-1,_)],this.depth=(_=3)=>this._depths[Math.min(this._depths.length-1,_)],this.level=()=>this.mask.level,this.equals=_=>this.hash().equals(_.hash()),this[sa]=()=>this.toString();let r=oh.BitString.EMPTY;e&&e.bits&&(r=e.bits);let n=[];e&&e.refs&&(n=[...e.refs]);let o,s,p,d=ct.CellType.Ordinary;if(e&&e.exotic){let _=(0,sh.resolveExotic)(r,n),B=(0,oa.wonderCalculator)(_.type,r,n);p=B.mask,s=B.depths,o=B.hashes,d=_.type}else{if(n.length>4)throw new Error("Invalid number of references");if(r.length>1023)throw new Error(`Bits overflow: ${r.length} > 1023`);let _=(0,oa.wonderCalculator)(ct.CellType.Ordinary,r,n);p=_.mask,s=_.depths,o=_.hashes,d=ct.CellType.Ordinary}this.type=d,this.bits=r,this.refs=n,this.mask=p,this._depths=s,this._hashes=o,Object.freeze(this),Object.freeze(this.refs),Object.freeze(this.bits),Object.freeze(this.mask),Object.freeze(this._depths),Object.freeze(this._hashes)}get isExotic(){return this.type!==ct.CellType.Ordinary}toBoc(e){let r=e&&e.idx!==null&&e.idx!==void 0?e.idx:!1,n=e&&e.crc32!==null&&e.crc32!==void 0?e.crc32:!0;return(0,ia.serializeBoc)(this,{idx:r,crc32:n})}toString(e){let r=e||"",n="x";this.isExotic&&(this.type===ct.CellType.MerkleProof?n="p":this.type===ct.CellType.MerkleUpdate?n="u":this.type===ct.CellType.PrunedBranch&&(n="p"));let o=r+(this.isExotic?n:"x")+"{"+this.bits.toString()+"}";for(let s in this.refs){let p=this.refs[s];o+=`
`+p.toString(r+" ")}return o}asSlice(){return this.beginParse()}asBuilder(){return(0,lh.beginCell)().storeSlice(this.asSlice())}};kt.Cell=ht;sa=nh.default;ht.EMPTY=new ht});var Y=S(qt=>{"use strict";l();u();Object.defineProperty(qt,"__esModule",{value:!0});qt.Builder=qt.beginCell=void 0;var uh=Pr(),aa=Ge(),la=vo();function ua(){return new Nt}qt.beginCell=ua;var Nt=class{constructor(){this._bits=new uh.BitBuilder,this._refs=[]}get bits(){return this._bits.length}get refs(){return this._refs.length}get availableBits(){return 1023-this.bits}get availableRefs(){return 4-this.refs}storeBit(e){return this._bits.writeBit(e),this}storeBits(e){return this._bits.writeBits(e),this}storeBuffer(e,r){if(r!=null&&e.length!==r)throw Error(`Buffer length ${e.length} is not equal to ${r}`);return this._bits.writeBuffer(e),this}storeMaybeBuffer(e,r){return e!==null?(this.storeBit(1),this.storeBuffer(e,r)):this.storeBit(0),this}storeUint(e,r){return this._bits.writeUint(e,r),this}storeMaybeUint(e,r){return e!=null?(this.storeBit(1),this.storeUint(e,r)):this.storeBit(0),this}storeInt(e,r){return this._bits.writeInt(e,r),this}storeMaybeInt(e,r){return e!=null?(this.storeBit(1),this.storeInt(e,r)):this.storeBit(0),this}storeVarUint(e,r){return this._bits.writeVarUint(e,r),this}storeMaybeVarUint(e,r){return e!=null?(this.storeBit(1),this.storeVarUint(e,r)):this.storeBit(0),this}storeVarInt(e,r){return this._bits.writeVarInt(e,r),this}storeMaybeVarInt(e,r){return e!=null?(this.storeBit(1),this.storeVarInt(e,r)):this.storeBit(0),this}storeCoins(e){return this._bits.writeCoins(e),this}storeMaybeCoins(e){return e!=null?(this.storeBit(1),this.storeCoins(e)):this.storeBit(0),this}storeAddress(e){return this._bits.writeAddress(e),this}storeRef(e){if(this._refs.length>=4)throw new Error("Too many references");if(e instanceof aa.Cell)this._refs.push(e);else if(e instanceof Nt)this._refs.push(e.endCell());else throw new Error("Invalid argument");return this}storeMaybeRef(e){return e?(this.storeBit(1),this.storeRef(e)):this.storeBit(0),this}storeSlice(e){let r=e.clone();for(r.remainingBits>0&&this.storeBits(r.loadBits(r.remainingBits));r.remainingRefs>0;)this.storeRef(r.loadRef());return this}storeMaybeSlice(e){return e?(this.storeBit(1),this.storeSlice(e)):this.storeBit(0),this}storeBuilder(e){return this.storeSlice(e.endCell().beginParse())}storeMaybeBuilder(e){return e?(this.storeBit(1),this.storeBuilder(e)):this.storeBit(0),this}storeWritable(e){return typeof e=="object"?e.writeTo(this):e(this),this}storeMaybeWritable(e){return e?(this.storeBit(1),this.storeWritable(e)):this.storeBit(0),this}store(e){return this.storeWritable(e),this}storeStringTail(e){return(0,la.writeString)(e,this),this}storeMaybeStringTail(e){return e!=null?(this.storeBit(1),(0,la.writeString)(e,this)):this.storeBit(0),this}storeStringRefTail(e){return this.storeRef(ua().storeStringTail(e)),this}storeMaybeStringRefTail(e){return e!=null?(this.storeBit(1),this.storeStringRefTail(e)):this.storeBit(0),this}storeDict(e,r,n){return e?e.store(this,r,n):this.storeBit(0),this}storeDictDirect(e,r,n){return e.storeDirect(this,r,n),this}endCell(e){return new aa.Cell({bits:this._bits.build(),refs:this._refs,exotic:e?.exotic})}asCell(){return this.endCell()}asSlice(){return this.endCell().beginParse()}};qt.Builder=Nt});var Oo=S(tt=>{"use strict";l();u();Object.defineProperty(tt,"__esModule",{value:!0});tt.SimpleLibraryValue=tt.storeSimpleLibrary=tt.loadSimpleLibrary=void 0;function da(t){return{public:t.loadBit(),root:t.loadRef()}}tt.loadSimpleLibrary=da;function fa(t){return e=>{e.storeBit(t.public),e.storeRef(t.root)}}tt.storeSimpleLibrary=fa;tt.SimpleLibraryValue={serialize(t,e){fa(t)(e)},parse(t){return da(t)}}});var Ro=S(jt=>{"use strict";l();u();Object.defineProperty(jt,"__esModule",{value:!0});jt.storeTickTock=jt.loadTickTock=void 0;function dh(t){return{tick:t.loadBit(),tock:t.loadBit()}}jt.loadTickTock=dh;function fh(t){return e=>{e.storeBit(t.tick),e.storeBit(t.tock)}}jt.storeTickTock=fh});var Dt=S(Kt=>{"use strict";l();u();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.storeStateInit=Kt.loadStateInit=void 0;var ch=We(),hh=Oo(),ca=Ro();function gh(t){let e;t.loadBit()&&(e=t.loadUint(5));let r;t.loadBit()&&(r=(0,ca.loadTickTock)(t));let n=t.loadMaybeRef(),o=t.loadMaybeRef(),s=t.loadDict(ch.Dictionary.Keys.BigUint(256),hh.SimpleLibraryValue);return s.size===0&&(s=void 0),{splitDepth:e,special:r,code:n,data:o,libraries:s}}Kt.loadStateInit=gh;function ph(t){return e=>{t.splitDepth!==null&&t.splitDepth!==void 0?(e.storeBit(!0),e.storeUint(t.splitDepth,5)):e.storeBit(!1),t.special!==null&&t.special!==void 0?(e.storeBit(!0),e.store((0,ca.storeTickTock)(t.special))):e.storeBit(!1),e.storeMaybeRef(t.code),e.storeMaybeRef(t.data),e.storeDict(t.libraries)}}Kt.storeStateInit=ph});var ha=S(En=>{"use strict";l();u();Object.defineProperty(En,"__esModule",{value:!0});En.contractAddress=void 0;var yh=Y(),_h=Dt(),bh=Re();function mh(t,e){let r=(0,yh.beginCell)().store((0,_h.storeStateInit)(e)).endCell().hash();return new bh.Address(t,r)}En.contractAddress=mh});var ya=S(Lt=>{"use strict";l();u();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.parseTuple=Lt.serializeTuple=void 0;var Rr=Y(),Bh=BigInt("-9223372036854775808"),Sh=BigInt("9223372036854775807");function ga(t,e){if(t.type==="null")e.storeUint(0,8);else if(t.type==="int")t.value<=Sh&&t.value>=Bh?(e.storeUint(1,8),e.storeInt(t.value,64)):(e.storeUint(256,15),e.storeInt(t.value,257));else if(t.type==="nan")e.storeInt(767,16);else if(t.type==="cell")e.storeUint(3,8),e.storeRef(t.cell);else if(t.type==="slice")e.storeUint(4,8),e.storeUint(0,10),e.storeUint(t.cell.bits.length,10),e.storeUint(0,3),e.storeUint(t.cell.refs.length,3),e.storeRef(t.cell);else if(t.type==="builder")e.storeUint(5,8),e.storeRef(t.cell);else if(t.type==="tuple"){let r=null,n=null;for(let o=0;o<t.items.length;o++){let s=r;r=n,n=s,o>1&&(r=(0,Rr.beginCell)().storeRef(n).storeRef(r).endCell());let p=(0,Rr.beginCell)();ga(t.items[o],p),n=p.endCell()}e.storeUint(7,8),e.storeUint(t.items.length,16),r&&e.storeRef(r),n&&e.storeRef(n)}else throw Error("Invalid value")}function Or(t){let e=t.loadUint(8);if(e===0)return{type:"null"};if(e===1)return{type:"int",value:t.loadIntBig(64)};if(e===2)return t.loadUint(7)===0?{type:"int",value:t.loadIntBig(257)}:(t.loadBit(),{type:"nan"});if(e===3)return{type:"cell",cell:t.loadRef()};if(e===4){let r=t.loadUint(10),n=t.loadUint(10),o=t.loadUint(3),s=t.loadUint(3),p=t.loadRef().beginParse();p.skip(r);let d=p.loadBits(n-r),_=(0,Rr.beginCell)().storeBits(d);if(o<s){for(let B=0;B<o;B++)p.loadRef();for(let B=0;B<s-o;B++)_.storeRef(p.loadRef())}return{type:"slice",cell:_.endCell()}}else{if(e===5)return{type:"builder",cell:t.loadRef()};if(e===7){let r=t.loadUint(16),n=[];if(r>1){let o=t.loadRef().beginParse(),s=t.loadRef().beginParse();n.unshift(Or(s));for(let p=0;p<r-2;p++){let d=o;o=d.loadRef().beginParse(),s=d.loadRef().beginParse(),n.unshift(Or(s))}n.unshift(Or(o))}else r===1&&n.push(Or(t.loadRef().beginParse()));return{type:"tuple",items:n}}else throw Error("Unsupported stack item")}}function pa(t,e){if(t.length>0){let r=(0,Rr.beginCell)();pa(t.slice(0,t.length-1),r),e.storeRef(r.endCell()),ga(t[t.length-1],e)}}function wh(t){let e=(0,Rr.beginCell)();e.storeUint(t.length,24);let r=[...t];return pa(r,e),e.endCell()}Lt.serializeTuple=wh;function vh(t){let e=[],r=t.beginParse(),n=r.loadUint(24);for(let o=0;o<n;o++){let s=r.loadRef();e.unshift(Or(r)),r=s.beginParse()}return e}Lt.parseTuple=vh});var _a=S(xn=>{"use strict";l();u();Object.defineProperty(xn,"__esModule",{value:!0});xn.TupleReader=void 0;var rt=class{constructor(e){this.items=[...e]}get remaining(){return this.items.length}peek(){if(this.items.length===0)throw Error("EOF");return this.items[0]}pop(){if(this.items.length===0)throw Error("EOF");let e=this.items[0];return this.items.splice(0,1),e}skip(e=1){for(let r=0;r<e;r++)this.pop();return this}readBigNumber(){let e=this.pop();if(e.type!=="int")throw Error("Not a number");return e.value}readBigNumberOpt(){let e=this.pop();if(e.type==="null")return null;if(e.type!=="int")throw Error("Not a number");return e.value}readNumber(){return Number(this.readBigNumber())}readNumberOpt(){let e=this.readBigNumberOpt();return e!==null?Number(e):null}readBoolean(){return this.readNumber()!==0}readBooleanOpt(){let e=this.readNumberOpt();return e!==null?e!==0:null}readAddress(){let e=this.readCell().beginParse().loadAddress();if(e!==null)return e;throw Error("Not an address")}readAddressOpt(){let e=this.readCellOpt();return e!==null?e.beginParse().loadMaybeAddress():null}readCell(){let e=this.pop();if(e.type!=="cell"&&e.type!=="slice"&&e.type!=="builder")throw Error("Not a cell: "+e.type);return e.cell}readCellOpt(){let e=this.pop();if(e.type==="null")return null;if(e.type!=="cell"&&e.type!=="slice"&&e.type!=="builder")throw Error("Not a cell");return e.cell}readTuple(){let e=this.pop();if(e.type!=="tuple")throw Error("Not a tuple");return new rt(e.items)}readTupleOpt(){let e=this.pop();if(e.type==="null")return null;if(e.type!=="tuple")throw Error("Not a tuple");return new rt(e.items)}static readLispList(e){let r=[],n=e;for(;n!==null;){var o=n.pop();if(n.items.length===0||n.items[0].type!=="tuple"&&n.items[0].type!=="null")throw Error("Lisp list consists only from (any, tuple) elements and ends with null");n=n.readTupleOpt(),r.push(o)}return r}readLispListDirect(){return this.items.length===1&&this.items[0].type==="null"?[]:rt.readLispList(this)}readLispList(){return rt.readLispList(this.readTupleOpt())}readBuffer(){let e=this.readCell().beginParse();if(e.remainingRefs!==0||e.remainingBits%8!==0)throw Error("Not a buffer");return e.loadBuffer(e.remainingBits/8)}readBufferOpt(){if(this.peek().type==="null")return null;let r=this.readCell().beginParse();if(r.remainingRefs!==0||r.remainingBits%8!==0)throw Error("Not a buffer");return r.loadBuffer(r.remainingBits/8)}readString(){return this.readCell().beginParse().loadStringTail()}readStringOpt(){return this.peek().type==="null"?null:this.readCell().beginParse().loadStringTail()}};xn.TupleReader=rt});var ba=S(In=>{"use strict";l();u();Object.defineProperty(In,"__esModule",{value:!0});In.TupleBuilder=void 0;var ko=Y(),No=Ge(),qo=un(),jo=class{constructor(){this._tuple=[]}writeNumber(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"int",value:BigInt(e)})}writeBoolean(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"int",value:e?-1n:0n})}writeBuffer(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"slice",cell:(0,ko.beginCell)().storeBuffer(e).endCell()})}writeString(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"slice",cell:(0,ko.beginCell)().storeStringTail(e).endCell()})}writeCell(e){e==null?this._tuple.push({type:"null"}):e instanceof No.Cell?this._tuple.push({type:"cell",cell:e}):e instanceof qo.Slice&&this._tuple.push({type:"cell",cell:e.asCell()})}writeSlice(e){e==null?this._tuple.push({type:"null"}):e instanceof No.Cell?this._tuple.push({type:"slice",cell:e}):e instanceof qo.Slice&&this._tuple.push({type:"slice",cell:e.asCell()})}writeBuilder(e){e==null?this._tuple.push({type:"null"}):e instanceof No.Cell?this._tuple.push({type:"builder",cell:e}):e instanceof qo.Slice&&this._tuple.push({type:"builder",cell:e.asCell()})}writeTuple(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"tuple",items:e})}writeAddress(e){e==null?this._tuple.push({type:"null"}):this._tuple.push({type:"slice",cell:(0,ko.beginCell)().storeAddress(e).endCell()})}build(){return[...this._tuple]}};In.TupleBuilder=jo});var Ko=S(Ht=>{"use strict";l();u();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.fromNano=Ht.toNano=void 0;function Mh(t){if(typeof t=="bigint")return t*1000000000n;{if(typeof t=="number"){if(!Number.isFinite(t))throw Error("Invalid number");if(Math.log10(t)<=6)t=t.toLocaleString("en",{minimumFractionDigits:9,useGrouping:!1});else if(t-Math.trunc(t)===0)t=t.toLocaleString("en",{maximumFractionDigits:0,useGrouping:!1});else throw Error("Not enough precision for a number value. Use string value instead")}let e=!1;for(;t.startsWith("-");)e=!e,t=t.slice(1);if(t===".")throw Error("Invalid number");let r=t.split(".");if(r.length>2)throw Error("Invalid number");let n=r[0],o=r[1];if(n||(n="0"),o||(o="0"),o.length>9)throw Error("Invalid number");for(;o.length<9;)o+="0";let s=BigInt(n)*1000000000n+BigInt(o);return e&&(s=-s),s}}Ht.toNano=Mh;function Ah(t){let e=BigInt(t),r=!1;e<0&&(r=!0,e=-e);let o=(e%1000000000n).toString();for(;o.length<9;)o="0"+o;o=o.match(/^([0-9]*[1-9]|0)(0*)/)[1];let d=`${(e/1000000000n).toString()}${o==="0"?"":`.${o}`}`;return r&&(d="-"+d),d}Ht.fromNano=Ah});var Sa=S(nt=>{"use strict";l();u();Object.defineProperty(nt,"__esModule",{value:!0});nt.comment=nt.external=nt.internal=void 0;var Un=Re(),ma=Ge(),Ba=Y(),Ph=Ko();function Ch(t){let e=!0;t.bounce!==null&&t.bounce!==void 0&&(e=t.bounce);let r;if(typeof t.to=="string")r=Un.Address.parse(t.to);else if(Un.Address.isAddress(t.to))r=t.to;else throw new Error(`Invalid address ${t.to}`);let n;typeof t.value=="string"?n=(0,Ph.toNano)(t.value):n=t.value;let o=ma.Cell.EMPTY;return typeof t.body=="string"?o=(0,Ba.beginCell)().storeUint(0,32).storeStringTail(t.body).endCell():t.body&&(o=t.body),{info:{type:"internal",dest:r,value:{coins:n},bounce:e,ihrDisabled:!0,bounced:!1,ihrFee:0n,forwardFee:0n,createdAt:0,createdLt:0n},init:t.init??void 0,body:o}}nt.internal=Ch;function Eh(t){let e;if(typeof t.to=="string")e=Un.Address.parse(t.to);else if(Un.Address.isAddress(t.to))e=t.to;else throw new Error(`Invalid address ${t.to}`);return{info:{type:"external-in",dest:e,importFee:0n},init:t.init??void 0,body:t.body||ma.Cell.EMPTY}}nt.external=Eh;function xh(t){return(0,Ba.beginCell)().storeUint(0,32).storeStringTail(t).endCell()}nt.comment=xh});var Do=S(Vt=>{"use strict";l();u();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.storeAccountState=Vt.loadAccountState=void 0;var wa=Dt();function Ih(t){return t.loadBit()?{type:"active",state:(0,wa.loadStateInit)(t)}:t.loadBit()?{type:"frozen",stateHash:t.loadUintBig(256)}:{type:"uninit"}}Vt.loadAccountState=Ih;function Uh(t){return e=>{t.type==="active"?(e.storeBit(!0),e.store((0,wa.storeStateInit)(t.state))):t.type==="frozen"?(e.storeBit(!1),e.storeBit(!0),e.storeUint(t.stateHash,256)):t.type==="uninit"&&(e.storeBit(!1),e.storeBit(!1))}}Vt.storeAccountState=Uh});var Ke=S(Ft=>{"use strict";l();u();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.storeCurrencyCollection=Ft.loadCurrencyCollection=void 0;var va=We();function Th(t){let e=t.loadCoins(),r=t.loadDict(va.Dictionary.Keys.Uint(32),va.Dictionary.Values.BigVarUint(5));return r.size===0?{coins:e}:{other:r,coins:e}}Ft.loadCurrencyCollection=Th;function Oh(t){return e=>{e.storeCoins(t.coins),t.other?e.storeDict(t.other):e.storeBit(0)}}Ft.storeCurrencyCollection=Oh});var Lo=S(zt=>{"use strict";l();u();Object.defineProperty(zt,"__esModule",{value:!0});zt.storeAccountStorage=zt.loadAccountStorage=void 0;var Ma=Do(),Aa=Ke();function Rh(t){return{lastTransLt:t.loadUintBig(64),balance:(0,Aa.loadCurrencyCollection)(t),state:(0,Ma.loadAccountState)(t)}}zt.loadAccountStorage=Rh;function kh(t){return e=>{e.storeUint(t.lastTransLt,64),e.store((0,Aa.storeCurrencyCollection)(t.balance)),e.store((0,Ma.storeAccountState)(t.state))}}zt.storeAccountStorage=kh});var Ho=S(Wt=>{"use strict";l();u();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.storeStorageUsed=Wt.loadStorageUsed=void 0;function Nh(t){return{cells:t.loadVarUintBig(3),bits:t.loadVarUintBig(3),publicCells:t.loadVarUintBig(3)}}Wt.loadStorageUsed=Nh;function qh(t){return e=>{e.storeVarUint(t.cells,3),e.storeVarUint(t.bits,3),e.storeVarUint(t.publicCells,3)}}Wt.storeStorageUsed=qh});var Vo=S(Gt=>{"use strict";l();u();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.storeStorageInfo=Gt.loadStorageInfo=void 0;var Pa=Ho();function jh(t){return{used:(0,Pa.loadStorageUsed)(t),lastPaid:t.loadUint(32),duePayment:t.loadMaybeCoins()}}Gt.loadStorageInfo=jh;function Kh(t){return e=>{e.store((0,Pa.storeStorageUsed)(t.used)),e.storeUint(t.lastPaid,32),e.storeMaybeCoins(t.duePayment)}}Gt.storeStorageInfo=Kh});var Fo=S($t=>{"use strict";l();u();Object.defineProperty($t,"__esModule",{value:!0});$t.storeAccount=$t.loadAccount=void 0;var Ca=Lo(),Ea=Vo();function Dh(t){return{addr:t.loadAddress(),storageStats:(0,Ea.loadStorageInfo)(t),storage:(0,Ca.loadAccountStorage)(t)}}$t.loadAccount=Dh;function Lh(t){return e=>{e.storeAddress(t.addr),e.store((0,Ea.storeStorageInfo)(t.storageStats)),e.store((0,Ca.storeAccountStorage)(t.storage))}}$t.storeAccount=Lh});var zo=S(Yt=>{"use strict";l();u();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.storeAccountStatus=Yt.loadAccountStatus=void 0;function Hh(t){let e=t.loadUint(2);if(e===0)return"uninitialized";if(e===1)return"frozen";if(e===2)return"active";if(e===3)return"non-existing";throw Error("Invalid data")}Yt.loadAccountStatus=Hh;function Vh(t){return e=>{if(t==="uninitialized")e.storeUint(0,2);else if(t==="frozen")e.storeUint(1,2);else if(t==="active")e.storeUint(2,2);else if(t==="non-existing")e.storeUint(3,2);else throw Error("Invalid data");return e}}Yt.storeAccountStatus=Vh});var Tn=S(Qt=>{"use strict";l();u();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.storeAccountStatusChange=Qt.loadAccountStatusChange=void 0;function Fh(t){return t.loadBit()?t.loadBit()?"deleted":"frozen":"unchanged"}Qt.loadAccountStatusChange=Fh;function zh(t){return e=>{if(t=="unchanged")e.storeBit(0);else if(t==="frozen")e.storeBit(1),e.storeBit(0);else if(t==="deleted")e.storeBit(1),e.storeBit(1);else throw Error("Invalid account status change")}}Qt.storeAccountStatusChange=zh});var Wo=S(Xt=>{"use strict";l();u();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.storeCommonMessageInfoRelaxed=Xt.loadCommonMessageInfoRelaxed=void 0;var xa=Ke();function Wh(t){if(!t.loadBit()){let s=t.loadBit(),p=t.loadBit(),d=t.loadBit(),_=t.loadMaybeAddress(),B=t.loadAddress(),x=(0,xa.loadCurrencyCollection)(t),R=t.loadCoins(),U=t.loadCoins(),O=t.loadUintBig(64),N=t.loadUint(32);return{type:"internal",ihrDisabled:s,bounce:p,bounced:d,src:_,dest:B,value:x,ihrFee:R,forwardFee:U,createdLt:O,createdAt:N}}if(!t.loadBit())throw Error("External In message is not possible for CommonMessageInfoRelaxed");let e=t.loadMaybeAddress(),r=t.loadMaybeExternalAddress(),n=t.loadUintBig(64),o=t.loadUint(32);return{type:"external-out",src:e,dest:r,createdLt:n,createdAt:o}}Xt.loadCommonMessageInfoRelaxed=Wh;function Gh(t){return e=>{if(t.type==="internal")e.storeBit(0),e.storeBit(t.ihrDisabled),e.storeBit(t.bounce),e.storeBit(t.bounced),e.storeAddress(t.src),e.storeAddress(t.dest),e.store((0,xa.storeCurrencyCollection)(t.value)),e.storeCoins(t.ihrFee),e.storeCoins(t.forwardFee),e.storeUint(t.createdLt,64),e.storeUint(t.createdAt,32);else if(t.type==="external-out")e.storeBit(1),e.storeBit(1),e.storeAddress(t.src),e.storeAddress(t.dest),e.storeUint(t.createdLt,64),e.storeUint(t.createdAt,32);else throw new Error("Unknown CommonMessageInfo type")}}Xt.storeCommonMessageInfoRelaxed=Gh});var $o=S(Zt=>{"use strict";l();u();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.storeMessageRelaxed=Zt.loadMessageRelaxed=void 0;var $h=Y(),Ia=Wo(),Go=Dt();function Yh(t){let e=(0,Ia.loadCommonMessageInfoRelaxed)(t),r=null;t.loadBit()&&(t.loadBit()?r=(0,Go.loadStateInit)(t.loadRef().beginParse()):r=(0,Go.loadStateInit)(t));let n=t.loadBit()?t.loadRef():t.asCell();return{info:e,init:r,body:n}}Zt.loadMessageRelaxed=Yh;function Qh(t,e){return r=>{if(r.store((0,Ia.storeCommonMessageInfoRelaxed)(t.info)),t.init){r.storeBit(!0);let o=(0,$h.beginCell)().store((0,Go.storeStateInit)(t.init)),s=!1;e&&e.forceRef?s=!0:r.availableBits-2>=o.bits?s=!1:s=!0,s?(r.storeBit(!0),r.storeRef(o)):(r.storeBit(!1),r.storeBuilder(o))}else r.storeBit(!1);let n=!1;e&&e.forceRef?n=!0:r.availableBits-1>=t.body.bits.length&&r.refs+t.body.refs.length<=4&&!t.body.isExotic?n=!1:n=!0,n?(r.storeBit(!0),r.storeRef(t.body)):(r.storeBit(!1),r.storeBuilder(t.body.asBuilder()))}}Zt.storeMessageRelaxed=Qh});var Na=S(xe=>{"use strict";l();u();Object.defineProperty(xe,"__esModule",{value:!0});xe.loadOutList=xe.storeOutList=xe.loadOutAction=xe.storeOutAction=void 0;var Ua=$o(),Yo=Y();function Ta(t){switch(t.type){case"sendMsg":return Xh(t);case"setCode":return Zh(t);default:throw new Error(`Unknown action type ${t.type}`)}}xe.storeOutAction=Ta;var Oa=247711853;function Xh(t){return e=>{e.storeUint(Oa,32).storeUint(t.mode,8).storeRef((0,Yo.beginCell)().store((0,Ua.storeMessageRelaxed)(t.outMsg)).endCell())}}var Ra=2907562126;function Zh(t){return e=>{e.storeUint(Ra,32).storeRef(t.newCode)}}function ka(t){let e=t.loadUint(32);if(e===Oa){let r=t.loadUint(8),n=(0,Ua.loadMessageRelaxed)(t.loadRef().beginParse());return{type:"sendMsg",mode:r,outMsg:n}}if(e===Ra){let r=t.loadRef();return{type:"setCode",newCode:r}}throw new Error(`Unknown out action tag 0x${e.toString(16)}`)}xe.loadOutAction=ka;function Jh(t){let e=t.reduce((r,n)=>(0,Yo.beginCell)().storeRef(r).store(Ta(n)).endCell(),(0,Yo.beginCell)().endCell());return r=>{r.storeSlice(e.beginParse())}}xe.storeOutList=Jh;function e0(t){let e=[];for(;t.remainingRefs;){let r=t.loadRef();e.push(ka(t)),t=r.beginParse()}return e.reverse()}xe.loadOutList=e0});var Qo=S(Jt=>{"use strict";l();u();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.storeCommonMessageInfo=Jt.loadCommonMessageInfo=void 0;var qa=Ke();function t0(t){if(!t.loadBit()){let s=t.loadBit(),p=t.loadBit(),d=t.loadBit(),_=t.loadAddress(),B=t.loadAddress(),x=(0,qa.loadCurrencyCollection)(t),R=t.loadCoins(),U=t.loadCoins(),O=t.loadUintBig(64),N=t.loadUint(32);return{type:"internal",ihrDisabled:s,bounce:p,bounced:d,src:_,dest:B,value:x,ihrFee:R,forwardFee:U,createdLt:O,createdAt:N}}if(!t.loadBit()){let s=t.loadMaybeExternalAddress(),p=t.loadAddress(),d=t.loadCoins();return{type:"external-in",src:s,dest:p,importFee:d}}let e=t.loadAddress(),r=t.loadMaybeExternalAddress(),n=t.loadUintBig(64),o=t.loadUint(32);return{type:"external-out",src:e,dest:r,createdLt:n,createdAt:o}}Jt.loadCommonMessageInfo=t0;function r0(t){return e=>{if(t.type==="internal")e.storeBit(0),e.storeBit(t.ihrDisabled),e.storeBit(t.bounce),e.storeBit(t.bounced),e.storeAddress(t.src),e.storeAddress(t.dest),e.store((0,qa.storeCurrencyCollection)(t.value)),e.storeCoins(t.ihrFee),e.storeCoins(t.forwardFee),e.storeUint(t.createdLt,64),e.storeUint(t.createdAt,32);else if(t.type==="external-in")e.storeBit(1),e.storeBit(0),e.storeAddress(t.src),e.storeAddress(t.dest),e.storeCoins(t.importFee);else if(t.type==="external-out")e.storeBit(1),e.storeBit(1),e.storeAddress(t.src),e.storeAddress(t.dest),e.storeUint(t.createdLt,64),e.storeUint(t.createdAt,32);else throw new Error("Unknown CommonMessageInfo type")}}Jt.storeCommonMessageInfo=r0});var Xo=S(er=>{"use strict";l();u();Object.defineProperty(er,"__esModule",{value:!0});er.storeComputeSkipReason=er.loadComputeSkipReason=void 0;function n0(t){let e=t.loadUint(2);if(e===0)return"no-state";if(e===1)return"bad-state";if(e===2)return"no-gas";throw new Error(`Unknown ComputeSkipReason: ${e}`)}er.loadComputeSkipReason=n0;function o0(t){return e=>{if(t==="no-state")e.storeUint(0,2);else if(t==="bad-state")e.storeUint(1,2);else if(t==="no-gas")e.storeUint(2,2);else throw new Error(`Unknown ComputeSkipReason: ${t}`)}}er.storeComputeSkipReason=o0});var Zo=S(tr=>{"use strict";l();u();Object.defineProperty(tr,"__esModule",{value:!0});tr.storeDepthBalanceInfo=tr.loadDepthBalanceInfo=void 0;var ja=Ke();function i0(t){return{splitDepth:t.loadUint(5),balance:(0,ja.loadCurrencyCollection)(t)}}tr.loadDepthBalanceInfo=i0;function s0(t){return e=>{e.storeUint(t.splitDepth,5),e.store((0,ja.storeCurrencyCollection)(t.balance))}}tr.storeDepthBalanceInfo=s0});var Jo=S(rr=>{"use strict";l();u();Object.defineProperty(rr,"__esModule",{value:!0});rr.storeHashUpdate=rr.loadHashUpdate=void 0;function a0(t){if(t.loadUint(8)!==114)throw Error("Invalid data");let e=t.loadBuffer(32),r=t.loadBuffer(32);return{oldHash:e,newHash:r}}rr.loadHashUpdate=a0;function l0(t){return e=>{e.storeUint(114,8),e.storeBuffer(t.oldHash),e.storeBuffer(t.newHash)}}rr.storeHashUpdate=l0});var ti=S(On=>{"use strict";l();u();Object.defineProperty(On,"__esModule",{value:!0});On.loadMasterchainStateExtra=void 0;var ei=We(),u0=Ke();function d0(t){if(t.loadUint(16)!==52262)throw Error("Invalid data");t.loadBit()&&t.loadRef();let e=t.loadUintBig(256),r=ei.Dictionary.load(ei.Dictionary.Keys.Int(32),ei.Dictionary.Values.Cell(),t),n=(0,u0.loadCurrencyCollection)(t);return{config:r,configAddress:e,globalBalance:n}}On.loadMasterchainStateExtra=d0});var ni=S(ot=>{"use strict";l();u();Object.defineProperty(ot,"__esModule",{value:!0});ot.MessageValue=ot.storeMessage=ot.loadMessage=void 0;var Ka=Y(),Da=Qo(),ri=Dt();function La(t){let e=(0,Da.loadCommonMessageInfo)(t),r=null;t.loadBit()&&(t.loadBit()?r=(0,ri.loadStateInit)(t.loadRef().beginParse()):r=(0,ri.loadStateInit)(t));let n=t.loadBit()?t.loadRef():t.asCell();return{info:e,init:r,body:n}}ot.loadMessage=La;function Ha(t,e){return r=>{if(r.store((0,Da.storeCommonMessageInfo)(t.info)),t.init){r.storeBit(!0);let o=(0,Ka.beginCell)().store((0,ri.storeStateInit)(t.init)),s=!1;e&&e.forceRef?s=!0:s=r.availableBits-2<o.bits+t.body.bits.length,s?(r.storeBit(!0),r.storeRef(o)):(r.storeBit(!1),r.storeBuilder(o))}else r.storeBit(!1);let n=!1;e&&e.forceRef?n=!0:n=r.availableBits-1<t.body.bits.length||r.refs+t.body.refs.length>4,n?(r.storeBit(!0),r.storeRef(t.body)):(r.storeBit(!1),r.storeBuilder(t.body.asBuilder()))}}ot.storeMessage=Ha;ot.MessageValue={serialize(t,e){e.storeRef((0,Ka.beginCell)().store(Ha(t)))},parse(t){return La(t.loadRef().beginParse())}}});var Va=S(kr=>{"use strict";l();u();Object.defineProperty(kr,"__esModule",{value:!0});kr.SendMode=void 0;var f0;(function(t){t[t.CARRY_ALL_REMAINING_BALANCE=128]="CARRY_ALL_REMAINING_BALANCE",t[t.CARRY_ALL_REMAINING_INCOMING_VALUE=64]="CARRY_ALL_REMAINING_INCOMING_VALUE",t[t.DESTROY_ACCOUNT_IF_ZERO=32]="DESTROY_ACCOUNT_IF_ZERO",t[t.PAY_GAS_SEPARATELY=1]="PAY_GAS_SEPARATELY",t[t.IGNORE_ERRORS=2]="IGNORE_ERRORS",t[t.NONE=0]="NONE"})(f0=kr.SendMode||(kr.SendMode={}))});var oi=S(nr=>{"use strict";l();u();Object.defineProperty(nr,"__esModule",{value:!0});nr.storeShardAccount=nr.loadShardAccount=void 0;var Fa=Y(),za=Fo();function c0(t){let e=t.loadRef(),r;if(!e.isExotic){let n=e.beginParse();n.loadBit()&&(r=(0,za.loadAccount)(n))}return{account:r,lastTransactionHash:t.loadUintBig(256),lastTransactionLt:t.loadUintBig(64)}}nr.loadShardAccount=c0;function h0(t){return e=>{t.account?e.storeRef((0,Fa.beginCell)().storeBit(!0).store((0,za.storeAccount)(t.account))):e.storeRef((0,Fa.beginCell)().storeBit(!1)),e.storeUint(t.lastTransactionHash,256),e.storeUint(t.lastTransactionLt,64)}}nr.storeShardAccount=h0});var ii=S(De=>{"use strict";l();u();Object.defineProperty(De,"__esModule",{value:!0});De.storeShardAccounts=De.loadShardAccounts=De.ShardAccountRefValue=void 0;var Wa=We(),Ga=Zo(),$a=oi();De.ShardAccountRefValue={parse:t=>{let e=(0,Ga.loadDepthBalanceInfo)(t),r=(0,$a.loadShardAccount)(t);return{depthBalanceInfo:e,shardAccount:r}},serialize(t,e){e.store((0,Ga.storeDepthBalanceInfo)(t.depthBalanceInfo)),e.store((0,$a.storeShardAccount)(t.shardAccount))}};function g0(t){return Wa.Dictionary.load(Wa.Dictionary.Keys.BigUint(256),De.ShardAccountRefValue,t)}De.loadShardAccounts=g0;function p0(t){return e=>{e.storeDict(t)}}De.storeShardAccounts=p0});var si=S(or=>{"use strict";l();u();Object.defineProperty(or,"__esModule",{value:!0});or.storeShardIdent=or.loadShardIdent=void 0;function y0(t){if(t.loadUint(2)!==0)throw Error("Invalid data");return{shardPrefixBits:t.loadUint(6),workchainId:t.loadInt(32),shardPrefix:t.loadUintBig(64)}}or.loadShardIdent=y0;function _0(t){return e=>{e.storeUint(0,2),e.storeUint(t.shardPrefixBits,6),e.storeInt(t.workchainId,32),e.storeUint(t.shardPrefix,64)}}or.storeShardIdent=_0});var Ya=S(Rn=>{"use strict";l();u();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.loadShardStateUnsplit=void 0;var b0=ti(),m0=ii(),B0=si();function S0(t){if(t.loadUint(32)!==2418257890)throw Error("Invalid data");let e=t.loadInt(32),r=(0,B0.loadShardIdent)(t),n=t.loadUint(32),o=t.loadUint(32),s=t.loadUint(32),p=t.loadUintBig(64),d=t.loadUint(32);t.loadRef();let _=t.loadBit(),B=t.loadRef(),x;B.isExotic||(x=(0,m0.loadShardAccounts)(B.beginParse())),t.loadRef();let R=t.loadBit(),U=null;if(R){let O=t.loadRef();O.isExotic||(U=(0,b0.loadMasterchainStateExtra)(O.beginParse()))}return{globalId:e,shardId:r,seqno:n,vertSeqNo:o,genUtime:s,genLt:p,minRefMcSeqno:d,beforeSplit:_,accounts:x,extras:U}}Rn.loadShardStateUnsplit=S0});var ai=S(ir=>{"use strict";l();u();Object.defineProperty(ir,"__esModule",{value:!0});ir.storeSplitMergeInfo=ir.loadSplitMergeInfo=void 0;function w0(t){let e=t.loadUint(6),r=t.loadUint(6),n=t.loadUintBig(256),o=t.loadUintBig(256);return{currentShardPrefixLength:e,accountSplitDepth:r,thisAddress:n,siblingAddress:o}}ir.loadSplitMergeInfo=w0;function v0(t){return e=>{e.storeUint(t.currentShardPrefixLength,6),e.storeUint(t.accountSplitDepth,6),e.storeUint(t.thisAddress,256),e.storeUint(t.siblingAddress,256)}}ir.storeSplitMergeInfo=v0});var kn=S(sr=>{"use strict";l();u();Object.defineProperty(sr,"__esModule",{value:!0});sr.storeStorageUsedShort=sr.loadStorageUsedShort=void 0;function M0(t){let e=t.loadVarUintBig(3),r=t.loadVarUintBig(3);return{cells:e,bits:r}}sr.loadStorageUsedShort=M0;function A0(t){return e=>{e.storeVarUint(t.cells,3),e.storeVarUint(t.bits,3)}}sr.storeStorageUsedShort=A0});var li=S(ar=>{"use strict";l();u();Object.defineProperty(ar,"__esModule",{value:!0});ar.storeTransactionActionPhase=ar.loadTransactionActionPhase=void 0;var Qa=Tn(),Xa=kn();function P0(t){let e=t.loadBit(),r=t.loadBit(),n=t.loadBit(),o=(0,Qa.loadAccountStatusChange)(t),s=t.loadBit()?t.loadCoins():void 0,p=t.loadBit()?t.loadCoins():void 0,d=t.loadInt(32),_=t.loadBit()?t.loadInt(32):void 0,B=t.loadUint(16),x=t.loadUint(16),R=t.loadUint(16),U=t.loadUint(16),O=t.loadUintBig(256),N=(0,Xa.loadStorageUsedShort)(t);return{success:e,valid:r,noFunds:n,statusChange:o,totalFwdFees:s,totalActionFees:p,resultCode:d,resultArg:_,totalActions:B,specActions:x,skippedActions:R,messagesCreated:U,actionListHash:O,totalMessageSize:N}}ar.loadTransactionActionPhase=P0;function C0(t){return e=>{e.storeBit(t.success),e.storeBit(t.valid),e.storeBit(t.noFunds),e.store((0,Qa.storeAccountStatusChange)(t.statusChange)),e.storeMaybeCoins(t.totalFwdFees),e.storeMaybeCoins(t.totalActionFees),e.storeInt(t.resultCode,32),e.storeMaybeInt(t.resultArg,32),e.storeUint(t.totalActions,16),e.storeUint(t.specActions,16),e.storeUint(t.skippedActions,16),e.storeUint(t.messagesCreated,16),e.storeUint(t.actionListHash,256),e.store((0,Xa.storeStorageUsedShort)(t.totalMessageSize))}}ar.storeTransactionActionPhase=C0});var ui=S(lr=>{"use strict";l();u();Object.defineProperty(lr,"__esModule",{value:!0});lr.storeTransactionBouncePhase=lr.loadTransactionBouncePhase=void 0;var Nn=kn();function E0(t){if(t.loadBit()){let e=(0,Nn.loadStorageUsedShort)(t),r=t.loadCoins(),n=t.loadCoins();return{type:"ok",messageSize:e,messageFees:r,forwardFees:n}}if(t.loadBit()){let e=(0,Nn.loadStorageUsedShort)(t),r=t.loadCoins();return{type:"no-funds",messageSize:e,requiredForwardFees:r}}return{type:"negative-funds"}}lr.loadTransactionBouncePhase=E0;function x0(t){return e=>{if(t.type==="ok")e.storeBit(!0),e.store((0,Nn.storeStorageUsedShort)(t.messageSize)),e.storeCoins(t.messageFees),e.storeCoins(t.forwardFees);else if(t.type==="negative-funds")e.storeBit(!1),e.storeBit(!1);else if(t.type==="no-funds")e.storeBit(!1),e.storeBit(!0),e.store((0,Nn.storeStorageUsedShort)(t.messageSize)),e.storeCoins(t.requiredForwardFees);else throw new Error("Invalid TransactionBouncePhase type")}}lr.storeTransactionBouncePhase=x0});var di=S(ur=>{"use strict";l();u();Object.defineProperty(ur,"__esModule",{value:!0});ur.storeTransactionComputePhase=ur.loadTransactionComputePhase=void 0;var I0=Y(),Za=Xo();function U0(t){if(!t.loadBit()){let j=(0,Za.loadComputeSkipReason)(t);return{type:"skipped",reason:j}}let e=t.loadBit(),r=t.loadBit(),n=t.loadBit(),o=t.loadCoins(),s=t.loadRef().beginParse(),p=s.loadVarUintBig(3),d=s.loadVarUintBig(3),_=s.loadBit()?s.loadVarUintBig(2):void 0,B=s.loadUint(8),x=s.loadInt(32),R=s.loadBit()?s.loadInt(32):void 0,U=s.loadUint(32),O=s.loadUintBig(256),N=s.loadUintBig(256);return{type:"vm",success:e,messageStateUsed:r,accountActivated:n,gasFees:o,gasUsed:p,gasLimit:d,gasCredit:_,mode:B,exitCode:x,exitArg:R,vmSteps:U,vmInitStateHash:O,vmFinalStateHash:N}}ur.loadTransactionComputePhase=U0;function T0(t){return e=>{if(t.type==="skipped"){e.storeBit(0),e.store((0,Za.storeComputeSkipReason)(t.reason));return}e.storeBit(1),e.storeBit(t.success),e.storeBit(t.messageStateUsed),e.storeBit(t.accountActivated),e.storeCoins(t.gasFees),e.storeRef((0,I0.beginCell)().storeVarUint(t.gasUsed,3).storeVarUint(t.gasLimit,3).store(r=>t.gasCredit!==void 0&&t.gasCredit!==null?r.storeBit(1).storeVarUint(t.gasCredit,2):r.storeBit(0)).storeUint(t.mode,8).storeInt(t.exitCode,32).store(r=>t.exitArg!==void 0&&t.exitArg!==null?r.storeBit(1).storeInt(t.exitArg,32):r.storeBit(0)).storeUint(t.vmSteps,32).storeUint(t.vmInitStateHash,256).storeUint(t.vmFinalStateHash,256).endCell())}}ur.storeTransactionComputePhase=T0});var fi=S(dr=>{"use strict";l();u();Object.defineProperty(dr,"__esModule",{value:!0});dr.storeTransactionCreditPhase=dr.loadTransactionCreditPhase=void 0;var Ja=Ke();function O0(t){let e=t.loadBit()?t.loadCoins():void 0,r=(0,Ja.loadCurrencyCollection)(t);return{dueFeesColelcted:e,credit:r}}dr.loadTransactionCreditPhase=O0;function R0(t){return e=>{t.dueFeesColelcted===null||t.dueFeesColelcted===void 0?e.storeBit(!1):(e.storeBit(!0),e.storeCoins(t.dueFeesColelcted)),e.store((0,Ja.storeCurrencyCollection)(t.credit))}}dr.storeTransactionCreditPhase=R0});var ci=S(fr=>{"use strict";l();u();Object.defineProperty(fr,"__esModule",{value:!0});fr.storeTransactionsStoragePhase=fr.loadTransactionStoragePhase=void 0;var el=Tn();function k0(t){let e=t.loadCoins(),r;t.loadBit()&&(r=t.loadCoins());let n=(0,el.loadAccountStatusChange)(t);return{storageFeesCollected:e,storageFeesDue:r,statusChange:n}}fr.loadTransactionStoragePhase=k0;function N0(t){return e=>{e.storeCoins(t.storageFeesCollected),t.storageFeesDue===null||t.storageFeesDue===void 0?e.storeBit(!1):(e.storeBit(!0),e.storeCoins(t.storageFeesDue)),e.store((0,el.storeAccountStatusChange)(t.statusChange))}}fr.storeTransactionsStoragePhase=N0});var gi=S(gr=>{"use strict";l();u();Object.defineProperty(gr,"__esModule",{value:!0});gr.storeTransactionDescription=gr.loadTransactionDescription=void 0;var hi=Y(),qn=ai(),tl=pi(),cr=li(),rl=ui(),hr=di(),nl=fi(),it=ci();function q0(t){let e=t.loadUint(4);if(e===0){let r=t.loadBit(),n;t.loadBit()&&(n=(0,it.loadTransactionStoragePhase)(t));let o;t.loadBit()&&(o=(0,nl.loadTransactionCreditPhase)(t));let s=(0,hr.loadTransactionComputePhase)(t),p;t.loadBit()&&(p=(0,cr.loadTransactionActionPhase)(t.loadRef().beginParse()));let d=t.loadBit(),_;t.loadBit()&&(_=(0,rl.loadTransactionBouncePhase)(t));let B=t.loadBit();return{type:"generic",creditFirst:r,storagePhase:n,creditPhase:o,computePhase:s,actionPhase:p,bouncePhase:_,aborted:d,destroyed:B}}if(e===1)return{type:"storage",storagePhase:(0,it.loadTransactionStoragePhase)(t)};if(e===2||e===3){let r=e===3,n=(0,it.loadTransactionStoragePhase)(t),o=(0,hr.loadTransactionComputePhase)(t),s;t.loadBit()&&(s=(0,cr.loadTransactionActionPhase)(t.loadRef().beginParse()));let p=t.loadBit(),d=t.loadBit();return{type:"tick-tock",isTock:r,storagePhase:n,computePhase:o,actionPhase:s,aborted:p,destroyed:d}}if(e===4){let r=(0,qn.loadSplitMergeInfo)(t),n;t.loadBit()&&(n=(0,it.loadTransactionStoragePhase)(t));let o=(0,hr.loadTransactionComputePhase)(t),s;t.loadBit()&&(s=(0,cr.loadTransactionActionPhase)(t.loadRef().beginParse()));let p=t.loadBit(),d=t.loadBit();return{type:"split-prepare",splitInfo:r,storagePhase:n,computePhase:o,actionPhase:s,aborted:p,destroyed:d}}if(e===5){let r=(0,qn.loadSplitMergeInfo)(t),n=(0,tl.loadTransaction)(t.loadRef().beginParse()),o=t.loadBit();return{type:"split-install",splitInfo:r,prepareTransaction:n,installed:o}}throw Error(`Unsupported transaction description type ${e}`)}gr.loadTransactionDescription=q0;function j0(t){return e=>{if(t.type==="generic")e.storeUint(0,4),e.storeBit(t.creditFirst),t.storagePhase?(e.storeBit(!0),e.store((0,it.storeTransactionsStoragePhase)(t.storagePhase))):e.storeBit(!1),t.creditPhase?(e.storeBit(!0),e.store((0,nl.storeTransactionCreditPhase)(t.creditPhase))):e.storeBit(!1),e.store((0,hr.storeTransactionComputePhase)(t.computePhase)),t.actionPhase?(e.storeBit(!0),e.storeRef((0,hi.beginCell)().store((0,cr.storeTransactionActionPhase)(t.actionPhase)))):e.storeBit(!1),e.storeBit(t.aborted),t.bouncePhase?(e.storeBit(!0),e.store((0,rl.storeTransactionBouncePhase)(t.bouncePhase))):e.storeBit(!1),e.storeBit(t.destroyed);else if(t.type==="storage")e.storeUint(1,4),e.store((0,it.storeTransactionsStoragePhase)(t.storagePhase));else if(t.type==="tick-tock")e.storeUint(t.isTock?3:2,4),e.store((0,it.storeTransactionsStoragePhase)(t.storagePhase)),e.store((0,hr.storeTransactionComputePhase)(t.computePhase)),t.actionPhase?(e.storeBit(!0),e.storeRef((0,hi.beginCell)().store((0,cr.storeTransactionActionPhase)(t.actionPhase)))):e.storeBit(!1),e.storeBit(t.aborted),e.storeBit(t.destroyed);else if(t.type==="split-prepare")e.storeUint(4,4),e.store((0,qn.storeSplitMergeInfo)(t.splitInfo)),t.storagePhase?(e.storeBit(!0),e.store((0,it.storeTransactionsStoragePhase)(t.storagePhase))):e.storeBit(!1),e.store((0,hr.storeTransactionComputePhase)(t.computePhase)),t.actionPhase?(e.storeBit(!0),e.store((0,cr.storeTransactionActionPhase)(t.actionPhase))):e.storeBit(!1),e.storeBit(t.aborted),e.storeBit(t.destroyed);else if(t.type==="split-install")e.storeUint(5,4),e.store((0,qn.storeSplitMergeInfo)(t.splitInfo)),e.storeRef((0,hi.beginCell)().store((0,tl.storeTransaction)(t.prepareTransaction))),e.storeBit(t.installed);else throw Error(`Unsupported transaction description type ${t.type}`)}}gr.storeTransactionDescription=j0});var pi=S(pr=>{"use strict";l();u();Object.defineProperty(pr,"__esModule",{value:!0});pr.storeTransaction=pr.loadTransaction=void 0;var jn=Y(),K0=We(),Kn=zo(),ol=Ke(),il=Jo(),yi=ni(),sl=gi();function D0(t){let e=t.asCell();if(t.loadUint(4)!==7)throw Error("Invalid data");let r=t.loadUintBig(256),n=t.loadUintBig(64),o=t.loadUintBig(256),s=t.loadUintBig(64),p=t.loadUint(32),d=t.loadUint(15),_=(0,Kn.loadAccountStatus)(t),B=(0,Kn.loadAccountStatus)(t),R=t.loadRef().beginParse(),U=R.loadBit()?(0,yi.loadMessage)(R.loadRef().beginParse()):void 0,O=R.loadDict(K0.Dictionary.Keys.Uint(15),yi.MessageValue);R.endParse();let N=(0,ol.loadCurrencyCollection)(t),j=(0,il.loadHashUpdate)(t.loadRef().beginParse()),Z=(0,sl.loadTransactionDescription)(t.loadRef().beginParse());return{address:r,lt:n,prevTransactionHash:o,prevTransactionLt:s,now:p,outMessagesCount:d,oldStatus:_,endStatus:B,inMessage:U,outMessages:O,totalFees:N,stateUpdate:j,description:Z,raw:e,hash:()=>e.hash()}}pr.loadTransaction=D0;function L0(t){return e=>{e.storeUint(7,4),e.storeUint(t.address,256),e.storeUint(t.lt,64),e.storeUint(t.prevTransactionHash,256),e.storeUint(t.prevTransactionLt,64),e.storeUint(t.now,32),e.storeUint(t.outMessagesCount,15),e.store((0,Kn.storeAccountStatus)(t.oldStatus)),e.store((0,Kn.storeAccountStatus)(t.endStatus));let r=(0,jn.beginCell)();t.inMessage?(r.storeBit(!0),r.storeRef((0,jn.beginCell)().store((0,yi.storeMessage)(t.inMessage)))):r.storeBit(!1),r.storeDict(t.outMessages),e.storeRef(r),e.store((0,ol.storeCurrencyCollection)(t.totalFees)),e.storeRef((0,jn.beginCell)().store((0,il.storeHashUpdate)(t.stateUpdate))),e.storeRef((0,jn.beginCell)().store((0,sl.storeTransactionDescription)(t.description)))}}pr.storeTransaction=L0});var Nl=S(m=>{"use strict";l();u();Object.defineProperty(m,"__esModule",{value:!0});m.loadStorageInfo=m.storeStateInit=m.loadStateInit=m.storeSplitMergeInfo=m.loadSplitMergeInfo=m.storeSimpleLibrary=m.loadSimpleLibrary=m.loadShardStateUnsplit=m.storeShardIdent=m.loadShardIdent=m.storeShardAccounts=m.loadShardAccounts=m.ShardAccountRefValue=m.storeShardAccount=m.loadShardAccount=m.SendMode=m.storeMessageRelaxed=m.loadMessageRelaxed=m.storeMessage=m.loadMessage=m.loadMasterchainStateExtra=m.storeHashUpdate=m.loadHashUpdate=m.storeDepthBalanceInfo=m.loadDepthBalanceInfo=m.storeCurrencyCollection=m.loadCurrencyCollection=m.storeComputeSkipReason=m.loadComputeSkipReason=m.storeCommonMessageInfoRelaxed=m.loadCommonMessageInfoRelaxed=m.storeCommonMessageInfo=m.loadCommonMessageInfo=m.storeOutList=m.loadOutList=m.storeOutAction=m.loadOutAction=m.storeAccountStorage=m.loadAccountStorage=m.storeAccountStatusChange=m.loadAccountStatusChange=m.storeAccountStatus=m.loadAccountStatus=m.storeAccountState=m.loadAccountState=m.storeAccount=m.loadAccount=m.comment=m.external=m.internal=void 0;m.storeTransactionsStoragePhase=m.loadTransactionStoragePhase=m.storeTransactionDescription=m.loadTransactionDescription=m.storeTransactionCreditPhase=m.loadTransactionCreditPhase=m.storeTransactionComputePhase=m.loadTransactionComputePhase=m.storeTransactionBouncePhase=m.loadTransactionBouncePhase=m.storeTransactionActionPhase=m.loadTransactionActionPhase=m.storeTransaction=m.loadTransaction=m.storeTickTock=m.loadTickTock=m.storeStorageUsedShort=m.loadStorageUsedShort=m.storeStorageUsed=m.loadStorageUsed=m.storeStorageInfo=void 0;var _i=Sa();Object.defineProperty(m,"internal",{enumerable:!0,get:function(){return _i.internal}});Object.defineProperty(m,"external",{enumerable:!0,get:function(){return _i.external}});Object.defineProperty(m,"comment",{enumerable:!0,get:function(){return _i.comment}});var al=Fo();Object.defineProperty(m,"loadAccount",{enumerable:!0,get:function(){return al.loadAccount}});Object.defineProperty(m,"storeAccount",{enumerable:!0,get:function(){return al.storeAccount}});var ll=Do();Object.defineProperty(m,"loadAccountState",{enumerable:!0,get:function(){return ll.loadAccountState}});Object.defineProperty(m,"storeAccountState",{enumerable:!0,get:function(){return ll.storeAccountState}});var ul=zo();Object.defineProperty(m,"loadAccountStatus",{enumerable:!0,get:function(){return ul.loadAccountStatus}});Object.defineProperty(m,"storeAccountStatus",{enumerable:!0,get:function(){return ul.storeAccountStatus}});var dl=Tn();Object.defineProperty(m,"loadAccountStatusChange",{enumerable:!0,get:function(){return dl.loadAccountStatusChange}});Object.defineProperty(m,"storeAccountStatusChange",{enumerable:!0,get:function(){return dl.storeAccountStatusChange}});var fl=Lo();Object.defineProperty(m,"loadAccountStorage",{enumerable:!0,get:function(){return fl.loadAccountStorage}});Object.defineProperty(m,"storeAccountStorage",{enumerable:!0,get:function(){return fl.storeAccountStorage}});var Dn=Na();Object.defineProperty(m,"loadOutAction",{enumerable:!0,get:function(){return Dn.loadOutAction}});Object.defineProperty(m,"storeOutAction",{enumerable:!0,get:function(){return Dn.storeOutAction}});Object.defineProperty(m,"loadOutList",{enumerable:!0,get:function(){return Dn.loadOutList}});Object.defineProperty(m,"storeOutList",{enumerable:!0,get:function(){return Dn.storeOutList}});var cl=Qo();Object.defineProperty(m,"loadCommonMessageInfo",{enumerable:!0,get:function(){return cl.loadCommonMessageInfo}});Object.defineProperty(m,"storeCommonMessageInfo",{enumerable:!0,get:function(){return cl.storeCommonMessageInfo}});var hl=Wo();Object.defineProperty(m,"loadCommonMessageInfoRelaxed",{enumerable:!0,get:function(){return hl.loadCommonMessageInfoRelaxed}});Object.defineProperty(m,"storeCommonMessageInfoRelaxed",{enumerable:!0,get:function(){return hl.storeCommonMessageInfoRelaxed}});var gl=Xo();Object.defineProperty(m,"loadComputeSkipReason",{enumerable:!0,get:function(){return gl.loadComputeSkipReason}});Object.defineProperty(m,"storeComputeSkipReason",{enumerable:!0,get:function(){return gl.storeComputeSkipReason}});var pl=Ke();Object.defineProperty(m,"loadCurrencyCollection",{enumerable:!0,get:function(){return pl.loadCurrencyCollection}});Object.defineProperty(m,"storeCurrencyCollection",{enumerable:!0,get:function(){return pl.storeCurrencyCollection}});var yl=Zo();Object.defineProperty(m,"loadDepthBalanceInfo",{enumerable:!0,get:function(){return yl.loadDepthBalanceInfo}});Object.defineProperty(m,"storeDepthBalanceInfo",{enumerable:!0,get:function(){return yl.storeDepthBalanceInfo}});var _l=Jo();Object.defineProperty(m,"loadHashUpdate",{enumerable:!0,get:function(){return _l.loadHashUpdate}});Object.defineProperty(m,"storeHashUpdate",{enumerable:!0,get:function(){return _l.storeHashUpdate}});var H0=ti();Object.defineProperty(m,"loadMasterchainStateExtra",{enumerable:!0,get:function(){return H0.loadMasterchainStateExtra}});var bl=ni();Object.defineProperty(m,"loadMessage",{enumerable:!0,get:function(){return bl.loadMessage}});Object.defineProperty(m,"storeMessage",{enumerable:!0,get:function(){return bl.storeMessage}});var ml=$o();Object.defineProperty(m,"loadMessageRelaxed",{enumerable:!0,get:function(){return ml.loadMessageRelaxed}});Object.defineProperty(m,"storeMessageRelaxed",{enumerable:!0,get:function(){return ml.storeMessageRelaxed}});var V0=Va();Object.defineProperty(m,"SendMode",{enumerable:!0,get:function(){return V0.SendMode}});var Bl=oi();Object.defineProperty(m,"loadShardAccount",{enumerable:!0,get:function(){return Bl.loadShardAccount}});Object.defineProperty(m,"storeShardAccount",{enumerable:!0,get:function(){return Bl.storeShardAccount}});var bi=ii();Object.defineProperty(m,"ShardAccountRefValue",{enumerable:!0,get:function(){return bi.ShardAccountRefValue}});Object.defineProperty(m,"loadShardAccounts",{enumerable:!0,get:function(){return bi.loadShardAccounts}});Object.defineProperty(m,"storeShardAccounts",{enumerable:!0,get:function(){return bi.storeShardAccounts}});var Sl=si();Object.defineProperty(m,"loadShardIdent",{enumerable:!0,get:function(){return Sl.loadShardIdent}});Object.defineProperty(m,"storeShardIdent",{enumerable:!0,get:function(){return Sl.storeShardIdent}});var F0=Ya();Object.defineProperty(m,"loadShardStateUnsplit",{enumerable:!0,get:function(){return F0.loadShardStateUnsplit}});var wl=Oo();Object.defineProperty(m,"loadSimpleLibrary",{enumerable:!0,get:function(){return wl.loadSimpleLibrary}});Object.defineProperty(m,"storeSimpleLibrary",{enumerable:!0,get:function(){return wl.storeSimpleLibrary}});var vl=ai();Object.defineProperty(m,"loadSplitMergeInfo",{enumerable:!0,get:function(){return vl.loadSplitMergeInfo}});Object.defineProperty(m,"storeSplitMergeInfo",{enumerable:!0,get:function(){return vl.storeSplitMergeInfo}});var Ml=Dt();Object.defineProperty(m,"loadStateInit",{enumerable:!0,get:function(){return Ml.loadStateInit}});Object.defineProperty(m,"storeStateInit",{enumerable:!0,get:function(){return Ml.storeStateInit}});var Al=Vo();Object.defineProperty(m,"loadStorageInfo",{enumerable:!0,get:function(){return Al.loadStorageInfo}});Object.defineProperty(m,"storeStorageInfo",{enumerable:!0,get:function(){return Al.storeStorageInfo}});var Pl=Ho();Object.defineProperty(m,"loadStorageUsed",{enumerable:!0,get:function(){return Pl.loadStorageUsed}});Object.defineProperty(m,"storeStorageUsed",{enumerable:!0,get:function(){return Pl.storeStorageUsed}});var Cl=kn();Object.defineProperty(m,"loadStorageUsedShort",{enumerable:!0,get:function(){return Cl.loadStorageUsedShort}});Object.defineProperty(m,"storeStorageUsedShort",{enumerable:!0,get:function(){return Cl.storeStorageUsedShort}});var El=Ro();Object.defineProperty(m,"loadTickTock",{enumerable:!0,get:function(){return El.loadTickTock}});Object.defineProperty(m,"storeTickTock",{enumerable:!0,get:function(){return El.storeTickTock}});var xl=pi();Object.defineProperty(m,"loadTransaction",{enumerable:!0,get:function(){return xl.loadTransaction}});Object.defineProperty(m,"storeTransaction",{enumerable:!0,get:function(){return xl.storeTransaction}});var Il=li();Object.defineProperty(m,"loadTransactionActionPhase",{enumerable:!0,get:function(){return Il.loadTransactionActionPhase}});Object.defineProperty(m,"storeTransactionActionPhase",{enumerable:!0,get:function(){return Il.storeTransactionActionPhase}});var Ul=ui();Object.defineProperty(m,"loadTransactionBouncePhase",{enumerable:!0,get:function(){return Ul.loadTransactionBouncePhase}});Object.defineProperty(m,"storeTransactionBouncePhase",{enumerable:!0,get:function(){return Ul.storeTransactionBouncePhase}});var Tl=di();Object.defineProperty(m,"loadTransactionComputePhase",{enumerable:!0,get:function(){return Tl.loadTransactionComputePhase}});Object.defineProperty(m,"storeTransactionComputePhase",{enumerable:!0,get:function(){return Tl.storeTransactionComputePhase}});var Ol=fi();Object.defineProperty(m,"loadTransactionCreditPhase",{enumerable:!0,get:function(){return Ol.loadTransactionCreditPhase}});Object.defineProperty(m,"storeTransactionCreditPhase",{enumerable:!0,get:function(){return Ol.storeTransactionCreditPhase}});var Rl=gi();Object.defineProperty(m,"loadTransactionDescription",{enumerable:!0,get:function(){return Rl.loadTransactionDescription}});Object.defineProperty(m,"storeTransactionDescription",{enumerable:!0,get:function(){return Rl.storeTransactionDescription}});var kl=ci();Object.defineProperty(m,"loadTransactionStoragePhase",{enumerable:!0,get:function(){return kl.loadTransactionStoragePhase}});Object.defineProperty(m,"storeTransactionsStoragePhase",{enumerable:!0,get:function(){return kl.storeTransactionsStoragePhase}})});var jl=S(Ln=>{"use strict";l();u();Object.defineProperty(Ln,"__esModule",{value:!0});Ln.openContract=void 0;var z0=Re(),ql=Ge();function W0(t,e){let r,n=null;if(!z0.Address.isAddress(t.address))throw Error("Invalid address");if(r=t.address,t.init){if(!(t.init.code instanceof ql.Cell))throw Error("Invalid init.code");if(!(t.init.data instanceof ql.Cell))throw Error("Invalid init.data");n=t.init}let o=e({address:r,init:n});return new Proxy(t,{get(s,p){let d=s[p];return typeof p=="string"&&(p.startsWith("get")||p.startsWith("send"))&&typeof d=="function"?(..._)=>d.apply(s,[o,..._]):d}})}Ln.openContract=W0});var Kl=S(Hn=>{"use strict";l();u();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.ComputeError=void 0;var Nr=class extends Error{constructor(e,r,n){super(e),this.exitCode=r,this.debugLogs=n&&n.debugLogs?n.debugLogs:null,this.logs=n&&n.logs?n.logs:null,Object.setPrototypeOf(this,Nr.prototype)}};Hn.ComputeError=Nr});var Dl=S(Vn=>{"use strict";l();u();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.getMethodId=void 0;var G0=new Int16Array([0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920]);function $0(t){t instanceof f.Buffer||(t=f.Buffer.from(t));let e=0;for(let r=0;r<t.length;r++){let n=t[r];e=(G0[(e>>8^n)&255]^e<<8)&65535}return e}function Y0(t){return $0(t)&65535|65536}Vn.getMethodId=Y0});var Hl=S(yr=>{"use strict";l();u();Object.defineProperty(yr,"__esModule",{value:!0});yr.safeSignVerify=yr.safeSign=void 0;var mi=vn(),Q0=8,X0=64;function Ll(t,e){let r=f.Buffer.from(e);if(r.length>X0)throw Error("Seed can	 be longer than 64 bytes");if(r.length<Q0)throw Error("Seed must be at least 8 bytes");return(0,mi.sha256_sync)(f.Buffer.concat([f.Buffer.from([255,255]),r,t.hash()]))}function Z0(t,e,r="ton-safe-sign-magic"){return(0,mi.sign)(Ll(t,r),e)}yr.safeSign=Z0;function J0(t,e,r,n="ton-safe-sign-magic"){return(0,mi.signVerify)(Ll(t,n),e,r)}yr.safeSignVerify=J0});var we=S(E=>{"use strict";l();u();var eg=E&&E.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tg=E&&E.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&eg(e,t,r)};Object.defineProperty(E,"__esModule",{value:!0});E.safeSignVerify=E.safeSign=E.getMethodId=E.base32Encode=E.base32Decode=E.crc32c=E.crc16=E.fromNano=E.toNano=E.ComputeError=E.openContract=E.TupleBuilder=E.TupleReader=E.serializeTuple=E.parseTuple=E.generateMerkleUpdate=E.generateMerkleProofDirect=E.generateMerkleProof=E.exoticPruned=E.exoticMerkleUpdate=E.convertToMerkleProof=E.exoticMerkleProof=E.Dictionary=E.Cell=E.CellType=E.Slice=E.beginCell=E.Builder=E.BitBuilder=E.BitReader=E.BitString=E.contractAddress=E.ADNLAddress=E.ExternalAddress=E.address=E.Address=void 0;var Vl=Re();Object.defineProperty(E,"Address",{enumerable:!0,get:function(){return Vl.Address}});Object.defineProperty(E,"address",{enumerable:!0,get:function(){return Vl.address}});var rg=Zr();Object.defineProperty(E,"ExternalAddress",{enumerable:!0,get:function(){return rg.ExternalAddress}});var ng=rs();Object.defineProperty(E,"ADNLAddress",{enumerable:!0,get:function(){return ng.ADNLAddress}});var og=ha();Object.defineProperty(E,"contractAddress",{enumerable:!0,get:function(){return og.contractAddress}});var ig=ke();Object.defineProperty(E,"BitString",{enumerable:!0,get:function(){return ig.BitString}});var sg=qe();Object.defineProperty(E,"BitReader",{enumerable:!0,get:function(){return sg.BitReader}});var ag=Pr();Object.defineProperty(E,"BitBuilder",{enumerable:!0,get:function(){return ag.BitBuilder}});var Fl=Y();Object.defineProperty(E,"Builder",{enumerable:!0,get:function(){return Fl.Builder}});Object.defineProperty(E,"beginCell",{enumerable:!0,get:function(){return Fl.beginCell}});var lg=un();Object.defineProperty(E,"Slice",{enumerable:!0,get:function(){return lg.Slice}});var ug=vt();Object.defineProperty(E,"CellType",{enumerable:!0,get:function(){return ug.CellType}});var dg=Ge();Object.defineProperty(E,"Cell",{enumerable:!0,get:function(){return dg.Cell}});var fg=We();Object.defineProperty(E,"Dictionary",{enumerable:!0,get:function(){return fg.Dictionary}});var zl=xr();Object.defineProperty(E,"exoticMerkleProof",{enumerable:!0,get:function(){return zl.exoticMerkleProof}});Object.defineProperty(E,"convertToMerkleProof",{enumerable:!0,get:function(){return zl.convertToMerkleProof}});var cg=cn();Object.defineProperty(E,"exoticMerkleUpdate",{enumerable:!0,get:function(){return cg.exoticMerkleUpdate}});var hg=yn();Object.defineProperty(E,"exoticPruned",{enumerable:!0,get:function(){return hg.exoticPruned}});var Wl=rn();Object.defineProperty(E,"generateMerkleProof",{enumerable:!0,get:function(){return Wl.generateMerkleProof}});Object.defineProperty(E,"generateMerkleProofDirect",{enumerable:!0,get:function(){return Wl.generateMerkleProofDirect}});var gg=_o();Object.defineProperty(E,"generateMerkleUpdate",{enumerable:!0,get:function(){return gg.generateMerkleUpdate}});var Gl=ya();Object.defineProperty(E,"parseTuple",{enumerable:!0,get:function(){return Gl.parseTuple}});Object.defineProperty(E,"serializeTuple",{enumerable:!0,get:function(){return Gl.serializeTuple}});var pg=_a();Object.defineProperty(E,"TupleReader",{enumerable:!0,get:function(){return pg.TupleReader}});var yg=ba();Object.defineProperty(E,"TupleBuilder",{enumerable:!0,get:function(){return yg.TupleBuilder}});tg(Nl(),E);var _g=jl();Object.defineProperty(E,"openContract",{enumerable:!0,get:function(){return _g.openContract}});var bg=Kl();Object.defineProperty(E,"ComputeError",{enumerable:!0,get:function(){return bg.ComputeError}});var $l=Ko();Object.defineProperty(E,"toNano",{enumerable:!0,get:function(){return $l.toNano}});Object.defineProperty(E,"fromNano",{enumerable:!0,get:function(){return $l.fromNano}});var mg=Xr();Object.defineProperty(E,"crc16",{enumerable:!0,get:function(){return mg.crc16}});var Bg=Io();Object.defineProperty(E,"crc32c",{enumerable:!0,get:function(){return Bg.crc32c}});var Yl=ho();Object.defineProperty(E,"base32Decode",{enumerable:!0,get:function(){return Yl.base32Decode}});Object.defineProperty(E,"base32Encode",{enumerable:!0,get:function(){return Yl.base32Encode}});var Sg=Dl();Object.defineProperty(E,"getMethodId",{enumerable:!0,get:function(){return Sg.getMethodId}});var Ql=Hl();Object.defineProperty(E,"safeSign",{enumerable:!0,get:function(){return Ql.safeSign}});Object.defineProperty(E,"safeSignVerify",{enumerable:!0,get:function(){return Ql.safeSignVerify}})});var Xl=S(Fn=>{"use strict";l();u();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.WalletContractV3R2=void 0;var ye=we(),wg=ut(),qr=class{static create(e){return new qr(e.workchain,e.publicKey,e.walletId)}constructor(e,r,n){this.workchain=e,this.publicKey=r,n!=null?this.walletId=n:this.walletId=698983191+e;let o=ye.Cell.fromBoc(f.Buffer.from("te6cckEBAQEAcQAA3v8AIN0gggFMl7ohggEznLqxn3Gw7UTQ0x/THzHXC//jBOCk8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVBC9ba0=","base64"))[0],s=(0,ye.beginCell)().storeUint(0,32).storeUint(this.walletId,32).storeBuffer(r).endCell();this.init={code:o,data:s},this.address=(0,ye.contractAddress)(e,{code:o,data:s})}createTransfer(e){let r=ye.SendMode.PAY_GAS_SEPARATELY+ye.SendMode.IGNORE_ERRORS;e.sendMode!==null&&e.sendMode!==void 0&&(r=e.sendMode);let n=this.createWalletTransferV3({seqno:e.seqno,sendMode:r,secretKey:e.secretKey,messages:e.messages,timeout:e.timeout,walletId:this.walletId}),o=(0,ye.external)({to:this.address,init:e.seqno===0?{code:this.init.code,data:this.init.data}:void 0,body:n});return(0,ye.beginCell)().store((0,ye.storeMessage)(o)).endCell()}createWalletTransferV3(e){if(e.messages.length>4)throw Error("Maximum number of messages in a single transfer is 4");let r=(0,ye.beginCell)().storeUint(e.walletId,32);if(e.seqno===0)for(let o=0;o<32;o++)r.storeBit(1);else r.storeUint(e.timeout||Math.floor(Date.now()/1e3)+600,32);r.storeUint(e.seqno,32);for(let o of e.messages)r.storeUint(e.sendMode,8),r.storeRef((0,ye.beginCell)().store((0,ye.storeMessageRelaxed)(o)));let n=wg.signUtil.ed25519.sign(r.endCell().hash(),e.secretKey);return(0,ye.beginCell)().storeBuffer(f.Buffer.from(n)).storeBuilder(r).endCell()}};Fn.WalletContractV3R2=qr});var Zl=S(Ie=>{"use strict";l();u();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createWalletTransferV4=Ie.createWalletTransferV3=Ie.createWalletTransferV2=Ie.createWalletTransferV1=void 0;var ne=we(),zn=vn();function vg(t){let e=(0,ne.beginCell)().storeUint(t.seqno,32);t.message&&(e.storeUint(t.sendMode,8),e.storeRef((0,ne.beginCell)().store((0,ne.storeMessageRelaxed)(t.message))));let r=(0,zn.sign)(e.endCell().hash(),t.secretKey);return(0,ne.beginCell)().storeBuffer(r).storeBuilder(e).endCell()}Ie.createWalletTransferV1=vg;function Mg(t){if(t.messages.length>4)throw Error("Maximum number of messages in a single transfer is 4");let e=(0,ne.beginCell)().storeUint(t.seqno,32);if(t.seqno===0)for(let o=0;o<32;o++)e.storeBit(1);else e.storeUint(t.timeout||Math.floor(Date.now()/1e3)+60,32);for(let o of t.messages)e.storeUint(t.sendMode,8),e.storeRef((0,ne.beginCell)().store((0,ne.storeMessageRelaxed)(o)));let r=(0,zn.sign)(e.endCell().hash(),t.secretKey);return(0,ne.beginCell)().storeBuffer(r).storeBuilder(e).endCell()}Ie.createWalletTransferV2=Mg;function Ag(t){if(t.messages.length>4)throw Error("Maximum number of messages in a single transfer is 4");let e=(0,ne.beginCell)().storeUint(t.walletId,32);if(t.seqno===0)for(let o=0;o<32;o++)e.storeBit(1);else e.storeUint(t.timeout||Math.floor(Date.now()/1e3)+60,32);e.storeUint(t.seqno,32);for(let o of t.messages)e.storeUint(t.sendMode,8),e.storeRef((0,ne.beginCell)().store((0,ne.storeMessageRelaxed)(o)));let r=(0,zn.sign)(e.endCell().hash(),t.secretKey);return(0,ne.beginCell)().storeBuffer(r).storeBuilder(e).endCell()}Ie.createWalletTransferV3=Ag;function Pg(t){if(t.messages.length>4)throw Error("Maximum number of messages in a single transfer is 4");let e=(0,ne.beginCell)().storeUint(t.walletId,32);if(t.seqno===0)for(let o=0;o<32;o++)e.storeBit(1);else e.storeUint(t.timeout||Math.floor(Date.now()/1e3)+600,32);e.storeUint(t.seqno,32),e.storeUint(0,8);for(let o of t.messages)e.storeUint(t.sendMode,8),e.storeRef((0,ne.beginCell)().store((0,ne.storeMessageRelaxed)(o)));let r=(0,zn.sign)(e.endCell().hash(),t.secretKey);return(0,ne.beginCell)().storeBuffer(r).storeBuilder(e).endCell()}Ie.createWalletTransferV4=Pg});var Kr=S(Wn=>{"use strict";l();u();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.WalletContractV4=void 0;var Le=we(),Cg=Zl(),jr=class{static create(e){return new jr(e.workchain,e.publicKey,e.walletId)}constructor(e,r,n){this.workchain=e,this.publicKey=r,n!=null?this.walletId=n:this.walletId=698983191+e;let o=Le.Cell.fromBoc(f.Buffer.from("te6ccgECFAEAAtQAART/APSkE/S88sgLAQIBIAIDAgFIBAUE+PKDCNcYINMf0x/THwL4I7vyZO1E0NMf0x/T//QE0VFDuvKhUVG68qIF+QFUEGT5EPKj+AAkpMjLH1JAyx9SMMv/UhD0AMntVPgPAdMHIcAAn2xRkyDXSpbTB9QC+wDoMOAhwAHjACHAAuMAAcADkTDjDQOkyMsfEssfy/8QERITAubQAdDTAyFxsJJfBOAi10nBIJJfBOAC0x8hghBwbHVnvSKCEGRzdHK9sJJfBeAD+kAwIPpEAcjKB8v/ydDtRNCBAUDXIfQEMFyBAQj0Cm+hMbOSXwfgBdM/yCWCEHBsdWe6kjgw4w0DghBkc3RyupJfBuMNBgcCASAICQB4AfoA9AQw+CdvIjBQCqEhvvLgUIIQcGx1Z4MesXCAGFAEywUmzxZY+gIZ9ADLaRfLH1Jgyz8gyYBA+wAGAIpQBIEBCPRZMO1E0IEBQNcgyAHPFvQAye1UAXKwjiOCEGRzdHKDHrFwgBhQBcsFUAPPFiP6AhPLassfyz/JgED7AJJfA+ICASAKCwBZvSQrb2omhAgKBrkPoCGEcNQICEekk30pkQzmkD6f+YN4EoAbeBAUiYcVnzGEAgFYDA0AEbjJftRNDXCx+AA9sp37UTQgQFA1yH0BDACyMoHy//J0AGBAQj0Cm+hMYAIBIA4PABmtznaiaEAga5Drhf/AABmvHfaiaEAQa5DrhY/AAG7SB/oA1NQi+QAFyMoHFcv/ydB3dIAYyMsFywIizxZQBfoCFMtrEszMyXP7AMhAFIEBCPRR8qcCAHCBAQjXGPoA0z/IVCBHgQEI9FHyp4IQbm90ZXB0gBjIywXLAlAGzxZQBPoCFMtqEssfyz/Jc/sAAgBsgQEI1xj6ANM/MFIkgQEI9Fnyp4IQZHN0cnB0gBjIywXLAlAFzxZQA/oCE8tqyx8Syz/Jc/sAAAr0AMntVA==","base64"))[0],s=(0,Le.beginCell)().storeUint(0,32).storeUint(this.walletId,32).storeBuffer(this.publicKey).storeBit(0).endCell();this.init={code:o,data:s},this.address=(0,Le.contractAddress)(e,{code:o,data:s})}async getBalance(e){return(await e.getState()).balance}async getSeqno(e){return(await e.getState()).state.type==="active"?(await e.get("seqno",[])).stack.readNumber():0}async send(e,r){await e.external(r)}async sendTransfer(e,r){let n=this.createTransfer(r);await this.send(e,n)}createTransfer(e){let r=Le.SendMode.PAY_GAS_SEPARATELY+Le.SendMode.IGNORE_ERRORS;e.sendMode!==null&&e.sendMode!==void 0&&(r=e.sendMode);let n=!1;(!e.secretKey||e.secretKey.length==0)&&(e.secretKey=f.Buffer.alloc(64),n=!0);let o=(0,Cg.createWalletTransferV4)({seqno:e.seqno,sendMode:r,secretKey:e.secretKey,messages:e.messages,timeout:e.timeout,walletId:this.walletId});if(n)return o;let s=(0,Le.external)({to:this.address,init:e.seqno===0?{code:this.init.code,data:this.init.data}:void 0,body:o});return(0,Le.beginCell)().store((0,Le.storeMessage)(s)).endCell()}sender(e,r){return{send:async n=>{let o=await this.getSeqno(e),s=this.createTransfer({seqno:o,secretKey:r,sendMode:n.sendMode,messages:[(0,Le.internal)({to:n.to,value:n.value,init:n.init,body:n.body,bounce:n.bounce})]});await this.send(e,s)}}}};Wn.WalletContractV4=jr});var Jl=S(Gn=>{"use strict";l();u();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.VenomWalletV3=void 0;var _e=we(),Eg=ut(),Dr=class{static create(e){return new Dr(e.workchain,e.publicKey,e.walletId)}constructor(e,r,n){this.workchain=e,this.publicKey=r,n!=null?this.walletId=n:this.walletId=1269378442+e;let o=_e.Cell.fromBoc(f.Buffer.from("te6ccgEBAQEAcQAA3v8AIN0gggFMl7ohggEznLqxn3Gw7UTQ0x/THzHXC//jBOCk8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVA==","base64"))[0],s=(0,_e.beginCell)().storeUint(0,32).storeUint(this.walletId,32).storeBuffer(r).endCell();this.init={code:o,data:s},this.address=(0,_e.contractAddress)(e,{code:o,data:s})}createTransfer(e){let r=_e.SendMode.PAY_GAS_SEPARATELY+_e.SendMode.IGNORE_ERRORS;e.sendMode!==null&&e.sendMode!==void 0&&(r=e.sendMode);let n=this.createWalletTransferV3Venom({seqno:e.seqno,sendMode:r,secretKey:e.secretKey,messages:e.messages,timeout:e.timeout,walletId:this.walletId,globalId:e.globalId}),o=(0,_e.external)({to:this.address,init:e.seqno===0?{code:this.init.code,data:this.init.data}:void 0,body:n});return(0,_e.beginCell)().store((0,_e.storeMessage)(o)).endCell()}createWalletTransferV3Venom(e){if(e.messages.length>4)throw Error("Maximum number of messages in a single transfer is 4");let r=(0,_e.beginCell)().storeUint(e.walletId,32);if(e.seqno===0)for(let p=0;p<32;p++)r.storeBit(1);else r.storeUint(e.timeout||Math.floor(Date.now()/1e3)+600,32);r.storeUint(e.seqno,32);for(let p of e.messages)r.storeUint(e.sendMode,8),r.storeRef((0,_e.beginCell)().store((0,_e.storeMessageRelaxed)(p)));let n=f.Buffer.allocUnsafe(4);n.writeInt32BE(e.globalId);let o=f.Buffer.concat([n,r.endCell().hash()],36),s=Eg.signUtil.ed25519.sign(o,e.secretKey);return(0,_e.beginCell)().storeBuffer(f.Buffer.from(s)).storeBuilder(r).endCell()}};Gn.VenomWalletV3=Dr});var $n=S(st=>{"use strict";l();u();Object.defineProperty(st,"__esModule",{value:!0});st.VenomWalletV3=st.WalletContractV4=st.WalletContractV3R2=void 0;var xg=Xl();Object.defineProperty(st,"WalletContractV3R2",{enumerable:!0,get:function(){return xg.WalletContractV3R2}});var Ig=Kr();Object.defineProperty(st,"WalletContractV4",{enumerable:!0,get:function(){return Ig.WalletContractV4}});var Ug=Jl();Object.defineProperty(st,"VenomWalletV3",{enumerable:!0,get:function(){return Ug.VenomWalletV3}})});var Yn=S(J=>{"use strict";l();u();Object.defineProperty(J,"__esModule",{value:!0});J.toBase64Address=J.convertAddress=J.validateAddress=J.getVenomAddressBySeed=J.parseAddress=J.getAddressBySeed=J.checkSeed=J.getPubKeyBySeed=void 0;var He=ut(),Tg=$n(),_r=we(),Og=Kr();function Rg(t){Bi(t);let{publicKey:e}=He.signUtil.ed25519.fromSeed(He.base.fromHex(t));return He.base.toHex(e)}J.getPubKeyBySeed=Rg;function Bi(t){if(!He.base.validateHexString(t))throw new Error("invalid key");let e=He.base.fromHex(t.toLowerCase());if(!e||e.length!=32||e.every(r=>r===0))throw new Error("invalid key")}J.checkSeed=Bi;function kg(t){Bi(t);let{publicKey:e}=He.signUtil.ed25519.fromSeed(He.base.fromHex(t));return Og.WalletContractV4.create({workchain:0,publicKey:f.Buffer.from(e)}).address.toString({bounceable:!1})}J.getAddressBySeed=kg;function eu(t){try{if(_r.Address.isRaw(t))return{address:_r.Address.parseRaw(t),isRaw:!0,isValid:!0};if(_r.Address.isFriendly(t)){let e=_r.Address.parseFriendly(t);return e.isTestOnly?{isValid:!1}:{...e,isUserFriendly:!0,isValid:!0}}}catch{}return{isValid:!1}}J.parseAddress=eu;function Ng(t){let{publicKey:e}=He.signUtil.ed25519.fromSeed(He.base.fromHex(t));return Tg.VenomWalletV3.create({workchain:0,publicKey:f.Buffer.from(e)}).address.toRawString()}J.getVenomAddressBySeed=Ng;function qg(t){try{return _r.Address.parse(t)}catch{return!1}}J.validateAddress=qg;function jg(t){let e=eu(t);if(e.isValid){let r=e.address?.toRawString(),n=e.address?.toString({bounceable:!0,urlSafe:!0}),o=e.address?.toString({bounceable:!1,urlSafe:!0});return{raw:r,addrBounceable:{bounceable:!0,urlSafe:!0,userFriendlyBounceable:n},addrUnounceable:{bounceable:!1,urlSafe:!0,userFriendlyUnbounceable:o}}}else return e}J.convertAddress=jg;function Kg(t,e=!0,r){return typeof t=="string"&&(t=_r.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:r==="testnet"})}J.toBase64Address=Kg});var Qn=S(G=>{"use strict";l();u();Object.defineProperty(G,"__esModule",{value:!0});G.NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT=G.NFT_TRANSFER_TONCOIN_AMOUNT=G.TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT=G.TOKEN_TRANSFER_TONCOIN_AMOUNT=G.NOTCOIN_EXCHANGERS=G.NOTCOIN_FORWARD_TON_AMOUNT=G.BURN_CHUNK_DURATION_APPROX_SEC=G.NOTCOIN_VOUCHERS_ADDRESS=G.NFT_BATCH_SIZE=G.TRANSFER_TIMEOUT_SEC=void 0;G.TRANSFER_TIMEOUT_SEC=600;G.NFT_BATCH_SIZE=4;G.NOTCOIN_VOUCHERS_ADDRESS="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW";G.BURN_CHUNK_DURATION_APPROX_SEC=30;G.NOTCOIN_FORWARD_TON_AMOUNT=30000000n;G.NOTCOIN_EXCHANGERS=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"];G.TOKEN_TRANSFER_TONCOIN_AMOUNT=100000000n;G.TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT=1n;G.NFT_TRANSFER_TONCOIN_AMOUNT=100000000n;G.NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT=1n});var su=S(oe=>{"use strict";l();u();Object.defineProperty(oe,"__esModule",{value:!0});oe.buildNftTransferPayload=oe.buildNotcoinVoucherExchange=oe.packBytesAsSnake=oe.commentToBytes=oe.OpCode=oe.NftOpCode=void 0;var gt=we(),Si=Qn(),Dg=Xn(),tu;(function(t){t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned"})(tu=oe.NftOpCode||(oe.NftOpCode={}));var ru;(function(t){t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted"})(ru=oe.OpCode||(oe.OpCode={}));function nu(t){let e=f.Buffer.from(t),r=new Uint8Array(e.length+4),n=f.Buffer.alloc(4);return n.writeUInt32BE(ru.Comment),r.set(n,0),r.set(e,4),r}oe.commentToBytes=nu;var Lg=127;function ou(t,e=Lg){let r=f.Buffer.from(t);if(r.length<=e)return t;let n=new gt.Builder,o,s=n;for(let[p,d]of r.entries())s.availableBits<8&&(o?.storeRef(s),o=s,s=new gt.Builder),s=s.storeUint(d,8),p===r.length-1&&o?.storeRef(s);return n.asCell()}oe.packBytesAsSnake=ou;function Hg(t,e,r){let n=gt.Address.parse(e).hash.readUint8()>>4,o=Si.NOTCOIN_EXCHANGERS[n],s=new gt.Builder().storeUint(1609328194,32).storeUint(r,64).endCell();return iu(t,o,s,Si.NOTCOIN_FORWARD_TON_AMOUNT)}oe.buildNotcoinVoucherExchange=Hg;function iu(t,e,r,n=Si.NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT){let o=new gt.Builder().storeUint(tu.TransferOwnership,32).storeUint((0,Dg.generateQueryId)(),64).storeAddress(gt.Address.parse(e)).storeAddress(gt.Address.parse(t)).storeBit(!1).storeCoins(n),s;if(r)if(typeof r=="string"){let p=nu(r),d=Math.floor(o.availableBits/8);s=ou(p,d)}else s=r;return s instanceof Uint8Array?(o.storeBit(0),o=o.storeBuffer(f.Buffer.from(s))):o=o.storeMaybeRef(s),o.endCell()}oe.buildNftTransferPayload=iu});var Xn=S(be=>{"use strict";l();u();Object.defineProperty(be,"__esModule",{value:!0});be.bigintRandom=be.generateQueryId=be.buildNotcoinVoucherExchange=be.buildNftTransferPayload=be.signMultiTransaction=void 0;var Vg=pt(),Fg=Zn();Object.defineProperty(be,"signMultiTransaction",{enumerable:!0,get:function(){return Fg.signMultiTransaction}});var au=su();Object.defineProperty(be,"buildNftTransferPayload",{enumerable:!0,get:function(){return au.buildNftTransferPayload}});Object.defineProperty(be,"buildNotcoinVoucherExchange",{enumerable:!0,get:function(){return au.buildNotcoinVoucherExchange}});function zg(){return lu(8)}be.generateQueryId=zg;function lu(t){let e=BigInt(0);for(let r of(0,Vg.randomBytes)(t)){let n=BigInt(r);e=(e<<BigInt(8))+n}return e}be.bigintRandom=lu});var Zn=S(Ue=>{"use strict";l();u();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.signMultiTransaction=Ue.jettonTransfer=Ue.venomTransfer=Ue.transfer=void 0;var Wg=$n(),se=ut(),at=we(),Ve=we(),wi=Kr(),Gg=Yn(),$g=Xn(),Yg=Qn();function Qg(t,e){var r,n;if(e){let{secretKey:d,publicKey:_}=se.signUtil.ed25519.fromSeed(se.base.fromHex(e));r=d,n=_}else n=se.base.fromHex(t.publicKey);let o=wi.WalletContractV4.create({workchain:0,publicKey:f.Buffer.from(n)}),s=[(0,at.internal)({to:t.to,value:BigInt(t.amount),bounce:!1,body:t.memo})],p=o.createTransfer({seqno:t.seqno,messages:s,secretKey:e?f.Buffer.from(r):f.Buffer.alloc(0),sendMode:t.sendMode,timeout:t.expireAt});return{boc:se.base.toBase64(p.toBoc())}}Ue.transfer=Qg;function Xg(t,e){let{secretKey:r,publicKey:n}=se.signUtil.ed25519.fromSeed(se.base.fromHex(e)),o=Wg.VenomWalletV3.create({workchain:0,publicKey:f.Buffer.from(n)}),s=[(0,at.internal)({to:t.to,value:BigInt(t.amount),bounce:t.toIsInit,body:t.memo})],p=o.createTransfer({seqno:t.seqno,messages:s,secretKey:f.Buffer.from(r),globalId:t.globalId,sendMode:t.sendMode,timeout:t.expireAt});return{id:se.base.toBase64(p.hash()),body:se.base.toBase64(p.toBoc())}}Ue.venomTransfer=Xg;function Zg(t,e){var r,n;if(e){let{secretKey:ae,publicKey:ce}=se.signUtil.ed25519.fromSeed(se.base.fromHex(e));r=ae,n=ce}else n=se.base.fromHex(t.publicKey);let o=wi.WalletContractV4.create({workchain:0,publicKey:f.Buffer.from(n)}),s=o.address,p=Ve.Address.parse(t.to),d=Ve.Address.parse(t.fromJettonAccount);if(t.decimal<0)throw new Error("invalid decimal");if(BigInt(t.amount)<0)throw new Error("invalid amount");let B=t.queryId?BigInt(t.queryId):(0,$g.generateQueryId)(),x,R=t.customPayload?Ve.Cell.fromBase64(t.customPayload):void 0,U=(0,Ve.beginCell)().storeUint(260734629,32).storeUint(B,64).storeCoins(BigInt(t.amount)).storeAddress(p).storeAddress(s).storeMaybeRef(R).storeCoins(BigInt(t.invokeNotificationFee||"1"));if(t.memo){let ae=(0,Ve.beginCell)().storeUint(0,32).storeStringTail(t.memo).endCell();x=U.storeBit(!0).storeRef(ae).endCell()}else x=U.storeBit(!1).endCell();let O=t.stateInit?Ve.Cell.fromBase64(t.stateInit):void 0,N=O?{code:O.refs[0],data:O.refs[1]}:void 0,j=[(0,at.internal)({to:d,value:BigInt(t.messageAttachedTons||"50000000"),body:x,init:N,bounce:!1})],Z=o.createTransfer({seqno:t.seqno,messages:j,secretKey:e?f.Buffer.from(r):f.Buffer.alloc(0),sendMode:t.sendMode,timeout:t.expireAt});return{boc:se.base.toBase64(Z.toBoc())}}Ue.jettonTransfer=Zg;async function Jg(t,e,r,n,o,s){n||(n=Math.round(Date.now()/1e3)+Yg.TRANSFER_TIMEOUT_SEC);let p=e.map(N=>{let{amount:j,toAddress:Z,stateInit:ae,isBase64Payload:ce}=N,{payload:$}=N;if(ce&&typeof $=="string")$=Ve.Cell.fromBase64($);else if(typeof $=="string")try{$=Ve.Cell.fromBase64($)}catch{}let Fe=ae?{code:ae.refs[0],data:ae.refs[1]}:void 0;return(0,at.internal)({value:j,to:Z,body:$,bounce:(0,Gg.parseAddress)(Z).isBounceable,init:Fe})});var d,_;if(t){let{secretKey:N,publicKey:j}=se.signUtil.ed25519.fromSeed(se.base.fromHex(t));d=N,_=j}else _=se.base.fromHex(s);let B=wi.WalletContractV4.create({workchain:o==1?1:0,publicKey:f.Buffer.from(_)}),x=B.createTransfer({seqno:r,secretKey:t?f.Buffer.from(d):f.Buffer.alloc(0),messages:p,sendMode:at.SendMode.PAY_GAS_SEPARATELY+at.SendMode.IGNORE_ERRORS,timeout:n}),R=x.toBoc().toString("base64"),O=ep(B,r,x).toBoc().toString("base64");return{seqno:r,transaction:R,externalMessage:O}}Ue.signMultiTransaction=Jg;function ep(t,e,r){return(0,Ve.beginCell)().storeWritable((0,at.storeMessage)((0,at.external)({to:t.address,init:e===0?t.init:void 0,body:r}))).endCell()}});var fu=S(Te=>{"use strict";l();u();var tp=Te&&Te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Te,"__esModule",{value:!0});Te.JettonWallet=Te.VenomWallet=Te.TonWallet=void 0;var ve=Fi(),lt=Yn(),br=Zn(),uu=Ru(),ee=ut(),rp=Kr(),Lr=we(),np=tp(Ni()),Jn=Xn(),du=Qn(),Hr=class extends ve.BaseWallet{async getRandomPrivateKey(){try{return Promise.resolve(ee.signUtil.ed25519.ed25519_getRandomPrivateKey(!1,"hex"))}catch{return Promise.reject(ve.GenPrivateKeyError)}}async getDerivedPath(e){return`m/44'/607'/${e.index}'`}async getDerivedPrivateKey(e){try{if(e.hdPath)return Promise.resolve(ee.signUtil.ed25519.ed25519_getDerivedPrivateKey(e.mnemonic,e.hdPath,!1,"hex"));{let r=await(0,uu.mnemonicToSeed)(e.mnemonic.split(" ")),n=ee.base.toHex(r);return Promise.resolve(n)}}catch{return Promise.reject(ve.GenPrivateKeyError)}}async getNewAddress(e){try{if(!ee.base.validateHexString(e.privateKey))return Promise.reject(ve.NewAddressError);let r={address:(0,lt.getAddressBySeed)(e.privateKey.toLowerCase()),publicKey:(0,lt.getPubKeyBySeed)(e.privateKey.toLowerCase())};return Promise.resolve(r)}catch{return Promise.reject(ve.NewAddressError)}}async validPrivateKey(e){let r=!0;try{(0,lt.checkSeed)(e.privateKey)}catch{r=!1}let n={isValid:r,privateKey:e.privateKey};return Promise.resolve(n)}async validAddress(e){let r=(0,lt.parseAddress)(e.address);return Promise.resolve(r)}async parseAddress(e){let r=(0,lt.parseAddress)(e.address);return Promise.resolve(r)}async convertAddress(e){let r=(0,lt.convertAddress)(e.address);return Promise.resolve(r)}async validateMnemonicOfTon(e){return(0,uu.validateMnemonic)(e.mnemonicArray,e.password)}async signCommonMsg(e){return super.signCommonMsg({privateKey:e.privateKey,message:e.message,signType:ve.SignType.ED25519})}async signTransaction(e){let r=e.data;try{if(r.type=="transfer")return(0,br.transfer)(e.data,e.privateKey);if(r.type=="jettonTransfer")return(0,br.jettonTransfer)(e.data,e.privateKey)}catch{return Promise.reject(ve.SignTxError)}}async signJettonTransaction(e){try{return(0,br.jettonTransfer)(e.data,e.privateKey)}catch{return Promise.reject(ve.SignTxError)}}async getWalletInformation(e){let{workChain:r,publicKey:n,privateKey:o,walletVersion:s}=e,p=r==1?1:0,d;if(n)d=ee.base.fromHex(n);else{let{publicKey:O}=ee.signUtil.ed25519.fromSeed(ee.base.fromHex(o));d=f.Buffer.from(O)}let _;(!s||s=="v4r2"||s=="v4R2")&&(_=rp.WalletContractV4.create({workchain:p,publicKey:d}));let B=_.init?.code?.toBoc().toString("base64"),x=_.init?.data?.toBoc().toString("base64"),R=_.address,U=(0,Lr.beginCell)().storeWritable((0,Lr.storeStateInit)(_.init)).endCell().toBoc().toString("base64");return{initCode:B,initData:x,walletStateInit:U,walletAddress:R.toString({bounceable:!1})}}async getTransactionBodyForSimulate(e){if(e.privateKey){let{publicKey:n}=ee.signUtil.ed25519.fromSeed(ee.base.fromHex(e.privateKey)),o=ee.base.toHex(n);if(e.data.publicKey&&e.data.publicKey!=o)throw new Error("public key not pair the private key");e.data.publicKey||(e.data.publicKey=o),e.privateKey=""}else if(!e.data.publicKey)throw new Error("both private key and public key are null");let r=await this.signTransaction(e);return Promise.resolve(r.boc)}async calcTxHash(e){try{let n=Lr.Cell.fromBase64(e.data).hash().toString("hex");return Promise.resolve(n)}catch{return Promise.reject(ve.CalcTxHashError)}}async signTonProof(e){let{timestamp:r,domain:n,payload:o}=e.proof,s=f.Buffer.allocUnsafe(8);s.writeBigInt64LE(BigInt(r));let p=f.Buffer.from(n),d=f.Buffer.allocUnsafe(4);d.writeInt32LE(p.byteLength);let _=Lr.Address.parse(e.walletAddress),B=f.Buffer.allocUnsafe(4);B.writeInt32BE(_.workChain);let x=f.Buffer.concat([B,_.hash]),R=f.Buffer.concat([f.Buffer.from(e.tonProofItem,"utf8"),x,d,p,s,f.Buffer.from(o)]),U=f.Buffer.concat([f.Buffer.from(e.messageSalt,"hex"),f.Buffer.from(e.messageAction,"utf8"),f.Buffer.from(await ee.base.sha256(R))]),{secretKey:O}=ee.signUtil.ed25519.fromSeed(ee.base.fromHex(e.privateKey)),N=np.default.sign.detached(f.Buffer.from(await ee.base.sha256(U)),f.Buffer.from(O));return Promise.resolve(f.Buffer.from(N).toString("base64"))}async signMultiTransaction(e){let r=e.data;if(r.messages.length>4)throw new Error("Payload contains more than 4 messages, which exceeds limit");let n=r.valid_until;if(n&&n>10**10&&(n=Math.round(n/1e3)),n&&n<Date.now()/1e3)throw new Error("the confirmation timeout has expired");let o=[];r.messages.map(p=>{o.push({toAddress:p.address,amount:BigInt(p.amount),payload:p.payload,stateInit:p.stateInit?Lr.Cell.fromBase64(p.stateInit):void 0,isBase64Payload:p.isBase64Payload})});let s=r.network==="1"||r.network==="testnet"?1:0;return await(0,br.signMultiTransaction)(e.privateKey,o,r.seqno,n,s,r.publicKey)}async simulateMultiTransaction(e){if(e.privateKey){let{publicKey:r}=ee.signUtil.ed25519.fromSeed(ee.base.fromHex(e.privateKey)),n=ee.base.toHex(r);if(e.data.publicKey&&e.data.publicKey!=n)throw new Error("public key not pair the private key");e.data.publicKey||(e.data.publicKey=n),e.privateKey=""}else if(!e.data.publicKey)throw new Error("both private key and public key are null");return this.signMultiTransaction(e)}async signMultiTransactionForNFT(e){let r=e.data,o=r.nftAddresses.map((s,p)=>{let d=r.nfts?.[p];return{payload:d?.collectionAddress===du.NOTCOIN_VOUCHERS_ADDRESS?(0,Jn.buildNotcoinVoucherExchange)(r.fromNFTAddress,s,d.index):(0,Jn.buildNftTransferPayload)(r.fromNFTAddress,r.toAddress,r.comment),amount:du.NFT_TRANSFER_TONCOIN_AMOUNT,toAddress:s}});return await(0,br.signMultiTransaction)(e.privateKey,o,r.seqno,r.expireAt,r.workchain)}async buildNotcoinVoucherExchange(e){let r=(0,Jn.buildNotcoinVoucherExchange)(e.fromNFTAddress,e.nftAddress,e.nftIndex);return Promise.resolve(r.toBoc().toString("base64"))}async buildNftTransferPayload(e){let r=(0,Jn.buildNftTransferPayload)(e.fromNFTAddress,e.nftAddress,e.comment);return Promise.resolve(r.toBoc().toString("base64"))}};Te.TonWallet=Hr;var vi=class extends Hr{async getNewAddress(e){try{let r={address:(0,lt.getVenomAddressBySeed)(e.privateKey),publicKey:(0,lt.getPubKeyBySeed)(e.privateKey)};return Promise.resolve(r)}catch{return Promise.reject(ve.NewAddressError)}}async signTransaction(e){try{return(0,br.venomTransfer)(e.data,e.privateKey)}catch{return Promise.reject(ve.SignTxError)}}};Te.VenomWallet=vi;var Mi=class extends Hr{};Te.JettonWallet=Mi});var ip=S(Me=>{l();u();var op=Me&&Me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vr=Me&&Me.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&op(e,t,r)};Object.defineProperty(Me,"__esModule",{value:!0});Vr(fu(),Me);Vr(Yn(),Me);Vr(Zn(),Me);Vr(we(),Me);Vr($n(),Me)});export{ip as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-2P2QKRLW.js.map
