import{a as Wt,d as Kt}from"./chunk-ZBZQ5EHS.js";import{a as Dt}from"./chunk-SZ4UI522.js";import{a as mt,b as pt,c as Tt,d as pe,e as Mt,g as Rt,l as vt,m as Ft,n as Nt,q as Ut,s as Qt}from"./chunk-2UEAMWBZ.js";import"./chunk-4WN6OBDI.js";import{a as Ht}from"./chunk-6WBUJTKJ.js";import{a as ae,b as Xt,c as Yt,d as Te,e as te,f as Jt,g as Zt,j as jt}from"./chunk-5NYZQYIB.js";import{a as Se}from"./chunk-3PXXBAAG.js";import{a as he}from"./chunk-ZTL7I2OD.js";import{a as Vt,b as de}from"./chunk-IKTGIHKL.js";import{c as Ot,d as qt}from"./chunk-PIRKUEXW.js";import{a as Gt,b as p}from"./chunk-T2TGZ6ZH.js";import{b as gt,c as X,d as Y,e as $,f as R,h as kt}from"./chunk-TC5Y3PWY.js";import{a as Bt}from"./chunk-4IZQNWMN.js";import{a as ft,b as O,c as dt,d as ht,f as Et,h as Pt,m as ee}from"./chunk-PV5K2HOA.js";import"./chunk-OT3DBMMD.js";import{a as yt,b as Ct,c as At,e as It}from"./chunk-UYJFEJE6.js";import{a as y,b as g}from"./chunk-KLQ5LRUF.js";import{a as fe,b as Lt,d as _t,e as xt,f as bt,i as wt,j as ie}from"./chunk-3B5V6RBS.js";import"./chunk-ALZKZKT7.js";import"./chunk-5NZYX7T6.js";import{b as j,c as z,d as D}from"./chunk-H4BR5O6P.js";import{a as ct}from"./chunk-QBAWFARF.js";import"./chunk-FYV4ZBAP.js";import"./chunk-L7GCSSD7.js";import"./chunk-TXAI4LDH.js";import"./chunk-AZH4OWJP.js";import{a as ut}from"./chunk-DPLPUTOK.js";import"./chunk-QTWRPB4V.js";import"./chunk-V4H2MEPY.js";import{u as lt}from"./chunk-WCLMZJ77.js";import"./chunk-BNJC2TPG.js";import"./chunk-DQ2IBJ6G.js";import{b as C,d as St}from"./chunk-IYVZOFWF.js";import{a as x}from"./chunk-O43TNQSD.js";import{Kc as rt,Lb as ot,Nc as nt,Oc as st,Pc as it,Qc as at,c as et,ea as tt}from"./chunk-LUYLQDIU.js";import{k as b,l as V}from"./chunk-ZOUFDRHZ.js";import{f as se,g as le,h as Ke,i as Ze,j as je,k as ze,l as $e,n as G}from"./chunk-QZXD2Q4G.js";import"./chunk-ROB5HGLC.js";import"./chunk-FYE3XUPR.js";import"./chunk-QCINCBGO.js";import{a as ne}from"./chunk-VLKJDIZ5.js";import"./chunk-XXICVAVV.js";import{F as Ye,G as B,I as Je,o as ve}from"./chunk-E44TZGUB.js";import{F as ce,j as f,oa as H,r as Oe,x as qe}from"./chunk-KBQXBPIW.js";import{D as A,F as We,J as He,M as Xe,O as F}from"./chunk-364XNTHB.js";import"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as M}from"./chunk-PDSGFBX4.js";import"./chunk-3CPUV3E7.js";import{f as S,o as s,q as i}from"./chunk-FJHLV356.js";s();i();var Z=S(M());s();i();s();i();var Fe=S(M()),Ne=S(St());function zt({loading:r,item:e,handleClick:t,selected:o}){return Fe.default.createElement(yt,{loading:r,height:88,className:(0,Ne.default)(ae.skeleton)},Fe.default.createElement(Je,{className:(0,Ne.default)(ae.selectItem,ae.item,{[ae.selected]:o}),onClick:()=>{t(e)}},e.label))}var $t=()=>({QuickSelectItem:zt});s();i();var eo=()=>({});s();i();s();i();var ge=S(M()),to=S(ne());var oo=r=>{let[e,t]=(0,ge.useState)(null),o=(0,to.useHistory)(),{queryParams:a}=de(),n=a?.get("inputChain"),m=a?.get("inputCurrency"),u=a?.get("outputChain"),l=a?.get("outputCurrency");return(0,ge.useEffect)(()=>{if(!a)return;let T=bt(a),k=_t(r);fe(r,T)?t(T):fe(r,k)?t(k):t(Lt())},[r==="buy"?u:n,r==="buy"?l:m]),{tokenPair:e,setTokenPair:T=>{fe(r,T)&&(xt(r,T),wt(o,o.location.pathname,T))}}};s();i();var lo=S(M());s();i();var ke=S(M());function ro(r){let[e,t]=(0,ke.useState)(!1);return{runPreconditions:(0,ke.useCallback)(async()=>{t(!0);try{await r.reduce(async(a,n)=>{let m=await a;return n(m)},Promise.resolve())}finally{t(!1)}},[r]),loading:e}}s();i();var io=S(M());H();s();i();var no=S(M());function so(){let{memeSwapStore:r,sendTransactionStore:e}=p(),{getJitoTxData:t}=r,{signSolanaTransactionWithMeme:o}=e;return{onSolanaSign:(0,no.useCallback)(async n=>{try{let m=await t(n);g.info(y.MEME_SWAP_SIGN_PARAMS,{data:{...n,unsignedTxArray:m}});let u=await o(n,m);return g.info(y.MEME_SWAP_SIGN_SUCCESS,{data:{...n,unsignedTxArray:m,signedTransactions:u}}),{signedTransactions:u,txArray:m}}catch(m){throw m?.message!=="Expected String"&&!Ft(m)&&B.error({title:C("swaptrade_home_toast_initiation_error")}),g.error(y.MEME_SWAP_SIGN_ERROR,{data:{error:m,data:n}}),new Error(m?.error_message)}},[t,o])}}function ao(){let{memeSwapStore:r,memeConfigStore:e}=p(),{onSolanaSign:t}=so(),{walletId:o}=he();return(0,io.useCallback)(async(n={})=>{let{signedTransactions:m,txArray:u}=await t(n),l=await r.onSolanaSwap({data:{walletId:o,...n},signedTransactions:m,txArray:u}),d=f(e,"config.nativeTokenInfo.tokenContractAddress"),{calldataParams:h}=n,{fromAmount:E,fromTokenAddress:T}=h||{};return T===d&&ut.set(kt,E),{...n,broadcastRes:l}},[r,t,o,e])}s();i();var Me=S(M());F();function mo(){let{memeQuoteStore:r,memeAccountStore:e}=p(),{txPreset:t,isCustomPreset:o}=Ot(),{priorityFee:a,slippage:n,isEnableMev:m}=t,{formatPriorityFee:u}=qt({priorityFee:a,isEnableMev:m}),{computedGetRouterList:l,computedGetEstimateGasFee:d,computedGetQuoteFrom:h,computedGetQuoteTo:E,computedGetQuoteFromAmount:T,computedGetQuoteToAmount:k,computedQuoteTraceData:P,computedServiceFeeInfo:I}=r,w=e.getAddressByChainId(h.chainId),_=(0,Me.useMemo)(()=>{let N={dexRouterList:l,priorityFee:u?.value,slippage:n?.value,estimateGasFee:d,chainId:h.chainId,fromTokenAddress:h.tokenContractAddress,fromAmount:T,toTokenAddress:E.tokenContractAddress,toAmount:k,userWalletAddress:w,enableJito:m,customPriorityFee:u?.type==="custom",serviceFeeInfo:I};return m&&(N.mevInfo="jito"),N},[l,u?.value,u?.type,n?.value,d,h.chainId,h.tokenContractAddress,T,E.tokenContractAddress,k,w,m,I]);return(0,Me.useCallback)(async()=>{g.info(y.MEME_SWAP_GET_CALLDATA_PARAMS,{data:_,preset:t,isCustomPreset:o});let[N,Re]=await A(Ct(_));if(N||!Re.data?.unsignedTx)throw B.error({title:N?.error_message||C("swaptrade_home_toast_initiation_error")}),g.error(y.MEME_SWAP_GET_CALLDATA_ERROR,{data:{error:N,params:_,res:Re}}),new Error(N?.error_message);return{unsignedTx:Re.data.unsignedTx,calldataParams:{..._,traceData:P}}},[P,_])}s();i();var Ue=S(M());H();F();function uo(){let{memeQuoteStore:r,memeAccountStore:e,memeSwapStore:t}=p(),{computedGetQuoteFrom:o}=r,{usePreExecuteFn:a}=G.hooks,{TxToastCheckTypeEnum:n}=G.global,m=a(),u=o.isNativeToken?"":o.tokenContractAddress,l=e.getAddressByChainId(o.chainId),d=Dt(o.chainId,u),h=t.getSolanaUnsignedTx,E=(0,Ue.useCallback)(k=>{let P=h(k);return{checkTypes:[n.TX_ANALYZE],from:l,chainId:o.chainId,coinId:d?.coinId,simulateTransactionParamList:P.map(I=>({transaction:I.data,sigVerify:!1,replaceRecentBlockhash:!0}))}},[h,n.TX_ANALYZE,d?.coinId,o.chainId,l]);return(0,Ue.useCallback)(async(k={})=>{let P=E(k);g.info(y.MEME_SWAP_PRE_EXECUTE_PARAMS,{data:{executeParams:P,data:k}});let[I,w]=await A(m(P));if(I)throw B.error({title:I?.error_message||C("swaptrade_home_toast_initiation_error")}),g.error(y.MEME_SWAP_PRE_EXECUTE_ERR,{data:{error:I,executeParams:P,data:k}}),new Error(I?.error_message);let _=f(w,`${n.TX_ANALYZE}`,{});if(!_.result){let De=_.msg||f(qe(_.simulateTransactionResultList,N=>!ce(N.msg)),"msg",C("swaptrade_home_toast_initiation_error"));throw B.error({title:De}),g.error(y.MEME_SWAP_PRE_EXECUTE_RESULT_ERR,{data:{res:w,error:_,...k,executeParams:P}}),new Error(De)}return g.info(y.MEME_SWAP_PRE_EXECUTE_RESULT,{data:{res:w,...k,executeParams:P}}),k},[m,E,n.TX_ANALYZE])}s();i();var oe=S(M());function co(){let r=Se(lt),{memeQuoteStore:e}=p(),t=Ht(),o=(0,oe.useCallback)(()=>Wt(e.computedFromTokenValue,t,20),[e.computedFromTokenValue,t]);return(0,oe.useCallback)(()=>{try{let{isDifferenceLarge:n,percentageDifference:m}=o();return n?new Promise((u,l)=>{r({popup_type:"valuedifference"});let d=ve.tip({infoType:ve.Tip.INFO_TYPE.success,title:C("swaptrade_modal_title_crossvalue_deviation"),children:oe.default.createElement("div",null,oe.default.createElement("p",null,C("swaptrade_modal_desc_crossvalue_deviation",{value:m}))),confirmText:C("swaptrade_confirmation_btn_continue_swap"),cancelText:C("commonall_text_btn_cancel"),onConfirm:()=>{d.destroy(),u(!0)},onClose:()=>{l(new Error("Value diff prompt closed"))},onCancel:()=>{l(new Error("Value diff prompt closed"))}})}):Promise.resolve(!0)}catch(n){throw B.error({title:C("swaptrade_home_toast_initiation_error")}),g.error(y.MEME_SWAP_VALUE_DIFF_ERROR,{error:n,data:{"memeModeCommonDexInfo.fromTokenPrice":e.computedFromTokenValue,"memeModeSingleChainSwapInfo.toTokenPrice":e.computedToTokenValue}}),n}},[e.computedFromTokenValue,t,o])}function po(){let r=Pt(),e=co(),t=mo(),o=uo(),a=ao(),{memeSwapStore:n}=p(),{runPreconditions:m,loading:u}=ro([r,e,t,o,a]),{setIsSwapLoading:l}=n;return(0,lo.useEffect)(()=>{l(u)},[l,u]),{onSwap:m,loading:u}}s();i();var go=S(M());s();i();var v=S(M());s();i();H();function fo(){let r=Te(),{fromToken:e}=te();return ce(e.amountNum)||new x.BigNumber(r).gt(e.amountNum)}var Zo=()=>{let{memeQuoteStore:r,memeAccountStore:e,memeSwapStore:t}=p(),o=Te(),a=Jt(),n=(0,v.useCallback)(()=>t.isSwapLoading?R:"",[t.isSwapLoading]),m=(0,v.useCallback)(()=>new x.BigNumber(o).gt(0)?"":R,[o]),u=(0,v.useCallback)(()=>a?R:r.computedCustomQuoteLoading?R:r.computedQuoteIsInvalid?R:"",[a,r.computedQuoteIsInvalid,r.computedCustomQuoteLoading]),{computedNonsupportChain:l,isConnectedWallet:d}=e,h=(0,v.useCallback)(()=>d?null:et,[d]),E=(0,v.useCallback)(()=>l?R:"",[l]),T=fo(),k=(0,v.useCallback)(()=>T?$:"",[T]);return{isSwapLoading:n,amountValid:m,quoteIsOk:u,isConnectedWallet:d,getIsUnConnectedWallet:h,getIsUnsupprtWallet:E,getIsInsufficientBalance:k}};function ho(){let{memeConfigStore:r}=p(),{isSwapLoading:e,amountValid:t,quoteIsOk:o,isConnectedWallet:a,getIsUnConnectedWallet:n,getIsUnsupprtWallet:m,getIsInsufficientBalance:u}=Zo(),[l,d]=(0,v.useState)(R),h=r.currentMode==="buy"?X:Y;return(0,v.useEffect)(()=>{let E=[n,e,m,t,o,u],T,k=E.find(P=>{let I=P();return I?(T=I,!0):!1});d(k?T:h)},[e,t,u,o,d,m,a,h,n]),l}s();i();var So=S(M());function To(){let{memeBuyStore:r,memeSellStore:e,memeConfigStore:t}=p(),{currentMode:o}=t;return(0,So.useCallback)(()=>o==="sell"?C(Y,{symbol:e.computedSellTokenSymbol}):C(X,{symbol:r.computedBuyTokenSymbol}),[o,r.computedBuyTokenSymbol,e.computedSellTokenSymbol])}function ko(){let r=Se(),e=ho(),{fromToken:t}=te(),o=To(),{useMemeSwap:a}=Yt().hooks,{onSwap:n}=a(),{memeCommonStore:{setAddFundsVisible:m}}=p();return(0,go.useCallback)(()=>({[X]:{disabled:!1,btnTxt:()=>o(),onClick:()=>{n(),r({button_name:"confirm"})},btnType:X},[Y]:{disabled:!1,btnTxt:()=>o(),onClick:()=>{n(),r({button_name:"confirm"})},btnType:Y},[$]:{disabled:!1,btnTxt:()=>C($,{token:t.symbol}),onClick:()=>{m(!0)},btnType:$},[R]:{disabled:!0,btnTxt:()=>o(),onClick:()=>{},btnType:R}}),[t.symbol,o,n,m])()[e]||{}}var Mo=()=>({useMemeSwap:po,useTokenPair:oo,useMemeSwapBtnProps:ko});s();i();var Q=S(M()),Yo=S(ne());s();i();var J=S(M());s();i();var Qe=S(M());var Eo=()=>{let{memeBuyStore:r,memeSellStore:e}=p(),{currentBuyPreset:t,setBuyValue:o}=r,{currentSellPreset:a,setSellValue:n}=e,{amountList:m=[]}=t,{amountList:u=[]}=a;(0,Qe.useEffect)(()=>{o({value:m[0]||"0",type:"select",index:0})},[o,m]),(0,Qe.useEffect)(()=>{let l=u[0]||"0";n({value:l,type:"select",index:0})},[n,u])};var jo=({inputAmount:r,custom:e,defaultBuyAmountList:t,memeBuyStore:o,setAmountUsed:a,setCustomUsed:n})=>{e==="1"?(o.setBuyValue({value:"",type:"custom",index:3}),n(!0),ie("custom")):r&&(t.includes(r)?(o.setBuyValue({value:r,type:"select",index:t.findIndex(m=>m===r)}),a(!0),ie("inputAmount")):o.setBuyValue({value:t[0]||"0",type:"select",index:0}))},zo=({inputPercent:r,custom:e,defaultSellPercentList:t,memeSellStore:o,setPercentUsed:a,setCustomUsed:n})=>{e==="1"?(o.setSellValue({value:"",type:"custom",index:3}),o.setIsPercentMode(!0),n(!0),ie("custom")):r&&(o.setIsPercentMode(!0),t.includes(r)?(o.setSellValue({value:r,type:"custom",index:3}),a(!0),ie("inputPercent")):o.setSellValue({value:t[0]||"0",type:"select",index:0}))},Po=()=>{let{queryParams:r}=de(),{memeBuyStore:e,memeSellStore:t,memeConfigStore:o}=p(),{currentMode:a}=o,{currentBuyPreset:n}=e,{currentSellPreset:m}=t,{amountList:u=[]}=n,{amountList:l=[]}=m,d=r?.get?.("inputAmount"),h=r?.get?.("inputPercent"),E=r?.get?.("custom"),[T,k]=(0,J.useState)(!1),[P,I]=(0,J.useState)(!1),[w,_]=(0,J.useState)(!1);(0,J.useEffect)(()=>{a==="buy"&&!T&&!w&&jo({inputAmount:d,custom:E,defaultBuyAmountList:u,memeBuyStore:e,setAmountUsed:k,setCustomUsed:_})},[d,E,a,u,T,w]),(0,J.useEffect)(()=>{a==="sell"&&!P&&!w&&zo({inputPercent:h,custom:E,defaultSellPercentList:l,memeSellStore:t,setPercentUsed:I,setCustomUsed:_})},[d,h,E,a,l,P,w]),Eo()};s();i();var Ao=S(M());s();i();var yo=S(M());s();i();var Ee=S(M());var $o=()=>{let{memeBuyStore:r,memeSellStore:e,memeConfigStore:t}=p(),{currentMode:o}=t,a=(0,Ee.useCallback)(l=>{let d=l.coinAmountOriginalDec||l.amountNum,h={...l,amountNum:d};o==="sell"?e.onSocketUpdateFromTokenBalance(h):r.onSocketUpdateFromTokenBalance(h)},[o,e,r]),n=e.fromToken?.tokenContractAddress,m=r.fromToken?.tokenContractAddress,u=(0,Ee.useMemo)(()=>o==="sell"?n:m,[n,m,o]);return{updateTokenBalance:a,currentTokenAddress:u}},Pe=$o;var er=()=>{let{updateTokenBalance:r,currentTokenAddress:e}=Pe(),t=he(),{chainId:o,accountId:a,userUniqueId:n,walletId:m,userWalletAddress:u,businessType:l}=t;return(0,yo.useCallback)(async()=>{if(e&&o&&a&&n&&m&&u){let d=await jt({tokenAddress:e,chainId:o,accountId:a,userUniqueId:n,walletId:m,userWalletAddress:u,businessType:l});d&&r(d)}},[o,e,a,n,m,u,l,r])},Co=er;var tr=()=>{let{memeAccountStore:r,memePositionStore:e,memeConfigStore:t,memeCommonStore:o}=p(),{computedAccountId:a,computedAccountWalletAddresses:n}=r,{userUniqueId:m}=o,{config:u}=t,{nativeTokenConfig:l}=u||{},{chainId:d}=l||{},{fetchPositionList:h}=e,E=Zt(h,300),{updateTokenBalance:T}=Pe(),k=Co();(0,Ao.useEffect)(()=>(n&&(O.addListen("error",()=>{k()}),O.addListen("connect",()=>{k()}),O.addListen(ft.WALLET_ASSET,P=>{P&&(E({chainId:d,accountId:a,userUniqueId:m}),T(P))}),O.init(n)),()=>{O.removeAll(),O.wsInstance&&n&&O.logout(n)}),[d,a,m,n,E,T,k])},Io=tr;s();i();s();i();var xo=S(M());s();i();function ye(){let{memeBuyStore:r,memeSellStore:e,memeConfigStore:t}=p(),{currentMode:o}=t;return(o==="sell"?e.fromToken:r.toToken)||{}}s();i();var Lo=(r,e)=>{let t={userUniqueId:r,tokenDetailList:[{chainId:e.chainId,contractAddress:e.tokenContractAddress,tokenSymbol:e.tokenSymbol,precision:e.decimals}]};return D.post(ot,t)},_o=r=>(Array.isArray(r)?r:[r]).map(t=>({channel:ht.DEX_MARKET_TX_CHANNEL,chainId:t?.chainId,tokenAddress:t?.tokenContractAddress}));var or=()=>{let r=ye(),{memeCommonStore:e}=p();(0,xo.useEffect)(()=>{!r.tokenContractAddress||!r.chainId||!e.userUniqueId||Lo(e.userUniqueId,r)},[e.userUniqueId,r.tokenContractAddress,r.chainId])},bo=or;s();i();var vo=S(M());s();i();var Do=S(M());s();i();F();var wo=async({tokenContractAddress:r,accountId:e,chainId:t})=>{let[o,a]=await A(D.get(rt,{params:{tokenContractAddress:r,accountId:e,chainId:t}}));return!o&&a?a.data:{error:o}};s();i();var Bo=S(M());var rr=()=>{let{memeBuyStore:r,memeSellStore:e,memeConfigStore:t}=p(),{currentMode:o}=t;return(0,Bo.useCallback)(a=>{let n={...a,chainId:Number(a.chainId)};o==="sell"?e.onSocketUpdateFromToken(n):r.onSocketUpdateToToken(n)},[o,e,r])},Ce=rr;var nr=()=>{let{memeAccountStore:r}=p(),{computedAccountId:e}=r,t=Ce();return(0,Do.useCallback)(async o=>{let a=await wo({tokenContractAddress:o.tokenContractAddress,chainId:o.chainId,accountId:e});if(a?.error)return;let n={...o,price:a.price,marketCap:a.marketCap};t(n)},[t,e])},Ro=nr;var sr=()=>{let r=ye(),e=Ce(),t=Ro();(0,vo.useEffect)(()=>{if(!r.tokenContractAddress||!r.chainId)return()=>{};let o=_o(r),a=dt({subscribeParams:o,onListenData:n=>{e(n[0])},onListenError:()=>{t(r)},onListenReconnected:()=>{t(r)}});return()=>{a()}},[r.tokenContractAddress,r.chainId,e])},Fo=sr;var ir=()=>{bo(),Fo()},No=ir;s();i();var K=S(M()),Uo=S(ne());var ar=({currency:r,currentWallet:e,walletInfo:t,keyringIdentityTypeEnum:o,addressBookList:a,walletList:n,t:m,dispatch:u,onBack:l})=>{let{memeCommonStore:d,memeAccountStore:h,reset:E}=p(),T=(0,Uo.useHistory)();(0,K.useEffect)(()=>{G.setRuntimeContext({history:T,toLocale:m,dispatch:u,walletInfo:t,onBack:l})},[m,T,u,t,l]),(0,K.useEffect)(()=>{e&&h.setWalletConfig(e)},[e]),(0,K.useEffect)(()=>(d.getUserUnit(r),()=>{E()}),[]),(0,K.useEffect)(()=>{h.setAddressBookList(a)},[a]),(0,K.useEffect)(()=>{h.setWalletList(n)},[n]),(0,K.useEffect)(()=>{h.setKeyringIdentityTypeEnum(o)},[o])},Qo=ar;s();i();var L=S(M()),re=S(ne());F();s();i();var U=S(M()),Ie=S(ne()),qo=S(St());s();i();var Vo=S(M());var me=class extends Vo.PureComponent{constructor(e){super(e),this.state={hasError:!1,error:void 0,errorInfo:{}}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),g.error(y.ERROR_BOUNDARY,{error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){let{error:e,errorInfo:t,hasError:o}=this.state;return o?this.props.fallbackComponent({error:e,errorInfo:t}):this.props.children}};s();i();var Ve=S(M());F();var mr=()=>Ve.default.createElement("div",{className:"mt-50"},Ve.default.createElement(Ye,{pastDelay:!1,error:!0,delayTime:1e4,alt:"dexGenericError",retry:()=>{He(We().pathname,"_self")}})),Go=mr;s();i();var Ae=S(M());var ur=()=>{let{memeCommonStore:r,memeConfigStore:e}=p(),{currentMode:t}=e,{fromToken:o}=te(),{chainId:a,isNativeToken:n,tokenContractAddress:m}=o,{visibleAddFunds:u,setAddFundsVisible:l}=r,d=ct(),h=(0,Ae.useMemo)(()=>d?!0:t==="sell",[d,t]);return Ae.default.createElement(Tt,{visible:u,params:{chainId:a,tokenContractAddress:n?"":m,receiveOnly:h},onBack:()=>{l(!1)}})},Oo=V(ur);var cr=[se,le],lr=({children:r,onBack:e})=>{let{memeCommonStore:t,memeConfigStore:o,memeBuyStore:a,memeSellStore:n}=p(),{showNavigator:m,title:u,closeable:l}=Mt({memeConfigStore:o,memeBuyStore:a,memeSellStore:n}),d=(0,Ie.useLocation)(),h=(0,Ie.useHistory)(),{isTelegramMiniApp:E}=G.global,{Navigator:T}=G.components,{setAddFundsVisible:k}=t;(0,U.useEffect)(()=>{k(!1)},[]),Bt();let P=()=>{e?e(h.goBack,cr.includes(d.pathname)):h.goBack()};return U.default.createElement(me,{fallbackComponent:Go},U.default.createElement("div",{className:(0,qo.default)("universe-swap background-base-primary",pe.wrapper)},m?U.default.createElement(T,{title:u,onBack:P,closeable:l}):null,U.default.createElement("div",{id:"meme-swap-container",className:E?pe.memeTelegramContainer:pe.extensionContainer},r)),U.default.createElement(Oo,null),U.default.createElement(Et,{disclaimerVisible:t.disclaimerVisible,setDisclaimerVisible:t.setDisclaimerVisible}))},Wo=V(lr);var Ho=(0,L.lazy)(()=>import("./Buy-4HKK6XVE.js")),pr=(0,L.lazy)(()=>import("./Sell-SVTBWYUY.js")),fr=(0,L.lazy)(()=>import("./Configure-COAONXQW.js")),dr=(0,L.lazy)(()=>import("./TokenList-3GPWL2IL.js")),hr=(0,L.lazy)(()=>import("./HighRisk-VZJ5UG56.js")),Sr=(0,L.lazy)(()=>import("./Presets-UEWNRYQY.js")),Tr=(0,L.lazy)(()=>import("./PresetEdit-MQCGUZWC.js")),gr=({onBack:r})=>L.default.createElement(Wo,{onBack:r},L.default.createElement(L.Suspense,null,L.default.createElement(re.Switch,null,[{path:se,component:Ho,exact:!0},{path:le,component:pr,exact:!0},{path:Ze,component:fr,exact:!0},{path:Ke,component:dr,exact:!0},{path:je,component:hr,exact:!0},{path:ze,component:Sr,extract:!0},{path:$e,component:Tr,extract:!0}].map(t=>L.default.createElement(re.Route,{key:t.path,path:t.path,component:t.component,exact:t.exact})),L.default.createElement(re.Redirect,{from:se,to:{pathname:Ho,search:new Xe().getAll()},strict:!0,exact:!0})))),Xo=gr;var kr=({currency:r,currentWallet:e,keyringIdentityTypeEnum:t,addressBookList:o,walletList:a,walletInfo:n,onBack:m,t:u,dispatch:l})=>{Qo({currency:r,currentWallet:e,walletInfo:n,keyringIdentityTypeEnum:t,addressBookList:o,walletList:a,t:u,dispatch:l,onBack:m}),Io(),No();let{memeAccountStore:{address:d,setFromChainId:h},memeConfigStore:{fetchConfig:E,config:T,setCurrentMode:k}}=p();(0,Q.useEffect)(()=>{g.setTags({address:d})},[d]),(0,Q.useEffect)(()=>{E()},[]);let P=(0,Yo.useLocation)();(0,Q.useEffect)(()=>{if(P){let{isBuyMode:w,isSellMode:_}=Vt(P);w?k("buy"):_&&k("sell")}},[P,k]),(0,Q.useEffect)(()=>{T&&h(T?.nativeTokenInfo?.chainId)},[T]),Kt(),Po();let{initialized:I}=pt();return I?Q.default.createElement(Xo,{onBack:m}):null},Jo=(0,Q.memo)(V(kr));s();i();s();i();H();var Le=class{constructor(){this.loading=!0;this.setLoading=e=>{this.loading=e};this.fromToken=null;this.setFromToken=e=>{this.fromToken=e};this.toToken=null;this.setToToken=e=>{this.toToken=e};this.onSocketUpdateToToken=e=>{ee(e,this.toToken)&&this.setToToken({...this.toToken,...e})};this.onSocketUpdateFromTokenBalance=e=>{ee(e,this.fromToken)&&this.setFromToken({...this.fromToken,amountNum:e.amountNum})};this.buyValue={value:"0",index:0,type:"select"};this.setBuyValue=e=>{this.buyValue=e};this.buyPresetList=[];this.setBuyPresetList=e=>{this.buyPresetList=e};this.currentBuyPresetIndex=0;this.setCurrentBuyPresetIndex=e=>{this.currentBuyPresetIndex=e};this.customBuyPreset={};this.setCustomBuyPreset=e=>{this.customBuyPreset=e};this.buyPresetPageEditState=!1;this.setBuyPresetPageEditState=e=>{this.buyPresetPageEditState=e};this.editBuyPreset={value:{},index:-1};this.setEditBuyPreset=e=>{this.editBuyPreset=e};b(this)}get computedBuyNumber(){return this.buyValue.type==="custom"?parseFloat(this.buyValue.value||"0"):this.currentBuyPreset?.amountList?.[this.buyValue.index]}get computedBuyTokenSymbol(){return f(this,"toToken.tokenSymbol")}get computedBuyNumberIsValid(){return new x.BigNumber(this.computedBuyNumber).gt(0)}get currentBuyPreset(){return this.buyPresetList[this.currentBuyPresetIndex]||{}}};s();i();F();var _e=class{constructor(){this.currentMode="unset";this.setCurrentMode=e=>{this.currentMode=e};this.configList=[];this.setConfigList=e=>{this.configList=e};this.index=0;this.initLoading=!0;this.setInitLoading=e=>{this.initLoading=e};this.fetchConfig=async()=>{let[e,t]=await A(At());if(e){g.error(y.MEME_SWAP_PRE_EXECUTE_ERR,{error:e});return}t&&t.data&&(this.setConfigList(t.data),this.setInitLoading(!1))};this.marketSwitchRef=null;this.setMarketSwitchRef=e=>{this.marketSwitchRef=e};this.showUserGuide=!1;this.setShowUserGuide=e=>{this.showUserGuide=e};b(this)}get config(){return this.configList?.[this.index]||null}};s();i();F();var xe=class{constructor(){this.initState=!1;this.setInitState=e=>{this.initState=e};this.positionList=[];this.setPositionList=e=>{this.positionList=e};this.fetchPositionLoading=!0;this.setFetchPositionLoading=e=>{this.fetchPositionLoading=e};this.cancelFetchRef=null;this.fetchPositionList=async({accountId:e,userUniqueId:t,chainId:o})=>{if(!e||!t||!o)return;this.cancelFetchRef&&this.cancelFetchRef.abort(),this.setFetchPositionLoading(!0),this.cancelFetchRef=j();let[a,n]=await A(D.get(nt,{params:{accountId:e,userUniqueId:t,chainId:o},signal:this.cancelFetchRef?.signal}));a&&g.stuff(a),n&&n.data&&this.setPositionList(n?.data),this.setFetchPositionLoading(!1),this.setInitState(!0)};b(this)}isCancel(e){return z(e)}};s();i();H();F();var Ge=class{constructor(){this.quoteLoading=!1;this.quoteData=Ge.INIT_QUOTE_DATA;this.isAutoQuote=!0;this.cancelRef=null;this.cleanMemeQuoteTimer=()=>{this.cancelRef&&this.cancelRef.abort(),this.timerRef&&clearTimeout(this.timerRef)};this.initLoading=!0;this.isQuoteImmediate=e=>!!e.chainId&&!!e.fromTokenAddress&&!!e.toTokenAddress&&new x.BigNumber(e.amount).gt(0);this.timerRef=null;this.startingPoll=async e=>{if(this.timerRef&&clearTimeout(this.timerRef),!this.isQuoteImmediate(e)){this.setIsInitLoading(!1),this.setQuoteData({});return}await this.fetchQuoteData(e),this.timerRef=setTimeout(async()=>{this.setIsAutoQuote(!0),await this.startingPoll(e)},gt)};this.fetchMemeQuote=Oe(this.startingPoll,tt);b(this,{},{autoBind:!0})}setQuoteLoading(e){this.quoteLoading=e}setQuoteData(e){this.quoteData=e}setIsAutoQuote(e){this.isAutoQuote=e}setIsInitLoading(e){this.initLoading=e}async fetchQuoteData({isAuto:e,...t}){this.setQuoteLoading(!0),this.cleanMemeQuoteTimer(),this.cancelRef=j();let[o,a]=await A(D.get(at,{params:t,signal:this.cancelRef.signal}));if(!z(o)&&o){let n={...a||{},...o};this.setQuoteData(n)}else this.setQuoteData(a||{});this.setIsInitLoading(!1),this.setQuoteLoading(!1),this.setIsAutoQuote(!1)}get JitoIsSuccess(){return f(this.quoteData,"data.memeModeCommonDexInfo.enableJito",!0)}get computedPriorityFeeInfo(){let e=f(this.quoteData,"data.memeModeCommonDexInfo.nonMevPriorityFeeInfo")??{};return{mevPriorityFeeInfo:f(this.quoteData,"data.memeModeCommonDexInfo.mevList[0]")??{},nonMevPriorityFeeInfo:e}}get computedFromTokenValue(){return f(this.quoteData,"data.memeModeCommonDexInfo.fromTokenPrice","0")}get computedToTokenAmount(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.receiveAmount","0")}get computedToTokenValue(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.toTokenPrice","0")}get quoteNetWorkFeeOfMoney(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.quoteNetWorkFeeOfMoney","")}get computedQuoteErrorMsg(){return f(this.quoteData,"error_message","")}get computedQuoteCompleted(){return f(this.quoteData,"error_code")}get computedQuoteIsError(){return this.computedQuoteCompleted&&this.computedQuoteCompleted!=="0"}get computedQuoteNetworkError(){return this.quoteData.status==="ERR_NETWORK"}get computedQuoteLiquidityError(){return this.computedQuoteCompleted&&!f(this.quoteData,"data.memeModeSingleChainSwapInfo")}get computedQuoteIsHoneypot(){return this.computedQuoteCompleted&&(f(this.quoteData,"data.memeModeCommonDexInfo.toToken.isHoneypot")||f(this.quoteData,"data.memeModeCommonDexInfo.fromToken.isHoneypot"))}get computedQuoteSafemoon(){if(this.computedQuoteCompleted){let e=f(this.quoteData,"data.memeModeCommonDexInfo.fromToken",{}),t=f(this.quoteData,"data.memeModeCommonDexInfo.toToken",{});if(e?.isSafeMoonToken===1||e?.isSafeMoonToken==="1")return e?.tokenSymbol;if(t?.isSafeMoonToken===1||t?.isSafeMoonToken==="1")return t?.tokenSymbol}return""}get computedGetTokenTax(){return f(this.quoteData,"data.memeModeCommonDexInfo.tokenTax")}get computedGetRouterList(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.dexRouterList")}get computedGetEstimateGasFee(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.estimateGasFee")}get computedGetQuoteFrom(){return f(this.quoteData,"data.memeModeCommonDexInfo.fromToken",{})}get computedGetQuoteTo(){return f(this.quoteData,"data.memeModeCommonDexInfo.toToken",{})}get computedGetQuoteFromAmount(){return f(this.quoteData,"data.memeModeCommonDexInfo.fromTokenAmount")}get computedGetQuoteFromPrice(){return f(this.quoteData,"data.memeModeCommonDexInfo.fromTokenPrice")}get computedGetQuoteFromSinglePrice(){return x.div(this.computedGetQuoteFromPrice,this.computedGetQuoteFromAmount).toString()}get computedGetQuoteToAmount(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.receiveAmount")}get computedGetQuoteToPrice(){return f(this.quoteData,"data.memeModeSingleChainSwapInfo.toTokenPrice")}get computedGetQuoteToSinglePrice(){return x.div(this.computedGetQuoteToPrice,this.computedGetQuoteToAmount).toString()}get computedQuoteTraceData(){return f(this.quoteData,"data.traceData")}get computedGetQuoteTokenTax(){return f(this.quoteData,"data.memeModeCommonDexInfo.tokenTax","")}get computedCustomQuoteLoading(){return!this.isAutoQuote&&this.quoteLoading}get computedQuoteIsInvalid(){return this.computedQuoteIsError||this.computedQuoteNetworkError||this.computedQuoteLiquidityError||this.computedQuoteIsHoneypot}get computedServiceFeeInfo(){return f(this.quoteData,"data.memeModeCommonDexInfo.serviceFeeInfo",{})}},ue=Ge;ue.INIT_QUOTE_DATA={data:null,detailMsg:"",error_code:"",error_message:"",msg:"",err:null,status:""};s();i();H();var be=class{constructor(){this.loading=!0;this.setLoading=e=>{this.loading=e};this.fromToken=null;this.setFromToken=e=>{this.fromToken=e};this.onSocketUpdateFromToken=e=>{ee(e,this.fromToken)&&this.setFromToken({...this.fromToken,...e})};this.onSocketUpdateFromTokenBalance=e=>{ee(e,this.fromToken)&&this.setFromToken({...this.fromToken,amountNum:e.amountNum})};this.toToken=null;this.setToToken=e=>{this.toToken=e};this.sellValue={value:"0",type:"select",index:0};this.setSellValue=e=>{this.sellValue=e};this.isPercentMode=!0;this.setIsPercentMode=e=>{this.isPercentMode=e};this.sellPresetList=[];this.setSellPresetList=e=>{this.sellPresetList=e};this.currentSellPresetIndex=0;this.setCurrentSellPresetIndex=e=>{this.currentSellPresetIndex=e};this.customSellPreset={};this.setCustomSellPreset=e=>{this.customSellPreset=e};this.sellPresetPageEditState=!1;this.setSellPresetPageEditState=e=>{this.sellPresetPageEditState=e};this.editSellPreset={value:{},index:-1};this.setEditSellPreset=e=>{this.editSellPreset=e};b(this)}get computedSellNumber(){try{let e=Math.min(this.fromToken?.decimals||0,12);if(this.sellValue.type==="custom"&&!this.isPercentMode)return parseFloat(this.sellValue.value||"0");let t=this.fromToken?.amountNum||"0";if(this.sellValue.type==="custom"&&this.isPercentMode)return x.floorMul(x.div(this.sellValue.value||"0",100),t,e);let o=this.currentSellPreset?.amountList?.[this.sellValue.index];return x.floorMul(o,t,e)}catch(e){return g.stuff(e),"0"}}get computedSellTokenSymbol(){return f(this,"fromToken.tokenSymbol")}get computedSellTokenBalanceLessAmount(){return f(this,"fromToken.computedSellNumber")>f(this,"fromToken.amountNum")}get computedSellNumberIsValid(){return new x.BigNumber(this.computedSellNumber).gt(0)}get currentSellPreset(){return this.sellPresetList[this.currentSellPresetIndex]||{}}};s();i();F();var we=class{constructor(){this.searchValue="";this.setSearchValue=e=>{this.searchValue=e};this.defaultSearchLoading=!0;this.setDefaultSearchLoading=e=>{this.defaultSearchLoading=e};this.searchLoading=!1;this.setSearchLoading=e=>{this.searchLoading=e};this.commonSearchState=!1;this.setCommonSearchState=e=>{this.commonSearchState=e};this.normalTokenList=[];this.unsupportedTokenList=[];this.fetchDefaultTokenList=async({chainId:e,computedAccountId:t,userUniqueId:o})=>{this.setDefaultSearchLoading(!0),this.setCommonSearchState(!1);let[a,n]=await A(D.get(st,{params:{chainId:e,accountId:t,userUniqueId:o}}));if(this.searchValue){this.setDefaultSearchLoading(!1);return}a&&(g.stuff(a),this.normalTokenList=[],this.unsupportedTokenList=[]),n&&n.data&&(this.normalTokenList=n?.data||[],this.unsupportedTokenList=[]),this.setDefaultSearchLoading(!1)};this.cancelSearchRef=null;this.fetchSearchTokenList=async({chainId:e,computedAccountId:t,userUniqueId:o})=>{if(!this.searchValue)return;this.cancelSearchRef&&this.cancelSearchRef.abort(),this.setSearchLoading(!0),this.setCommonSearchState(!0),this.cancelSearchRef=j();let[a,n]=await A(D.get(it,{params:{chainId:e,accountId:t,userUniqueId:o,inputContent:this.searchValue},signal:this.cancelSearchRef?.signal}));if(!this.searchValue){this.setSearchLoading(!1);return}a&&!this.isCancel(a)&&(g.stuff(a),this.normalTokenList=[],this.unsupportedTokenList=[]),n&&n.data&&(this.normalTokenList=n?.data?.memeList,n?.data?.memeUnsupportList?this.unsupportedTokenList=n?.data?.memeUnsupportList.map(m=>{let u=m;return u.unSupportedMeme=!0,u}):this.unsupportedTokenList=[]),this.setSearchLoading(!1)};this.highRiskToken=null;this.setHighRiskToken=e=>{this.highRiskToken=e};this.highRiskCallBack=()=>{};this.setHighRiskCallBack=e=>{this.highRiskCallBack=e};b(this)}isCancel(e){return z(e)}};s();i();H();F();var Be=class{constructor(){this.isSwapLoading=!1;b(this,{},{autoBind:!0})}setIsSwapLoading(e){this.isSwapLoading=e}getSolanaUnsignedTx(e){let t=f(e,"calldataParams.enableJito"),o=e?.unsignedTx||"{}";try{return t?JSON.parse(o).array:[JSON.parse(o)]}catch(a){throw new Error(a)}}getJitoTxData(e){let t=new Nt,o=this.getSolanaUnsignedTx(e);return Promise.all(o.map(t.txData))}async onSolanaSwap({data:e,signedTransactions:t,txArray:o}){try{let a=f(e,"calldataParams.enableJito"),n=await Ut({walletId:e.walletId,swapParams:e.calldataParams,signedTransactions:t,txArray:o,enableJito:a,isMemeMode:!0});g.info(y.MEME_SWAP_BROADCAST_PARAMS,{data:{...e,solanaBroadcastParams:n,unsignedTxArray:o,signedTransactions:t}});let[m,u]=await A(It(n));return m&&this.broadcastError(m,{...e,solanaBroadcastParams:n,unsignedTxArray:o,signedTransactions:t,broadcastRes:u}),g.info(y.MEME_SWAP_BROADCAST_SUCCESS,{data:{...e,solanaBroadcastParams:n,unsignedTxArray:o,signedTransactions:t,broadcastRes:u}}),u}catch(a){throw this.broadcastError(a,{...e,unsignedTxArray:o,signedTransactions:t}),new Error(a?.error_message)}}broadcastError(e,t){B.error({title:e?.error_message||C("swaptrade_home_toast_broadcast_failed")}),g.error(y.MEME_SWAP_BROADCAST_ERROR,{data:{error:e,...t}})}};var W=class{constructor(){this.reset=()=>{this.memeCommonStore=new vt(this),this.memeAccountStore=new Rt(this),this.sendTransactionStore=new Qt,this.memeConfigStore=new _e,this.memeBuyStore=new Le,this.memeSellStore=new be,this.memePositionStore=new xe,this.memeQuoteStore=new ue,this.memeTokenListStore=new we,this.memeSwapStore=new Be};this.reset()}static getInstance(){return W.instance||(W.instance=new W),W.instance}},Ko=W;var Mr=({localeData:r,...e})=>{let t=(0,Z.useMemo)(()=>({hooks:Mo(),configs:eo(),components:$t()}),[]);return Z.default.createElement(mt,{localeData:r,isDev:!0,noRemoteData:!0,customRender:o=>o},Z.default.createElement(Xt.Provider,{value:t},Z.default.createElement(Gt.Provider,{value:Ko.getInstance()},Z.default.createElement(Jo,{...e}))))},Hu=V(Mr);export{Hu as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=MemeMode-JFJDZOM5.js.map
