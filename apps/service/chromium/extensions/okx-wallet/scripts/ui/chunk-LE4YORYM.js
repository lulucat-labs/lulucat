import{a as Y}from"./chunk-7K7KPFPU.js";import{a as vo}from"./chunk-AJOCLBXF.js";import{a as bo}from"./chunk-KGQRYI2T.js";import{a as U}from"./chunk-N5KXYLI6.js";import{a as Io}from"./chunk-PEC3MSS4.js";import{d as ho,e as To}from"./chunk-55XCE2ZH.js";import{a as go}from"./chunk-XZD4GKLJ.js";import{a as Co}from"./chunk-24AOYM6E.js";import{a as wo}from"./chunk-IVW4C2AK.js";import{a as yo}from"./chunk-7YQLUBDN.js";import{b as lo}from"./chunk-WRZIZFIL.js";import{d as mo,e as po,h as uo,j as _o}from"./chunk-DPRLOZH7.js";import{B as P}from"./chunk-ZV6IBWDM.js";import{b as fo}from"./chunk-E75DNWM4.js";import{cb as co}from"./chunk-WSXZYUQ4.js";import{b as oo}from"./chunk-JRZXGORL.js";import{l as E,m as X,q as R}from"./chunk-IRNZUYU4.js";import{o as Vo}from"./chunk-AUURQ3HI.js";import{Gb as Q,cc as Uo,m as z,s as F,t as G}from"./chunk-B32MCU7F.js";import{a as Yo}from"./chunk-VLKJDIZ5.js";import{c as g}from"./chunk-AIPMH74P.js";import{Ac as zo,Bc as H,Cc as Fo,Ec as q,Hc as J,Ib as K,Jc as Go,Lc as ao,Pa as O,_a as Oo,_c as Ho,hc as Po,vc as so,xb as ro,yb as Wo,yc as j}from"./chunk-Q23SA7M6.js";import{A as w,G as W,f as I}from"./chunk-E44TZGUB.js";import{da as $,oa as Do}from"./chunk-KBQXBPIW.js";import{O as D,e as io,v as L,w as f}from"./chunk-364XNTHB.js";import{H as Z,T as N}from"./chunk-W7JONHX2.js";import{a as A}from"./chunk-PDSGFBX4.js";import{f as _,o as s,q as a}from"./chunk-FJHLV356.js";s();a();var y=_(A()),eo=_(Uo()),V=_(Vo());Do();D();Ho();Oo();Go();Po();s();a();zo();Fo();var pe=async o=>{let e=[];try{let t=await j(H.postYieldRecommend,o);t?.data&&(e=t.data)}catch(t){console.log(t)}return e},ue=async o=>{try{let e=await so(H.getMarketMap,o);if(e?.data)return e.data}catch(e){console.log(e)}return""},No=async o=>{try{let{data:e={}}=await j(H.getTonMintlessInfo,o);return e}catch(e){console.log(e)}return{}};function Ao(o,e,t="0"){let n={coinAmountDisplay:X(0),currencyAmountDisplay:E(0,{symbol:e}),currencyAmountNoUnitDisplay:E(0,{symbol:e,useApproximate:!1})};if(!o.coinAmount)return n;let{coinAmount:i}=o,r=X(i),c=E(K(i,t),{symbol:e}),m=E(K(i,t),{symbol:e,useApproximate:!1});return n={coinAmountDisplay:r,currencyAmountDisplay:c,currencyAmountNoUnitDisplay:m},n}function $o(o,e,t){return!Array.isArray(o)||!o?.length?[]:(o.forEach(n=>{let{coinAmountDisplay:i,currencyAmountDisplay:r,currencyAmountNoUnitDisplay:c}=Ao(n,e,t?.[n.coinId]||0);n.coinAmountDisplay=i,n.currencyAmountDisplay=r,n.currencyAmountNoUnitDisplay=c}),o)}function Ko(o,e){if(!Array.isArray(o)||!o?.length)return[];let t=e.reduce((n,i)=>(n[i.coinId]=i,n),{});return o.forEach(n=>{let i=n.baseCoinId===0?n.coinId:n.baseCoinId,r=t[i]||{},{imageUrl:c,symbol:m}=r;n.chainImage=c,n.chainSymbol=m}),o}function Zo(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(n=>{let i=ho(e,n.coinId);return n={...n,...i},n})}function jo(o){if(!Array.isArray(o)||!o?.length)return[];let e=[],t=o.filter(n=>+n.coinAmount>0);return t&&t.length>=2&&(e=[{symbol:o[0].symbol,image:o[0].image,chainImage:o[0].chainImage,coinAmount:0,currencyAmount:0,tokenType:"wallet_extension_dashboard_tab_overview",coinId:"",overview:!0}],(F(o[0])||G(o[0]))&&(e[0].coinId=o[0].coinId,e[0].addressType="")),e}function qo(o){if(!Array.isArray(o)||!o?.length)return[];let e=[];return e=o.filter(t=>Boolean(t.localType)),e=$($(e,t=>t.tokenSort),t=>-t.coinAmount),e}function Jo(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(n=>{if(n.overview&&(n.tokenType=e(n.tokenType)),F(n)&&!n.overview){let i=e(q[J[n.addressType]]);n.chainName=i,n.tokenType=i}if(G(n)&&!n.overview){let i=e(q[J[n.addressType]]);n.chainName=i,n.tokenType=i}return!F(n)&&!G(n)&&!n.tokenType&&(n.tokenType=n.chainName),n})}function We({aggregation:o,coinSymbol:e,btcAggregation:t,nearAggregation:n,coin:i}){let r=[],c=po(),m=mo(),T=(0,eo.useSelector)(Q),p=uo(),d=Io(i),C=vo(i),B=yo();return!o&&!t&&!n||(t?r=d:n?r=C:(r=c.find(S=>S.aggregation&&S.symbol===e)?.childrenCoin||[],r=Zo(r,m)),r=Ko(r,B),r=$o(r,T,p),r=qo(r),r=[...jo(r),...r],r=Jo(r,f)),r}function Pe(o,e){let t=To(o,e),n=(0,eo.useSelector)(Q),i=_o(o),r=Ao(t,n,i);return(0,V.useCreation)(()=>({...t,...r}),[t,r])}function ze(o,e,t){let{coinId:n,baseCoinId:i,symbol:r}=o,[c,m]=(0,y.useState)(null),T=(0,V.useLatest)(c),p=(0,y.useCallback)(async()=>{let{status:C,offlineAmount:B,expiredAt:M}=await No({coinId:n,address:e});m(C===1?{desc:f("wallet_extension_airdrop_toast_claim_before_expire_new",{num:B,token:r,time:io(M,{format:"yyyyMMddHHmmss",locale:t})}),closable:!1,showTonMessage:!0}:null)},[n,e]),d=lo("wallet-asset",{onError:()=>{i===O&&T.current?.showTonMessage&&p()},pollingInterval:10*1e3});return(0,y.useEffect)(()=>{i===O&&n&&e&&p()},[i,n,e]),(0,y.useEffect)(()=>{let C=d?.data?.coinId;T.current?.showTonMessage&&C===n&&p()},[n,d]),c}function Fe(o,e){let t="isShowTonTipsAtCoinDetail",[n,i]=(0,y.useState)(null),r=L.get(t);return(0,y.useEffect)(()=>{!r&&e===ao.MNEMONIC&&o?.coinId===O?i({desc:f("wallet_extension_alert_ton_asset"),onClose:()=>{L.set(t,!0),i(null)},closable:!0,showTonMessage:!0}):i(null)},[e,o?.coinId]),n}function xo({canChangeDefaultAddress:o}){let e="firstTimeOpenDetailPage",t=(0,y.useRef)();return(0,y.useEffect)(()=>{let n=L.get(e)!==!1;!o||!t.current||!n||(L.set(e,!1),setTimeout(()=>{t.current?.setVisible(!0)},500),setTimeout(()=>{t.current?.setVisible(!1)},3500))},[o,t]),t}s();a();var u=_(A());var no=_(Z());s();a();var x={refreshWrapper:"_refreshWrapper_7eog8_1",refreshIcon:"_refreshIcon_7eog8_5",hidden:"_hidden_7eog8_11",amount:"_amount_7eog8_14",refreshAnimation:"_refreshAnimation_7eog8_33",refresh:"_refresh_7eog8_1"};var Qo={maxWidth:156,popupStyle:{borderRadius:4},modifiers:[{name:"offset",options:{offset:[86,-10]}},{name:"arrow",options:{padding:({popper:o})=>o.width/2}}]},Xo={14:36,15:32,16:32,17:28,18:28,19:24,20:24,21:24,22:20,23:20,24:20,25:20,26:18,27:18};function Ro({coinSymbol:o,amountDisplay:e,currencyDisplay:t}){let[n,i]=(0,u.useState)("hidden"),r=(0,u.useMemo)(()=>{let p=e.length,d={};return d.fontSize=Xo[p]||40,p>=28&&(d={fontSize:18,display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"}),d},[e]),c=()=>{i("hidden")},m=(0,u.useCallback)(()=>{n!=="loading"&&i("show")},[n]),T=(0,u.useCallback)(()=>{n!=="loading"&&i("hidden")},[n]);return u.default.createElement("div",{className:"coin-detail-balance"},u.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,style:r,onMouseEnter:m,onMouseLeave:T,className:x.refreshWrapper},u.default.createElement(g.Box,{onAnimationEnd:c,className:(0,no.default)(x.refreshWrapper,{[x.refreshAnimation]:n==="success"})},r.textOverflow?u.default.createElement(w,{layerClassName:"coin-detail-balance__tooltip",style:r,title:`${e} ${o}`,type:w.TYPES.neutral,placement:w.DIRECTION.bottom,...Qo},e):e,u.default.createElement(bo,{className:(0,no.default)(x.refreshIcon,{[x.hidden]:n==="hidden"}),status:n,handleRefresh:i}))),t&&u.default.createElement("div",{className:"coin-detail-balance__currency"},t))}var oe=Ro;s();a();var h=_(A()),ko=_(Yo()),Bo=_(Z());D();s();a();var v={"coin-basic-info":"_coin-basic-info_1lgia_1",coinBasicInfo:"_coin-basic-info_1lgia_1","coin-basic-info__symbol":"_coin-basic-info__symbol_1lgia_5",coinBasicInfoSymbol:"_coin-basic-info__symbol_1lgia_5","coin-basic-info__name":"_coin-basic-info__name_1lgia_9",coinBasicInfoName:"_coin-basic-info__name_1lgia_9","coin-basic-info__info":"_coin-basic-info__info_1lgia_15",coinBasicInfoInfo:"_coin-basic-info__info_1lgia_15","coin-basic-info__info-icon":"_coin-basic-info__info-icon_1lgia_24",coinBasicInfoInfoIcon:"_coin-basic-info__info-icon_1lgia_24","coin-basic-info__tag":"_coin-basic-info__tag_1lgia_28",coinBasicInfoTag:"_coin-basic-info__tag_1lgia_28"};function ee(o){o||(o=""),typeof o!="string"&&(o=o.toString());let e=o?.length;return e<=14?"18px":e<=18?"16px":e<=22?"14px":"12px"}function ne({data:o,coinSymbol:e,aggregation:t,coinTag:n}){let i=(0,ko.useHistory)(),r=U(P);if(!o)return null;let c=e&&e!=="null",m=Boolean(t?e:o?.supportShowDetail),T=()=>{if(r({button_clicked:"token_info"}),!o.coinId&&!c)return;let p={aggregation:t};o.coinId&&(p.coinId=o.coinId),c&&(p.coinSymbol=e);let d=`${co}${fo(p)}`;i.push(d)};return h.default.createElement("div",{className:v["coin-basic-info"]},h.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,className:v.coinInfo},h.default.createElement(oo,{size:oo.SIZE.md,className:v["coin-basic-info__symbol"],src:o.image,alt:o.symbol}),h.default.createElement(R.AdaptiveText,{className:v["coin-basic-info__name"],text:o.symbol,ellipsis:{tooltip:!0},autoSize:ee},o.symbol),n&&h.default.createElement(g.Box,{className:v["coin-basic-info__tag"]},h.default.createElement(I,{size:I.SIZE.md,type:I.TYPE.rounded,color:I.COLOR.gray},h.default.createElement(R.Text,{nowrap:!0,style:{color:"inherit",fontSize:"inherit"}},n))),m&&h.default.createElement(w,{placement:w.DIRECTION.topRight,title:f("wallet_extension_cryptodetail_tooltips_token_info")},h.default.createElement(g.Box,{onClick:T,className:v["coin-basic-info__info"]},h.default.createElement(N,{className:(0,Bo.default)("okds-information-circle",v["coin-basic-info__info-icon"])})))))}var te=ne;s();a();var l=_(A());D();Wo();function ie({addressLabel:o,address:e,addressType:t,isDefaultAddress:n,baseCoin:i={},coin:r={},canChangeDefaultAddress:c,openAddressesDialog:m}){let T=xo({canChangeDefaultAddress:c}),[p,d]=Y(),{isNotBackupWallet:C}=wo(),B=Co(),M=ro.includes(r?.localType),S=U(P),Eo=()=>{if(S({button_clicked:"copy_address"}),C){B();return}if(!p){d(e);let to=f("wallet_extension_overview_receive_address_copied");t&&(to=go(f,t,i?.symbol)),W.success({title:to,desc:l.default.createElement("div",{className:"coin-detail-address__copy-message"},e)})}},Mo=()=>C?l.default.createElement("span",{className:"new-coin-detail-address-content-black"},z(e)):M?l.default.createElement("span",null,e):l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{className:"new-coin-detail-address-content-black"},e));return l.default.createElement("div",{className:"new-coin-detail-address-wrapper"},l.default.createElement("div",{className:"new-coin-detail-address",onClick:Eo},l.default.createElement("div",{className:"new-coin-detail-address-title"},f("extension_wallet_address_text_network_address",{network:o}),n&&c&&l.default.createElement(I,{className:"new-coin-detail-address-tag",size:I.SIZE.sm,type:I.TYPE.rounded,color:I.COLOR.grey},f("wallet_extension_btc_tag_default_address"))),l.default.createElement("div",{className:"new-coin-detail-address-inner"},l.default.createElement("div",{className:"new-coin-detail-address-content"},Mo()),l.default.createElement("div",{className:"new-coin-detail-address__icon"},l.default.createElement(N,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px",color:C?"var(--okd-color-content-disabled)":"var(--okd-color-content-primary)"}})))),c&&l.default.createElement("div",{className:"new-coin-detail-address-wrapper__default-address"},l.default.createElement(w,{popupRef:T,placement:w.DIRECTION.topRight,title:f("wallet_extension_hover_change_address_format")},l.default.createElement("div",{onClick:()=>{S({button_clicked:"default_address"}),m()},className:"new-coin-detail-address-wrapper__address-content"},f("extension_wallet_settings_title_set_default"),l.default.createElement(N,{className:"okx-wallet-plugin-arrow-small-right coin-detail__body__overview-address__icon"})))))}var re=ie;s();a();var So=_(A()),Lo=_(Z());function se({className:o,children:e}){return So.default.createElement("div",{className:(0,Lo.default)("coin-detail-overview-container",o)},e)}var ae=se;s();a();s();a();var k=_(A());D();function ce({address:o}){let[e,t]=Y();return k.default.createElement("div",{className:"coin-detail-address"},k.default.createElement("div",{className:"coin-detail-address__text",onClick:()=>{if(!e){t(o);let i=f("wallet_extension_overview_receive_address_copied");W.success({title:i,desc:k.default.createElement("div",{className:"coin-detail-address__copy-message"},o)})}}},z(o),k.default.createElement("div",{className:"coin-detail-address__icon"},k.default.createElement(N,{className:"okx-wallet-plugin-copy",style:{fontSize:"20px"}}))))}var le=ce;export{le as a,oe as b,te as c,pe as d,ue as e,We as f,Pe as g,ze as h,Fe as i,xo as j,re as k,ae as l};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-LE4YORYM.js.map
