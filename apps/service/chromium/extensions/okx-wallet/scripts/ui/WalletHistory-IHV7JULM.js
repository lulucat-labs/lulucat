import{a as Ft,b as Vt,d as Tt,e as Ot}from"./chunk-AIFF3X3F.js";import"./chunk-VUKLCWMB.js";import{a as kt,b as Et}from"./chunk-V62PF5AH.js";import"./chunk-7K7KPFPU.js";import{d as rt}from"./chunk-PDO3D532.js";import"./chunk-YNDUHMHI.js";import"./chunk-QN3BHKDM.js";import"./chunk-LZOTZSLP.js";import"./chunk-4G27AIO2.js";import"./chunk-N5KXYLI6.js";import"./chunk-37XSQI5O.js";import"./chunk-OL23QTWJ.js";import"./chunk-JFV2UG4S.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import"./chunk-GGC2CY5E.js";import"./chunk-UTSCFP3M.js";import"./chunk-VPEGTYK6.js";import"./chunk-MZ62OMSF.js";import"./chunk-HYFMV74Y.js";import"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import"./chunk-B2JJAXTZ.js";import"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import"./chunk-QHPYMFK2.js";import"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import"./chunk-2P7I7CKT.js";import"./chunk-52ESRIYZ.js";import"./chunk-ELJZY4AU.js";import"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import"./chunk-YTZNCB6W.js";import"./chunk-IZDAKZMI.js";import{a as bt}from"./chunk-GZ2ZKPO5.js";import{a as V,c as yt,d as z,e as G,f as D,h as Ct,i as N,j as St,k as K,l as Dt,r as tt,s as et,u as Nt,v as It,w as ot,x as wt}from"./chunk-46N6STYV.js";import{b as Lt}from"./chunk-KABAXRU7.js";import"./chunk-ICS7QRDT.js";import"./chunk-2LFRM3KT.js";import"./chunk-GGZ73X5S.js";import"./chunk-IEUJSLGG.js";import"./chunk-QIV5EJPL.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-4X3SKD2N.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import"./chunk-7SQ3GPJR.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import"./chunk-E75DNWM4.js";import{a as Bt}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import"./chunk-WSXZYUQ4.js";import"./chunk-JRZXGORL.js";import{q as I}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import{f as xt}from"./chunk-DZHQUYHS.js";import{o as st}from"./chunk-AUURQ3HI.js";import{cc as T,ja as gt,na as _t}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as oe}from"./chunk-VLKJDIZ5.js";import{Z as dt,ba as ee}from"./chunk-N4B7HQY5.js";import"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import"./chunk-XRF6BZHR.js";import"./chunk-OWU5GWTN.js";import"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as x}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{A as J,C as ht,L as Q,o as P,w as ut}from"./chunk-E44TZGUB.js";import"./chunk-KBQXBPIW.js";import{O as F,w as _}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as te,T as ft}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as L}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-KHHBU7RQ.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as n,o as e,q as o}from"./chunk-FJHLV356.js";e();o();var s=n(L()),Z=n(T()),qt=n(oe()),Xt=n(st());F();ee();e();o();var S=n(L()),Y=n(T());e();o();var j=n(L());F();e();o();var U={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var y=n(L());var At=n(te());F();var jt=n(st());var se={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},vt="hasReadTxHistoryFilterEntryTooltip",re=()=>{try{return localStorage.getItem(vt)??!1}catch{return!0}},ie=()=>{try{localStorage.setItem(vt,!0)}catch(r){console.error(r)}};function le({onClick:r}){let t=(0,y.useRef)();(0,y.useEffect)(()=>{re()||(t.current.setVisible(!0),ie())},[]);let l=a=>{t.current=a},i=(0,y.useRef)();return(0,jt.useClickAway)(()=>{t.current.setVisible(!1)},i),y.default.createElement(J,{popupRef:l,placement:J.DIRECTION.bottomRight,title:_(se.tooltip)},y.default.createElement(x.Box,{ref:i},y.default.createElement(ft,{onClick:r,className:(0,At.default)("okds-filter",U.filter)})))}var Ht=le;e();o();var w=n(L());F();e();o();var O={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var W=n(L());function ne({onChange:r,reject:t}){let[l,i]=(0,W.useState)(t);return(0,W.useEffect)(()=>{i(t)},[t]),{currentReject:l,onChangeReject:d=>h=>{let m=t,c={...m,[d]:h};i(c),yt(d,h).then(g=>{g?(i(c),r?.(c)):i(m)}).catch(()=>{i(m)})}}}var Rt=ne;var Mt={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},ae=r=>{let{currentReject:t,onChangeReject:l}=Rt(r);return w.default.createElement(x.Box,{className:O.root},w.default.createElement(x.Box,{className:O.textBox},w.default.createElement(I.Text,{warp:!0,strong:!0,size:I.SIZE.md,className:O.text},_(Mt.hideValuelessNftTittle)),w.default.createElement(I.Text,{warp:!0,size:I.SIZE.xs,className:O.text,type:I.TYPE.secondary},_(Mt.hideValuelessNftSubtitle))),w.default.createElement(ht,{onChange:l(V.hideValuelessNft),checked:t?.[V.hideValuelessNft]}))},Pt=ae;e();o();var A=n(L()),zt=n(T());function ce(){let r=(0,zt.useDispatch)(),[t,l]=(0,A.useState)({[V.hideValuelessNft]:!1}),[i,a]=(0,A.useState)(!1),d=()=>z().then(g=>{l(g)}).catch(()=>{});(0,A.useEffect)(()=>{d()},[]);let h=()=>{a(!0)},m=()=>{a(!1)};return{reject:t,onChangeShowValueLess:g=>{l(g),r(D({})),setTimeout(()=>{m()},200)},openDialog:h,closeDialog:m,showRejectDialog:i}}var Kt=ce;function me(){let{reject:r,onChangeShowValueLess:t,openDialog:l,closeDialog:i,showRejectDialog:a}=Kt();return j.default.createElement(x.Box,{className:U.root},j.default.createElement(Ht,{onClick:l}),j.default.createElement(P,{title:_("wallet_extension_history_title_filter"),visible:a,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},j.default.createElement(Pt,{onChange:t,reject:r})))}var Ut=me;e();o();var f=n(L()),v=n(T());F();e();o();var b={"display-area":"_display-area_tg5mp_1",displayArea:"_display-area_tg5mp_1",container:"_container_tg5mp_4","chips-group":"_chips-group_tg5mp_7",chipsGroup:"_chips-group_tg5mp_7","chips-content":"_chips-content_tg5mp_11",chipsContent:"_chips-content_tg5mp_11","chips-item":"_chips-item_tg5mp_14",chipsItem:"_chips-item_tg5mp_14"};var Wt=()=>{let r=(0,v.useSelector)(St),{groupType:t}=(0,v.useSelector)(N),[l,i]=(0,f.useState)(!1),a=(0,f.useMemo)(()=>r?.map(({groupType:c,groupTypeText:g})=>({label:g,value:c}))||[],[r]),d=(0,f.useMemo)(()=>a.find(c=>c.value===t)?.label,[t,a]),h=(0,v.useDispatch)(),m=c=>{i(!1),h(D({groupType:c}))};return f.default.createElement(f.default.Fragment,null,Boolean(a.length)&&f.default.createElement("div",{className:b.displayArea,onClick:()=>{i(!0)}},f.default.createElement(kt,{isShowOptions:l,selectedOption:{label:d}})),f.default.createElement(P.Action,{onClose:()=>{i(!1)},visible:l,maskClosable:!0,title:_("wallet_extension_hide_drawer_types")},f.default.createElement("div",{className:b.container},f.default.createElement(Q.Group,{size:Q.SIZE.lg,className:b.chipsGroup,innerClassName:b.chipsContent,labelClassName:b.chipsItem,options:a,value:t,onChange:m}))))};e();o();var it={"retina-border-basic":"_retina-border-basic_13yd7_1",retinaBorderBasic:"_retina-border-basic_13yd7_1",root:"_root_13yd7_29",left:"_left_13yd7_37"};function pe(){let r=(0,Y.useDispatch)(),t=(0,Y.useSelector)(N);return S.default.createElement(Et,{valueKey:"chainId",align:ut.DIRECTION.left,value:t.chainId,searchable:!0,onChange:l=>{r(wt("")),r(D({chainId:l,coinId:void 0}))}})}function fe(){return S.default.createElement(x.Box,{className:it.root},S.default.createElement(x.Box,{className:it.left},S.default.createElement(pe,null),S.default.createElement(Wt,null)),S.default.createElement(Ut,null))}var Yt=fe;e();o();var u=n(L()),C=n(T()),B=n(st());var ue=({txData:r,setTxData:t,explorerUrl:l,hasMoreData:i=!1,hasInitData:a})=>{let d=(0,C.useDispatch)(),h=(0,C.useSelector)(N),m=(0,C.useSelector)(Ct),c=(0,C.useSelector)(xt),g=(0,C.useSelector)(Dt),H=(0,C.useSelector)(K),[R,q]=(0,u.useState)(null),{run:k}=(0,B.useDebounceFn)(()=>{d(G({...H}))},{wait:200}),X=(0,u.useCallback)(()=>{d(G({...H},{scrollLoad:!0,hasMoreData:i,hasInitData:a}))},[h,i,a]);Ot({scrollContainer:R},k),(0,B.useInfiniteScroll)(X,{target:R,threshold:150});let[M,$]=(0,u.useMemo)(()=>Ft(m,c),[m,c]),lt=(0,B.useMemoizedFn)(()=>{t(null)});return u.default.createElement(u.default.Fragment,null,u.default.createElement(Tt.HistoryList,{completedList:$,pendingList:M,isLoading:g,onClick:t,onRepeat:k,onContainer:q,explorerUrl:l}),u.default.createElement(Vt,{visible:!!r,params:r,onRefresh:k,onClose:lt}))},Zt=(0,u.memo)(ue);e();o();var he=()=>{let r=(0,qt.useHistory)(),t=(0,Z.useDispatch)(),l=(0,Z.useSelector)(K),i=Lt()?.stringDates?.[0],[a,d]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null),c=(0,Xt.useLatest)(h),[g,H]=(0,s.useState)([]),[R,q]=(0,s.useState)(!1),[k,X]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let $t=[(async()=>{let E=await z()??{};return await gt({startTime:new Date(`${i} 00:00:00`).getTime(),...l,hideRisk:E?.hideValuelessNft??!0})})(),_t()];Promise.all($t).then(([E,nt])=>{let Jt=(ct,mt)=>{let pt=ct.length,Gt=mt?ct[pt-1]?.rowId:"";t(Nt(Gt)),t(et(!1)),q(mt),X(pt>0)},at=E.content||[],Qt=E.hasViewMore;t(tt(at)),t(ot(nt)),H(E?.explorerUrl||[]),Jt(at,Qt)}).catch(()=>{t(tt([])),t(ot([])),t(et(!1))}).finally(()=>{d(!1)})},[]);let M=()=>{r.goBack(),t(It()),t(dt())},$=(0,s.useCallback)(()=>{c.current?m(null):M()},[h]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(rt.PageContainer,{className:"tx-history__container"},s.default.createElement(Bt,{bordered:!1,sticky:!1,className:"tx-history__navigator",title:_("wallet_extension_header_text_history"),onBack:M,closeable:!1,customizeBackFn:$,asPage:!0}),a?s.default.createElement(bt,null):s.default.createElement(s.default.Fragment,null,s.default.createElement(rt.FilterContainer,null,s.default.createElement(Yt,null)),s.default.createElement(Zt,{txData:h,setTxData:m,explorerUrl:g,hasMoreData:R,hasInitData:k}))))},fs=(0,s.memo)(he);export{fs as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-IHV7JULM.js.map
