import{a as ol}from"./chunk-2USO6FEB.js";import{a as nl}from"./chunk-EDVE6I6Q.js";import{a as te,j as el,l as tl,m as rl}from"./chunk-2AM235ZQ.js";import{a as Xi,b as Ji,c as Qa,d as Qi}from"./chunk-FR4BVCBN.js";import{a as Zi}from"./chunk-34DPDPSQ.js";import{a as Vi}from"./chunk-5NBFHNE4.js";import{c as Ki}from"./chunk-7MFDW5JQ.js";import{b as Wi,k as Ui}from"./chunk-LEEK32ZR.js";import{b as ko,c as Ja,d as ji}from"./chunk-37XSQI5O.js";import"./chunk-JFV2UG4S.js";import{a as Lo,b as Mi}from"./chunk-4OPVNP3G.js";import"./chunk-GGC2CY5E.js";import{b as Po}from"./chunk-JKSK4TNM.js";import"./chunk-UTSCFP3M.js";import{a as ki}from"./chunk-VPEGTYK6.js";import"./chunk-MZ62OMSF.js";import"./chunk-VP3JRWXQ.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import{a as Ri,f as zi}from"./chunk-B2JJAXTZ.js";import{a as zn,m as Li,p as Ct,s as hn,t as Yr}from"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import"./chunk-QHPYMFK2.js";import{d as er,e as Ii}from"./chunk-F4XZWNG2.js";import{a as Pi}from"./chunk-G6PPKZHQ.js";import"./chunk-2P7I7CKT.js";import{a as Yi,b as Ro,c as tr,d as Gr,e as Gi,f as yt,g as qi,h as $i}from"./chunk-FEQ63JJ5.js";import{a as Hi}from"./chunk-GYEKBYOL.js";import"./chunk-52ESRIYZ.js";import"./chunk-ELJZY4AU.js";import{d as Mo}from"./chunk-4L5OPDYI.js";import"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import{a as Oi}from"./chunk-7YQLUBDN.js";import{c as Ve}from"./chunk-WN5ZMYXK.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-3OCLT7XJ.js";import"./chunk-MIHA7WB3.js";import{b as Qe,c as bo,d as xi}from"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import{b as _o}from"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import{A as ui,B as ii,C as Fo,D as li,E as Ft,F as ci,G as fi,H as di,I as mi,J as pi,a as Ur,b as de,c as Ye,d as ju,e as Wu,f as Uu,g as Hu,h as Yu,i as Gu,j as qu,k as $u,l as Vu,m as Ku,n as Zu,o as it,p as Xu,q as Ju,r as Qu,s as ei,t as ti,u as ri,v as ni,w as Ga,x as oi,y as ai,z as si}from"./chunk-37OUAJ4J.js";import{a as Je}from"./chunk-J2TPGTMF.js";import"./chunk-ICS7QRDT.js";import{b as No}from"./chunk-IEUJSLGG.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import{g as Ni}from"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-4X3SKD2N.js";import{e as Ai,k as Oo,l as Si,r as _i,s as bi}from"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import{a as Io}from"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import{H as Iu,I as Pu,N as Lu,Y as ku,ha as Mu,i as Ou}from"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import"./chunk-HZPID3WW.js";import{a as pn,d as Ti}from"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import{d as To}from"./chunk-ZZLPMRQY.js";import{h as Fi,k as yi}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import"./chunk-E75DNWM4.js";import"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import{a as wi}from"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{Ja as Hr,Ka as Ln,La as kn,Ma as Mn}from"./chunk-WSXZYUQ4.js";import{b as Ge}from"./chunk-JRZXGORL.js";import{m as Rn,q as xe}from"./chunk-IRNZUYU4.js";import{a as Gm}from"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{g as qm,m as $m,o as Ae}from"./chunk-AUURQ3HI.js";import{Eb as Ka,I as hi,Ja as yr,M as gi,Ta as Ei,W as Di,cc as Dt,m as xo,ya as Ci}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as Xa}from"./chunk-VLKJDIZ5.js";import{ca as Ru,da as wo,ea as Ua,fa as Ha,ga as Ym}from"./chunk-N4B7HQY5.js";import"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{b as Za}from"./chunk-XRF6BZHR.js";import"./chunk-OWU5GWTN.js";import{da as Va,ia as Qt,o as vi,q as qa,v as $a,x as yo}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import{g as So}from"./chunk-ELX2GHLL.js";import{c as y}from"./chunk-AIPMH74P.js";import{a as Bi}from"./chunk-DJDG7W5Q.js";import{$a as Fu,Ac as On,Ba as wr,Bc as Jt,Cc as In,Ea as Co,Ga as cn,Ha as Eo,Jb as yu,Kb as Bo,Lb as fn,Mc as zu,Pa as Ao,Rb as Tu,Tc as Pn,Ub as _n,Wb as Su,_a as je,_c as Ya,a as iu,aa as Ce,ac as za,b as Wm,ea as Ee,hc as dn,ia as se,ja as ke,ra as ve,ua as xu,ya as wu,yb as Um,yc as Xt}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{A as Ht,G as Wa,N as Nu,b as _u,c as bn,g as Nn,o as Wr,q as ye,r as Fr,w as ja,x as mn,z as bu}from"./chunk-E44TZGUB.js";import{D as mu,F as pu,K as hu,P as ln,Q as vo,R as vu,U as gu,Y as Du,Z as Cu,_ as Eu,da as Au,f as lu,ga as go,ja as Bu,k as cu,ka as Do,m as fu,oa as st,v as du,y as Sn}from"./chunk-KBQXBPIW.js";import{O as he,P as Hm,l as H,w as T}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as $e,T as mt,Z as Ut,ca as ee}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as Q}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-KHHBU7RQ.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{c as uu,f as _,h as Wt,o as g,q as D}from"./chunk-FJHLV356.js";var Sl=uu((KE,Tl)=>{"use strict";g();D();Tl.exports=lp;var Fl="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",yl="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",up=new RegExp("^[^"+yl+"]*["+Fl+"]"),ip=new RegExp("^[^"+Fl+"]*["+yl+"]");function lp(t){return t=String(t||""),up.test(t)?"rtl":ip.test(t)?"ltr":"neutral"}});var kc=uu(or=>{"use strict";g();D();Object.defineProperty(or,"__esModule",{value:!0});var kv=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),vs={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Mv={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:kv?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Oc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(Kn=1;Kn<20;Kn++)Oc["f"+Kn]=111+Kn;var Kn;function ia(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(s){return Ic(s,e)}),o=function(u){return n.some(function(l){return Pc(l,u)})},a=r==null?o:o(r);return a}function Rv(t,e){return ia(t,e)}function zv(t,e){return ia(t,{byKey:!0},e)}function Ic(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var o=t.split("+"),a=o.length;for(var s in vs)n[vs[s]]=!1;var u=!0,l=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(u=(v=f.next()).done);u=!0){var p=v.value,h=p.endsWith("?")&&p.length>1;h&&(p=p.slice(0,-1));var m=gs(p),i=vs[m];(a===1||!i)&&(r?n.key=m:n.which=Lc(p)),i&&(n[i]=h?null:!0)}}catch(C){l=!0,c=C}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}return n}function Pc(t,e){for(var r in t){var n=t[r],o=void 0;if(n!=null&&(r==="key"&&e.key!=null?o=e.key.toLowerCase():r==="which"?o=n===91&&e.which===93?91:e.which:o=e[r],!(o==null&&n===!1)&&o!==n))return!1}return!0}function Lc(t){t=gs(t);var e=Oc[t]||t.toUpperCase().charCodeAt(0);return e}function gs(t){return t=t.toLowerCase(),t=Mv[t]||t,t}or.default=ia;or.isHotkey=ia;or.isCodeHotkey=Rv;or.isKeyHotkey=zv;or.parseHotkey=Ic;or.compareHotkey=Pc;or.toKeyCode=Lc;or.toKeyName=gs});g();D();var Rr=_(Q()),Ma=_(Dt()),sn=_(Xa());g();D();g();D();var jn=_(Dt()),al=_(Q()),sl=_(Ae()),Nt=(t,e)=>r=>{let n=(0,jn.useSelector)(t),o=(0,jn.useDispatch)(),a=u=>{e&&o(e(u))},s=(0,sl.useMemoizedFn)(a);return(0,al.useEffect)(()=>{if(r===void 0)return;let u=typeof r=="function"?r():r;s(u)},[r,s]),[n,a]},ul=t=>()=>{let e=(0,jn.useDispatch)();return(...n)=>{t&&e(t(...n))}};var qe=Nt(Hu,ni),le=Nt(Yu,ri),zo=Nt(Gu,Fo),jo=Nt(qu,li),ut=Nt(Wu,ti),Wo=Nt(Qu,ui),k0=Nt(ei,ii),we=Nt($u,oi),il=ul(fi),lt=Nt(Ku,ai),ct=Nt(Zu,si),vn=Nt(Uu,ci);g();D();var Dl=_(Q()),Go=_(Dt()),Tr=_(Ae());he();g();D();var es=_(Ae());he();Ya();je();In();On();var Vm="8000",Uo=()=>{let t=Ct();return(0,es.useMemoizedFn)(async({coinId:e,address:r,inputData:n})=>{let o=await t({coinId:e,address:r,fromAddr:r,scenario:vi.SCENARIO_SEND_COIN}),a=o,{gasUnitPrice:s}=o;if(n){let{data:{gasLimit:l}}=await Xt(Jt.getAptosGasLimit,{inputData:n});a=l}else a=Vm;let u=H.mul(s,a);return{...o,networkFee:u,maxGasAmount:a,gasUnitPrice:s}})},ll=()=>{let t=hn({localType:Ee});return(0,es.useMemoizedFn)(async({to:e,from:r,amount:n,baseCoinId:o,metaAddress:a,sequenceNumber:s,maxGasAmount:u,gasUnitPrice:l,protocolType:c,chainId:f,expirationTimestampSecs:v,tyArg:p})=>{let m={base:{sequenceNumber:s,chainId:f,maxGasAmount:u,gasUnitPrice:l,expirationTimestampSecs:v}},i={amount:n,recipientAddress:e};return o===0&&(m.type=yo.TRANSFER,m.data=i),o!==0&&c===Pn.APTOS_FUNGIBLE_TOKEN&&(m.type=yo.FUNGIBLE_ASSET_TRANSFER,m.data={...i,fungibleAssetMetadataAddress:a}),o!==0&&c===Pn.APTOS_TOKEN&&(m.type=yo.TOKEN_TRANSFER,m.data={...i,tyArg:p}),await t({params:m,fromAddr:r})})};g();D();var Wn=_(Ae());he();Ya();je();var cl=()=>(0,Wn.useMemoizedFn)(async({to:t,toes:e,from:r,value:n,values:o,budget:a,gasPrice:s,inputCoins:u,tokenInputCoins:l,baseCoinId:c})=>{let f=e?.length?e:[t],v=o?.length?o:[n],p=u.map((i={})=>{let{digest:C,version:E,objectId:A}=i;return{digest:C,version:E,objectId:A}}),h=new Ui;if(h.setGasPrice(s),h.setGasPayment(p||[]),h.setSender(r),a&&h.setGasBudget(a),c===0){let i=h.splitCoins(h.gas,v);f.forEach((C,E)=>{h.transferObjects([i[E]],h.pure.address(C))})}else if(l?.length>1){let i=l.slice(1).map(A=>h.object(A.objectId)),C=h.object(l[0].objectId);h.mergeCoins(C,i);let E=h.splitCoins(C,[n]);h.transferObjects([E],h.pure.address(t))}else{let i=h.splitCoins(h.object(l[0].objectId),[n]);h.transferObjects([i],h.pure.address(t))}let m=Wi(await h.build({client:Zi}));return{tx:h,txBytes:m}}),Ho=()=>{let t=Ct(),e=cl();return(0,Wn.useMemoizedFn)(async({to:r,from:n,value:o,values:a,toes:s,coinId:u,baseCoinId:l})=>{let c=a?.length?a?.reduce((h,m)=>H.add(h,m),0):o,f=await t({coinId:u,address:n,value:c,toAddr:s?.[0]||r});return(await e({...f,to:r,toes:s,from:n,value:o,coinId:u,values:a,baseCoinId:l}))?.tx?.blockData?.gasConfig?.budget||"0"})},fl=()=>{let t=cl(),e=Ct(),r=hn({localType:ke});return(0,Wn.useMemoizedFn)(async({to:n,toes:o,values:a,from:s,coinId:u,value:l,baseCoinId:c})=>{let f=a?.length?a?.reduce((C,E)=>H.add(C,E),0):l,v=await e({value:f,coinId:u,address:s,toAddr:o?.[0]||n}),{tx:p,txBytes:h}=await t({...v,value:l,coinId:u,to:n,toes:o,from:s,values:a,baseCoinId:c}),i=await r({params:{type:"raw",data:h},fromAddr:s});return{tx:p,txBytes:h,signedTx:i}})},dl=t=>{let e=yi(),r=Fi(),n=Yr({coinId:t,txSource:zu.NORMAL});return(0,Wn.useMemoizedFn)(async({tx:o,to:a,from:s,txBytes:u,coinAmount:l,signedTx:c,walletId:f})=>{let{signature:v,hash:p}=c||{},h=e(f)||r;return await n({tx_bytes:u,signatures:[v],request_type:"WaitForEffectsCert"},{txHash:p,coinAmount:l,accountId:f,fromAdr:s,toAdr:a,walletType:h?.serverWalletType,serviceCharge:o?.blockData?.gasConfig?.budget||"0"})})};je();dn();g();D();var Yo=_(Q()),hl=_(Dt()),rr=_(Ae());st();je();g();D();var Un=_(Q()),ml=_(Dt());je();var Yt=()=>{let{isRpcMode:t}=(0,ml.useSelector)(To);return t},Km=[Ee,Ce,ke,se,ve],Zm=()=>{let t=Io(),e=Oi(),r=(0,Un.useMemo)(()=>t.filter(({appBaseChain:n,localType:o})=>n===xu?.ETHEREUM?!0:Km.includes(o)),[t]);return(0,Un.useMemo)(()=>r.map(({image:n,chainName:o,localType:a,...s})=>{let u=e.find(l=>l.localType===a);return{...u||s,chainName:o,icon:n,chainId:[Ee,Ce,ke,se,ve].includes(a)?Za(s?.chainId):u?.realChainIdHex||Za(s?.chainId)}}),[e,r])},Xm=()=>{let{rpcNetworks:t}=Mo();return(0,Un.useMemo)(()=>Yi(t),[t])},pl=()=>{let t=Yt(),e=Xm(),r=Zm();return(0,Un.useMemo)(()=>t?e:r,[t,e,r])};var Jm=()=>{let t=(0,hl.useSelector)(Ai);return(0,Yo.useCallback)(e=>{let r=t.filter(n=>n.chainId===e&&!n.isDeleted);return Do(r,"address")},[t])},Qm=(t,e)=>{let r=Yt(),{data:n,reload:o,loadingMore:a,listRef:s}=Ki({aggregation:!1,chainIds:[Ro(t)],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){return r||!t?{list:[],pageNo:0,isNoMore:!0}:!1}});return{list:(0,rr.useCreation)(()=>n?.list??[],[n?.list]),listRef:s,loadingMore:a,refreshDom:o}},vl=(t,e)=>{let{chainId:r,localType:n}=t||{},[o,a]=(0,Yo.useState)([]),s=Yt(),u=(0,rr.useDebounce)(e,{wait:300}),{list:l,listRef:c,refreshDom:f,loadingMore:v}=Qm(r,u),p=Jm(),h=Ct(),m=pn(se);(0,rr.useAsyncEffect)(async()=>{if(n===se){let{coinFeeList:C}=await h({coinId:cn,address:m,fromAddr:m,toAddr:m,value:"0"});a(C)}},[n]);let i=(0,rr.useCreation)(()=>{if(n===se&&o?.length){let C=o.map(({coinId:A})=>A);return l.filter(({coinId:A})=>mu(C,A)).map(A=>{let{tokenId:w,originSymbol:F}=o.find(S=>S?.coinId===A?.coinId);return{...A,tokenId:w,originSymbol:F}})}return l},[n,l,o]);return(0,rr.useCreation)(()=>s?{list:p(r)??[],listRef:null,refreshDom:null,loadingMore:!1}:{list:i,listRef:c,refreshDom:f,loadingMore:v},[r,i,l,c,v,s,p])},Hn=()=>{let t=Yt(),e=bi(),r=Ni();return(0,rr.useMemoizedFn)(async({coinId:n,chainId:o,contractAddress:a})=>{if(t)try{return(await e(o,[a||""]))?.[0]?.price||0}catch{return 0}return r?.[n]?.coinToUSDRate||"0"},[t])};g();D();var gl=_(Q());var qr=t=>{let[e]=qe(),r=t||e?.rpcUrl;return(0,gl.useCallback)(async()=>r?await Si(r):{},[r])};var qo=t=>{let[e]=qe(),r=t||e?.rpcUrl;return tl(r)};var ep=(t,e)=>{let[r]=le(),{ready:n=!0,onSuccess:o}=e||{},a=rl(t);(0,Tr.useRequest)(async()=>{let s=await a(r?.chainId);return{isSupportEip1559:s?.[0]?.isSupportEip1559||!1,gasPriceLevels:s}},{onSuccess:o,pollingInterval:7e3,ready:!!r?.chainId&&!!n})},Cl=()=>{let[t]=le(),[e]=qe(),r=(0,Go.useDispatch)(),[n]=Wo(),[o,a]=(0,Dl.useState)([]),[,s]=vn(),u=pn(t?.localType),l=u&&Qe(u,t?.localType);return ep(e?.rpcUrl,{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:c,gasPriceLevels:f})=>{s(c),r(Ga(f)),a(f)}}),ki({coinId:t?.coinId,chainId:t?.chainId,address:l},{ready:!!t?.coinId&&![Ee,Ce,ke,se,ve].includes(t?.localType)&&n===Ur.CONFIRM,onSuccess:c=>{let{gasPrice:f,needExtFee:v}=c;r(mi(v)),s(f?.supportEip1559||!1),a(Ja(f)),r(Ga(Ja(f)))}}),o};var $o=()=>{let t=er(wr,{withPrice:!0}),e=Ct(),r=Li();return(0,Tr.useMemoizedFn)(async({from:n,to:o,coinId:a,chainId:s})=>{let u=await e({coinId:a,toAddr:o,address:n,fromAddr:n})||{},l=await r({from:n,chainId:s,coinId:a,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[Va.TX_ANALYZE]}),{simulateTransactionResultList:c}=l?.[Va.TX_ANALYZE]||{},{unitGasLimit:f}=c[0]||{},{fee:v,feelimit:p,computeUnitPrice:h,rent:m,solRent:i}=u;if(v){let{priorityFee:C,priorityGasPrice:E,priorityGasLimit:A}=Ei(p,h,f),w=H.add(v,C),F=H.div(w,10**t?.decimals);return{rent:m,solRent:i,networkFee:F,networkFeeInt:w,computeUnitLimit:A,computeUnitPrice:E,networkFeeMarket:H.mul(F,t?.currencyPrice)}}return{estimateFailed:!0}})},El=()=>{let t=er(Eo,{withPrice:!0}),e=Ho();return(0,Tr.useMemoizedFn)(async({coinId:r,from:n,to:o,value:a,baseCoinId:s})=>{let u=await e({to:o,from:n,value:a,coinId:r,baseCoinId:s}),l=H.div(u,10**t?.decimals);return{networkFee:l,networkFeeInt:u,networkFeeMarket:H.mul(l,t?.currencyPrice)}})},Vo=t=>{let e=er(t||cn,{withPrice:!0});return(0,Tr.useMemoizedFn)(async({to:r,chainId:n,contractAddress:o})=>{let a={address:r,type:"Transfer",contractAddress:o,chainId:n||e?.chainId},u=(await Vi(a))?.data?.fee||"0",l=H.div(u,10**(e?.decimals||0));return{networkFee:l,networkFeeInt:u,networkFeeMarket:H.mul(l,e?.currencyPrice)}})},Al=()=>{let t=er(Co,{withPrice:!0}),e=Uo();return(0,Tr.useMemoizedFn)(async({coinId:r,address:n,inputData:o})=>{let{networkFee:a}=await e({coinId:r,address:n,inputData:o}),s=H.div(a,10**t?.decimals);return{networkFee:s,networkFeeInt:a,networkFeeMarket:H.mul(s,t?.currencyPrice)}})},Ko=()=>{let t=(0,Go.useDispatch)(),e=Qi(),r=er(Ao,{withPrice:!0}),[n]=le(),o=Ct();return(0,Tr.useMemoizedFn)(async({baseCoinId:a,coinId:s,chainId:u,from:l,to:c,tokenAddress:f,decimals:v,amount:p,sendMode:h=yr.CARRY_ALL_REMAINING_BALANCE,memo:m})=>{let i=await o({coinId:s,address:l,fromAddr:l,toAddr:c,value:"0"}),C=await e(i,n?.baseCoinId);if(t(pi(C)),C.getCustomPayloadInfoRpcError)return{networkFee:0,networkFeeInt:0,networkFeeMarket:0,signInfo:C,gasLimitInfo:null,bodyParams:null};let E={to:c,seqno:C?.nonce,decimal:v,amount:p,memo:m,expireAt:Xi(C?.ttl)};a===0?E={...E,type:Qa.TRANSFER,sendMode:h}:(E={...E,type:Qa.JETTON_TRANSFER,fromJettonAccount:C?.fromJettonAccount,sendMode:yr.PAY_GAS_SEPARATELY+yr.IGNORE_ERRORS},C?.customPayload&&(E={...E,customPayload:C?.customPayload,stateInit:C?.stateInit}));let A=await Ji({fromAddress:l,body:E}),{data:w}=await gi({address:l,tokenAddress:f,chainId:u,coinId:s,value:"0",inputData:JSON.stringify(A)}),{invokeNotificationFee:F="0",gasLimit:S="0"}=w,k=a===0?S:Bo(S,F),P=H.div(k,10**(r?.decimals||0));return{networkFee:P,networkFeeInt:k,networkFeeMarket:H.mul(P,r?.currencyPrice),signInfo:C,gasLimitInfo:w,bodyParams:E}})};je();dn();g();D();var $t=_(Q());he();g();D();var tp={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},X=tp;g();D();var dr=_(Q());var Zo=_($e());g();D();g();D();var Yn=_(Q());g();D();var Bl=_(Xa());function rp(){let t=(0,Bl.useHistory)(),[e,r]=Wo(),n=(h,m)=>(i=!0)=>{e!==m&&r(m),i?t.replace(h):t.push(h)},o=h=>t.location.pathname===h,a=n(Hr,Ur.SELECT_TYPE),s=n(Ln,Ur.ADD_ADDRESS),u=n(kn,Ur.CONFIRM),l=n(Mn,Ur.SEND),c=o(Hr),f=o(Ln),v=o(kn),p=o(Mn);return{isConfirmPage:v,isHomePage:c,isSendPage:p,isAddressPage:f,gotoAddressPage:s,gotoConfirmPage:u,gotoSendPage:l,gotoHomePage:a}}var Et=rp;function np(){let[t]=qe(),[e]=le(),[r]=we(),{gotoHomePage:n,gotoAddressPage:o,isConfirmPage:a,isSendPage:s,isAddressPage:u,isHomePage:l}=Et(),c=(0,Yn.useCallback)(()=>{!t&&!e?.symbol&&!l&&n()},[t,e,l,n]),f=(0,Yn.useCallback)(()=>{r.length<=0&&!u&&o()},[r,u,o]);(0,Yn.useLayoutEffect)(()=>{u?c():(a||s)&&(c(),f())},[c,f,u,a,s])}var xl=np;function op(){return xl(),null}var wl=op;g();D();var $r={root:"_root_189ao_1",container:"_container_189ao_6",okgLayout:"_okgLayout_189ao_10",headerBox:"_headerBox_189ao_32",header:"_header_189ao_32",footer:"_footer_189ao_125"};function ap({children:t}){return dr.default.createElement(y.Box,{className:$r.footer},t)}function sp({children:t,footer:e,useOkg:r=!0,headerProps:n={}}){let o=r?dr.default.Fragment:y.Box;return dr.default.createElement(y.FlexBox,{className:$r.root,direction:y.DIRECTION.vertical},dr.default.createElement(y.Container,{className:(0,Zo.default)($r.container,r&&$r.okgLayout)},dr.default.createElement(o,{className:(0,Zo.default)(!r&&$r.headerBox)},dr.default.createElement(nl,{...n,className:(0,Zo.default)($r.header,n.className)})),t),dr.default.createElement(ap,null,e),dr.default.createElement(wl,null))}var Sr=sp;g();D();var Cr=_(Q()),Pf=_($e());he();g();D();var be=_(Q());g();D();var Ts=_(Sl()),Zc=_(qm()),Xc=_($m()),O=_(Q());g();D();g();D();function _l(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function bl(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function ts(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return bl(r.overflowY,e)||bl(r.overflowX,e)||function(n){var o=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(t)}return!1}function Xo(t,e,r,n,o,a,s,u){return a<t&&s>e||a>t&&s<e?0:a<=t&&u<=r||s>=e&&u>=r?a-t-n:s>e&&u<r||a<t&&u>r?s-e+o:0}var rs=function(t,e){var r=window,n=e.scrollMode,o=e.block,a=e.inline,s=e.boundary,u=e.skipOverflowHiddenElements,l=typeof s=="function"?s:function(_e){return _e!==s};if(!_l(t))throw new TypeError("Invalid target");for(var c,f,v=document.scrollingElement||document.documentElement,p=[],h=t;_l(h)&&l(h);){if((h=(f=(c=h).parentElement)==null?c.getRootNode().host||null:f)===v){p.push(h);break}h!=null&&h===document.body&&ts(h)&&!ts(document.documentElement)||h!=null&&ts(h,u)&&p.push(h)}for(var m=r.visualViewport?r.visualViewport.width:innerWidth,i=r.visualViewport?r.visualViewport.height:innerHeight,C=window.scrollX||pageXOffset,E=window.scrollY||pageYOffset,A=t.getBoundingClientRect(),w=A.height,F=A.width,S=A.top,k=A.right,P=A.bottom,L=A.left,I=o==="start"||o==="nearest"?S:o==="end"?P:S+w/2,j=a==="center"?L+F/2:a==="end"?k:L,K=[],R=0;R<p.length;R++){var U=p[R],Y=U.getBoundingClientRect(),G=Y.height,ne=Y.width,ce=Y.top,ie=Y.right,re=Y.bottom,fe=Y.left;if(n==="if-needed"&&S>=0&&L>=0&&P<=i&&k<=m&&S>=ce&&P<=re&&L>=fe&&k<=ie)return K;var Se=getComputedStyle(U),ge=parseInt(Se.borderLeftWidth,10),Me=parseInt(Se.borderTopWidth,10),x=parseInt(Se.borderRightWidth,10),q=parseInt(Se.borderBottomWidth,10),W=0,V=0,me="offsetWidth"in U?U.offsetWidth-U.clientWidth-ge-x:0,ae="offsetHeight"in U?U.offsetHeight-U.clientHeight-Me-q:0,De="offsetWidth"in U?U.offsetWidth===0?0:ne/U.offsetWidth:0,Ie="offsetHeight"in U?U.offsetHeight===0?0:G/U.offsetHeight:0;if(v===U)W=o==="start"?I:o==="end"?I-i:o==="nearest"?Xo(E,E+i,i,Me,q,E+I,E+I+w,w):I-i/2,V=a==="start"?j:a==="center"?j-m/2:a==="end"?j-m:Xo(C,C+m,m,ge,x,C+j,C+j+F,F),W=Math.max(0,W+E),V=Math.max(0,V+C);else{W=o==="start"?I-ce-Me:o==="end"?I-re+q+ae:o==="nearest"?Xo(ce,re,G,Me,q+ae,I,I+w,w):I-(ce+G/2)+ae/2,V=a==="start"?j-fe-ge:a==="center"?j-(fe+ne/2)+me/2:a==="end"?j-ie+x+me:Xo(fe,ie,ne,ge,x+me,j,j+F,F);var Oe=U.scrollLeft,Le=U.scrollTop;I+=Le-(W=Math.max(0,Math.min(Le+W/Ie,U.scrollHeight-G/Ie+ae))),j+=Oe-(V=Math.max(0,Math.min(Oe+V/De,U.scrollWidth-ne/De+me)))}K.push({el:U,top:W,left:V})}return K};function Nl(t){return t===Object(t)&&Object.keys(t).length!==0}function cp(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var o=n.el,a=n.top,s=n.left;o.scroll&&r?o.scroll({top:a,left:s,behavior:e}):(o.scrollTop=a,o.scrollLeft=s)})}function fp(t){return t===!1?{block:"end",inline:"nearest"}:Nl(t)?t:{block:"start",inline:"nearest"}}function dp(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Nl(e)&&typeof e.behavior=="function")return e.behavior(r?rs(t,e):[]);if(!!r){var n=fp(e);return cp(rs(t,n),n.behavior)}}var Ol=dp;g();D();g();D();function Il(t){return Object.prototype.toString.call(t)==="[object Object]"}function et(t){var e,r;return Il(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Il(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}Ym();var mp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=B.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},pp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=pe.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},hp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=b.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},Qo=new WeakMap,ea=new WeakMap,qn=new WeakMap,fc=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,kl=new WeakMap,B={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=B.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var o=t[n],a=e[n];if(o!==a)break;r.push(o)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),o=e.slice(0,r);return B.equals(n,o)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return B.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&B.compare(t,e)===0},isBefore(t,e){return B.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&B.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&B.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&B.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&B.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),o=t[t.length-1],a=e[e.length-1];return o!==a&&B.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],o=0;o<=t.length;o++)n.push(t.slice(0,o));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!B.isAncestor(e,t)&&!B.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:o="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(B.equals(a,n)||B.endsBefore(a,n)||B.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(B.equals(s,n)||B.isAncestor(s,n))return null;B.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:u,position:l}=e;B.equals(u,n)||B.endsBefore(u,n)?n[u.length-1]-=1:B.isAncestor(u,n)&&(n[u.length-1]-=1,n[u.length]+=l);break}case"split_node":{var{path:c,position:f}=e;if(B.equals(c,n)){if(o==="forward")n[n.length-1]+=1;else if(o!=="backward")return null}else B.endsBefore(c,n)?n[c.length-1]+=1:B.isAncestor(c,n)&&t[c.length]>=f&&(n[c.length-1]+=1,n[c.length]-=f);break}case"move_node":{var{path:v,newPath:p}=e;if(B.equals(v,p))return n;if(B.isAncestor(v,n)||B.equals(v,n)){var h=p.slice();return B.endsBefore(v,p)&&v.length<p.length&&(h[v.length-1]-=1),h.concat(n.slice(v.length))}else B.isSibling(v,p)&&(B.isAncestor(p,n)||B.equals(p,n))?B.endsBefore(v,n)?n[v.length-1]-=1:n[v.length-1]+=1:B.endsBefore(p,n)||B.equals(p,n)||B.isAncestor(p,n)?(B.endsBefore(v,n)&&(n[v.length-1]-=1),n[p.length-1]+=1):B.endsBefore(v,n)&&(B.equals(p,n)&&(n[p.length-1]+=1),n[v.length-1]-=1);break}}return n}};function pt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ml(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ml(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ml(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vp=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:o}=r,a=$.parent(t,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,o),e)for(var[u,l]of b.points(e))e[l]=pe.transform(u,r);break}case"insert_text":{var{path:c,offset:f,text:v}=r;if(v.length===0)break;var p=$.leaf(t,c),h=p.text.slice(0,f),m=p.text.slice(f);if(p.text=h+v+m,e)for(var[i,C]of b.points(e))e[C]=pe.transform(i,r);break}case"merge_node":{var{path:E}=r,A=$.get(t,E),w=B.previous(E),F=$.get(t,w),S=$.parent(t,E),k=E[E.length-1];if(J.isText(A)&&J.isText(F))F.text+=A.text;else if(!J.isText(A)&&!J.isText(F))F.children.push(...A.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(E,"] to nodes of different interfaces: ").concat(tt.stringify(A)," ").concat(tt.stringify(F)));if(S.children.splice(k,1),e)for(var[P,L]of b.points(e))e[L]=pe.transform(P,r);break}case"move_node":{var{path:I,newPath:j}=r;if(B.isAncestor(I,j))throw new Error("Cannot move a path [".concat(I,"] to new path [").concat(j,"] because the destination is inside itself."));var K=$.get(t,I),R=$.parent(t,I),U=I[I.length-1];R.children.splice(U,1);var Y=B.transform(I,r),G=$.get(t,B.parent(Y)),ne=Y[Y.length-1];if(G.children.splice(ne,0,K),e)for(var[ce,ie]of b.points(e))e[ie]=pe.transform(ce,r);break}case"remove_node":{var{path:re}=r,fe=re[re.length-1],Se=$.parent(t,re);if(Se.children.splice(fe,1),e)for(var[ge,Me]of b.points(e)){var x=pe.transform(ge,r);if(e!=null&&x!=null)e[Me]=x;else{var q=void 0,W=void 0;for(var[V,me]of $.texts(t))if(B.compare(me,re)===-1)q=[V,me];else{W=[V,me];break}var ae=!1;q&&W&&(B.equals(W[1],re)?ae=!B.hasPrevious(W[1]):ae=B.common(q[1],re).length<B.common(W[1],re).length),q&&!ae?(ge.path=q[1],ge.offset=q[0].text.length):W?(ge.path=W[1],ge.offset=0):e=null}}break}case"remove_text":{var{path:De,offset:Ie,text:Oe}=r;if(Oe.length===0)break;var Le=$.leaf(t,De),_e=Le.text.slice(0,Ie),at=Le.text.slice(Ie+Oe.length);if(Le.text=_e+at,e)for(var[ft,Xe]of b.points(e))e[Xe]=pe.transform(ft,r);break}case"set_node":{var{path:_t,properties:Rt,newProperties:dt}=r;if(_t.length===0)throw new Error("Cannot set properties on the root node!");var bt=$.get(t,_t);for(var Be in dt){if(Be==="children"||Be==="text")throw new Error('Cannot set the "'.concat(Be,'" property of nodes!'));var fr=dt[Be];fr==null?delete bt[Be]:bt[Be]=fr}for(var un in Rt)dt.hasOwnProperty(un)||delete bt[un];break}case"set_selection":{var{newProperties:ot}=r;if(ot==null)e=ot;else{if(e==null){if(!b.isRange(ot))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(tt.stringify(ot)," when there is no current selection."));e=Gn({},ot)}for(var zt in ot){var po=ot[zt];if(po==null){if(zt==="anchor"||zt==="focus")throw new Error('Cannot remove the "'.concat(zt,'" selection property'));delete e[zt]}else e[zt]=po}}break}case"split_node":{var{path:jt,position:zr,properties:ho}=r;if(jt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(jt,"] because the root node cannot be split."));var jr=$.get(t,jt),Im=$.parent(t,jt),Pm=jt[jt.length-1],Ra;if(J.isText(jr)){var Lm=jr.text.slice(0,zr),km=jr.text.slice(zr);jr.text=Lm,Ra=Gn(Gn({},ho),{},{text:km})}else{var Mm=jr.children.slice(0,zr),Rm=jr.children.slice(zr);jr.children=Mm,Ra=Gn(Gn({},ho),{},{children:Rm})}if(Im.children.splice(Pm+1,0,Ra),e)for(var[zm,jm]of b.points(e))e[jm]=pe.transform(zm,r);break}}return e},gp={transform(t,e){t.children=Ua(t.children);var r=t.selection&&Ua(t.selection);try{r=vp(t,r,e)}finally{t.children=Ha(t.children),r?t.selection=Ru(r)?Ha(r):r:t.selection=null}}},Dp={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},Cp={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},dc=(t,e)=>{for(var r in t){var n=t[r],o=e[r];if(et(n)&&et(o)){if(!dc(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function Ep(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function hr(t,e){if(t==null)return{};var r=Ep(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Ap=["anchor","focus"];function Rl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Bp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var b={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:o}=t;return b.isBackward(t)===r?[n,o]:[o,n]},end(t){var[,e]=b.edges(t);return e},equals(t,e){return pe.equals(t.anchor,e.anchor)&&pe.equals(t.focus,e.focus)},includes(t,e){if(b.isRange(e)){if(b.includes(t,e.anchor)||b.includes(t,e.focus))return!0;var[r,n]=b.edges(t),[o,a]=b.edges(e);return pe.isBefore(r,o)&&pe.isAfter(n,a)}var[s,u]=b.edges(t),l=!1,c=!1;return pe.isPoint(e)?(l=pe.compare(e,s)>=0,c=pe.compare(e,u)<=0):(l=B.compare(e,s.path)>=0,c=B.compare(e,u.path)<=0),l&&c},intersection(t,e){var r=hr(t,Ap),[n,o]=b.edges(t),[a,s]=b.edges(e),u=pe.isBefore(n,a)?a:n,l=pe.isBefore(o,s)?o:s;return pe.isBefore(l,u)?null:Bp({anchor:u,focus:l},r)},isBackward(t){var{anchor:e,focus:r}=t;return pe.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return pe.equals(e,r)},isExpanded(t){return!b.isCollapsed(t)},isForward(t){return!b.isBackward(t)},isRange(t){return et(t)&&pe.isPoint(t.anchor)&&pe.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=b.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return wo(t,n=>{if(n===null)return null;var{affinity:o="inward"}=r,a,s;if(o==="inward"){var u=b.isCollapsed(n);b.isForward(n)?(a="forward",s=u?a:"backward"):(a="backward",s=u?a:"forward")}else o==="outward"?b.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=o,s=o);var l=pe.transform(n.anchor,e,{affinity:a}),c=pe.transform(n.focus,e,{affinity:s});if(!l||!c)return null;n.anchor=l,n.focus=c})}},zl=t=>et(t)&&$.isNodeList(t.children)&&!d.isEditor(t),Z={isAncestor(t){return et(t)&&$.isNodeList(t.children)},isElement:zl,isElementList(t){return Array.isArray(t)&&t.every(e=>Z.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return zl(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},xp=["children"],wp=["text"],jl=new WeakMap,$={ancestor(t,e){var r=$.get(t,e);if(J.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(tt.stringify(r)));return r},*ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.ancestors(e,r)){var o=$.ancestor(t,n),a=[o,n];yield a}},child(t,e){if(J.isText(t))throw new Error("Cannot get the child of a text node: ".concat(tt.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(tt.stringify(t)));return r},*children(t,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,o=$.ancestor(t,e),{children:a}=o,s=n?a.length-1:0;n?s>=0:s<a.length;){var u=$.child(o,s),l=e.concat(s);yield[u,l],s=n?s-1:s+1}},common(t,e,r){var n=B.common(e,r),o=$.get(t,n);return[o,n]},descendant(t,e){var r=$.get(t,e);if(d.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(tt.stringify(r)));return r},*descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))n.length!==0&&(yield[r,n])},*elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))Z.isElement(r)&&(yield[r,n])},extractProps(t){if(Z.isAncestor(t)){var e=hr(t,xp);return e}else{var e=hr(t,wp);return e}},first(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(J.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(J.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(tt.stringify(t)));var r=wo({children:t.children},n=>{var[o,a]=b.edges(e),s=$.nodes(n,{reverse:!0,pass:p=>{var[,h]=p;return!b.includes(e,h)}});for(var[,u]of s){if(!b.includes(e,u)){var l=$.parent(n,u),c=u[u.length-1];l.children.splice(c,1)}if(B.equals(u,a.path)){var f=$.leaf(n,u);f.text=f.text.slice(0,a.offset)}if(B.equals(u,o.path)){var v=$.leaf(n,u);v.text=v.text.slice(o.offset)}}d.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(J.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(tt.stringify(t)));r=r.children[o]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(J.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(t){return J.isText(t)||Z.isElement(t)||d.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=jl.get(t);if(e!==void 0)return e;var r=t.every(n=>$.isNode(n));return jl.set(t,r),r},last(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(J.isText(n)||n.children.length===0);){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(t,e){var r=$.get(t,e);if(!J.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(tt.stringify(r)));return r},*levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.levels(e,r)){var o=$.get(t,n);yield[o,n]}},matches(t,e){return Z.isElement(t)&&Z.isElementProps(e)&&Z.matches(t,e)||J.isText(t)&&J.isTextProps(e)&&J.matches(t,e)},*nodes(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=e,{from:o=[],to:a}=e,s=new Set,u=[],l=t;!(a&&(n?B.isBefore(u,a):B.isAfter(u,a)));){if(s.has(l)||(yield[l,u]),!s.has(l)&&!J.isText(l)&&l.children.length!==0&&(r==null||r([l,u])===!1)){s.add(l);var c=n?l.children.length-1:0;B.isAncestor(u,o)&&(c=o[u.length]),u=u.concat(c),l=$.get(t,u);continue}if(u.length===0)break;if(!n){var f=B.next(u);if($.has(t,f)){u=f,l=$.get(t,u);continue}}if(n&&u[u.length-1]!==0){var v=B.previous(u);u=v,l=$.get(t,u);continue}u=B.parent(u),l=$.get(t,u),s.add(l)}},parent(t,e){var r=B.parent(e),n=$.get(t,r);if(J.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return J.isText(t)?t.text:t.children.map($.string).join("")},*texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))J.isText(r)&&(yield[r,n])}};function Wl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Re(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pr={isNodeOperation(t){return pr.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!et(t))return!1;switch(t.type){case"insert_node":return B.isPath(t.path)&&$.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"merge_node":return typeof t.position=="number"&&B.isPath(t.path)&&et(t.properties);case"move_node":return B.isPath(t.path)&&B.isPath(t.newPath);case"remove_node":return B.isPath(t.path)&&$.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"set_node":return B.isPath(t.path)&&et(t.properties)&&et(t.newProperties);case"set_selection":return t.properties===null&&b.isRange(t.newProperties)||t.newProperties===null&&b.isRange(t.properties)||et(t.properties)&&et(t.newProperties);case"split_node":return B.isPath(t.path)&&typeof t.position=="number"&&et(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>pr.isOperation(e))},isSelectionOperation(t){return pr.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return pr.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Re(Re({},t),{},{type:"remove_node"});case"insert_text":return Re(Re({},t),{},{type:"remove_text"});case"merge_node":return Re(Re({},t),{},{type:"split_node",path:B.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(B.equals(e,r))return t;if(B.isSibling(r,e))return Re(Re({},t),{},{path:e,newPath:r});var n=B.transform(r,t),o=B.transform(B.next(r),t);return Re(Re({},t),{},{path:n,newPath:o})}case"remove_node":return Re(Re({},t),{},{type:"insert_node"});case"remove_text":return Re(Re({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return Re(Re({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:u,newProperties:l}=t;return u==null?Re(Re({},t),{},{properties:l,newProperties:null}):l==null?Re(Re({},t),{},{properties:null,newProperties:u}):Re(Re({},t),{},{properties:l,newProperties:u})}case"split_node":return Re(Re({},t),{},{type:"merge_node",path:B.next(t.path)})}}},Ul=new WeakMap,Fp=t=>{var e=Ul.get(t);if(e!==void 0)return e;if(!et(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||et(t.marks))&&(t.selection===null||b.isRange(t.selection))&&$.isNodeList(t.children)&&pr.isOperationList(t.operations);return Ul.set(t,r),r},d={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return Fp(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}};var yp={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(B.isPath)}};function Hl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Yl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pe={compare(t,e){var r=B.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return pe.compare(t,e)===1},isBefore(t,e){return pe.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&B.equals(t.path,e.path)},isPoint(t){return et(t)&&typeof t.offset=="number"&&B.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return wo(t,n=>{if(n===null)return null;var{affinity:o="forward"}=r,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=B.transform(a,e,r);break}case"insert_text":{B.equals(e.path,a)&&(e.offset<s||e.offset===s&&o==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{B.equals(e.path,a)&&(n.offset+=e.position),n.path=B.transform(a,e,r);break}case"remove_text":{B.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(B.equals(e.path,a)||B.isAncestor(e.path,a))return null;n.path=B.transform(a,e,r);break}case"split_node":{if(B.equals(e.path,a)){if(e.position===s&&o==null)return null;(e.position<s||e.position===s&&o==="forward")&&(n.offset-=e.position,n.path=B.transform(a,e,Yl(Yl({},r),{},{affinity:"forward"})))}else n.path=B.transform(a,e,r);break}}})}},Gl=void 0,tt={setScrubber(t){Gl=t},stringify(t){return JSON.stringify(t,Gl)}},Tp=["text"],Sp=["anchor","focus"];function ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ql(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var J={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function o(a){var s=hr(a,Tp);return s}return dc(n?o(t):t,n?o(e):e)},isText(t){return et(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>J.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[mr({},t)];for(var n of e){var o=hr(n,Sp),[a,s]=b.edges(n),u=[],l=0,c=a.offset,f=s.offset;for(var v of r){var{length:p}=v.text,h=l;if(l+=p,c<=h&&l<=f){Object.assign(v,o),u.push(v);continue}if(c!==f&&(c===l||f===h)||c>l||f<h||f===h&&h!==0){u.push(v);continue}var m=v,i=void 0,C=void 0;if(f<l){var E=f-h;C=mr(mr({},m),{},{text:m.text.slice(E)}),m=mr(mr({},m),{},{text:m.text.slice(0,E)})}if(c>h){var A=c-h;i=mr(mr({},m),{},{text:m.text.slice(0,A)}),m=mr(mr({},m),{},{text:m.text.slice(A)})}Object.assign(m,o),i&&u.push(i),u.push(m),C&&u.push(C)}r=u}return r}},ns=t=>t.selection?t.selection:t.children.length>0?d.end(t,[]):[0],Dn=(t,e)=>{var[r]=d.node(t,e);return n=>n===r},os=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,o=r?Pp(e):e,a=ue.None,s=ue.None,u=0,l=null,c=null;for(var f of o){var v=f.codePointAt(0);if(!v)break;var p=qp(f,v);if([a,s]=n?[s,p]:[p,a],gn(a,ue.ZWJ)&&gn(s,ue.ExtPict)&&(n?l=$l(e.substring(0,u)):l=$l(e.substring(0,e.length-u)),!l)||gn(a,ue.RI)&&gn(s,ue.RI)&&(c!==null?c=!c:n?c=!0:c=Xp(e.substring(0,e.length-u)),!c)||a!==ue.None&&s!==ue.None&&Vp(a,s))break;u+=f.length}return u||1},_p=/\s/,bp=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Np=/['\u2018\u2019]/,Op=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,o=!1;e.length>0;){var a=os(e,r),[s,u]=as(e,a,r);if(Ip(s,u,r))o=!0,n+=a;else if(!o)n+=a;else break;e=u}return n},as=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},Ip=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(_p.test(e))return!1;if(Np.test(e)){var o=os(r,n),[a,s]=as(r,o,n);if(t(a,s,n))return!0}return!bp.test(e)},Pp=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var o=e.charAt(r-n);if(kp(o.charCodeAt(0))){var a=e.charAt(r-n-1);if(Lp(a.charCodeAt(0))){yield a+o,n++;continue}}yield o}},Lp=t=>t>=55296&&t<=56319,kp=t=>t>=56320&&t<=57343,ue;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(ue||(ue={}));var Mp=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Rp=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,zp=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,jp=/^[\u1100-\u115F\uA960-\uA97C]$/,Wp=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Up=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Hp=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Yp=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Gp=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,qp=(t,e)=>{var r=ue.Any;return t.search(Mp)!==-1&&(r|=ue.Extend),e===8205&&(r|=ue.ZWJ),e>=127462&&e<=127487&&(r|=ue.RI),t.search(Rp)!==-1&&(r|=ue.Prepend),t.search(zp)!==-1&&(r|=ue.SpacingMark),t.search(jp)!==-1&&(r|=ue.L),t.search(Wp)!==-1&&(r|=ue.V),t.search(Up)!==-1&&(r|=ue.T),t.search(Hp)!==-1&&(r|=ue.LV),t.search(Yp)!==-1&&(r|=ue.LVT),t.search(Gp)!==-1&&(r|=ue.ExtPict),r};function gn(t,e){return(t&e)!==0}var $p=[[ue.L,ue.L|ue.V|ue.LV|ue.LVT],[ue.LV|ue.V,ue.V|ue.T],[ue.LVT|ue.T,ue.T],[ue.Any,ue.Extend|ue.ZWJ],[ue.Any,ue.SpacingMark],[ue.Prepend,ue.Any],[ue.ZWJ,ue.ExtPict],[ue.RI,ue.RI]];function Vp(t,e){return $p.findIndex(r=>gn(t,r[0])&&gn(e,r[1]))===-1}var Kp=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,$l=t=>t.search(Kp)!==-1,Zp=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Xp=t=>{var e=t.match(Zp);if(e===null)return!1;var r=e[0].length/2;return r%2===1},Jp={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:o=ns(t)}=r;if(B.isPath(o)&&(o=d.range(t,o)),b.isRange(o))if(b.isCollapsed(o))o=o.anchor;else{var a=b.end(o);if(!n&&d.void(t,{at:a}))return;var s=b.start(o),u=d.pointRef(t,s),l=d.pointRef(t,a);z.delete(t,{at:o,voids:n});var c=u.unref(),f=l.unref();o=c||f,z.setSelection(t,{anchor:o,focus:o})}if(!(!n&&d.void(t,{at:o})||d.elementReadOnly(t,{at:o}))){var{path:v,offset:p}=o;e.length>0&&t.apply({type:"insert_text",path:v,offset:p,text:e})}})}};function Vl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Jo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var z=Jo(Jo(Jo(Jo({},gp),Dp),Cp),Jp),Qp=(t,e)=>{for(var r of d.pathRefs(t))mp.transform(r,e);for(var n of d.pointRefs(t))pp.transform(n,e);for(var o of d.rangeRefs(t))hp.transform(o,e);var a=Qo.get(t)||[],s=ea.get(t)||new Set,u,l,c=m=>{if(m){var i=m.join(",");l.has(i)||(l.add(i),u.push(m))}};if(B.operationCanTransformPath(e)){u=[],l=new Set;for(var f of a){var v=B.transform(f,e);c(v)}}else u=a,l=s;var p=t.getDirtyPaths(e);for(var h of p)c(h);Qo.set(t,u),ea.set(t,l),z.transform(t,e),t.operations.push(e),d.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),qn.get(t)||(qn.set(t,!0),Promise.resolve().then(()=>{qn.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},eh=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return B.levels(r)}case"insert_node":{var{node:n,path:o}=e,a=B.levels(o),s=J.isText(n)?[]:Array.from($.nodes(n),j=>{var[,K]=j;return o.concat(K)});return[...a,...s]}case"merge_node":{var{path:u}=e,l=B.ancestors(u),c=B.previous(u);return[...l,c]}case"move_node":{var{path:f,newPath:v}=e;if(B.equals(f,v))return[];var p=[],h=[];for(var m of B.ancestors(f)){var i=B.transform(m,e);p.push(i)}for(var C of B.ancestors(v)){var E=B.transform(C,e);h.push(E)}var A=h[h.length-1],w=v[v.length-1],F=A.concat(w);return[...p,...h,F]}case"remove_node":{var{path:S}=e,k=B.ancestors(S);return[...k]}case"split_node":{var{path:P}=e,L=B.levels(P),I=B.next(P);return[...L,I]}default:return[]}},th=t=>{var{selection:e}=t;return e?$.fragment(t,e):[]},rh=(t,e)=>{var[r,n]=e;if(!J.isText(r)){if(Z.isElement(r)&&r.children.length===0){var o={text:""};z.insertNodes(t,o,{at:n.concat(0),voids:!0});return}for(var a=d.isEditor(r)?!1:Z.isElement(r)&&(t.isInline(r)||r.children.length===0||J.isText(r.children[0])||t.isInline(r.children[0])),s=0,u=0;u<r.children.length;u++,s++){var l=$.get(t,n);if(!J.isText(l)){var c=l.children[s],f=l.children[s-1],v=u===r.children.length-1,p=J.isText(c)||Z.isElement(c)&&t.isInline(c);if(p!==a)z.removeNodes(t,{at:n.concat(s),voids:!0}),s--;else if(Z.isElement(c)){if(t.isInline(c)){if(f==null||!J.isText(f)){var h={text:""};z.insertNodes(t,h,{at:n.concat(s),voids:!0}),s++}else if(v){var m={text:""};z.insertNodes(t,m,{at:n.concat(s+1),voids:!0}),s++}}}else f!=null&&J.isText(f)&&(J.equals(c,f,{loose:!0})?(z.mergeNodes(t,{at:n.concat(s),voids:!0}),s--):f.text===""?(z.removeNodes(t,{at:n.concat(s-1),voids:!0}),s--):c.text===""&&(z.removeNodes(t,{at:n.concat(s),voids:!0}),s--))}}}},nh=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,o=n*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},oh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:o="lowest",at:a=e.selection,match:s}=r;if(!!a){var u=d.path(e,a),l=o==="lowest";for(var[c,f]of d.levels(e,{at:u,voids:n,match:s,reverse:l}))if(!J.isText(c)){if(b.isRange(a)){if(B.isAncestor(f,a.anchor.path)&&B.isAncestor(f,a.focus.path))return[c,f]}else if(!B.equals(u,f))return[c,f]}}};function Kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ah=(t,e,r)=>{var{selection:n}=t;if(n){var o=(v,p)=>{if(!J.isText(v))return!1;var[h,m]=d.parent(t,p);return!t.isVoid(h)||t.markableVoid(h)},a=b.isExpanded(n),s=!1;if(!a){var[u,l]=d.node(t,n);if(u&&o(u,l)){var[c]=d.parent(t,l);s=c&&t.markableVoid(c)}}if(a||s)z.setNodes(t,{[e]:r},{match:o,split:!0,voids:!0});else{var f=Zl(Zl({},d.marks(t)||{}),{},{[e]:r});t.marks=f,qn.get(t)||t.onChange()}}};function Xl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Jl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.point(e,r,{edge:"end"}),a=d.end(e,[]),s={anchor:o,focus:a},{distance:u=1}=n,l=0,c;for(var f of d.positions(e,Jl(Jl({},n),{},{at:s}))){if(l>u)break;l!==0&&(c=f),l++}return c};function Ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ec(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var uh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.start(e,[]),a=d.point(e,r,{edge:"start"}),s={anchor:o,focus:a},{distance:u=1}=n,l=0,c;for(var f of d.positions(e,ec(ec({},n),{},{at:s,reverse:!0}))){if(l>u)break;l!==0&&(c=f),l++}return c},ih=(t,e)=>{var{selection:r}=t;r&&b.isCollapsed(r)&&z.delete(t,{unit:e,reverse:!0})},lh=(t,e)=>{var{selection:r}=t;r&&b.isCollapsed(r)&&z.delete(t,{unit:e})},ch=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&b.isExpanded(n)&&z.delete(e,{reverse:r==="backward"})},fh=(t,e)=>[d.start(t,e),d.end(t,e)];function tc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function rc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tc(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var dh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,rc(rc({},r),{},{match:n=>Z.isElement(n)&&d.isElementReadOnly(e,n)}))},mh=(t,e)=>d.point(t,e,{edge:"end"}),ph=(t,e)=>{var r=d.path(t,e,{edge:"start"});return d.node(t,r)},hh=(t,e)=>{var r=d.range(t,e);return $.fragment(t,r)};function nc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function oc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nc(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,oc(oc({},r),{},{match:n=>Z.isElement(n)&&d.isVoid(e,n)}))},gh=(t,e)=>e.children.some(r=>Z.isElement(r)&&d.isBlock(t,r)),Dh=(t,e)=>e.children.some(r=>J.isText(r)||d.isInline(t,r)),Ch=(t,e)=>$.has(t,e),Eh=(t,e)=>e.children.every(r=>J.isText(r)),Ah=t=>{z.splitNodes(t,{always:!0})},Bh=(t,e,r)=>{z.insertNodes(t,e,r)},xh=t=>{z.splitNodes(t,{always:!0})};function ac(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function wh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ac(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ac(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=e;if(o){if(a){var s=wh({text:r},a);z.insertNodes(e,s,{at:n.at,voids:n.voids})}else z.insertText(e,r,n);e.marks=null}},yh=(t,e)=>!t.isInline(e),Th=(t,e,r)=>d.isStart(t,e,r)||d.isEnd(t,e,r),Sh=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&J.isText(n)&&n.text===""&&!t.isVoid(e)},_h=(t,e,r)=>{var n=d.end(t,r);return pe.equals(e,n)},bh=t=>{var e=fc.get(t);return e===void 0?!0:e},Nh=(t,e,r)=>{if(e.offset!==0)return!1;var n=d.start(t,r);return pe.equals(e,n)},Oh=(t,e)=>{var r=d.path(t,e,{edge:"end"});return d.node(t,r)},Ih=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=$.leaf(e,o);return[a,o]};function*Ph(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,reverse:n=!1,voids:o=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!r){var s=[],u=d.path(t,r);for(var[l,c]of $.levels(t,u))if(!!a(l,c)&&(s.push([l,c]),!o&&Z.isElement(l)&&d.isVoid(t,l)))break;n&&s.reverse(),yield*s}}var Lh=["text"],kh=["text"],Mh=function(e){var{marks:r,selection:n}=e;if(!n)return null;if(r)return r;if(b.isExpanded(n)){var[o]=d.nodes(e,{match:J.isText});if(o){var[a]=o,s=hr(a,Lh);return s}else return{}}var{anchor:u}=n,{path:l}=u,[c]=d.leaf(e,l);if(u.offset===0){var f=d.previous(e,{at:l,match:J.isText}),v=d.above(e,{match:E=>Z.isElement(E)&&d.isVoid(e,E)&&e.markableVoid(E)});if(!v){var p=d.above(e,{match:E=>Z.isElement(E)&&d.isBlock(e,E)});if(f&&p){var[h,m]=f,[,i]=p;B.isAncestor(i,m)&&(c=h)}}}var C=hr(c,kh);return C},Rh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var u=d.after(e,s,{voids:o});if(!!u){var[,l]=d.last(e,[]),c=[u.path,l];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=p=>f.children.includes(p)}else a=()=>!0;var[v]=d.nodes(e,{at:c,match:a,mode:n,voids:o});return v}}},zh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=$.get(e,o);return[a,o]};function*jh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:u=!1}=e,{match:l}=e;if(l||(l=()=>!0),!!r){var c,f;if(yp.isSpan(r))c=r[0],f=r[1];else{var v=d.path(t,r,{edge:"start"}),p=d.path(t,r,{edge:"end"});c=a?p:v,f=a?v:p}var h=$.nodes(t,{reverse:a,from:c,to:f,pass:F=>{var[S]=F;return Z.isElement(S)?!!(!s&&(d.isVoid(t,S)||d.isElementReadOnly(t,S))||u&&!d.isSelectable(t,S)):!1}}),m=[],i;for(var[C,E]of h)if(!(u&&Z.isElement(C)&&!d.isSelectable(t,C))){var A=i&&B.compare(E,i[1])===0;if(!(n==="highest"&&A)){if(!l(C,E)){if(o&&!A&&J.isText(C))return;continue}if(n==="lowest"&&A){i=[C,E];continue}var w=n==="lowest"?i:[C,E];w&&(o?m.push(w):yield w),i=[C,E]}}n==="lowest"&&i&&(o?m.push(i):yield i),o&&(yield*m)}}var Wh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:o}=r,a=f=>Qo.get(f)||[],s=f=>ea.get(f)||new Set,u=f=>{var v=a(f).pop(),p=v.join(",");return s(f).delete(p),v};if(!!d.isNormalizing(e)){if(n){var l=Array.from($.nodes(e),f=>{var[,v]=f;return v}),c=new Set(l.map(f=>f.join(",")));Qo.set(e,l),ea.set(e,c)}a(e).length!==0&&d.withoutNormalizing(e,()=>{for(var f of a(e))if($.has(e,f)){var v=d.node(e,f),[p,h]=v;Z.isElement(p)&&p.children.length===0&&e.normalizeNode(v,{operation:o})}for(var m=a(e),i=m.length,C=0;m.length!==0;){if(!e.shouldNormalize({dirtyPaths:m,iteration:C,initialDirtyPathsLength:i,operation:o}))return;var E=u(e);if($.has(e,E)){var A=d.node(e,E);e.normalizeNode(A,{operation:o})}C++,m=a(e)}})}},Uh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=B.parent(o),s=d.node(e,a);return s},Hh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:u}=a,l=d.pathRefs(e);return l.delete(a),a.current=null,u}},s=d.pathRefs(e);return s.add(a),a},Yh=t=>{var e=Pl.get(t);return e||(e=new Set,Pl.set(t,e)),e},Gh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=n;if(B.isPath(r)){if(a==="start"){var[,s]=$.first(e,r);r=s}else if(a==="end"){var[,u]=$.last(e,r);r=u}}return b.isRange(r)&&(a==="start"?r=b.start(r):a==="end"?r=b.end(r):r=B.common(r.anchor.path,r.focus.path)),pe.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},qh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:u}=a,l=d.pointRefs(e);return l.delete(a),a.current=null,u}},s=d.pointRefs(e);return s.add(a),a},$h=t=>{var e=Ll.get(t);return e||(e=new Set,Ll.set(t,e)),e},Vh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=n;if(B.isPath(r)){var a;if(o==="end"){var[,s]=$.last(e,r);a=s}else{var[,u]=$.first(e,r);a=u}var l=$.get(e,a);if(!J.isText(l))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?l.text.length:0}}if(b.isRange(r)){var[c,f]=b.edges(r);return o==="start"?c:f}return r};function*Kh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,unit:n="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!r)return;var u=d.range(t,r),[l,c]=b.edges(u),f=o?c:l,v=!1,p="",h=0,m=0,i=0;for(var[C,E]of d.nodes(t,{at:r,reverse:o,voids:a,ignoreNonSelectable:s})){if(Z.isElement(C)){if(!a&&(t.isVoid(C)||t.isElementReadOnly(C))){yield d.start(t,E);continue}if(t.isInline(C))continue;if(d.hasInlines(t,C)){var A=B.isAncestor(E,c.path)?c:d.end(t,E),w=B.isAncestor(E,l.path)?l:d.start(t,E);p=d.string(t,{anchor:w,focus:A},{voids:a}),v=!0}}if(J.isText(C)){var F=B.equals(E,f.path);for(F?(m=o?f.offset:C.text.length-f.offset,i=f.offset):(m=C.text.length,i=o?m:0),(F||v||n==="offset")&&(yield{path:E,offset:i},v=!1);;){if(h===0){if(p==="")break;h=S(p,n,o),p=as(p,h,o)[1]}if(i=o?i-h:i+h,m=m-h,m<0){h=-m;break}h=0,yield{path:E,offset:i}}}}function S(k,P,L){return P==="character"?os(k,L):P==="word"?Op(k,L):P==="line"||P==="block"?k.length:1}}var Zh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var u=d.before(e,s,{voids:o});if(!!u){var[,l]=d.first(e,[]),c=[u.path,l];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=p=>f.children.includes(p)}else a=()=>!0;var[v]=d.nodes(e,{reverse:!0,at:c,match:a,mode:n,voids:o});return v}}},Xh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:u}=a,l=d.rangeRefs(e);return l.delete(a),a.current=null,u}},s=d.rangeRefs(e);return s.add(a),a},Jh=t=>{var e=kl.get(t);return e||(e=new Set,kl.set(t,e)),e},Qh=(t,e,r)=>{if(b.isRange(e)&&!r)return e;var n=d.start(t,e),o=d.end(t,r||e);return{anchor:n,focus:o}};function sc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sc(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var tv=(t,e)=>{var{selection:r}=t;if(r){var n=(f,v)=>{if(!J.isText(f))return!1;var[p,h]=d.parent(t,v);return!t.isVoid(p)||t.markableVoid(p)},o=b.isExpanded(r),a=!1;if(!o){var[s,u]=d.node(t,r);if(s&&n(s,u)){var[l]=d.parent(t,u);a=l&&t.markableVoid(l)}}if(o||a)z.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var c=ev({},d.marks(t)||{});delete c[e],t.marks=c,qn.get(t)||t.onChange()}}},rv=(t,e)=>{fc.set(t,e)},nv=(t,e)=>d.point(t,e,{edge:"start"}),ov=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,a=d.range(e,r),[s,u]=b.edges(a),l="";for(var[c,f]of d.nodes(e,{at:a,match:J.isText,voids:o})){var v=c.text;B.equals(f,u.path)&&(v=v.slice(0,u.offset)),B.equals(f,s.path)&&(v=v.slice(s.offset)),l+=v}return l},av=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,[a,s]=b.edges(r);if(a.offset!==0||s.offset!==0||b.isCollapsed(r)||B.hasPrevious(s.path))return r;var u=d.above(e,{at:s,match:m=>Z.isElement(m)&&d.isBlock(e,m),voids:o}),l=u?u[1]:[],c=d.start(e,a),f={anchor:c,focus:s},v=!0;for(var[p,h]of d.nodes(e,{at:f,match:J.isText,reverse:!0,voids:o})){if(v){v=!1;continue}if(p.text!==""||B.isBefore(h,l)){s={path:h,offset:p.text.length};break}}return{anchor:a,focus:s}},sv=(t,e)=>{var r=d.isNormalizing(t);d.setNormalizing(t,!1);try{e()}finally{d.setNormalizing(t,r)}d.normalize(t)},uv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var n,o,{reverse:a=!1,unit:s="character",distance:u=1,voids:l=!1}=r,{at:c=e.selection,hanging:f=!1}=r;if(!!c){var v=!1;if(b.isRange(c)&&b.isCollapsed(c)&&(v=!0,c=c.anchor),pe.isPoint(c)){var p=d.void(e,{at:c,mode:"highest"});if(!l&&p){var[,h]=p;c=h}else{var m={unit:s,distance:u},i=a?d.before(e,c,m)||d.start(e,[]):d.after(e,c,m)||d.end(e,[]);c={anchor:c,focus:i},f=!0}}if(B.isPath(c)){z.removeNodes(e,{at:c,voids:l});return}if(!b.isCollapsed(c)){if(!f){var[,C]=b.edges(c),E=d.end(e,[]);pe.equals(C,E)||(c=d.unhangRange(e,c,{voids:l}))}var[A,w]=b.edges(c),F=d.above(e,{match:_e=>Z.isElement(_e)&&d.isBlock(e,_e),at:A,voids:l}),S=d.above(e,{match:_e=>Z.isElement(_e)&&d.isBlock(e,_e),at:w,voids:l}),k=F&&S&&!B.equals(F[1],S[1]),P=B.equals(A.path,w.path),L=l?null:(n=d.void(e,{at:A,mode:"highest"}))!==null&&n!==void 0?n:d.elementReadOnly(e,{at:A,mode:"highest"}),I=l?null:(o=d.void(e,{at:w,mode:"highest"}))!==null&&o!==void 0?o:d.elementReadOnly(e,{at:w,mode:"highest"});if(L){var j=d.before(e,A);j&&F&&B.isAncestor(F[1],j.path)&&(A=j)}if(I){var K=d.after(e,w);K&&S&&B.isAncestor(S[1],K.path)&&(w=K)}var R=[],U;for(var Y of d.nodes(e,{at:c,voids:l})){var[G,ne]=Y;U&&B.compare(ne,U)===0||(!l&&Z.isElement(G)&&(d.isVoid(e,G)||d.isElementReadOnly(e,G))||!B.isCommon(ne,A.path)&&!B.isCommon(ne,w.path))&&(R.push(Y),U=ne)}var ce=Array.from(R,_e=>{var[,at]=_e;return d.pathRef(e,at)}),ie=d.pointRef(e,A),re=d.pointRef(e,w),fe="";if(!P&&!L){var Se=ie.current,[ge]=d.leaf(e,Se),{path:Me}=Se,{offset:x}=A,q=ge.text.slice(x);q.length>0&&(e.apply({type:"remove_text",path:Me,offset:x,text:q}),fe=q)}if(ce.reverse().map(_e=>_e.unref()).filter(_e=>_e!==null).forEach(_e=>z.removeNodes(e,{at:_e,voids:l})),!I){var W=re.current,[V]=d.leaf(e,W),{path:me}=W,ae=P?A.offset:0,De=V.text.slice(ae,w.offset);De.length>0&&(e.apply({type:"remove_text",path:me,offset:ae,text:De}),fe=De)}!P&&k&&re.current&&ie.current&&z.mergeNodes(e,{at:re.current,hanging:!0,voids:l}),v&&a&&s==="character"&&fe.length>1&&fe.match(/[\u0E00-\u0E7F]+/)&&z.insertText(e,fe.slice(0,fe.length-u));var Ie=ie.unref(),Oe=re.unref(),Le=a?Ie||Oe:Oe||Ie;r.at==null&&Le&&z.select(e,Le)}}})},iv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1}=n,{at:s=ns(e)}=n;if(!!r.length){if(b.isRange(s))if(o||(s=d.unhangRange(e,s,{voids:a})),b.isCollapsed(s))s=s.anchor;else{var[,u]=b.edges(s);if(!a&&d.void(e,{at:u}))return;var l=d.pointRef(e,u);z.delete(e,{at:s}),s=l.unref()}else B.isPath(s)&&(s=d.start(e,s));if(!(!a&&d.void(e,{at:s}))){var c=d.above(e,{at:s,match:x=>Z.isElement(x)&&d.isInline(e,x),mode:"highest",voids:a});if(c){var[,f]=c;if(d.isEnd(e,s,f)){var v=d.after(e,f);s=v}else if(d.isStart(e,s,f)){var p=d.before(e,f);s=p}}var h=d.above(e,{match:x=>Z.isElement(x)&&d.isBlock(e,x),at:s,voids:a}),[,m]=h,i=d.isStart(e,s,m),C=d.isEnd(e,s,m),E=i&&C,A=!i||i&&C,w=!C,[,F]=$.first({children:r},[]),[,S]=$.last({children:r},[]),k=[],P=x=>{var[q,W]=x,V=W.length===0;return V?!1:E?!0:!(A&&B.isAncestor(W,F)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q)||w&&B.isAncestor(W,S)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q))};for(var L of $.nodes({children:r},{pass:P}))P(L)&&k.push(L);var I=[],j=[],K=[],R=!0,U=!1;for(var[Y]of k)Z.isElement(Y)&&!e.isInline(Y)?(R=!1,U=!0,j.push(Y)):R?I.push(Y):K.push(Y);var[G]=d.nodes(e,{at:s,match:x=>J.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),[,ne]=G,ce=d.isStart(e,s,ne),ie=d.isEnd(e,s,ne),re=d.pathRef(e,C&&!K.length?B.next(m):m),fe=d.pathRef(e,ie?B.next(ne):ne);z.splitNodes(e,{at:s,match:x=>U?Z.isElement(x)&&d.isBlock(e,x):J.isText(x)||d.isInline(e,x),mode:U?"lowest":"highest",always:U&&(!i||I.length>0)&&(!C||K.length>0),voids:a});var Se=d.pathRef(e,!ce||ce&&ie?B.next(ne):ne);if(z.insertNodes(e,I,{at:Se.current,match:x=>J.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),E&&!I.length&&j.length&&!K.length&&z.delete(e,{at:m,voids:a}),z.insertNodes(e,j,{at:re.current,match:x=>Z.isElement(x)&&d.isBlock(e,x),mode:"lowest",voids:a}),z.insertNodes(e,K,{at:fe.current,match:x=>J.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),!n.at){var ge;if(K.length>0&&fe.current?ge=B.previous(fe.current):j.length>0&&re.current?ge=B.previous(re.current):Se.current&&(ge=B.previous(Se.current)),ge){var Me=d.end(e,ge);z.select(e,Me)}}Se.unref(),re.unref(),fe.unref()}}})},lv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:o}=e;if(o){if(n==="anchor")z.select(e,o.anchor);else if(n==="focus")z.select(e,o.focus);else if(n==="start"){var[a]=b.edges(o);z.select(e,a)}else if(n==="end"){var[,s]=b.edges(o);z.select(e,s)}}else return},cv=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},fv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:o=1,unit:a="character",reverse:s=!1}=r,{edge:u=null}=r;if(!!n){u==="start"&&(u=b.isBackward(n)?"focus":"anchor"),u==="end"&&(u=b.isBackward(n)?"anchor":"focus");var{anchor:l,focus:c}=n,f={distance:o,unit:a,ignoreNonSelectable:!0},v={};if(u==null||u==="anchor"){var p=s?d.before(e,l,f):d.after(e,l,f);p&&(v.anchor=p)}if(u==null||u==="focus"){var h=s?d.before(e,c,f):d.after(e,c,f);h&&(v.focus=h)}z.setSelection(e,v)}},dv=(t,e)=>{var{selection:r}=t;if(e=d.range(t,e),r){z.setSelection(t,e);return}if(!b.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(tt.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function uc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ic(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uc(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=e,{edge:a="both"}=n;if(!!o){a==="start"&&(a=b.isBackward(o)?"focus":"anchor"),a==="end"&&(a=b.isBackward(o)?"anchor":"focus");var{anchor:s,focus:u}=o,l=a==="anchor"?s:u;z.setSelection(e,{[a==="anchor"?"anchor":"focus"]:ic(ic({},l),r)})}},pv=(t,e)=>{var{selection:r}=t,n={},o={};if(!!r){for(var a in e)(a==="anchor"&&e.anchor!=null&&!pe.equals(e.anchor,r.anchor)||a==="focus"&&e.focus!=null&&!pe.equals(e.focus,r.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==r[a])&&(n[a]=r[a],o[a]=e[a]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:o})}},hv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1,mode:s="lowest"}=n,{at:u,match:l,select:c}=n;if($.isNode(r)&&(r=[r]),r.length!==0){var[f]=r;if(u||(u=ns(e),c=!0),c==null&&(c=!1),b.isRange(u))if(o||(u=d.unhangRange(e,u,{voids:a})),b.isCollapsed(u))u=u.anchor;else{var[,v]=b.edges(u),p=d.pointRef(e,v);z.delete(e,{at:u}),u=p.unref()}if(pe.isPoint(u)){l==null&&(J.isText(f)?l=P=>J.isText(P):e.isInline(f)?l=P=>J.isText(P)||d.isInline(e,P):l=P=>Z.isElement(P)&&d.isBlock(e,P));var[h]=d.nodes(e,{at:u.path,match:l,mode:s,voids:a});if(h){var[,m]=h,i=d.pathRef(e,m),C=d.isEnd(e,u,m);z.splitNodes(e,{at:u,match:l,mode:s,voids:a});var E=i.unref();u=C?B.next(E):E}else return}var A=B.parent(u),w=u[u.length-1];if(!(!a&&d.void(e,{at:A}))){for(var F of r){var S=A.concat(w);w++,e.apply({type:"insert_node",path:S,node:F}),u=B.next(u)}if(u=B.previous(u),c){var k=d.end(e,u);k&&z.select(e,k)}}}})},vv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:o="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=B.isPath(n)?Dn(e,n):F=>Z.isElement(F)&&d.isBlock(e,F)),!!n){var u=d.nodes(e,{at:n,match:s,mode:o,voids:a}),l=Array.from(u,F=>{var[,S]=F;return d.pathRef(e,S)});for(var c of l){var f=c.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var v=d.node(e,B.parent(f)),[p,h]=v,m=f[f.length-1],{length:i}=p.children;if(i===1){var C=B.next(h);z.moveNodes(e,{at:f,to:C,voids:a}),z.removeNodes(e,{at:h,voids:a})}else if(m===0)z.moveNodes(e,{at:f,to:h,voids:a});else if(m===i-1){var E=B.next(h);z.moveNodes(e,{at:f,to:E,voids:a})}else{var A=B.next(f),w=B.next(h);z.splitNodes(e,{at:A,voids:a}),z.moveNodes(e,{at:f,to:w,voids:a})}}}})},gv=["text"],Dv=["children"],mc=(t,e)=>{if(Z.isElement(e)){var r=e;return d.isVoid(t,e)?!0:r.children.length===1?mc(t,r.children[0]):!1}else return!d.isEditor(e)},Cv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:u="lowest"}=r;if(!!o){if(n==null)if(B.isPath(o)){var[l]=d.parent(e,o);n=j=>l.children.includes(j)}else n=j=>Z.isElement(j)&&d.isBlock(e,j);if(!a&&b.isRange(o)&&(o=d.unhangRange(e,o,{voids:s})),b.isRange(o))if(b.isCollapsed(o))o=o.anchor;else{var[,c]=b.edges(o),f=d.pointRef(e,c);z.delete(e,{at:o}),o=f.unref(),r.at==null&&z.select(e,o)}var[v]=d.nodes(e,{at:o,match:n,voids:s,mode:u}),p=d.previous(e,{at:o,match:n,voids:s,mode:u});if(!(!v||!p)){var[h,m]=v,[i,C]=p;if(!(m.length===0||C.length===0)){var E=B.next(C),A=B.common(m,C),w=B.isSibling(m,C),F=Array.from(d.levels(e,{at:m}),j=>{var[K]=j;return K}).slice(A.length).slice(0,-1),S=d.above(e,{at:m,mode:"highest",match:j=>F.includes(j)&&mc(e,j)}),k=S&&d.pathRef(e,S[1]),P,L;if(J.isText(h)&&J.isText(i)){var I=hr(h,gv);L=i.text.length,P=I}else if(Z.isElement(h)&&Z.isElement(i)){var I=hr(h,Dv);L=i.children.length,P=I}else throw new Error("Cannot merge the node at path [".concat(m,"] with the previous sibling because it is not the same kind: ").concat(tt.stringify(h)," ").concat(tt.stringify(i)));w||z.moveNodes(e,{at:m,to:E,voids:s}),k&&z.removeNodes(e,{at:k.current,voids:s}),Z.isElement(i)&&d.isEmpty(e,i)||J.isText(i)&&i.text===""&&C[C.length-1]!==0?z.removeNodes(e,{at:C,voids:s}):e.apply({type:"merge_node",path:E,position:L,properties:P}),k&&k.unref()}}}})},Ev=(t,e)=>{d.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:o="lowest",voids:a=!1}=e,{match:s}=e;if(!!n){s==null&&(s=B.isPath(n)?Dn(t,n):h=>Z.isElement(h)&&d.isBlock(t,h));var u=d.pathRef(t,r),l=d.nodes(t,{at:n,match:s,mode:o,voids:a}),c=Array.from(l,h=>{var[,m]=h;return d.pathRef(t,m)});for(var f of c){var v=f.unref(),p=u.current;v.length!==0&&t.apply({type:"move_node",path:v,newPath:p}),u.current&&B.isSibling(p,v)&&B.isAfter(p,v)&&(u.current=B.next(u.current))}u.unref()}})},Av=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:s=e.selection,match:u}=r;if(!!s){u==null&&(u=B.isPath(s)?Dn(e,s):h=>Z.isElement(h)&&d.isBlock(e,h)),!n&&b.isRange(s)&&(s=d.unhangRange(e,s,{voids:o}));var l=d.nodes(e,{at:s,match:u,mode:a,voids:o}),c=Array.from(l,h=>{var[,m]=h;return d.pathRef(e,m)});for(var f of c){var v=f.unref();if(v){var[p]=d.node(e,v);e.apply({type:"remove_node",path:v,node:p})}}}})},Bv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{match:o,at:a=e.selection,compare:s,merge:u}=n,{hanging:l=!1,mode:c="lowest",split:f=!1,voids:v=!1}=n;if(!!a){if(o==null&&(o=B.isPath(a)?Dn(e,a):L=>Z.isElement(L)&&d.isBlock(e,L)),!l&&b.isRange(a)&&(a=d.unhangRange(e,a,{voids:v})),f&&b.isRange(a)){if(b.isCollapsed(a)&&d.leaf(e,a.anchor)[0].text.length>0)return;var p=d.rangeRef(e,a,{affinity:"inward"}),[h,m]=b.edges(a),i=c==="lowest"?"lowest":"highest",C=d.isEnd(e,m,m.path);z.splitNodes(e,{at:m,match:o,mode:i,voids:v,always:!C});var E=d.isStart(e,h,h.path);z.splitNodes(e,{at:h,match:o,mode:i,voids:v,always:!E}),a=p.unref(),n.at==null&&z.select(e,a)}s||(s=(L,I)=>L!==I);for(var[A,w]of d.nodes(e,{at:a,match:o,mode:c,voids:v})){var F={},S={};if(w.length!==0){var k=!1;for(var P in r)P==="children"||P==="text"||s(r[P],A[P])&&(k=!0,A.hasOwnProperty(P)&&(F[P]=A[P]),u?r[P]!=null&&(S[P]=u(A[P],r[P])):r[P]!=null&&(S[P]=r[P]));k&&e.apply({type:"set_node",path:w,properties:F,newProperties:S})}}}})},xv=(t,e)=>{if(b.isCollapsed(e))return e.anchor;var[,r]=b.edges(e),n=d.pointRef(t,r);return z.delete(t,{at:e}),n.unref()},wv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection,height:u=0,always:l=!1}=r;if(a==null&&(a=re=>Z.isElement(re)&&d.isBlock(e,re)),b.isRange(s)&&(s=xv(e,s)),B.isPath(s)){var c=s,f=d.point(e,c),[v]=d.parent(e,c);a=re=>re===v,u=f.path.length-c.length+1,s=f,l=!0}if(!!s){var p=d.pointRef(e,s,{affinity:"backward"}),h;try{var[m]=d.nodes(e,{at:s,match:a,mode:n,voids:o});if(!m)return;var i=d.void(e,{at:s,mode:"highest"}),C=0;if(!o&&i){var[E,A]=i;if(Z.isElement(E)&&e.isInline(E)){var w=d.after(e,A);if(!w){var F={text:""},S=B.next(A);z.insertNodes(e,F,{at:S,voids:o}),w=d.point(e,S)}s=w,l=!0}var k=s.path.length-A.length;u=k+1,l=!0}h=d.pointRef(e,s);var P=s.path.length-u,[,L]=m,I=s.path.slice(0,P),j=u===0?s.offset:s.path[P]+C;for(var[K,R]of d.levels(e,{at:I,reverse:!0,voids:o})){var U=!1;if(R.length<L.length||R.length===0||!o&&Z.isElement(K)&&d.isVoid(e,K))break;var Y=p.current,G=d.isEnd(e,Y,R);if(l||!p||!d.isEdge(e,Y,R)){U=!0;var ne=$.extractProps(K);e.apply({type:"split_node",path:R,position:j,properties:ne})}j=R[R.length-1]+(U||G?1:0)}if(r.at==null){var ce=h.current||d.end(e,[]);z.select(e,ce)}}finally{var ie;p.unref(),(ie=h)===null||ie===void 0||ie.unref()}}})},Fv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var a of r)o[a]=null;z.setNodes(e,o,n)},yv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{at:s=e.selection,match:u}=r;if(!!s){u==null&&(u=B.isPath(s)?Dn(e,s):h=>Z.isElement(h)&&d.isBlock(e,h)),B.isPath(s)&&(s=d.range(e,s));var l=b.isRange(s)?d.rangeRef(e,s):null,c=d.nodes(e,{at:s,match:u,mode:n,voids:a}),f=Array.from(c,h=>{var[,m]=h;return d.pathRef(e,m)}).reverse(),v=function(m){var i=m.unref(),[C]=d.node(e,i),E=d.range(e,i);o&&l&&(E=b.intersection(l.current,E)),z.liftNodes(e,{at:E,match:A=>Z.isAncestor(C)&&C.children.includes(A),voids:a})};for(var p of f)v(p);l&&l.unref()}})};function lc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function cc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lc(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Tv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{mode:o="lowest",split:a=!1,voids:s=!1}=n,{match:u,at:l=e.selection}=n;if(!!l){if(u==null&&(B.isPath(l)?u=Dn(e,l):e.isInline(r)?u=E=>Z.isElement(E)&&d.isInline(e,E)||J.isText(E):u=E=>Z.isElement(E)&&d.isBlock(e,E)),a&&b.isRange(l)){var[c,f]=b.edges(l),v=d.rangeRef(e,l,{affinity:"inward"});z.splitNodes(e,{at:f,match:u,voids:s}),z.splitNodes(e,{at:c,match:u,voids:s}),l=v.unref(),n.at==null&&z.select(e,l)}var p=Array.from(d.nodes(e,{at:l,match:e.isInline(r)?E=>Z.isElement(E)&&d.isBlock(e,E):E=>d.isEditor(E),mode:"lowest",voids:s}));for(var[,h]of p){var m=b.isRange(l)?b.intersection(l,d.range(e,h)):l;if(!!m){var i=Array.from(d.nodes(e,{at:m,match:u,mode:o,voids:s}));if(i.length>0){var C=function(){var[E]=i,A=i[i.length-1],[,w]=E,[,F]=A;if(w.length===0&&F.length===0)return"continue";var S=B.equals(w,F)?B.parent(w):B.common(w,F),k=d.range(e,w,F),P=d.node(e,S),[L]=P,I=S.length+1,j=B.next(F.slice(0,I)),K=cc(cc({},r),{},{children:[]});z.insertNodes(e,K,{at:j,voids:s}),z.moveNodes(e,{at:k,match:R=>Z.isAncestor(L)&&L.children.includes(R),to:j.concat(0),voids:s})}();if(C==="continue")continue}}}}})},pc=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qp(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ah(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ih(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lh(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ch(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return th(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ah(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xh(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return iv(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bh(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fh(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rh(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return tv(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return eh(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nh(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return oh(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sh(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uh(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lv(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uv(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cv(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fh(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dh(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mh(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ph(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hh(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Mh(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gh(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dh(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ch(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Eh(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hv(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yh(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Th(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sh(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _h(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bh(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Nh(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Oh(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ih(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ph(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vv(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Cv(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fv(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ev(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rh(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return zh(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jh(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Wh(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Uh(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Gh(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Hh(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Yh(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Vh(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qh(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $h(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Kh(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zh(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qh(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xh(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jh(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Av(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dv(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bv(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rv(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mv(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pv(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wv(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nv(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ov(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return av(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fv(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yv(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vh(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sv(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Tv(t,...n)}};return t};g();D();g();D();g();D();g();D();g();D();g();D();g();D();var Ot=[];var hc=function(){return Ot.some(function(t){return t.activeTargets.length>0})};g();D();var vc=function(){return Ot.some(function(t){return t.skippedTargets.length>0})};g();D();var gc="ResizeObserver loop completed with undelivered notifications.",Dc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:gc}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=gc),window.dispatchEvent(t)};g();D();g();D();g();D();g();D();var Vr;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Vr||(Vr={}));g();D();g();D();var Gt=function(t){return Object.freeze(t)};var ss=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Gt(this)}return t}();g();D();var us=function(){function t(e,r,n,o){return this.x=e,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Gt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,o=e.top,a=e.right,s=e.bottom,u=e.left,l=e.width,c=e.height;return{x:r,y:n,top:o,right:a,bottom:s,left:u,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();g();D();var $n=function(t){return t instanceof SVGElement&&"getBBox"in t},ta=function(t){if($n(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var o=t,a=o.offsetWidth,s=o.offsetHeight;return!(a||s||t.getClientRects().length)},is=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Cc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};g();D();var Kr=typeof window<"u"?window:{};var ra=new WeakMap,Ec=/auto|scroll/,Sv=/^tb|vertical/,_v=/msie|trident/i.test(Kr.navigator&&Kr.navigator.userAgent),nr=function(t){return parseFloat(t||"0")},Cn=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new ss((r?e:t)||0,(r?t:e)||0)},Ac=Gt({devicePixelContentBoxSize:Cn(),borderBoxSize:Cn(),contentBoxSize:Cn(),contentRect:new us(0,0,0,0)}),ls=function(t,e){if(e===void 0&&(e=!1),ra.has(t)&&!e)return ra.get(t);if(ta(t))return ra.set(t,Ac),Ac;var r=getComputedStyle(t),n=$n(t)&&t.ownerSVGElement&&t.getBBox(),o=!_v&&r.boxSizing==="border-box",a=Sv.test(r.writingMode||""),s=!n&&Ec.test(r.overflowY||""),u=!n&&Ec.test(r.overflowX||""),l=n?0:nr(r.paddingTop),c=n?0:nr(r.paddingRight),f=n?0:nr(r.paddingBottom),v=n?0:nr(r.paddingLeft),p=n?0:nr(r.borderTopWidth),h=n?0:nr(r.borderRightWidth),m=n?0:nr(r.borderBottomWidth),i=n?0:nr(r.borderLeftWidth),C=v+c,E=l+f,A=i+h,w=p+m,F=u?t.offsetHeight-w-t.clientHeight:0,S=s?t.offsetWidth-A-t.clientWidth:0,k=o?C+A:0,P=o?E+w:0,L=n?n.width:nr(r.width)-k-S,I=n?n.height:nr(r.height)-P-F,j=L+C+S+A,K=I+E+F+w,R=Gt({devicePixelContentBoxSize:Cn(Math.round(L*devicePixelRatio),Math.round(I*devicePixelRatio),a),borderBoxSize:Cn(j,K,a),contentBoxSize:Cn(L,I,a),contentRect:new us(v,l,L,I)});return ra.set(t,R),R},na=function(t,e,r){var n=ls(t,r),o=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Vr.DEVICE_PIXEL_CONTENT_BOX:return s;case Vr.BORDER_BOX:return o;default:return a}};var cs=function(){function t(e){var r=ls(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Gt([r.borderBoxSize]),this.contentBoxSize=Gt([r.contentBoxSize]),this.devicePixelContentBoxSize=Gt([r.devicePixelContentBoxSize])}return t}();g();D();var oa=function(t){if(ta(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var Bc=function(){var t=1/0,e=[];Ot.forEach(function(s){if(s.activeTargets.length!==0){var u=[];s.activeTargets.forEach(function(c){var f=new cs(c.target),v=oa(c.target);u.push(f),c.lastReportedSize=na(c.target,c.observedBox),v<t&&(t=v)}),e.push(function(){s.callback.call(s.observer,u,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var o=n[r];o()}return t};g();D();var fs=function(t){Ot.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(oa(o.target)>t?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var xc=function(){var t=0;for(fs(t);hc();)t=Bc(),fs(t);return vc()&&Dc(),t>0};g();D();g();D();var ds,wc=[],bv=function(){return wc.splice(0).forEach(function(t){return t()})},Fc=function(t){if(!ds){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return bv()}).observe(r,n),ds=function(){r.textContent="".concat(e?e--:e++)}}wc.push(t),ds()};var yc=function(t){Fc(function(){requestAnimationFrame(t)})};var aa=0,Nv=function(){return!!aa},Ov=250,Iv={attributes:!0,characterData:!0,childList:!0,subtree:!0},Tc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Sc=function(t){return t===void 0&&(t=0),Date.now()+t},ms=!1,Pv=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Ov),!ms){ms=!0;var n=Sc(e);yc(function(){var o=!1;try{o=xc()}finally{if(ms=!1,e=n-Sc(),!Nv())return;o?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Iv)};document.body?r():Kr.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Tc.forEach(function(r){return Kr.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Tc.forEach(function(r){return Kr.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),sa=new Pv,ps=function(t){!aa&&t>0&&sa.start(),aa+=t,!aa&&sa.stop()};g();D();var Lv=function(t){return!$n(t)&&!Cc(t)&&getComputedStyle(t).display==="inline"},_c=function(){function t(e,r){this.target=e,this.observedBox=r||Vr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=na(this.target,this.observedBox,!0);return Lv(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();g();D();var bc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var ua=new WeakMap,Nc=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Vn=function(){function t(){}return t.connect=function(e,r){var n=new bc(e,r);ua.set(e,n)},t.observe=function(e,r,n){var o=ua.get(e),a=o.observationTargets.length===0;Nc(o.observationTargets,r)<0&&(a&&Ot.push(o),o.observationTargets.push(new _c(r,n&&n.box)),ps(1),sa.schedule())},t.unobserve=function(e,r){var n=ua.get(e),o=Nc(n.observationTargets,r),a=n.observationTargets.length===1;o>=0&&(a&&Ot.splice(Ot.indexOf(n),1),n.observationTargets.splice(o,1),ps(-1))},t.disconnect=function(e){var r=this,n=ua.get(e);n.observationTargets.slice().forEach(function(o){return r.unobserve(e,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}();var hs=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Vn.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!is(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Vn.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!is(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Vn.unobserve(this,e)},t.prototype.disconnect=function(){Vn.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var fa=_(kc()),Jc=_(Hm());function va(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jv(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function An(t,e){if(t==null)return{};var r=jv(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Ss=(0,O.createContext)(null),Ir=()=>{var t=(0,O.useContext)(Ss);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},Wv=parseInt(O.default.version.split(".")[0],10)>=17,Uv=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Mc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Tt=typeof navigator<"u"&&/Android/.test(navigator.userAgent),pa=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Zn=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Hv=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Qc=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Yv=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Gv=Tt&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),qv=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),$v=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Vv=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),da=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_r=(!Yv||!Gv)&&!Hv&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",_s=new WeakMap,bs=new WeakMap,ef=new WeakMap,ma=new WeakMap,Cs=new WeakMap,Jn=new WeakMap,Jr=new WeakMap,Es=new WeakMap,ga=new WeakMap,As=new WeakMap,Zr=new WeakMap,Xr=new WeakMap,Xn=new WeakMap,Bs=new WeakMap,Ns=new WeakMap,qt=new WeakMap,vr=new WeakMap,At=new WeakMap,br=new WeakMap,Nr=new WeakMap,tf=new WeakMap,Bn=Symbol("placeholder"),rf=Symbol("mark-placeholder"),Kv=globalThis.Text,Os=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Zv=t=>Or(t)&&t.nodeType===8,It=t=>Or(t)&&t.nodeType===1,Or=t=>{var e=Os(t);return!!e&&t instanceof e.Node},xs=t=>{var e=t&&t.anchorNode&&Os(t.anchorNode);return!!e&&t instanceof e.Selection},nf=t=>Or(t)&&t.nodeType===3,Xv=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,Jv=t=>{var[e,r]=t;if(It(e)&&e.childNodes.length){var n=r===e.childNodes.length,o=n?r-1:r;for([e,o]=of(e,o,n?"backward":"forward"),n=o<r;It(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=eg(e,a,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},Qv=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},of=(t,e,r)=>{for(var{childNodes:n}=t,o=n[e],a=e,s=!1,u=!1;(Zv(o)||It(o)&&o.childNodes.length===0||It(o)&&o.getAttribute("contenteditable")==="false")&&!(s&&u);){if(a>=n.length){s=!0,a=e-1,r="backward";continue}if(a<0){u=!0,a=e+1,r="forward";continue}o=n[a],e=a,a+=r==="forward"?1:-1}return[o,e]},eg=(t,e,r)=>{var[n]=of(t,e,r);return n},af=t=>{var e="";if(nf(t)&&t.nodeValue)return t.nodeValue;if(It(t)){for(var r of Array.from(t.childNodes))e+=af(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},tg=/data-slate-fragment="(.+?)"/m,rg=t=>{var e=t.getData("text/html"),[,r]=e.match(tg)||[];return r},Is=(t,e,r)=>{var{target:n}=e;if(It(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=M.getWindow(t);if(o.contains(n))return M.hasDOMNode(t,n,{editable:!0});var a=r.find(s=>{var{addedNodes:u,removedNodes:l}=s;for(var c of u)if(c===n||c.contains(n))return!0;for(var f of l)if(f===n||f.contains(n))return!0});return!a||a===e?!1:Is(t,a,r)},ng=0,ws=class{constructor(){this.id="".concat(ng++)}},M={androidPendingDiffs:t=>At.get(t),androidScheduleFlush:t=>{var e;(e=Ns.get(t))===null||e===void 0||e()},blur:t=>{var e=M.toDOMNode(t,t),r=M.findDocumentOrShadowRoot(t);Zr.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=M.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&z.deselect(t)},findDocumentOrShadowRoot:t=>{var e=M.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:o}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=M.toSlateNode(t,e.target),s=M.findPath(t,a);if(Z.isElement(a)&&d.isVoid(t,a)){var u=o.getBoundingClientRect(),l=t.isInline(a)?r-u.left<u.left+u.width-r:n-u.top<u.top+u.height-n,c=d.point(t,s,{edge:l?"start":"end"}),f=l?d.before(t,c):d.after(t,c);if(f){var v=d.range(t,f);return v}}var p,{document:h}=M.getWindow(t);if(h.caretRangeFromPoint)p=h.caretRangeFromPoint(r,n);else{var m=h.caretPositionFromPoint(r,n);m&&(p=h.createRange(),p.setStart(m.offsetNode,m.offset),p.setEnd(m.offsetNode,m.offset))}if(!p)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var i=M.toSlateRange(t,p,{exactMatch:!1,suppressThrow:!1});return i},findKey:(t,e)=>{var r=Es.get(e);return r||(r=new ws,Es.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var o=bs.get(n);if(o==null){if(d.isEditor(n))return r;break}var a=_s.get(n);if(a==null)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(tt.stringify(e)))},focus:t=>{var e=M.toDOMNode(t,t),r=M.findDocumentOrShadowRoot(t);Zr.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=ef.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=n,a=M.toDOMNode(e,e),s;try{s=It(r)?r:r.parentElement}catch(u){if(!u.message.includes('Permission denied to access property "nodeType"'))throw u}return s?s.closest("[data-slate-editor]")===a&&(!o||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>Or(e)&&M.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return d.hasPath(t,r.path)&&d.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>M.hasEditableTarget(t,e)||M.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>Or(e)&&M.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Xr.get(t),isFocused:t=>!!Zr.get(t),isReadOnly:t=>!!As.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(As.get(t))return!1;var r=M.hasTarget(t,e)&&M.toSlateNode(t,e);return Z.isElement(r)&&d.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=ga.get(t),n=d.isEditor(e)?ma.get(t):r?.get(M.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(tt.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=d.node(t,e.path),n=M.toDOMNode(t,r),o;d.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(a)),u=0,l=0;l<s.length;l++){var c=s[l],f=c.childNodes[0];if(!(f==null||f.textContent==null)){var{length:v}=f.textContent,p=c.getAttribute("data-slate-length"),h=p==null?v:parseInt(p,10),m=u+h,i=s[l+1];if(e.offset===m&&i!==null&&i!==void 0&&i.hasAttribute("data-slate-mark-placeholder")){var C,E=i.childNodes[0];o=[E instanceof Kv?E:i,(C=i.textContent)!==null&&C!==void 0&&C.startsWith("\uFEFF")?1:0];break}if(e.offset<=m){var A=Math.min(v,Math.max(0,e.offset-u));o=[f,A];break}u=m}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(tt.stringify(e)));return o},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,o=b.isBackward(e),a=M.toDOMPoint(t,r),s=b.isCollapsed(e)?a:M.toDOMPoint(t,n),u=M.getWindow(t),l=u.document.createRange(),[c,f]=o?s:a,[v,p]=o?a:s,h=It(c)?c:c.parentElement,m=!!h.getAttribute("data-slate-zero-width"),i=It(v)?v:v.parentElement,C=!!i.getAttribute("data-slate-zero-width");return l.setStart(c,m?1:f),l.setEnd(v,C?1:p),l},toSlateNode:(t,e)=>{var r=It(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?Jn.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,[a,s]=n?e:Jv(e),u=a.parentNode,l=null,c=0;if(u){var f,v,p=M.toDOMNode(t,t),h=u.closest('[data-slate-void="true"]'),m=h&&p.contains(h)?h:null,i=u.closest("[data-slate-leaf]"),C=null;if(i){if(l=i.closest('[data-slate-node="text"]'),l){var E=M.getWindow(t),A=E.document.createRange();A.setStart(l,0),A.setEnd(a,s);var w=A.cloneContents(),F=[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))];F.forEach(Y=>{if(Tt&&!n&&Y.hasAttribute("data-slate-zero-width")&&Y.textContent.length>0&&Y.textContext!=="\uFEFF"){Y.textContent.startsWith("\uFEFF")&&(Y.textContent=Y.textContent.slice(1));return}Y.parentNode.removeChild(Y)}),c=w.textContent.length,C=l}}else if(m){for(var S=m.querySelectorAll("[data-slate-leaf]"),k=0;k<S.length;k++){var P=S[k];if(M.hasDOMNode(t,P)){i=P;break}}i?(l=i.closest('[data-slate-node="text"]'),C=i,c=C.textContent.length,C.querySelectorAll("[data-slate-zero-width]").forEach(Y=>{c-=Y.textContent.length})):c=1}C&&c===C.textContent.length&&Tt&&C.getAttribute("data-slate-zero-width")==="z"&&(f=C.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(u.hasAttribute("data-slate-zero-width")||pa&&(v=C.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&c--}if(Tt&&!l&&!n){var L=u.hasAttribute("data-slate-node")?u:u.closest("[data-slate-node]");if(L&&M.hasDOMNode(t,L,{editable:!0})){var I=M.toSlateNode(t,L),{path:j,offset:K}=d.start(t,M.findPath(t,I));return L.querySelector("[data-slate-leaf]")||(K=s),{path:j,offset:K}}}if(!l){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var R=M.toSlateNode(t,l),U=M.findPath(t,R);return{path:U,offset:c}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,a=xs(e)?e.anchorNode:e.startContainer,s,u,l,c,f;if(a&&(xs(e)?(s=e.anchorNode,u=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Qc&&Qv(s)?f=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:f=e.isCollapsed):(s=e.startContainer,u=e.startOffset,l=e.endContainer,c=e.endOffset,f=e.collapsed)),s==null||l==null||u==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in l&&l.getAttribute("contenteditable")==="false"){var v;l=s,c=((v=s.textContent)===null||v===void 0?void 0:v.length)||0}var p=M.toSlatePoint(t,[s,u],{exactMatch:n,suppressThrow:o});if(!p)return null;var h=f?p:M.toSlatePoint(t,[l,c],{exactMatch:n,suppressThrow:o});if(!h)return null;if(pa&&!f&&s!==l){var m=d.isEnd(t,p,p.path),i=d.isStart(t,h,h.path);if(m){var C=d.after(t,p);p=C||p}if(i){var E=d.before(t,h);h=E||h}}var A={anchor:p,focus:h};return b.isExpanded(A)&&b.isForward(A)&&It(l)&&d.void(t,{at:A.focus,mode:"highest"})&&(A=d.unhangRange(t,A,{voids:!0})),A}};function og(t,e){var{path:r,diff:n}=e;if(!d.hasPath(t,r))return!1;var o=$.get(t,r);if(!J.isText(o))return!1;if(n.start!==o.text.length||n.text.length===0)return o.text.slice(n.start,n.start+n.text.length)===n.text;var a=B.next(r);if(!d.hasPath(t,a))return!1;var s=$.get(t,a);return J.isText(s)&&s.text.startsWith(n.text)}function sf(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),t)}function ag(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function sg(t,e,r){for(var n=Math.min(t.length,e.length,r),o=0;o<n;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return n}function uf(t,e){var{start:r,end:n,text:o}=e,a=t.slice(r,n),s=ag(a,o),u=Math.min(a.length-s,o.length-s),l=sg(a,o,u),c={start:r+s,end:n-l,text:o.slice(s,o.length-l)};return c.start===c.end&&c.text.length===0?null:c}function ug(t,e,r){var n=Math.min(e.start,r.start),o=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),a=sf(t,e,r),s=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-o),u=a.slice(n,s),l=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return uf(t,{start:n,end:l,text:u})}function ig(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Fs(t,e){var{path:r,offset:n}=e;if(!d.hasPath(t,r))return null;var o=$.get(t,r);if(!J.isText(o))return null;var a=d.above(t,{match:u=>Z.isElement(u)&&d.isBlock(t,u),at:r});if(!a)return null;for(;n>o.text.length;){var s=d.next(t,{at:r,match:J.isText});if(!s||!B.isDescendant(s[1],a[1]))return null;n-=o.text.length,o=s[0],r=s[1]}return{path:r,offset:n}}function Rc(t,e){var r=Fs(t,e.anchor);if(!r)return null;if(b.isCollapsed(e))return{anchor:r,focus:r};var n=Fs(t,e.focus);return n?{anchor:r,focus:n}:null}function ys(t,e,r){var n=At.get(t),o=n?.find(f=>{var{path:v}=f;return B.equals(v,e.path)});if(!o||e.offset<=o.diff.start)return pe.transform(e,r,{affinity:"backward"});var{diff:a}=o;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},u=pe.transform(s,r,{affinity:"backward"});return u?{path:u.path,offset:u.offset+e.offset-a.start}:null}var l={path:e.path,offset:e.offset-a.text.length+a.end-a.start},c=pe.transform(l,r,{affinity:"backward"});return c?r.type==="split_node"&&B.equals(r.path,e.path)&&l.offset<r.position&&a.start<r.position?c:{path:c.path,offset:c.offset+a.text.length-a.end+a.start}:null}function zc(t,e,r){var n=ys(t,e.anchor,r);if(!n)return null;if(b.isCollapsed(e))return{anchor:n,focus:n};var o=ys(t,e.focus,r);return o?{anchor:n,focus:o}:null}function lg(t,e){var{path:r,diff:n,id:o}=t;switch(e.type){case"insert_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:o,path:r};case"remove_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:o,path:r};case"split_node":return!B.equals(e.path,r)||e.position>=n.end?{diff:n,id:o,path:B.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:o,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:o,path:B.transform(r,e,{affinity:"forward"})};case"merge_node":return B.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:o,path:B.transform(r,e)}:{diff:n,id:o,path:B.transform(r,e)}}var a=B.transform(r,e);return a?{diff:n,path:a,id:o}:null}function jc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function la(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jc(Object(r),!0).forEach(function(n){va(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var cg=25,fg=200,dg=function(){},mg=t=>t?.constructor.name==="DataTransfer";function pg(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,o=!1,a=null,s=null,u=null,l=0,c=!1,f=()=>{var R=Nr.get(e);if(Nr.delete(e),R){var{selection:U}=e,Y=Rc(e,R);Y&&(!U||!b.equals(Y,U))&&z.select(e,Y)}},v=()=>{var R=br.get(e);if(br.delete(e),!!R){if(R.at){var U=pe.isPoint(R.at)?Fs(e,R.at):Rc(e,R.at);if(!U)return;var Y=d.range(e,U);(!e.selection||!b.equals(e.selection,Y))&&z.select(e,U)}R.run()}},p=()=>{if(s&&(clearTimeout(s),s=null),u&&(clearTimeout(u),u=null),!F()&&!w()){f();return}o||(o=!0,setTimeout(()=>o=!1)),w()&&(o="action");var R=e.selection&&d.rangeRef(e,e.selection,{affinity:"forward"});vr.set(e,e.marks),dg("flush",br.get(e),At.get(e));for(var U=F(),Y;Y=(G=At.get(e))===null||G===void 0?void 0:G[0];){var G,ne,ce=qt.get(e);ce!==void 0&&(qt.delete(e),e.marks=ce),ce&&c===!1&&(c=null);var ie=ig(Y);(!e.selection||!b.equals(e.selection,ie))&&z.select(e,ie),Y.diff.text?d.insertText(e,Y.diff.text):d.deleteFragment(e),At.set(e,(ne=At.get(e))===null||ne===void 0?void 0:ne.filter(Se=>{var{id:ge}=Se;return ge!==Y.id})),og(e,Y)||(U=!1,br.delete(e),vr.delete(e),o="action",Nr.delete(e),r.cancel(),n.cancel(),R?.unref())}var re=R?.unref();if(re&&!Nr.get(e)&&(!e.selection||!b.equals(re,e.selection))&&z.select(e,re),w()){v();return}U&&r(),r.flush(),n.flush(),f();var fe=vr.get(e);vr.delete(e),fe!==void 0&&(e.marks=fe,e.onChange())},h=R=>{a&&clearTimeout(a),a=setTimeout(()=>{Xr.set(e,!1),p()},cg)},m=R=>{Xr.set(e,!0),a&&(clearTimeout(a),a=null)},i=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=Cs.get(e);if(!!Y){if(F()||U){Y.style.display="none";return}Y.style.removeProperty("display")}},C=(R,U)=>{var Y,G=(Y=At.get(e))!==null&&Y!==void 0?Y:[];At.set(e,G);var ne=$.leaf(e,R),ce=G.findIndex(fe=>B.equals(fe.path,R));if(ce<0){var ie=uf(ne.text,U);ie&&G.push({path:R,diff:U,id:l++}),i();return}var re=ug(ne.text,G[ce].diff,U);if(!re){G.splice(ce,1),i();return}G[ce]=la(la({},G[ce]),{},{diff:re})},E=function(U){var{at:Y}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,Nr.delete(e),r.cancel(),n.cancel(),w()&&p(),br.set(e,{at:Y,run:U}),u=setTimeout(p)},A=R=>{var U;s&&(clearTimeout(s),s=null);var{inputType:Y}=R,G=null,ne=R.dataTransfer||R.data||void 0;c!==!1&&Y!=="insertText"&&Y!=="insertCompositionText"&&(c=!1);var[ce]=R.getTargetRanges();ce&&(G=M.toSlateRange(e,ce,{exactMatch:!1,suppressThrow:!0}));var ie=M.getWindow(e),re=ie.getSelection();if(!G&&re&&(ce=re,G=M.toSlateRange(e,re,{exactMatch:!1,suppressThrow:!0})),G=(U=G)!==null&&U!==void 0?U:e.selection,!!G){var fe=!0;if(Y.startsWith("delete")){if(b.isExpanded(G)){var[Se,ge]=b.edges(G),Me=$.leaf(e,Se.path);if(Me.text.length===Se.offset&&ge.offset===0){var x=d.next(e,{at:Se.path,match:J.isText});x&&B.equals(x[1],ge.path)&&(G={anchor:ge,focus:ge})}}var q=Y.endsWith("Backward")?"backward":"forward",[W,V]=b.edges(G),[me,ae]=d.leaf(e,W.path),De={text:"",start:W.offset,end:V.offset},Ie=At.get(e),Oe=Ie?.find(jt=>B.equals(jt.path,ae)),Le=Oe?[Oe.diff,De]:[De],_e=sf(me.text,...Le);if(_e.length===0&&(fe=!1),b.isExpanded(G)){if(fe&&B.equals(G.anchor.path,G.focus.path)){var at={path:G.anchor.path,offset:W.offset},ft=d.range(e,at,at);return P(ft),C(G.anchor.path,{text:"",end:V.offset,start:W.offset})}return E(()=>d.deleteFragment(e,{direction:q}),{at:G})}}switch(Y){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return E(()=>d.deleteFragment(e),{at:G});case"deleteContent":case"deleteContentForward":{var{anchor:Xe}=G;if(fe&&b.isCollapsed(G)){var _t=$.leaf(e,Xe.path);if(Xe.offset<_t.text.length)return C(Xe.path,{text:"",start:Xe.offset,end:Xe.offset+1})}return E(()=>d.deleteForward(e),{at:G})}case"deleteContentBackward":{var Rt,{anchor:dt}=G,bt=xs(ce)?ce.isCollapsed:!!((Rt=ce)!==null&&Rt!==void 0&&Rt.collapsed);return fe&&bt&&b.isCollapsed(G)&&dt.offset>0?C(dt.path,{text:"",start:dt.offset-1,end:dt.offset}):E(()=>d.deleteBackward(e),{at:G})}case"deleteEntireSoftLine":return E(()=>{d.deleteBackward(e,{unit:"line"}),d.deleteForward(e,{unit:"line"})},{at:G});case"deleteHardLineBackward":return E(()=>d.deleteBackward(e,{unit:"block"}),{at:G});case"deleteSoftLineBackward":return E(()=>d.deleteBackward(e,{unit:"line"}),{at:G});case"deleteHardLineForward":return E(()=>d.deleteForward(e,{unit:"block"}),{at:G});case"deleteSoftLineForward":return E(()=>d.deleteForward(e,{unit:"line"}),{at:G});case"deleteWordBackward":return E(()=>d.deleteBackward(e,{unit:"word"}),{at:G});case"deleteWordForward":return E(()=>d.deleteForward(e,{unit:"word"}),{at:G});case"insertLineBreak":return E(()=>d.insertSoftBreak(e),{at:G});case"insertParagraph":return E(()=>d.insertBreak(e),{at:G});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(mg(ne))return E(()=>M.insertData(e,ne),{at:G});var Be=ne??"";if(qt.get(e)&&(Be=Be.replace("\uFEFF","")),Y==="insertText"&&/.*\n.*\n$/.test(Be)&&(Be=Be.slice(0,-1)),Be.includes(`
`))return E(()=>{var jt=Be.split(`
`);jt.forEach((zr,ho)=>{zr&&d.insertText(e,zr),ho!==jt.length-1&&d.insertSoftBreak(e)})},{at:G});if(B.equals(G.anchor.path,G.focus.path)){var[fr,un]=b.edges(G),ot={start:fr.offset,end:un.offset,text:Be};if(Be&&c&&Y==="insertCompositionText"){var zt=c.start+c.text.search(/\S|$/),po=ot.start+ot.text.search(/\S|$/);po===zt+1&&ot.end===c.start+c.text.length?(ot.start-=1,c=null,j()):c=!1}else Y==="insertText"?c===null?c=ot:c&&b.isCollapsed(G)&&c.end+c.text.length===fr.offset?c=la(la({},c),{},{text:c.text+Be}):c=!1:c=!1;if(fe){C(fr.path,ot);return}}return E(()=>d.insertText(e,Be),{at:G})}}}},w=()=>!!br.get(e),F=()=>{var R;return!!((R=At.get(e))!==null&&R!==void 0&&R.length)},S=()=>w()||F(),k=()=>o,P=R=>{Nr.set(e,R),s&&(clearTimeout(s),s=null);var{selection:U}=e;if(!!R){var Y=!U||!B.equals(U.anchor.path,R.anchor.path),G=!U||!B.equals(U.anchor.path.slice(0,-1),R.anchor.path.slice(0,-1));(Y&&c||G)&&(c=!1),(Y||F())&&(s=setTimeout(p,fg))}},L=()=>{(w()||!F())&&p()},I=R=>{F()||(i(!0),setTimeout(i))},j=()=>{w()||(u=setTimeout(p))},K=R=>{if(!(F()||w())&&R.some(Y=>Is(e,Y,R))){var U;(U=tf.get(e))===null||U===void 0||U()}};return{flush:p,scheduleFlush:j,hasPendingDiffs:F,hasPendingAction:w,hasPendingChanges:S,isFlushing:k,handleUserSelect:P,handleCompositionEnd:h,handleCompositionStart:m,handleDOMBeforeInput:A,handleKeyDown:I,handleDomMutations:K,handleInput:L}}function hg(){var t=(0,O.useRef)(!1);return(0,O.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var Qn=da?O.useLayoutEffect:O.useEffect;function vg(t,e,r){var[n]=(0,O.useState)(()=>new MutationObserver(e));Qn(()=>{n.takeRecords()}),(0,O.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var gg=["node"];function Wc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Dg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wc(Object(r),!0).forEach(function(n){va(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Cg={subtree:!0,childList:!0,characterData:!0},Eg=Tt?t=>{var{node:e}=t,r=An(t,gg);if(!Tt)return null;var n=Ir(),o=hg(),[a]=(0,O.useState)(()=>pg(Dg({editor:n},r)));return vg(e,a.handleDomMutations,Cg),Ns.set(n,a.scheduleFlush),o&&a.flush(),a}:()=>null,Ag=["anchor","focus"],Bg=["anchor","focus"],xg=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),lf=(t,e)=>{var r=An(t,Ag),n=An(e,Bg);return t[Bn]===e[Bn]&&xg(r,n)},wg=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!b.equals(n,o)||!lf(n,o))return!1}return!0},Fg=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!lf(n,o))return!1}return!0},yg=t=>{var{isLast:e,leaf:r,parent:n,text:o}=t,a=Ir(),s=M.findPath(a,o),u=B.parent(s),l=r[rf]===!0;return a.isVoid(n)?O.default.createElement(Ds,{length:$.string(n).length}):r.text===""&&n.children[n.children.length-1]===o&&!a.isInline(n)&&d.string(a,u)===""?O.default.createElement(Ds,{isLineBreak:!0,isMarkPlaceholder:l}):r.text===""?O.default.createElement(Ds,{isMarkPlaceholder:l}):e&&r.text.slice(-1)===`
`?O.default.createElement(Uc,{isTrailing:!0,text:r.text}):O.default.createElement(Uc,{text:r.text})},Uc=t=>{var{text:e,isTrailing:r=!1}=t,n=(0,O.useRef)(null),o=()=>"".concat(e??"").concat(r?`
`:""),[a]=(0,O.useState)(o);return Qn(()=>{var s=o();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),O.default.createElement(Tg,{ref:n},a)},Tg=(0,O.memo)((0,O.forwardRef)((t,e)=>O.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),Ds=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,o={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(o["data-slate-mark-placeholder"]=!0),O.default.createElement("span",Object.assign({},o),!Tt||!r?"\uFEFF":null,r?O.default.createElement("br",null):null)};function Sg(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Hc(t){t.current&&(clearTimeout(t.current),t.current=null)}var _g=t=>{var{leaf:e,isLast:r,text:n,parent:o,renderPlaceholder:a,renderLeaf:s=A=>O.default.createElement(Ng,Object.assign({},A))}=t,u=Ir(),l=(0,O.useRef)(null),c=(0,O.useRef)(null),[f,v]=(0,O.useState)(!1),p=(0,O.useRef)(null),h=(0,O.useCallback)(A=>{if(Sg(l,A==null),A==null){var w;Cs.delete(u),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(Cs.set(u,A),!l.current){var F=window.ResizeObserver||hs;l.current=new F(()=>{var S;(S=e.onPlaceholderResize)===null||S===void 0||S.call(e,A)})}l.current.observe(A),c.current=A}},[c,e,u]),m=O.default.createElement(yg,{isLast:r,leaf:e,parent:o,text:n}),i=e[Bn];if((0,O.useEffect)(()=>(i?p.current||(p.current=setTimeout(()=>{v(!0),p.current=null},300)):(Hc(p),v(!1)),()=>Hc(p)),[i,v]),i&&f){var C={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Zn?"inherit":void 0},contentEditable:!1,ref:h}};m=O.default.createElement(O.default.Fragment,null,a(C),m)}var E={"data-slate-leaf":!0};return s({attributes:E,children:m,leaf:e,text:n})},bg=O.default.memo(_g,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&J.equals(e.leaf,t.leaf)&&e.leaf[Bn]===t.leaf[Bn]),Ng=t=>{var{attributes:e,children:r}=t;return O.default.createElement("span",Object.assign({},e),r)},Og=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:a,text:s}=t,u=Ir(),l=(0,O.useRef)(null),c=J.decorations(s,e),f=M.findKey(u,s),v=[],p=0;p<c.length;p++){var h=c[p];v.push(O.default.createElement(bg,{isLast:r&&p===c.length-1,key:"".concat(f.id,"-").concat(p),renderPlaceholder:o,leaf:h,text:s,parent:n,renderLeaf:a}))}var m=(0,O.useCallback)(i=>{var C=ga.get(u);i?(C?.set(f,i),Jr.set(s,i),Jn.set(i,s)):(C?.delete(f),Jr.delete(s),l.current&&Jn.delete(l.current)),l.current=i},[l,u,f,s]);return O.default.createElement("span",{"data-slate-node":"text",ref:m},v)},cf=O.default.memo(Og,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Fg(e.decorations,t.decorations)),Ig=t=>{var{decorations:e,element:r,renderElement:n=A=>O.default.createElement(Lg,Object.assign({},A)),renderPlaceholder:o,renderLeaf:a,selection:s}=t,u=Ir(),l=Rg(),c=u.isInline(r),f=M.findKey(u,r),v=(0,O.useCallback)(A=>{var w=ga.get(u);A?(w?.set(f,A),Jr.set(r,A),Jn.set(A,r)):(w?.delete(f),Jr.delete(r))},[u,f,r]),p=df({decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}),h={"data-slate-node":"element",ref:v};if(c&&(h["data-slate-inline"]=!0),!c&&d.hasInlines(u,r)){var m=$.string(r),i=(0,Ts.default)(m);i==="rtl"&&(h.dir=i)}if(d.isVoid(u,r)){h["data-slate-void"]=!0,!l&&c&&(h.contentEditable=!1);var C=c?"span":"div",[[E]]=$.texts(r);p=O.default.createElement(C,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},O.default.createElement(cf,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:E})),_s.set(E,0),bs.set(E,r)}return n({attributes:h,children:p,element:r})},Pg=O.default.memo(Ig,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&wg(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&b.equals(t.selection,e.selection))),Lg=t=>{var{attributes:e,children:r,element:n}=t,o=Ir(),a=o.isInline(n)?"span":"div";return O.default.createElement(a,Object.assign({},e,{style:{position:"relative"}}),r)},ff=(0,O.createContext)(()=>[]),kg=()=>(0,O.useContext)(ff),Mg=(0,O.createContext)(!1);var df=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}=t,u=kg(),l=Ir(),c=M.findPath(l,r),f=[],v=Z.isElement(r)&&!l.isInline(r)&&d.hasInlines(l,r),p=0;p<r.children.length;p++){var h=c.concat(p),m=r.children[p],i=M.findKey(l,m),C=d.range(l,h),E=s&&b.intersection(C,s),A=u([m,h]);for(var w of e){var F=b.intersection(w,C);F&&A.push(F)}Z.isElement(m)?f.push(O.default.createElement(Mg.Provider,{key:"provider-".concat(i.id),value:!!E},O.default.createElement(Pg,{decorations:A,element:m,key:i.id,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:E}))):f.push(O.default.createElement(cf,{decorations:A,key:i.id,isLast:v&&p===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:a,text:m})),_s.set(m,p),bs.set(m,r)}return f},mf=(0,O.createContext)(!1),Rg=()=>(0,O.useContext)(mf),pf=(0,O.createContext)(null),zg=()=>{var t=(0,O.useContext)(pf);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function jg(){var t=Ir(),e=(0,O.useRef)(!1),r=(0,O.useRef)(0),n=(0,O.useCallback)(()=>{if(!e.current){e.current=!0;var o=M.getWindow(t);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,O.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var Wg=3,Ug={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Hg={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Yg={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ze=t=>{var e=Ug[t],r=Hg[t],n=Yg[t],o=e&&(0,fa.isKeyHotkey)(e),a=r&&(0,fa.isKeyHotkey)(r),s=n&&(0,fa.isKeyHotkey)(n);return u=>!!(o&&o(u)||Mc&&a&&a(u)||!Mc&&s&&s(u))},We={isBold:ze("bold"),isCompose:ze("compose"),isMoveBackward:ze("moveBackward"),isMoveForward:ze("moveForward"),isDeleteBackward:ze("deleteBackward"),isDeleteForward:ze("deleteForward"),isDeleteLineBackward:ze("deleteLineBackward"),isDeleteLineForward:ze("deleteLineForward"),isDeleteWordBackward:ze("deleteWordBackward"),isDeleteWordForward:ze("deleteWordForward"),isExtendBackward:ze("extendBackward"),isExtendForward:ze("extendForward"),isExtendLineBackward:ze("extendLineBackward"),isExtendLineForward:ze("extendLineForward"),isItalic:ze("italic"),isMoveLineBackward:ze("moveLineBackward"),isMoveLineForward:ze("moveLineForward"),isMoveWordBackward:ze("moveWordBackward"),isMoveWordForward:ze("moveWordForward"),isRedo:ze("redo"),isSoftBreak:ze("insertSoftBreak"),isSplitBlock:ze("splitBlock"),isTransposeCharacter:ze("transposeCharacter"),isUndo:ze("undo")},Gg=(t,e)=>{var r=[],n=()=>{r=[]},o=s=>{if(!!e.current){var u=s.filter(l=>Is(t,l,s));r.push(...u)}};function a(){r.length>0&&(r.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(u=>{s.target.insertBefore(u,s.nextSibling)}),s.addedNodes.forEach(u=>{s.target.removeChild(u)}))}),n())}return{registerMutations:o,restoreDOM:a,clear:n}},qg={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},ha=class extends O.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,qg)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=Gg(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,o=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};ha.contextType=Ss;var $g=Tt?ha:t=>{var{children:e}=t;return O.default.createElement(O.default.Fragment,null,e)},Vg=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Kg=["text"];function Yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yc(Object(r),!0).forEach(function(n){va(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Zg=t=>O.default.createElement(O.default.Fragment,null,df(t)),hf=t=>{var e=(0,O.useCallback)(x=>O.default.createElement(Xg,Object.assign({},x)),[]),{autoFocus:r,decorate:n=Jg,onDOMBeforeInput:o,placeholder:a,readOnly:s=!1,renderElement:u,renderLeaf:l,renderPlaceholder:c=e,scrollSelectionIntoView:f=Qg,style:v={},as:p="div",disableDefaultStyles:h=!1}=t,m=An(t,Vg),i=zg(),[C,E]=(0,O.useState)(!1),A=(0,O.useRef)(null),w=(0,O.useRef)([]),[F,S]=(0,O.useState)(),{onUserInput:k,receivedUserInput:P}=jg(),[,L]=(0,O.useReducer)(x=>x+1,0);tf.set(i,L),As.set(i,s);var I=(0,O.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,O.useEffect)(()=>{A.current&&r&&A.current.focus()},[r]);var j=(0,O.useRef)(),K=(0,O.useMemo)(()=>(0,Xc.default)(()=>{var x=j.current;if((Tt||!M.isComposing(i))&&(!I.isUpdatingSelection||x!=null&&x.isFlushing())&&!I.isDraggingInternally){var q=M.findDocumentOrShadowRoot(i),{activeElement:W}=q,V=M.toDOMNode(i,i),me=q.getSelection();if(W===V?(I.latestElement=W,Zr.set(i,!0)):Zr.delete(i),!me)return z.deselect(i);var{anchorNode:ae,focusNode:De}=me,Ie=M.hasEditableTarget(i,ae)||M.isTargetInsideNonReadonlyVoid(i,ae),Oe=M.hasEditableTarget(i,De)||M.isTargetInsideNonReadonlyVoid(i,De);if(Ie&&Oe){var Le=M.toSlateRange(i,me,{exactMatch:!1,suppressThrow:!0});Le&&(!M.isComposing(i)&&!(x!=null&&x.hasPendingChanges())&&!(x!=null&&x.isFlushing())?z.select(i,Le):x?.handleUserSelect(Le))}s&&(!Ie||!Oe)&&z.deselect(i)}},100),[i,s,I]),R=(0,O.useMemo)(()=>(0,Zc.default)(K,0),[K]);j.current=Eg({node:A,onDOMSelectionChange:K,scheduleOnDOMSelectionChange:R}),Qn(()=>{var x,q,W;A.current&&(W=Os(A.current))?(ef.set(i,W),ma.set(i,A.current),Jr.set(i,A.current),Jn.set(A.current,i)):Jr.delete(i);var{selection:V}=i,me=M.findDocumentOrShadowRoot(i),ae=me.getSelection();if(!(!ae||!M.isFocused(i)||(x=j.current)!==null&&x!==void 0&&x.hasPendingAction())){var De=at=>{var ft=ae.type!=="None";if(!(!V&&!ft)){var Xe=ma.get(i),_t=!1;if(Xe.contains(ae.anchorNode)&&Xe.contains(ae.focusNode)&&(_t=!0),ft&&_t&&V&&!at){var Rt=M.toSlateRange(i,ae,{exactMatch:!0,suppressThrow:!0});if(Rt&&b.equals(Rt,V)){var dt;if(!I.hasMarkPlaceholder)return;var{anchorNode:bt}=ae;if(bt!=null&&(dt=bt.parentElement)!==null&&dt!==void 0&&dt.hasAttribute("data-slate-mark-placeholder"))return}}if(V&&!M.hasRange(i,V)){i.selection=M.toSlateRange(i,ae,{exactMatch:!1,suppressThrow:!0});return}I.isUpdatingSelection=!0;var Be=V&&M.toDOMRange(i,V);return Be?(b.isBackward(V)?ae.setBaseAndExtent(Be.endContainer,Be.endOffset,Be.startContainer,Be.startOffset):ae.setBaseAndExtent(Be.startContainer,Be.startOffset,Be.endContainer,Be.endOffset),f(i,Be)):ae.removeAllRanges(),Be}},Ie=De(),Oe=((q=j.current)===null||q===void 0?void 0:q.isFlushing())==="action";if(!Tt||!Oe){setTimeout(()=>{if(Ie&&pa){var at=M.toDOMNode(i,i);at.focus()}I.isUpdatingSelection=!1});return}var Le=null,_e=requestAnimationFrame(()=>{if(Oe){var at=ft=>{try{var Xe=M.toDOMNode(i,i);Xe.focus(),De(ft)}catch{}};at(),Le=setTimeout(()=>{at(!0),I.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(_e),Le&&clearTimeout(Le)}}});var U=(0,O.useCallback)(x=>{if(k(),!s&&M.hasEditableTarget(i,x.target)&&!eD(x,o)){var q;if(j.current)return j.current.handleDOMBeforeInput(x);R.flush(),K.flush();var{selection:W}=i,{inputType:V}=x,me=x.dataTransfer||x.data||void 0,ae=V==="insertCompositionText"||V==="deleteCompositionText";if(ae&&M.isComposing(i))return;var De=!1;if(V==="insertText"&&W&&b.isCollapsed(W)&&x.data&&x.data.length===1&&/[a-z ]/i.test(x.data)&&W.anchor.offset!==0){var Ie,Oe;De=!0,i.marks&&(De=!1);var{anchor:Le}=W,[_e,at]=M.toDOMPoint(i,Le),ft=(Ie=_e.parentElement)===null||Ie===void 0?void 0:Ie.closest("a"),Xe=M.getWindow(i);if(De&&ft&&M.hasDOMNode(i,ft)){var _t,Rt=Xe?.document.createTreeWalker(ft,NodeFilter.SHOW_TEXT).lastChild();Rt===_e&&((_t=Rt.textContent)===null||_t===void 0?void 0:_t.length)===at&&(De=!1)}if(De&&_e.parentElement&&(Xe==null||(Oe=Xe.getComputedStyle(_e.parentElement))===null||Oe===void 0?void 0:Oe.whiteSpace)==="pre"){var dt=d.above(i,{at:Le.path,match:zt=>Z.isElement(zt)&&d.isBlock(i,zt)});dt&&$.string(dt[0]).includes("	")&&(De=!1)}}if(!V.startsWith("delete")||V.startsWith("deleteBy")){var[bt]=x.getTargetRanges();if(bt){var Be=M.toSlateRange(i,bt,{exactMatch:!1,suppressThrow:!1});if(!W||!b.equals(W,Be)){De=!1;var fr=!ae&&i.selection&&d.rangeRef(i,i.selection);z.select(i,Be),fr&&Xn.set(i,fr)}}}if(ae)return;if(De||x.preventDefault(),W&&b.isExpanded(W)&&V.startsWith("delete")){var un=V.endsWith("Backward")?"backward":"forward";d.deleteFragment(i,{direction:un});return}switch(V){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{d.deleteFragment(i);break}case"deleteContent":case"deleteContentForward":{d.deleteForward(i);break}case"deleteContentBackward":{d.deleteBackward(i);break}case"deleteEntireSoftLine":{d.deleteBackward(i,{unit:"line"}),d.deleteForward(i,{unit:"line"});break}case"deleteHardLineBackward":{d.deleteBackward(i,{unit:"block"});break}case"deleteSoftLineBackward":{d.deleteBackward(i,{unit:"line"});break}case"deleteHardLineForward":{d.deleteForward(i,{unit:"block"});break}case"deleteSoftLineForward":{d.deleteForward(i,{unit:"line"});break}case"deleteWordBackward":{d.deleteBackward(i,{unit:"word"});break}case"deleteWordForward":{d.deleteForward(i,{unit:"word"});break}case"insertLineBreak":d.insertSoftBreak(i);break;case"insertParagraph":{d.insertBreak(i);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{V==="insertFromComposition"&&M.isComposing(i)&&(E(!1),Xr.set(i,!1)),me?.constructor.name==="DataTransfer"?M.insertData(i,me):typeof me=="string"&&(De?w.current.push(()=>d.insertText(i,me)):d.insertText(i,me));break}}var ot=(q=Xn.get(i))===null||q===void 0?void 0:q.unref();Xn.delete(i),ot&&(!i.selection||!b.equals(i.selection,ot))&&z.select(i,ot)}},[i,K,k,o,s,R]),Y=(0,O.useCallback)(x=>{x==null?(K.cancel(),R.cancel(),ma.delete(i),Jr.delete(i),A.current&&_r&&A.current.removeEventListener("beforeinput",U)):_r&&x.addEventListener("beforeinput",U),A.current=x},[K,R,i,U]);Qn(()=>{var x=M.getWindow(i);return x.document.addEventListener("selectionchange",R),()=>{x.document.removeEventListener("selectionchange",R)}},[R]);var G=n([i,[]]),ne=a&&i.children.length===1&&Array.from($.texts(i)).length===1&&$.string(i)===""&&!C,ce=(0,O.useCallback)(x=>{if(x&&ne){var q;S((q=x.getBoundingClientRect())===null||q===void 0?void 0:q.height)}else S(void 0)},[ne]);if(ne){var ie=d.start(i,[]);G.push({[Bn]:!0,placeholder:a,onPlaceholderResize:ce,anchor:ie,focus:ie})}var{marks:re}=i;if(I.hasMarkPlaceholder=!1,i.selection&&b.isCollapsed(i.selection)&&re){var{anchor:fe}=i.selection,Se=$.leaf(i,fe.path),ge=An(Se,Kg);if(!J.equals(Se,re,{loose:!0})){I.hasMarkPlaceholder=!0;var Me=Object.fromEntries(Object.keys(ge).map(x=>[x,null]));G.push(En(En(En({[rf]:!0},Me),re),{},{anchor:fe,focus:fe}))}}return(0,O.useEffect)(()=>{setTimeout(()=>{var{selection:x}=i;if(x){var{anchor:q}=x,W=$.leaf(i,q.path);if(re&&!J.equals(W,re,{loose:!0})){qt.set(i,re);return}}qt.delete(i)})}),O.default.createElement(mf.Provider,{value:s},O.default.createElement(ff.Provider,{value:n},O.default.createElement($g,{node:A,receivedUserInput:P},O.default.createElement(p,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},m,{spellCheck:_r||!da?m.spellCheck:!1,autoCorrect:_r||!da?m.autoCorrect:"false",autoCapitalize:_r||!da?m.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:Y,style:En(En({},h?{}:En({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},F?{minHeight:F}:{})),v),onBeforeInput:(0,O.useCallback)(x=>{if(!_r&&!s&&!ht(x,m.onBeforeInput)&&M.hasSelectableTarget(i,x.target)&&(x.preventDefault(),!M.isComposing(i))){var q=x.data;d.insertText(i,q)}},[m.onBeforeInput,i,s]),onInput:(0,O.useCallback)(x=>{if(!ht(x,m.onInput)){if(j.current){j.current.handleInput();return}for(var q of w.current)q();w.current=[]}},[m.onInput]),onBlur:(0,O.useCallback)(x=>{if(!(s||I.isUpdatingSelection||!M.hasSelectableTarget(i,x.target)||ht(x,m.onBlur))){var q=M.findDocumentOrShadowRoot(i);if(I.latestElement!==q.activeElement){var{relatedTarget:W}=x,V=M.toDOMNode(i,i);if(W!==V&&!(It(W)&&W.hasAttribute("data-slate-spacer"))){if(W!=null&&Or(W)&&M.hasDOMNode(i,W)){var me=M.toSlateNode(i,W);if(Z.isElement(me)&&!i.isVoid(me))return}if(Zn){var ae=q.getSelection();ae?.removeAllRanges()}Zr.delete(i)}}}},[s,I.isUpdatingSelection,I.latestElement,i,m.onBlur]),onClick:(0,O.useCallback)(x=>{if(M.hasTarget(i,x.target)&&!ht(x,m.onClick)&&Or(x.target)){var q=M.toSlateNode(i,x.target),W=M.findPath(i,q);if(!d.hasPath(i,W)||$.get(i,W)!==q)return;if(x.detail===Wg&&W.length>=1){var V=W;if(!(Z.isElement(q)&&d.isBlock(i,q))){var me,ae=d.above(i,{match:ft=>Z.isElement(ft)&&d.isBlock(i,ft),at:W});V=(me=ae?.[1])!==null&&me!==void 0?me:W.slice(0,1)}var De=d.range(i,V);z.select(i,De);return}if(s)return;var Ie=d.start(i,W),Oe=d.end(i,W),Le=d.void(i,{at:Ie}),_e=d.void(i,{at:Oe});if(Le&&_e&&B.equals(Le[1],_e[1])){var at=d.range(i,Ie);z.select(i,at)}}},[i,m.onClick,s]),onCompositionEnd:(0,O.useCallback)(x=>{if(M.hasSelectableTarget(i,x.target)){var q;if(M.isComposing(i)&&(E(!1),Xr.set(i,!1)),(q=j.current)===null||q===void 0||q.handleCompositionEnd(x),ht(x,m.onCompositionEnd)||Tt)return;if(!Zn&&!qv&&!Uv&&!Vv&&!$v&&x.data){var W=qt.get(i);qt.delete(i),W!==void 0&&(vr.set(i,i.marks),i.marks=W),d.insertText(i,x.data);var V=vr.get(i);vr.delete(i),V!==void 0&&(i.marks=V)}}},[m.onCompositionEnd,i]),onCompositionUpdate:(0,O.useCallback)(x=>{M.hasSelectableTarget(i,x.target)&&!ht(x,m.onCompositionUpdate)&&(M.isComposing(i)||(E(!0),Xr.set(i,!0)))},[m.onCompositionUpdate,i]),onCompositionStart:(0,O.useCallback)(x=>{if(M.hasSelectableTarget(i,x.target)){var q;if((q=j.current)===null||q===void 0||q.handleCompositionStart(x),ht(x,m.onCompositionStart)||Tt)return;E(!0);var{selection:W}=i;if(W){if(b.isExpanded(W)){d.deleteFragment(i);return}var V=d.above(i,{match:De=>Z.isElement(De)&&d.isInline(i,De),mode:"highest"});if(V){var[,me]=V;if(d.isEnd(i,W.anchor,me)){var ae=d.after(i,me);z.setSelection(i,{anchor:ae,focus:ae})}}}}},[m.onCompositionStart,i]),onCopy:(0,O.useCallback)(x=>{M.hasSelectableTarget(i,x.target)&&!ht(x,m.onCopy)&&!Gc(x)&&(x.preventDefault(),M.setFragmentData(i,x.clipboardData,"copy"))},[m.onCopy,i]),onCut:(0,O.useCallback)(x=>{if(!s&&M.hasSelectableTarget(i,x.target)&&!ht(x,m.onCut)&&!Gc(x)){x.preventDefault(),M.setFragmentData(i,x.clipboardData,"cut");var{selection:q}=i;if(q)if(b.isExpanded(q))d.deleteFragment(i);else{var W=$.parent(i,q.anchor.path);d.isVoid(i,W)&&z.delete(i)}}},[s,i,m.onCut]),onDragOver:(0,O.useCallback)(x=>{if(M.hasTarget(i,x.target)&&!ht(x,m.onDragOver)){var q=M.toSlateNode(i,x.target);Z.isElement(q)&&d.isVoid(i,q)&&x.preventDefault()}},[m.onDragOver,i]),onDragStart:(0,O.useCallback)(x=>{if(!s&&M.hasTarget(i,x.target)&&!ht(x,m.onDragStart)){var q=M.toSlateNode(i,x.target),W=M.findPath(i,q),V=Z.isElement(q)&&d.isVoid(i,q)||d.void(i,{at:W,voids:!0});if(V){var me=d.range(i,W);z.select(i,me)}I.isDraggingInternally=!0,M.setFragmentData(i,x.dataTransfer,"drag")}},[s,i,m.onDragStart,I]),onDrop:(0,O.useCallback)(x=>{if(!s&&M.hasTarget(i,x.target)&&!ht(x,m.onDrop)){x.preventDefault();var q=i.selection,W=M.findEventRange(i,x),V=x.dataTransfer;z.select(i,W),I.isDraggingInternally&&q&&!b.equals(q,W)&&!d.void(i,{at:W,voids:!0})&&z.delete(i,{at:q}),M.insertData(i,V),M.isFocused(i)||M.focus(i)}I.isDraggingInternally=!1},[s,i,m.onDrop,I]),onDragEnd:(0,O.useCallback)(x=>{!s&&I.isDraggingInternally&&m.onDragEnd&&M.hasTarget(i,x.target)&&m.onDragEnd(x),I.isDraggingInternally=!1},[s,I,m,i]),onFocus:(0,O.useCallback)(x=>{if(!s&&!I.isUpdatingSelection&&M.hasEditableTarget(i,x.target)&&!ht(x,m.onFocus)){var q=M.toDOMNode(i,i),W=M.findDocumentOrShadowRoot(i);if(I.latestElement=W.activeElement,pa&&x.target!==q){q.focus();return}Zr.set(i,!0)}},[s,I,i,m.onFocus]),onKeyDown:(0,O.useCallback)(x=>{if(!s&&M.hasEditableTarget(i,x.target)){var q;(q=j.current)===null||q===void 0||q.handleKeyDown(x);var{nativeEvent:W}=x;if(M.isComposing(i)&&W.isComposing===!1&&(Xr.set(i,!1),E(!1)),ht(x,m.onKeyDown)||M.isComposing(i))return;var{selection:V}=i,me=i.children[V!==null?V.focus.path[0]:0],ae=(0,Ts.default)($.string(me))==="rtl";if(We.isRedo(W)){x.preventDefault();var De=i;typeof De.redo=="function"&&De.redo();return}if(We.isUndo(W)){x.preventDefault();var Ie=i;typeof Ie.undo=="function"&&Ie.undo();return}if(We.isMoveLineBackward(W)){x.preventDefault(),z.move(i,{unit:"line",reverse:!0});return}if(We.isMoveLineForward(W)){x.preventDefault(),z.move(i,{unit:"line"});return}if(We.isExtendLineBackward(W)){x.preventDefault(),z.move(i,{unit:"line",edge:"focus",reverse:!0});return}if(We.isExtendLineForward(W)){x.preventDefault(),z.move(i,{unit:"line",edge:"focus"});return}if(We.isMoveBackward(W)){x.preventDefault(),V&&b.isCollapsed(V)?z.move(i,{reverse:!ae}):z.collapse(i,{edge:"start"});return}if(We.isMoveForward(W)){x.preventDefault(),V&&b.isCollapsed(V)?z.move(i,{reverse:ae}):z.collapse(i,{edge:"end"});return}if(We.isMoveWordBackward(W)){x.preventDefault(),V&&b.isExpanded(V)&&z.collapse(i,{edge:"focus"}),z.move(i,{unit:"word",reverse:!ae});return}if(We.isMoveWordForward(W)){x.preventDefault(),V&&b.isExpanded(V)&&z.collapse(i,{edge:"focus"}),z.move(i,{unit:"word",reverse:ae});return}if(_r){if((Qc||Zn)&&V&&(We.isDeleteBackward(W)||We.isDeleteForward(W))&&b.isCollapsed(V)){var Oe=$.parent(i,V.anchor.path);if(Z.isElement(Oe)&&d.isVoid(i,Oe)&&(d.isInline(i,Oe)||d.isBlock(i,Oe))){x.preventDefault(),d.deleteBackward(i,{unit:"block"});return}}}else{if(We.isBold(W)||We.isItalic(W)||We.isTransposeCharacter(W)){x.preventDefault();return}if(We.isSoftBreak(W)){x.preventDefault(),d.insertSoftBreak(i);return}if(We.isSplitBlock(W)){x.preventDefault(),d.insertBreak(i);return}if(We.isDeleteBackward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"backward"}):d.deleteBackward(i);return}if(We.isDeleteForward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"forward"}):d.deleteForward(i);return}if(We.isDeleteLineBackward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"backward"}):d.deleteBackward(i,{unit:"line"});return}if(We.isDeleteLineForward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"forward"}):d.deleteForward(i,{unit:"line"});return}if(We.isDeleteWordBackward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"backward"}):d.deleteBackward(i,{unit:"word"});return}if(We.isDeleteWordForward(W)){x.preventDefault(),V&&b.isExpanded(V)?d.deleteFragment(i,{direction:"forward"}):d.deleteForward(i,{unit:"word"});return}}}},[s,i,m.onKeyDown]),onPaste:(0,O.useCallback)(x=>{!s&&M.hasEditableTarget(i,x.target)&&!ht(x,m.onPaste)&&(!_r||Xv(x.nativeEvent)||Zn)&&(x.preventDefault(),M.insertData(i,x.clipboardData))},[s,i,m.onPaste])}),O.default.createElement(Zg,{decorations:G,node:i,renderElement:u,renderPlaceholder:c,renderLeaf:l,selection:i.selection})))))},Xg=t=>{var{attributes:e,children:r}=t;return O.default.createElement("span",Object.assign({},e),r,Tt&&O.default.createElement("br",null))},Jg=()=>[],Qg=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&b.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Ol(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},ht=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Gc=t=>Or(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),eD=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},tD=(0,O.createContext)(!1);var rD=(0,O.createContext)({});function nD(t){var e=(0,O.useRef)([]).current,r=(0,O.useRef)({editor:t}).current,n=(0,O.useCallback)(a=>{r.editor=a,e.forEach(s=>s(a))},[e,r]),o=(0,O.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,r]);return{selectorContext:o,onChange:n}}var oD=["editor","children","onChange","value"],vf=t=>{var{editor:e,children:r,onChange:n,value:o}=t,a=An(t,oD),s=(0,O.useRef)(!1),[u,l]=O.default.useState(()=>{if(!$.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(tt.stringify(o)));if(!d.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(tt.stringify(e)));return e.children=o,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:c,onChange:f}=nD(e),v=(0,O.useCallback)(()=>{n&&n(e.children),l(m=>({v:m.v+1,editor:e})),f(e)},[e,f,n]);(0,O.useEffect)(()=>(Bs.set(e,v),()=>{Bs.set(e,()=>{}),s.current=!0}),[e,v]);var[p,h]=(0,O.useState)(M.isFocused(e));return(0,O.useEffect)(()=>{h(M.isFocused(e))},[e]),Qn(()=>{var m=()=>h(M.isFocused(e));return Wv?(document.addEventListener("focusin",m),document.addEventListener("focusout",m),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",m)}):(document.addEventListener("focus",m,!0),document.addEventListener("blur",m,!0),()=>{document.removeEventListener("focus",m,!0),document.removeEventListener("blur",m,!0)})},[]),O.default.createElement(rD.Provider,{value:c},O.default.createElement(pf.Provider,{value:u},O.default.createElement(Ss.Provider,{value:u.editor},O.default.createElement(tD.Provider,{value:p},r))))};var qc=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},$c=(t,e,r)=>{var n=M.toDOMRange(t,e).getBoundingClientRect(),o=M.toDOMRange(t,r).getBoundingClientRect();return qc(n,o)&&qc(o,n)},aD=(t,e)=>{var r=d.range(t,b.end(e)),n=Array.from(d.positions(t,{at:e})),o=0,a=n.length,s=Math.floor(a/2);if($c(t,d.range(t,n[o]),r))return d.range(t,n[o],r);if(n.length<2)return d.range(t,n[n.length-1],r);for(;s!==n.length&&s!==o;)$c(t,d.range(t,n[s]),r)?a=s:o=s,s=Math.floor((o+a)/2);return d.range(t,n[a],r)};function Vc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vc(Object(r),!0).forEach(function(n){va(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var gf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:o,onChange:a,deleteBackward:s,addMark:u,removeMark:l}=n;return ga.set(n,new WeakMap),n.addMark=(c,f)=>{var v,p;(v=Ns.get(n))===null||v===void 0||v(),!qt.get(n)&&(p=At.get(n))!==null&&p!==void 0&&p.length&&qt.set(n,null),vr.delete(n),u(c,f)},n.removeMark=c=>{var f;!qt.get(n)&&(f=At.get(n))!==null&&f!==void 0&&f.length&&qt.set(n,null),vr.delete(n),l(c)},n.deleteBackward=c=>{if(c!=="line")return s(c);if(n.selection&&b.isCollapsed(n.selection)){var f=d.above(n,{match:m=>Z.isElement(m)&&d.isBlock(n,m),at:n.selection});if(f){var[,v]=f,p=d.range(n,v,n.selection.anchor),h=aD(n,p);b.isCollapsed(h)||z.delete(n,{at:h})}}},n.apply=c=>{var f=[],v=At.get(n);if(v!=null&&v.length){var p=v.map(k=>lg(k,c)).filter(Boolean);At.set(n,p)}var h=Nr.get(n);h&&Nr.set(n,zc(n,h,c));var m=br.get(n);if(m!=null&&m.at){var i=pe.isPoint(m?.at)?ys(n,m.at,c):zc(n,m.at,c);br.set(n,i?Kc(Kc({},m),{},{at:i}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...ca(n,c.path));break}case"set_selection":{var C;(C=Xn.get(n))===null||C===void 0||C.unref(),Xn.delete(n);break}case"insert_node":case"remove_node":{f.push(...ca(n,B.parent(c.path)));break}case"merge_node":{var E=B.previous(c.path);f.push(...ca(n,E));break}case"move_node":{var A=B.common(B.parent(c.path),B.parent(c.newPath));f.push(...ca(n,A));break}}o(c);for(var[w,F]of f){var[S]=d.node(n,w);Es.set(S,F)}},n.setFragmentData=c=>{var{selection:f}=n;if(!!f){var[v,p]=b.edges(f),h=d.void(n,{at:v.path}),m=d.void(n,{at:p.path});if(!(b.isCollapsed(f)&&!h)){var i=M.toDOMRange(n,f),C=i.cloneContents(),E=C.childNodes[0];if(C.childNodes.forEach(j=>{j.textContent&&j.textContent.trim()!==""&&(E=j)}),m){var[A]=m,w=i.cloneRange(),F=M.toDOMNode(n,A);w.setEndAfter(F),C=w.cloneContents()}if(h&&(E=C.querySelector("[data-slate-spacer]")),Array.from(C.querySelectorAll("[data-slate-zero-width]")).forEach(j=>{var K=j.getAttribute("data-slate-zero-width")==="n";j.textContent=K?`
`:""}),nf(E)){var S=E.ownerDocument.createElement("span");S.style.whiteSpace="pre",S.appendChild(E),C.appendChild(S),E=S}var k=n.getFragment(),P=JSON.stringify(k),L=window.btoa(encodeURIComponent(P));E.setAttribute("data-slate-fragment",L),c.setData("application/".concat(r),L);var I=C.ownerDocument.createElement("div");return I.appendChild(C),I.setAttribute("hidden","true"),C.ownerDocument.body.appendChild(I),c.setData("text/html",I.innerHTML),c.setData("text/plain",af(I)),C.ownerDocument.body.removeChild(I),c}}},n.insertData=c=>{n.insertFragmentData(c)||n.insertTextData(c)},n.insertFragmentData=c=>{var f=c.getData("application/".concat(r))||rg(c);if(f){var v=decodeURIComponent(window.atob(f)),p=JSON.parse(v);return n.insertFragment(p),!0}return!1},n.insertTextData=c=>{var f=c.getData("text/plain");if(f){var v=f.split(/\r\n|\r|\n/),p=!1;for(var h of v)p&&z.splitNodes(n,{always:!0}),n.insertText(h),p=!0;return!0}return!1},n.onChange=c=>{Jc.default.unstable_batchedUpdates(()=>{var f=Bs.get(n);f&&f(),a(c)})},n},ca=(t,e)=>{var r=[];for(var[n,o]of d.levels(t,{at:e})){var a=M.findKey(t,n);r.push([o,a])}return r};g();D();var sD={isHistory(t){return et(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||pr.isOperationList(t.redos[0].operations))&&(t.undos.length===0||pr.isOperationList(t.undos[0].operations))}};var Ps=new WeakMap,Ls=new WeakMap,xn={isHistoryEditor(t){return sD.isHistory(t.history)&&d.isEditor(t)},isMerging(t){return Ls.get(t)},isSaving(t){return Ps.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=xn.isMerging(t);Ls.set(t,!1),e(),Ls.set(t,r)},withoutSaving(t,e){var r=xn.isSaving(t);Ps.set(t,!1),e(),Ps.set(t,r)}},Df=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:o}=n;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&z.setSelection(e,a.selectionBefore),xn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:n}=e,{undos:o}=n;if(o.length>0){var a=o[o.length-1];xn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{var s=a.operations.map(pr.inverse).reverse();for(var u of s)e.apply(u);a.selectionBefore&&z.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),n.undos.pop()}},e.apply=n=>{var{operations:o,history:a}=e,{undos:s}=a,u=s[s.length-1],l=u&&u.operations[u.operations.length-1],c=xn.isSaving(e),f=xn.isMerging(e);if(c==null&&(c=iD(n)),c){if(f==null&&(u==null?f=!1:o.length!==0?f=!0:f=uD(n,l)),u&&f)u.operations.push(n);else{var v={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",v)}for(;s.length>100;)s.shift();a.redos=[]}r(n)},e.writeHistory=(n,o)=>{e.history[n].push(o)},e},uD=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&B.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&B.equals(t.path,e.path)),iD=(t,e)=>t.type!=="set_selection";var Ms=_(Ae());g();D();var Ue={"retina-border-basic":"_retina-border-basic_zzf5c_1",retinaBorderBasic:"_retina-border-basic_zzf5c_1","batch-send-address":"_batch-send-address_zzf5c_29",batchSendAddress:"_batch-send-address_zzf5c_29","batch-send-address-dialog-core":"_batch-send-address-dialog-core_zzf5c_58",batchSendAddressDialogCore:"_batch-send-address-dialog-core_zzf5c_58","batch-send-address-input":"_batch-send-address-input_zzf5c_63",batchSendAddressInput:"_batch-send-address-input_zzf5c_63","batch-send-address-accordion":"_batch-send-address-accordion_zzf5c_76",batchSendAddressAccordion:"_batch-send-address-accordion_zzf5c_76","batch-send-address-accordion-header":"_batch-send-address-accordion-header_zzf5c_79",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_zzf5c_79","batch-send-address-accordion-content":"_batch-send-address-accordion-content_zzf5c_83",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_zzf5c_83","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_zzf5c_87",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_zzf5c_87","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_zzf5c_92",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_zzf5c_92",upload:"_upload_zzf5c_132",uploadIcon:"_uploadIcon_zzf5c_147",uploadText:"_uploadText_zzf5c_150",addressPre:"_addressPre_zzf5c_153",selectAddress:"_selectAddress_zzf5c_157",selectedAddressInfo:"_selectedAddressInfo_zzf5c_162",addBtn:"_addBtn_zzf5c_170","circle-icon":"_circle-icon_zzf5c_174",circleIcon:"_circle-icon_zzf5c_174"};g();D();var wn=_(Q()),wf=_($e());he();g();D();var Da=_(Q()),eo=_(Ae());he();g();D();var Cf=_(Hi()),lD=(t,e={})=>new Promise((r,n)=>{Cf.default.parse(t,{complete:o=>{r(o)},error:o=>{n(o)},...e})}),cD=(t,e={})=>lD(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),Ef=cD;g();D();var Af=_(Q());function fD(t,{onDrop:e,onDragLeave:r,onDragEnter:n,onDragOver:o}){(0,Af.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",n),t.addEventListener("dragover",o)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o))}),[e,r,n,o,t])}var ks=fD;function dD(t){let e=t.scrollHeight;t.scrollTo(0,e)}var mD=1024,pD=1024*mD,Bf=1,hD=pD*Bf;function vD(t,{onChange:e,slateRef:r,onError:n}={}){let[o,a]=(0,Da.useState)(!1),s=v=>{r?.current&&(r.current.style.pointerEvents=v?"none":"auto")},u=(0,eo.useMemoizedFn)(v=>{v.preventDefault()});ks(document,{onDrop:u,onDragEnter:u,onDragLeave:u,onDragOver:u});let l=(0,eo.useMemoizedFn)(v=>{s(!1),a(!1);let p=v.dataTransfer?.files?.[0];if(!!p){if(p.type!=="text/csv"){n?.(T("wallet_extension_reminder_text_wrong_format"));return}if(p.size>hD){n?.(T("wallet_extension_reminder_text_large_doc",{num:Bf}));return}Ef(p).then(h=>{e?.(h)}).catch(()=>{e?.([])})}});(0,Da.useEffect)(()=>{o&&t.current&&dD(t.current)},[o,t]);let c=(0,eo.useMemoizedFn)(()=>{s(!0),a(!0)}),f=(0,eo.useMemoizedFn)(()=>{s(!1),a(!1)});return ks(t.current,{onDrop:l,onDragEnter:c,onDragLeave:f}),{show:o}}var xf=vD;function gD(t){let{onChange:e,dropRef:r,slateRef:n,onError:o}=t,a=(0,wn.useRef)(null),{show:s}=xf(r,{onChange:e,slateRef:n,onError:o});return s?wn.default.createElement(y.Box,{ref:a,className:Ue.upload},wn.default.createElement(mt,{className:(0,wf.default)("okds-plus-circle",Ue.uploadIcon)}),wn.default.createElement(y.Box,{className:Ue.uploadText},T("wallet_extension_reminder_dropzone_input_address"))):void 0}var Ff=gD;g();D();var Pt=_(Q());st();he();var DD=({type:t,title:e,children:r,dropError:n,actionTitle:o,addressErrors:a,onSelectWalletAddress:s})=>{let u=(0,Pt.useMemo)(()=>{if(n)return n;if(!a?.length)return null;let l=Do(a,"error");return l?.length>1?T("wallet_extension_sending_text_address_error"):T(l[0]?.error,l[0]?.args)},[n,a]);return Pt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"12px"},Pt.default.createElement(y.FlexBox,{justify:"space-between",align:y.ALIGN.center},Pt.default.createElement(xe.Text,{strong:700,size:xe.SIZE.lg,style:{lineHeight:"24px"}},e,Pt.default.createElement(Ge,{className:Ue.circleIcon,icon:"okds-question-mark-circle",size:Ge.SIZE.xs,tooltip:{maxWidth:"300px",placement:Ht?.DIRECTION.topRight,title:Pt.default.createElement("pre",{className:Ue.addressPre},T("wallet_extension_sending_tooltip_address_condition"))}})),Pt.default.createElement(y.Space,{direction:y.DIRECTION.horizontal,space:"6px",align:y.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{s(t)}},Pt.default.createElement(Ge,{icon:"okx-wallet-plugin-tier-guide",size:Ge.SIZE.md}),Pt.default.createElement(xe.Text,{strong:!0,size:xe.SIZE.sm,style:{lineHeight:"16px"}},o))),r,u&&Pt.default.createElement(xe.Text,{size:xe.SIZE.xs,type:xe.TYPE.danger},u))},Ca=DD;g();D();st();var CD=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],yf=(t=[])=>!t||!t?.length?CD:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],Tf=t=>{let[{children:e}]=t;return e.map(({children:r})=>go(r?.[0]?.text))},Sf=(t=[],e=[])=>!e.some(r=>!t.includes(r)),_f=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[n,o]=r;if(Z.isElement(n)&&n.type==="numbered-list"){for(let[a,s]of $.children(t,o))if(Z.isElement(a)&&a.type==="numbered-list"){z.unwrapNodes(t,{at:s});return}}e(r)},t};var ED="Enter",AD=({attributes:t,children:e,element:r})=>{let{error:n}=r;switch(r.type){case"list-item":return be.default.createElement("li",{style:{color:n&&"red"},...t},e);case"numbered-list":return be.default.createElement("ol",{...t},e);default:return be.default.createElement("p",{...t},e)}},BD=({attributes:t,children:e,leaf:r})=>{let{error:n}=r;return be.default.createElement("span",{style:{color:n?"red":void 0},...t},e)},xD=(0,be.forwardRef)(({type:t,title:e,dropError:r,actionTitle:n,placeholder:o,value:a=[],onChange:s,addressErrors:u,onSelectWalletAddress:l,onDrop:c,onDropError:f},v)=>{let p=(0,be.useRef)(0),h=(0,be.useCallback)(F=>be.default.createElement(AD,{...F}),[]),m=(0,be.useCallback)(F=>be.default.createElement(BD,{...F}),[]),i=(0,be.useMemo)(()=>_f(Df(gf(pc()))),[]),C=(0,be.useRef)(null),E=(0,be.useRef)(null);(0,be.useEffect)(()=>{i?.selection?.focus&&(p.current=i?.selection?.focus?.path?.[1])},[i.selection]),(0,be.useEffect)(()=>{a.forEach((F,S)=>{z.setNodes(i,{error:!1},{at:[0,S,0]})}),u?.forEach(({at:F})=>{z.setNodes(i,{error:!0},{at:[0,F,0]})})},[u]);let A=(0,Ms.useMemoizedFn)(F=>{let{path:S}=i.selection?.focus??{path:null},k=u?.find(L=>L.at===S?.[1])?.address,P=F?.[0]?.children?.[S?.[1]]?.children?.[0]?.text;(k&&P!==k||!P)&&z.setNodes(i,{error:!1},{at:[0,S?.[1],0]}),s?.(F,t)},[u]),w=(0,Ms.useMemoizedFn)(async F=>{let{path:S,offset:k}=i.selection?.focus||{};if(!S||!k)return!1;let P=S?.[1];if(F.key===ED){a?.[P]?.length>k&&z.setNodes(i,{error:!1},{at:[0,P,0]}),await Pi(10);let L=S[1]+1;z.setNodes(i,{error:!1},{at:[0,L,0]})}return!0},[a,u]);return(0,be.useImperativeHandle)(v,()=>({insertNodes:(F=[])=>{let S=F.map(P=>({type:"list-item",children:[{text:P}]}));z.insertNodes(i,S);let k=p.current;a?.[k]||z.removeNodes(i,{at:[0,k]})}})),be.default.createElement(Ca,{type:t,title:e,dropError:r,actionTitle:n,addressErrors:u,onSelectWalletAddress:l},be.default.createElement(y.Box,{className:Ue["batch-send-address-input"],ref:C},be.default.createElement(y.Box,{ref:E},be.default.createElement(vf,{editor:i,value:yf(a),onChange:A},be.default.createElement(hf,{autoFocus:!0,spellCheck:!0,renderLeaf:m,renderElement:h,placeholder:o,onKeyDown:w}))),be.default.createElement(Ff,{dropRef:C,onChange:c,slateRef:E,onError:f})))}),Rs=xD;g();D();var Te=_(Q());var bf=_(Ae());he();g();D();var Ke={SEND:"SEND",RECEIVE:"RECEIVE"};var Nf=t=>Array.isArray(t)?t.map(({name:e,address:r,options:n})=>r&&!n?{value:r,style:{display:"flex",alignItems:"center"},label:Te.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"2px"},e&&Te.default.createElement(xe.Text,{size:xe.SIZE.xs},e),r&&Te.default.createElement(xe.Text,{size:xe.SIZE.xs,type:xe.TYPE.secondary},r))}:{value:e,label:Te.default.createElement(xe.Text,{size:xe.SIZE.md},e),options:Nf(n)}):[],wD=t=>{let[e,r]=(0,Te.useState)([]),[n,o]=(0,Te.useState)(!1),a=(0,Te.useMemo)(()=>Nf(t.options),[t.options]),s=(0,Te.useMemo)(()=>a?.map(h=>h.options?.map(({value:m})=>m))?.flat(),[a]),{mode:u,type:l}=t,c=(0,Te.useMemo)(()=>u===X.ONE_TO_MANY&&l===Ke.SEND||u===X.MANY_TO_ONE&&l===Ke.RECEIVE,[u,l]),f=(0,bf.useMemoizedFn)((h,m,i)=>{if(c){r([m]);return}let C=[...e];h&&m?C=[...e,m]:!h&&m?C=C.filter(E=>E!==m):h&&i&&i.length?C=[...e,...i]:!h&&i&&i.length&&(C=C.filter(E=>!i.includes(E))),r([...new Set(C)])},[c,e]),v=(0,Te.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),p=h=>{let m=h.target.checked;r(m?s:[])};return(0,Te.useEffect)(()=>{o(e.length===s.length)},[e,s]),Te.default.createElement(y.Box,{className:Ue.selectAddress},Te.default.createElement(y.Box,{className:Ue["batch-send-address-dialog-core"]},a.map(({label:h,options:m})=>Array.isArray(m)&&m?.length?Te.default.createElement(_u,{defaultExpanded:!0,className:Ue["batch-send-address-accordion"],headerClassName:Ue["batch-send-address-accordion-header"],contentClassName:Ue["batch-send-address-accordion-content"],title:c?h:Te.default.createElement(Fr,{clickStopPropagation:!0,checked:Sf(e,m.map(({value:i})=>i)),onChange:({target:{checked:i}})=>{f(i,void 0,m.map(({value:C})=>C))}},h)},m.map(({value:i,label:C})=>c?Te.default.createElement(bu,{checked:e?.includes(i),className:Ue["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,i)}},C):Te.default.createElement(Fr,{checked:e?.includes(i),className:Ue["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,i)}},C))):Te.default.createElement(Te.default.Fragment,null))),Te.default.createElement(y.Box,{className:Ue["batch-send-address-select-address-actions"]},!c&&Te.default.createElement(y.Box,{className:Ue.selectedAddressInfo},Te.default.createElement(Fr,{checked:n,onChange:p},T("wallet_extension_addressbook_text_select_all")),Te.default.createElement(xe.Text,{type:xe.TYPE.secondary,size:xe.SIZE.sm},T("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),Te.default.createElement(y.Box,{className:Ue.addBtn},Te.default.createElement(ee,{category:ee.CATEGORY.fill,type:ee.TYPE.highlight,size:ee.SIZE.lg,onClick:v,disabled:e.length<=0,block:!0},T("wallet_extension_addressbook_btn_add")))))},Of=wD;g();D();var zs=_(Q());st();var FD=({type:t,title:e,value:r,onChange:n,actionTitle:o,placeholder:a,addressErrors:s,onSelectWalletAddress:u})=>zs.default.createElement(Ca,{type:t,title:e,actionTitle:o,addressErrors:s,onSelectWalletAddress:u},zs.default.createElement(ye,{size:ye.SIZE.xl,value:r?.[0],placeholder:a,onChange:({target:{value:l}})=>{n?.([go(l)],t,!0)}})),js=FD;g();D();var Dr=_(Q()),gr=_(Ae());var If=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:n})=>{let o=(0,Dr.useRef)(null),a=(0,Dr.useRef)(null),[s,u]=(0,Dr.useState)(null),[l,c]=(0,Dr.useState)(!1),[f,v]=(0,Dr.useState)([]),[p,h]=(0,Dr.useState)(""),[m,i]=(0,Dr.useState)(""),C=(0,gr.useMemoizedFn)(()=>{c(!1)},[]),E=(0,gr.useMemoizedFn)((L,I)=>{I===Ke.SEND&&t===X.ONE_TO_MANY||I===Ke.RECEIVE&&t===X.MANY_TO_ONE?n?.(L,I):(I===Ke.SEND?o:a)?.current?.insertNodes(L),C()},[]),A=(0,gr.useMemoizedFn)(L=>{let I=L===Ke.SEND?e:r;c(!0),u(L),v(I)},[]),w=(0,gr.useMemoizedFn)((L=[])=>{o.current.insertNodes(L),h("")}),F=(0,gr.useMemoizedFn)((L=[])=>{a.current.insertNodes(L),i("")}),S=(0,gr.useMemoizedFn)((L,I,j=!1)=>{n?.(j?L:Tf(L),I),h(""),i("")},[]),k=(0,gr.useMemoizedFn)(L=>{i(L)}),P=(0,gr.useMemoizedFn)(L=>{h(L)});return{visible:l,sendRef:o,receiveRef:a,addressType:s,addressOptions:f,onCloseDialog:C,onInsertAddresses:E,onSelectWalletAddress:A,onSendDrop:w,onReceiveDrop:F,onAddressInputChange:S,onReceiveDropError:k,onSendDropError:P,sendError:p,receiveError:m}};var yD=t=>{let{mode:e,className:r,style:n,toAddresses:o,fromAddresses:a,addressErrors:s}=t,{visible:u,sendRef:l,receiveRef:c,addressType:f,addressOptions:v,onCloseDialog:p,onInsertAddresses:h,onSelectWalletAddress:m,onSendDrop:i,onReceiveDrop:C,onAddressInputChange:E,onReceiveDropError:A,onSendDropError:w,sendError:F,receiveError:S}=If(t),{isSm:k}=Ve();return Cr.default.createElement(y.FlexBox,{style:n,direction:k?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:(0,Pf.default)(Ue["batch-send-address"],r)},e===X.ONE_TO_MANY?Cr.default.createElement(js,{value:a,type:Ke.SEND,addressErrors:s?.from,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:m}):Cr.default.createElement(Rs,{ref:l,value:a,addressErrors:s?.from,type:Ke.SEND,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:m,onDrop:i,onDropError:w,dropError:F}),e===X.MANY_TO_ONE?Cr.default.createElement(js,{value:o,type:Ke.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:m}):Cr.default.createElement(Rs,{ref:c,value:o,type:Ke.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:m,onDrop:C,onDropError:A,dropError:S}),Cr.default.createElement(Wr,{visible:u,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:T("wallet_extension_addressbook_title_address_book"),onClose:p},Cr.default.createElement(Of,{mode:e,type:f,options:v,onChange:h})))},Lf=Cr.default.memo(yD);g();D();var ar=_(Q());var Ws=_($e());g();D();var Qr={root:"_root_1uwjx_1",icon:"_icon_1uwjx_69",title:"_title_1uwjx_88",subtitle:"_subtitle_1uwjx_108",tip:"_tip_1uwjx_136",tipIcon:"_tipIcon_1uwjx_140"};function TD(t){let{icon:e,title:r,subtitle:n,tip:o,className:a,titleClassName:s,subtitleClassName:u}=t;return ar.default.createElement(y.Box,{className:(0,Ws.default)(Qr.root,a)},e&&ar.default.createElement(y.Box,{className:Qr.icon},e),ar.default.createElement(y.Box,null,ar.default.createElement(y.Box,{className:(0,Ws.default)(Qr.title,s)},r),ar.default.createElement(y.Box,{className:Qr.subtitle},ar.default.createElement(y.Box,{className:u},n),o&&ar.default.createElement(Ht,{title:o,placement:Ht.DIRECTION.bottom,maxWidth:240},ar.default.createElement(y.Box,{className:Qr.tip},ar.default.createElement(mt,{className:`okds-question-mark-circle ${Qr.tipIcon}`}))))))}var Fn=TD;g();D();var en=_(Q()),Ys=_(Ae());st();g();D();je();In();On();var kf=_(Ae()),SD=()=>(0,kf.useMemoizedFn)(async t=>{let{data:e}=await Xt(Jt.getSolRentBatch,{coinId:wr,addresses:t});return e}),Mf=SD;je();In();On();g();D();st();je();var Us=(t=[],e)=>e===Ke.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r),Rf=async({mode:t,localType:e,tokenSymbol:r,toAddresses:n,fromAddresses:o,walletAccounts:a,addressRegisterStatusMap:s})=>{let u=[],l=[],c=ln([n?.length,o?.length]),f=o[0],v=n[0];for(let p=0;p<c;p++){(t===X.MANY_TO_MANY||t===X.MANY_TO_ONE)&&(f=o[p]),(t===X.MANY_TO_MANY||t===X.ONE_TO_MANY)&&(v=n[p]),v=n[p],f&&!a?.includes(f)?l.push({address:f,error:"wallet_extension_sending_text_address_wallet_extension",at:p}):t!==X.ONE_TO_MANY&&f&&o.slice(0,p).includes(f)&&l.push({address:f,error:"wallet_extension_sending_text_address_duplicated",at:p});let h=wu;e===Ce?h=wr:e===ke?h=Eo:e===se?h=cn:e===Ee?h=Co:e===ve&&(h=Ao);let m=v&&Qe(v,e),i=await Ri(m,h);if(v&&!i&&u.push({address:v,error:"wallet_extension_sending_text_address_illegal",at:p}),e===se&&f||e===Ee&&v){let C=!0;e===se?C=s[f]??!0:C=s[v]??!0,C===!1&&e===se&&l.push({address:f,error:"wallet_extension_sending_error_address_no_register",at:p}),C===!1&&e===Ee&&u.push({address:v,error:"wallet_extension_sending_error_token_no_register",at:p,args:{token:r}})}}return{to:u,from:l}};g();D();var Hs=_(Ae());st();g();D();var zf=_(Ae()),jf=_(hi());st();var _D=10;function bD(t,e,r,n,o,a){return t?.methods.balanceOf(e).call.request({from:e},async(s,u)=>{if(s||n.push({from:e,balance:u??0}),s){let l=await t.methods.balanceOf(e).call();n.splice(r,0,{from:e,balance:l??0})}n?.length===o&&a(n)})}function ND(t,e,r,n,o,a){return t.eth.getBalance.request(e,"latest",async(s,u)=>{if(s||n.push({from:e,balance:u??0,baseCoinBalance:u??0}),s){let l=await t.eth.getBalance(e,"latest");n.splice(r,0,{from:e,balance:l??0,baseCoinBalance:l??0})}n?.length===o&&a(n)})}var OD=({web3:t,addressList:e,contractAddress:r})=>{let n=new t.BatchRequest;return new Promise(o=>{let a=[],s=r&&new t.eth.Contract(jf.default,r),u=e?.length;e?.forEach((l,c)=>{let f=r?bD(s,l,c,a,u,o):ND(t,l,c,a,u,o);n.add(f)}),n.execute()})},Wf=t=>{let e=qr(t);return(0,zf.useMemoizedFn)(async(r,n)=>{let o=await e(),a=Bu(r),s=fu(a,_D),u=await Promise.all(s.map(c=>OD({web3:o,addressList:c,contractAddress:n}))),l=cu(u);return r?.length!==l?.length?r.map(c=>l.find(({from:v})=>v===c)):l},[e])};je();var ID=()=>{let[t]=le(),e=Ti(void 0,t?.localType),r=Ii();return(0,Hs.useMemoizedFn)(async n=>{let o=yt(t),a=n?.length,s=[];for(let u=0;u<a;u++){let l=n[u],{walletId:c}=e.find(v=>v.address===l)||{},{coinAmountInt:f}=await r(t?.coinId,c)||{};if(o)s.push({from:l,balance:f,baseCoinBalance:f});else{let{coinAmountInt:v}=await r(t?.baseCoinId,c)||{};s.push({from:l,balance:f,baseCoinBalance:v})}}return s})},PD=()=>{let[t]=qe(),[e]=le(),r=Wf(t?.rpcUrl);return(0,Hs.useMemoizedFn)(async n=>{let o=!e?.address,a=[],s=n.map(l=>l&&Qe(l,e?.localType)),u=await r(s,void 0);return o||(a=await r(s,Qe(e?.address,e?.localType))),vo(u,a)},[e])},LD=()=>{let[t]=le(),e=PD(),r=ID();return[Ee,Ce,ke,se,ve].includes(t?.localType)?r:e},Uf=LD;var kD=(t,e)=>{let[r]=le(),[n,o]=(0,en.useState)(!1),{gotoConfirmPage:a}=Et(),s=qi(!0,e),[,u]=jo(),l=Uf(),c=Mf(),[f,v]=we(),[p,h]=(0,en.useState)(Us(f,Ke.SEND)),[m,i]=(0,en.useState)(Us(f,Ke.RECEIVE)),[C,E]=(0,en.useState)({}),A=(0,Ys.useMemoizedFn)((k,P)=>{P===Ke.SEND?h(k):i(k)},[]),w=(0,en.useMemo)(()=>{let k=[];if(t===X.MANY_TO_MANY){let P=vu(p.length,m.length),L=m.slice(0,P);p.slice(0,P).forEach((j,K)=>{let R=L[K];j&&R&&k.push({to:R,from:j})})}else if(t===X.MANY_TO_ONE){let P=m.find(L=>!!L);p.forEach(L=>{L&&P&&k.push({to:P,from:L})})}else if(t===X.ONE_TO_MANY){let P=p.find(L=>!!L);m.forEach(L=>{P&&L&&k.push({to:L,from:P})})}return k},[p,t,m]),F=!w?.length,S=(0,Ys.useMemoizedFn)(async()=>{o(!0);let k=[];r?.localType===se?k=p:r?.localType===Ee&&(k=m);let P={};if([Ee,se].includes(r?.localType))try{let{data:j}=await Xt(Jt.batchQueryAddressRegister,{chainId:r?.chainId,addresses:k,contractAddress:r?.localType===Ee?r?.address:void 0});P=j}catch(j){console.log(j)}let L=await Rf({localType:e,toAddresses:m,fromAddresses:p,walletAccounts:s,mode:t,addressRegisterStatusMap:P,tokenSymbol:r?.symbol});if(L?.from?.length||L?.to?.length)return o(!1),E(L);let I=await l(Sn(w,"from"));if(r?.localType===Ce&&r?.baseCoinId!==0){let j=await c(Sn(w,"to"));u(j)}return I=I?.map((j,K)=>({...j,from:bo(j?.from,r?.localType),id:K})),v(vo([],w,I)),o(!1),a()},[m,p,s,w]);return{loading:n,addressErrors:C,sendAddresses:f,fromAddresses:p,toAddresses:m,nextDisabled:F,onNext:S,onAddressChange:A}},Hf=kD;g();D();var Gs={root:"_root_a3p43_2",footer:"_footer_a3p43_67"};var MD=()=>{let{isSm:t}=Ve(),[e]=le(),[r]=ut(),{loading:n,fromAddresses:o,toAddresses:a,addressErrors:s,nextDisabled:u,onNext:l,onAddressChange:c}=Hf(r,e?.localType),[f,v]=$i(e?.localType),{gotoHomePage:p}=Et(),[h,m]=(0,$t.useMemo)(()=>r===X.MANY_TO_MANY?[T("wallet_extension_multitomulti_subtitle_many_transfer"),T("wallet_extension_reminder_tooltips_portfolio_trading")]:r===X.ONE_TO_MANY?[T("wallet_extension_onetomulti_subtitle_one_to_many"),T("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[T("wallet_extension_multitoone_subtitle_many_to_one"),T("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,T]);return $t.default.createElement(Sr,{footer:$t.default.createElement(y.Box,{className:Gs.footer},$t.default.createElement(ee,{block:t,category:ee.CATEGORY.outline,type:ee.TYPE.primary,size:t?ee.SIZE.lg:ee.SIZE.xl,onClick:()=>{p()}},T("wallet_extension_footer_btn_back")),$t.default.createElement(ee,{block:t,loading:n,disabled:u,category:ee.CATEGORY.fill,type:ee.TYPE.highlight,size:t?ee.SIZE.lg:ee.SIZE.xl,onClick:l},T("wallet_extension_footer_btn_next")))},$t.default.createElement(Fn,{tip:m,subtitle:h,title:T("wallet_extension_address_maintitle_add_address")}),$t.default.createElement(y.Box,{className:Gs.root},$t.default.createElement(Lf,{mode:r,toAddresses:a,fromAddresses:o,addressErrors:s,walletAccounts:f,walletAccountsWithAddressBook:v,onChange:c})))},Yf=$t.default.memo(MD);g();D();var rt=_(Q()),wd=_(Dt()),uo=_($e());st();he();g();D();var Er=_(Q());st();var qs=_(Dt());he();var Ea=()=>{let[t]=le(),[e]=qe(),[r,n]=(0,Er.useState)(0),[o,a]=(0,Er.useState)(0),s=(0,qs.useSelector)(Ka),{usdToThisRate:u}=s,l=yt(t),c=Hn(),f=async()=>{if(l){let A=await c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});n(A),a(A)}else{let[A,w]=await Promise.all([c({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);a(A),n(w)}};(0,Er.useEffect)(()=>{f()},[]);let[v]=we(),p=(0,qs.useSelector)(it),h=v?.length,m=l?t:t?.baseCoin,i=(0,Er.useMemo)(()=>v[0]?.realNetworkFee?v.reduce((w,{realNetworkFee:F})=>H.add(w,F),0):H.mul(p?.networkFee??0,h),[t,p]),C=(0,Er.useMemo)(()=>{let A=v.reduce((w,{txAmount:F})=>H.add(w,F),0);return H.div(A,10**(t?.decimals??18))},[v]);return(0,Er.useMemo)(()=>{let A=H.mul(u,H.mul(o,i)),w=H.mul(u,H.mul(r,C));return[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:H.thousandFormat(h)},{title:"wallet_extension_info_title_transfer_amount",value:Rn(ln([C,0]),{symbol:t?.symbol??""}),market:w},{title:"wallet_extension_info_title_internet_fee",value:Rn(i,{symbol:m?.symbol??""}),market:A}]},[t,e,i,r,o,C,h])};g();D();var Lt=_(Q()),$s=_($e());he();g();D();var Pr={root:"_root_17l7u_2",row:"_row_17l7u_65",nextRow:"_nextRow_17l7u_82",title:"_title_17l7u_92",subtitle:"_subtitle_17l7u_116",value:"_value_17l7u_142",icon:"_icon_17l7u_145"};function Gf(t){let{icon:e,title:r,value:n,showIcon:o=!1,market:a}=t;return Lt.default.createElement(y.Box,null,Lt.default.createElement(y.Box,{className:Pr.title},T(r)),Lt.default.createElement(y.Box,{className:(0,$s.default)(Pr.subtitle)},o&&(e||n)&&Lt.default.createElement(Ge,{src:e,className:Pr.icon,text:n,size:Ge.SIZE.md}),Lt.default.createElement(y.Box,{className:Pr.value},n)),a!==void 0&&Lt.default.createElement(xe.DisplayAmount,{wrap:!0,useApproximate:!0,amount:a,mode:xe.LEGAL,type:xe.TYPE.secondary,size:xe.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function RD({className:t,statistics:e}){let{isSm:r}=Ve(),n=Math.floor(e.length/2),o=r?n:e.length;return Lt.default.createElement(y.Box,{className:(0,$s.default)(Pr.root,t)},Lt.default.createElement(y.Box,{className:Pr.row},e.slice(0,o).filter(Boolean).map((a,s)=>Lt.default.createElement(Gf,{...a,key:s}))),Lt.default.createElement(y.Box,{className:Pr.nextRow},e.slice(o).filter(Boolean).map((a,s)=>Lt.default.createElement(Gf,{...a,key:s}))))}var Aa=RD;g();D();var Vs=_(Q());g();D();var Fe={root:"_root_1iryo_2",table:"_table_1iryo_38",row:"_row_1iryo_47",order:"_order_1iryo_52",addressError:"_addressError_1iryo_78",fromError:"_fromError_1iryo_81",text:"_text_1iryo_84",oneLineText:"_oneLineText_1iryo_106",moreLineText:"_moreLineText_1iryo_109",remove:"_remove_1iryo_112",success:"_success_1iryo_117",error:"_error_1iryo_130",open:"_open_1iryo_143",receiveError:"_receiveError_1iryo_146",errorIcon:"_errorIcon_1iryo_149",hash:"_hash_1iryo_154",hashText:"_hashText_1iryo_166",loader:"_loader_1iryo_179"};function zD({dataSource:t,columns:e,scroll:r}){let n=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return Vs.default.createElement(y.Box,{className:Fe.root},Vs.default.createElement(Nu,{columns:e,dataSource:t,className:Fe.table,onHeaderCell:n,scroll:r}))}var Ba=zD;g();D();var qf=_(Dt());st();dn();function jD(){let[t]=ut(),[e]=le(),[r]=qe(),[n]=lt(),[o]=ct(),[a]=we(),s=(0,qf.useSelector)(it);return()=>{let u={[X.ONE_TO_MANY]:"one_to_many",[X.MANY_TO_MANY]:"many_to_many",[X.MANY_TO_ONE]:"many_to_one"},l={[de.ALL]:"max",[de.RANDOM]:"range",[de.CUSTOM]:"specific_amount"},c={[Ye.NONE]:"no_interval",[Ye.RANDOM]:"range"},f={[Je.LOW]:"slow",[Je.MEDIUM]:"average",[Je.HIGH]:"fast",[Je.CUSTOM]:"custom"},v,p;return t===X.ONE_TO_MANY?(v=1,p=a.length):t===X.MANY_TO_ONE?(v=a.length,p=1):(v=a.length,p=a.length),{transaction_type:u[t],token:e?.symbol,chain:r?.chainId?parseInt(r?.chainId,16):null,sending_address_count:v,receiving_address_count:p,sending_amount_type:l[n?.type],interval_setting:c[o?.type],gas_level:f[s?.level],transactions:a.map(({from:h,to:m,txAmount:i,txHash:C,txStatus:E})=>{let A;return E===te.SUCCEED?A="succeed":E===te.FAILED&&(A="fail"),gu({from:h,to:m,sending_amount:yu(i,10**e?.decimals),transaction_id:C,succeed_fail:A},hu)})}}}var xa=jD;je();g();D();var Ne=_(Q()),eu=_($e());he();st();dn();g();D();g();D();g();D();var wa=_(Q());var Zs=_($e());g();D();var Ks=_(Q());var $f=_($e());var WD=({children:t,className:e,...r})=>Ks.default.createElement(y.Box,{className:(0,$f.default)(Fe.row,e),...r},Ks.default.createElement(y.Box,null),t),sr=WD;function UD(t){let[e,r]=we(),{gotoAddressPage:n}=Et(),{index:o}=t,a=()=>{let s=[...e.slice(0,o),...e.slice(o+1)];r(s),s.length<=0&&n()};return wa.default.createElement(sr,null,wa.default.createElement(y.Box,{className:(0,Zs.default)(Fe.text),onClick:a},wa.default.createElement(mt,{className:(0,Zs.default)("okx-wallet-plugin-trash",Fe.remove)})))}var Vf=UD;g();D();var ur=_(Q()),Fa=_($e());he();function HD(t){let{error:e,showShortAddress:r=!1,from:n,order:o,to:a,isFromAddress:s=!1,showTextOneLine:u=!1,showOrder:l=!1,showError:c=!1}=t,f=e===Qt.BALANCE_INSUFFICIENT,v=!!e,p=f?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",h=(0,ur.useMemo)(()=>e===Qt.BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_balance"):e===Qt.FEE_BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_fee"):e,[e]),m=s?n:a,i=r?ur.default.createElement(Ht,{title:m},xo(m)):m;return ur.default.createElement(sr,null,l&&ur.default.createElement(y.Box,{className:Fe.order},o,"."),ur.default.createElement(y.Box,{className:(0,Fa.default)(Fe.text,{[Fe.oneLineText]:u,[Fe.moreLineText]:!u,[Fe.receiveError]:c&&v})},i),c&&v&&ur.default.createElement(y.Box,{className:(0,Fa.default)(Fe.addressError)},ur.default.createElement(Ht,{title:h},ur.default.createElement(mt,{className:(0,Fa.default)(p,Fe.errorIcon)}))))}var Kf=HD;g();D();var Xs=_(Q());var Zf=_($e());he();st();function YD(t){let{txAmount:e,showTextOneLine:r}=t;return Xs.default.createElement(sr,null,Xs.default.createElement(y.Box,{className:(0,Zf.default)(Fe.text,{[Fe.oneLineText]:r,[Fe.moreLineText]:!r})},H.thousandFormat(ln([e||0,0]))))}var Xf=YD;g();D();var Lr=_(Q()),Jf=_(Gm());he();var Js=_($e());function GD(t){let{txHash:e}=t,[r]=qe(),n="",o=r.blockExplorerUrl||r.explorerUrl;o&&(n=el(o,"tx",e));let a=()=>{e&&(n?globalThis.platform.openTab({url:n}):((0,Jf.default)(e),Wa.success({desc:Lr.default.createElement(xe.Text,{inherit:!0,forceWrap:!0},e),placement:Wa.DIRECTION.top,title:T("wallet_receive_toast_address_copied")})))};return Lr.default.createElement(sr,{className:Fe.hash,onClick:a},e?Lr.default.createElement(Lr.default.Fragment,null,Lr.default.createElement(y.Box,{className:(0,Js.default)(Fe.text,Fe.hashText)},xo(e)),Lr.default.createElement(y.Box,null,Lr.default.createElement(mt,{className:(0,Js.default)(Fe.open,{"okx-wallet-plugin-open-link":n,"okx-wallet-plugin-copy":!n})}))):"-")}var Qf=GD;g();D();var tn=_(Q()),ed=_($e());he();g();D();var to={inputRoot:"_inputRoot_rigrr_1",input:"_input_rigrr_1",errorIcon:"_errorIcon_rigrr_8",textRoot:"_textRoot_rigrr_12"};function qD({editable:t,memo:e,index:r}){let[n,o]=we();if(t){let a=s=>{let u=s.target.value,l=[...n];l[r]={...l[r],memo:u,tonMemoError:u.length>200},o(l)};return tn.default.createElement("div",{className:to.inputRoot},tn.default.createElement(ye,{className:to.input,style:{width:"320px"},size:ye.SIZE.xs,value:n[r]?.memo||"",onChange:a}),n[r]?.tonMemoError&&tn.default.createElement(Ht,{title:T("wallet_extension_ton_tooltip_character_limit"),placement:Ht.DIRECTION.bottomRight},tn.default.createElement(mt,{className:(0,ed.default)("okx-wallet-plugin-warning-circle-fill",to.errorIcon)})))}return tn.default.createElement("div",{className:to.textRoot},tn.default.createElement("div",{className:Fe.text},e))}var td=qD;g();D();var ro=_(Q());var Qs=_($e());function $D(t){let{txStatus:e}=t;return ro.default.createElement(sr,null,(()=>{switch(e){case te.SUCCEED:return ro.default.createElement(mt,{className:(0,Qs.default)("okds-success-circle",Fe.success)});case te.FAILED:case te.DROPPED:return ro.default.createElement(mt,{className:(0,Qs.default)("okds-fail-circle",Fe.error)});case te.PENDING:return ro.default.createElement(Ut,{size:Ut.SIZE.md,loaderClassName:Fe.loader});default:return"-"}})())}var rd=$D;var Ze={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status",MEMO:"memo"},ya={[Ze.ADDRESS]:Kf,[Ze.AMOUNT]:Xf,[Ze.ACTION]:Vf,[Ze.HASH]:Qf,[Ze.STATUS]:rd,[Ze.MEMO]:td};var Ar={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action",MEMO:"memo"},nd=[{title:"wallet_extension_list_title_send_address",key:Ar.FROM,type:Ze.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Ar.TO,type:Ze.ADDRESS},{title:"wallet_extension_list_title_amount",key:Ar.TX_AMOUNT,type:Ze.AMOUNT,width:100},{title:"wallet_extension_list_title_operation",key:Ar.ACTION,type:Ze.ACTION,width:50}];var no={[Je.HIGH]:"wallet_extension_gas_select_fast",[Je.MEDIUM]:"wallet_extension_gas_select_average",[Je.LOW]:"wallet_extension_gas_select_slow",[Je.CUSTOM]:"commonall_filter_dropdown_custom"},od=[{value:de.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:de.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:de.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];g();D();var Bt={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};function ad(){return Ne.default.createElement("div",{className:Bt.gweiText},T("extension_wallet_transaction_input_gwei"))}var VD=()=>new Promise((t,e)=>{let r=Wr.tip({children:T("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:T("wallet_extension_btn_general_confirm"),cancelText:T("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){t(),r.destroy()},onCancel(){e(),r.destroy()}})});function KD({custom:t,onClose:e,network:r,onConfirm:n,isSupportEip1559:o}){let{gasPrice:a,gasLimit:s,baseFeePerGas:u,maxFeePerGas:l,maxPriorityFeePerGas:c}=t,[f,v,p]=Po(r?.realChainIdHex||r?.chainId),h=Lo(u),m=o?`${T("extension_wallet_transaction_text_maxbase_fee")} (${T("extension_wallet_transaction_text_current",{number:h})})`:T("wallet_extension_cosmos_title_gasfee"),i=Lo(o?fn(l,c):a),[C,E]=(0,Ne.useState)(i),A=Lo(c),[w,F]=(0,Ne.useState)(A),[S,k]=(0,Ne.useState)(!!f),P=j=>{let K=j.target.checked;k(K),K&&ku()};(0,Ne.useEffect)(()=>{k(!!f)},[f]);let[L]=(0,Ne.useState)(s),I=(0,Ne.useMemo)(()=>{let j=!Number(C);return o&&(j=j||!Number(w)),j},[C,w,o]);return Ne.default.createElement(Wr.Confirmation,{maskClosable:!1,visible:!0,title:T("commonall_filter_dropdown_custom"),confirmText:T("commonall_text_btn_confirm"),cancelText:T("commonall_text_btn_cancel"),confirmDisabled:I,onConfirm:async()=>{let{price:j,usdToThisRate:K}=t,R=_n(o?Bo(C,w):C),{networkFee:U,networkFeeInt:Y,networkFeeMarket:G}=tr({gasPrice:R,gasLimit:L,price:j,usdToThisRate:K}),ne={...t,isDefault:S,networkFee:U,networkFeeInt:Y,networkFeeMarket:G,gasPrice:R,maxFeePerGas:R,maxPriorityFeePerGas:_n(w),gasLimit:L};!pu(f)&&!S?(await VD(),p()):v({isDefault:!0,isSupportEip1559:o,gasPrice:R,maxFeePerGas:R,maxPriorityFeePerGas:_n(w),baseFeePerGas:fn(R,_n(w))}),n(ne)},onCancel:e,onClose:e},Ne.default.createElement(y.Box,null,Ne.default.createElement(ye.Number,{className:Bt.customInput,size:ye.SIZE.sm,title:m,placeholder:i,value:C,precision:9,enableMinus:!1,min:0,onChange:E,suffix:Ne.default.createElement(ad,null)}),o&&Ne.default.createElement(ye.Number,{className:Bt.customInput,size:ye.SIZE.sm,placeholder:A,title:T("extension_wallet_transaction_text_priority_fee"),value:w,precision:9,enableMinus:!1,min:0,onChange:F,suffix:Ne.default.createElement(ad,null)})),Ne.default.createElement(y.Box,{className:Bt.defaultTip},T("wallet_extension_mid_checkbox_setting_default")),Ne.default.createElement(Fr,{checked:S,onChange:P,className:Bt.defaultChecker},T("wallet_extension_bot_alert_default_gas",{networkName:r.name})))}function ZD({loading:t,value:e,network:r,className:n,options:o,onChange:a=()=>{},onCustomChange:s=()=>{}}){let[u]=vn(),[l,c]=(0,Ne.useState)(!1);return Ne.default.createElement(y.Spin,{loading:t&&!o?.length,className:(0,eu.default)(Bt.root,n)},Ne.default.createElement(y.Box,{className:Bt.title},T("wallet_extension_gas_title_internet_fee")),Ne.default.createElement(y.Box,{className:Bt.setting},o.map(f=>{let{level:v,unitPriceDisplay:p}=f,h=T(no[v]);return Ne.default.createElement(y.Box,{className:(0,eu.default)(Bt.item,e?.level===v?Bt.active:Bt.inactive),key:v,onClick:()=>{f.level===Je.CUSTOM?c(!0):a?.(f)}},Ne.default.createElement(y.Box,{className:Bt.label},h),Ne.default.createElement(y.Box,{className:Bt.fee},Ne.default.createElement(xe.Text,{type:xe.TYPE.secondary,size:xe.SIZE.xs,ellipsis:{tooltip:!0}},p),Ne.default.createElement(y.Box,null,T("extension_wallet_transaction_input_gwei"))))})),l&&Ne.default.createElement(KD,{network:r,isSupportEip1559:u,custom:o[o.length-1],onConfirm:f=>{s(f),c(!1)},onClose:()=>{c(!1)}}))}var sd=ZD;g();D();var ir=_(Q()),ud=_($e());he();g();D();var tu=_(Q());function XD(){let[t,e]=(0,tu.useState)(!1),[r,n]=(0,tu.useState)(!1),o=(l,c)=>l&&c&&Number(l)>Number(c);return{hasMinError:t,hasMaxError:r,checkMaxError:(l,c)=>{e(!1),n(o(l,c))},checkMinError:(l,c)=>{n(!1),e(o(l,c))},clearError:()=>{n(!1),e(!1)}}}var Ta=XD;g();D();var kr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function JD({value:t,className:e,onChange:r}){let{type:o,min:a,max:s}=t,{hasMinError:u,hasMaxError:l,checkMaxError:c,checkMinError:f,clearError:v}=Ta(),p=S=>{let k={...t,...S};r?.(k)},h=S=>{let k=S;p({min:k}),f(k,s)},m=S=>{p({max:S}),c(a,S)},i=T("wallet_extension_interval_title_send_interval"),C=[{value:Ye.NONE,label:T("wallet_extension_interval_select_no_interval")},{value:Ye.RANDOM,label:T("wallet_extension_interval_dropdown_random_interval")}],E=T("wallet_extension_interval_subtitle_lowest"),A=T("wallet_extension_interval_subtitle_highest"),w=S=>{let k=S.value;k!==o&&(p({type:k,min:"",max:""}),v())},F=o===Ye.NONE;return ir.default.createElement(y.Box,{className:(0,ud.default)(kr.root,e)},ir.default.createElement(y.Box,{className:kr.type},ir.default.createElement(y.Box,{className:kr.title},i),ir.default.createElement(y.Box,null,ir.default.createElement(mn,{options:C,value:o,onChange:w,align:mn.DIRECTION.right}))),ir.default.createElement(y.Box,{className:kr.setting},ir.default.createElement(y.Box,{className:kr.random},ir.default.createElement(ye.Number,{className:kr.input,title:E,value:a,onChange:h,size:ye.SIZE.lg,placeholder:"0",min:0,max:600,disabled:F,error:u,errorType:ye.TIP_TYPE.always}),ir.default.createElement(ye.Number,{className:kr.input,title:A,value:s,onChange:m,size:ye.SIZE.lg,placeholder:"0",disabled:F,min:0,max:600,error:l,errorType:ye.TIP_TYPE.always}))))}var id=JD;g();D();var xt=_(Q()),ld=_($e()),cd=_(Ae());he();je();g();D();var Br={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};function QD({value:t,className:e,options:r,onChange:n}){let[o]=le(),[a]=zo(),s=Number(o?.decimals??18),{hasMinError:u,hasMaxError:l,checkMaxError:c,checkMinError:f,clearError:v}=Ta(),p=A=>{n?.({min:A}),f(A,t.max)},h=A=>{n?.({max:A}),c(t.min,A)},m=A=>{n?.({amount:A})},i=(0,cd.useMemoizedFn)(A=>{A?.value!==t.type&&(n?.({type:A?.value,amount:"",min:"",max:""}),v())},[t]),C=H.thousandFormat("0.00"),E=(0,xt.useMemo)(()=>o?.localType===Ce&&yt(o)&&H.div(a,10**o?.decimals)||0,[a,o]);return xt.default.createElement(y.Box,{className:(0,ld.default)(Br.root,e)},xt.default.createElement(y.Box,{className:Br.type},xt.default.createElement(y.Box,{className:Br.title},T("wallet_extension_amount_title_transfer_amount")),xt.default.createElement(y.Box,null,xt.default.createElement(mn,{options:r,value:t?.type,onChange:i,align:mn.DIRECTION.right}))),xt.default.createElement(y.Box,{className:Br.setting},t?.type===de.RANDOM?xt.default.createElement(y.Box,{className:Br.random},xt.default.createElement(ye.Number,{enableMinus:!1,className:Br.input,suffix:o?.symbol,title:T("wallet_extension_amount_input_lowest"),value:t?.min,onChange:p,size:ye.SIZE.lg,precision:s,placeholder:C,min:E,error:u,errorType:ye.TIP_TYPE.always}),xt.default.createElement(ye.Number,{suffix:o?.symbol,className:Br.input,title:T("wallet_extension_amount_input_highest"),value:t?.max,onChange:h,precision:s,size:ye.SIZE.lg,placeholder:C,min:E,error:l,errorType:ye.TIP_TYPE.always})):xt.default.createElement(y.Box,{className:Br.custom},xt.default.createElement(ye.Number,{enableMinus:!1,suffix:o?.symbol,title:T("wallet_extension_amount_subtitle_send_amount"),value:t?.amount,size:ye.SIZE.lg,onChange:m,disabled:t?.type===de.ALL,precision:s,placeholder:t?.type===de.ALL?T("wallet_extension_amount_dropdown_all_balance"):C,min:E}))))}var fd=QD;g();D();var Na=_(Q()),vd=_(Dt()),ba=_(Ae());he();g();D();var dd=_(Q()),Sa=(t,e={})=>(r,n)=>dd.default.createElement(t,{...n,...e});je();dn();g();D();st();var e0=(t,e,r=0)=>+Cu(t,e,!0).toFixed(r),wt=e0;g();D();he();dn();var _a=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:n,usedFeeCoinBalance:o})=>{if(H.lt(r,o))return Qt.FEE_BALANCE_INSUFFICIENT;if(e){if(H.lt(t,H.add(n,o)))return Qt.BALANCE_INSUFFICIENT}else if(H.lt(t,n))return Qt.BALANCE_INSUFFICIENT;return null},md=({balance:t,solRent:e,usedRent:r,txAmount:n,isBaseCoin:o,formattedSolRent:a,baseCoinBalance:s,usedCoinBalance:u,usedFeeCoinBalance:l})=>{let c,f=!0;if(H.lt(s,l))return Qt.FEE_BALANCE_INSUFFICIENT;if(o){if(H.lt(t,H.add(u,l))&&(f=!1),H.lt(n,e))return T("walletextension_toast_text_minimum_rent_fee",{number:a});c=H.sub(s,H.add(l,u))}return H.lt(s,H.add(l,r))?T("extension_wallet_transfer_alert_insufficient"):(o||(c=H.sub(s,H.add(l,r)),H.lt(t,u)&&(f=!1)),f?Number(c)!==1&&H.lt(c,e)&&H.gt(c,0)?T("walletextension_toast_text_reserve_rent_exempt",{number:a}):null:Qt.BALANCE_INSUFFICIENT)},pd=async({coin:t,balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s})=>{let u=_a({balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s});if(u)return u;let{ZksyncWallet:l}=await _o(),c=r&&await l.getCloseAmounts(r);return c&&!H.eq(c,r)?T("wallet_extension_placeholder_zksync_max_num",{amount:H.showFloorTruncation(H.div(c,10**t?.decimals),t?.decimals,!1)}):null};function hd({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a,tonSignInfo:s,baseCoinDecimals:u,index:l,mode:c,amountSetting:f}){if(s?.getCustomPayloadInfoRpcError)return T("wallet_extension_multisender_notice_failed_try_again");let v=_a({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a});if(v)return v;if(f.type!==de.CUSTOM&&Tu(e,0))return T("wallet_extension_ton_error_cannot_be_zeror");if(!r&&s){let p=s?.minTonLimit,h=H.add(p||"0",a||"0");if(c===X.ONE_TO_MANY&&(h=H.add(h,H.mul(p,l))),H.gt(h,n)){let m=H.div(h,10**u);return T("wallet_extension_ton_errormessage_insufficient_balance_gas2",{amount:m})}}return null}var t0=9,gd=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:n}=Ve(),[o]=ut(),[a]=zo(),[s]=jo(),[u,l]=(0,Na.useState)([]),[c,f]=we(),v=(0,vd.useSelector)(Ju),p=er(t?.baseCoinId===0?t.coinId:t?.baseCoinId),h=yt(t);(0,ba.useAsyncEffect)(async()=>{if(!r)return;let{type:A,amount:w,min:F,max:S}=r;A===de.CUSTOM&&f(c?.map(k=>({...k,txAmount:H.mul(w,10**(t?.decimals??18))}))),A===de.RANDOM&&f(c?.map(k=>{let P=F&&S&&Number(F)<=Number(S)?wt(F,S,6):0;return{...k,txAmount:H.mul(P,10**(t?.decimals??18))}}))},[r,c?.length,t?.decimals]);let m=async A=>{let{ZksyncWallet:w}=await _o();return await Promise.all(A.map(async S=>({...S,txAmount:S?.txAmount&&await w.getCloseAmounts(S?.txAmount)})))};(0,ba.useAsyncEffect)(async()=>{if(!r)return;let{type:A}=r;if(A===de.ALL&&o===X.ONE_TO_MANY){let[{balance:w}]=c,F=c?.length,S=h?fn(w,H.mul(e?.networkFeeInt,F)):w,k=za(H.div(S,c?.length),0),P=za(H.div(w,F),0);f(c.map((L,I)=>(I===F-1&&(P=H.sub(w,H.mul(P,F-1)),k=h?H.sub(P,e?.networkFeeInt):P),{...L,txAmount:k,usedBalance:P})))}if(A===de.ALL&&o!==X.ONE_TO_MANY){let w=c.map(F=>{let{balance:S}=F,k=h?fn(S,e?.networkFeeInt):S;return{...F,txAmount:k}});f(t?.localType===se?await m(w):w)}},[r.type,c?.length,t?.decimals,e?.networkFeeInt]),(0,ba.useAsyncEffect)(async()=>{l(await(async()=>{let w=0,F=0,S=0,k=e?.networkFeeInt,P=_a;return t?.localType===Ce?P=md:t?.localType===se?P=pd:t?.localType===ve&&(P=I=>hd({...I,tonSignInfo:v,baseCoinDecimals:p?.decimals,mode:o,amountSetting:r})),await Promise.all(c.map(async(I,j)=>{let{to:K,txAmount:R,balance:U,baseCoinBalance:Y}=I,G=s[K]||"0";return o===X.ONE_TO_MANY?(S=H.add(S,G),w=H.add(w,R),F=H.add(F,k)):(S=G,w=R,F=k),{...I,txAmount:H.truncate(H.div(R,10**(t?.decimals??18)),6,!1),index:j,showShortAddress:n,showTextOneLine:!1,order:j+1,error:await P({index:j,balance:U,needRent:G,usedRent:S,solRent:a,txAmount:R,isBaseCoin:h,formattedSolRent:Rn(a,{decimals:t0}),baseCoinBalance:Y,usedCoinBalance:w,usedFeeCoinBalance:F})}}))})())},[n,a,s,o,h,c,t?.decimals,p?.decimals,e?.networkFeeInt,v,r]);let i=(0,Na.useMemo)(()=>({[Ar.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0,showShortAddress:t?.localType===ve},[Ar.TO]:{showShortAddress:t?.localType===ve},[Ar.MEMO]:{editable:!0}}),[t?.localType]),C=[...nd];t?.localType===ve&&C.splice(2,0,{title:"wallet_extension_ton_header_comment",key:Ar.MEMO,type:Ze.MEMO,width:380});let E=C.map(A=>{let{title:w,key:F,type:S,...k}=A;return{title:T(w),dataIndex:F,key:F,render:Sa(ya[S],{...i[F],address:F}),...k}});return{dataSource:u,columns:E}};g();D();var xr=_(Q()),oo=_(Dt()),ao=_(Ae());he();je();var r0=21e3,Dd=({from:t,to:e,token:r,network:n,txAmount:o=0})=>{let a=(0,oo.useDispatch)(),s=wi(),[u]=Po(n?.realChainIdHex||n?.chainId),l=(0,oo.useSelector)(Xu),[c]=(0,xr.useState)(!1),[f,v]=(0,xr.useState)([]),[p,h]=(0,xr.useState)(0),[m,i]=(0,xr.useState)(r0),C=Mi(),E=$o(),A=El(),w=Al(),F=Vo(r?.coinId),S=Ko(),k=(0,oo.useSelector)(it),P=qo(n?.rpcUrl),L=Hn(),I=(0,ao.useMemoizedFn)(U=>{a(Ft(U))},[]),j=(0,ao.useMemoizedFn)(U=>{a(Ft(U)),v(Y=>{let G=[...Y],ne=G.pop();return G.push({...ne,...U,unitPriceDisplay:C(U.gasPrice)}),G})});(0,ao.useDebounceEffect)(()=>{[Ee,Ce,ke,se,ve].includes(r?.localType)||(async()=>{let U=await P({value:o,to:Qe(e,r?.localType),from:Qe(t,r?.localType)},Qe(r?.address,r.localType));i(U)})()},[o],{wait:500}),(0,xr.useEffect)(()=>{(async()=>{let U=await L({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});h(U)})()},[]);let{rpcNetworks:K}=Mo(),R=Yt();return(0,xr.useEffect)(()=>{if(!(!K?.length&&R)&&![Ee,Ce,ke,se,ve].includes(r?.localType)){let U,Y=l.map(re=>{let{level:fe,gasPrice:Se}=re,{networkFee:ge,networkFeeInt:Me,networkFeeMarket:x}=tr({gasPrice:Se,gasLimit:m,price:p,usdToThisRate:s?.usdToThisRate}),q={...re,gasLimit:m,tokenPrice:p,networkFee:ge,networkFeeInt:Me,networkFeeMarket:x,currencySymbol:s?.symbol,label:T(no[fe]),usdToThisRate:s?.usdToThisRate,unitPriceDisplay:C(Se)};return fe===Je.MEDIUM&&(U=q),q}),G={...U},ne=!1,ce=k?.level;u?(G={...u,...tr({gasLimit:m,price:p,gasPrice:u.gasPrice,usdToThisRate:s?.usdToThisRate})},ne=!0):ce===Je.CUSTOM&&(G=[...f].pop()||U);let ie={...G,level:Je.CUSTOM,unitPriceDisplay:C(G.gasPrice),label:T(no[Je.CUSTOM])};if(Y.push(ie),v(Y),ce){let re=Y.find(fe=>fe.level===ce);a(Ft(re||U))}else a(ne?Ft(ie):Ft(U))}},[m,l,K,R]),(0,xr.useEffect)(()=>{let U=async()=>{let ie=await E({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:re}=ie||{};a(Fo(re)),a(Ft(ie))},Y=async()=>{let ie=await A({to:e,from:t,value:o,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});a(Ft(ie))},G=async()=>{let ie=await F({to:e,chainId:r?.chainId,contractAddress:r?.address});a(Ft(ie))},ne=async()=>{let ie=await w({coinId:r?.coinId,address:t});a(Ft(ie))},ce=async()=>{let ie=await S({baseCoinId:r?.baseCoinId,coinId:r?.coinId,chainId:r?.chainId,from:t,to:e,tokenAddress:r?.address,decimals:r?.decimals,amount:o});a(Ft(ie))};r?.localType===se?G():r?.localType===Ce?U():r?.localType===ke?Y():r?.localType===Ee?ne():r?.localType===ve&&ce()},[]),[c,f,I,j]};g();D();he();var Cd=_(Ae());je();var Ed=_(Q());var Ad=t=>{let[e,r]=lt(),o=od.filter(({value:s})=>!(t===se&&s===de.RANDOM)).map(({label:s,value:u})=>({value:u,label:T(s)})),a=(0,Cd.useMemoizedFn)((s={})=>{r({...e,...s})},[e]);return(0,Ed.useLayoutEffect)(()=>{t===se&&e?.type===de.RANDOM&&r({type:de.CUSTOM})},[t]),[e,o,a]};g();D();var so=_(Q()),Bd=_(Ae());var n0=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:n}=Et(),o=(0,so.useMemo)(()=>{if(!e)return!0;if(e.type===de.CUSTOM)return!e.amount||Number(e.amount)===0;if(e.type===de.RANDOM){let{min:c,max:f}=e;return!c||!f||Number(c)>Number(f)||Number(f)===0}return!1},[e]),a=(0,so.useMemo)(()=>{if(!r)return!0;if(r.type===Ye.RANDOM){let{min:c,max:f}=r;return!c||!f||Number(c)>Number(f)}return!1},[r]),s=(0,so.useMemo)(()=>t?.some(({error:c,tonMemoError:f})=>!!c||!!f),[t]),u=(0,so.useMemo)(()=>o||a||s,[o,a,s]),l=(0,Bd.useMemoizedFn)(()=>{Ou?.(),n()},[]);return[u,l]},xd=n0;g();D();var kt={root:"_root_1mpnv_1",statistics:"_statistics_1mpnv_24",setting:"_setting_1mpnv_45",amount:"_amount_1mpnv_64",no_gas:"_no_gas_1mpnv_167",noGas:"_no_gas_1mpnv_167",interval:"_interval_1mpnv_257",gas:"_gas_1mpnv_440",address:"_address_1mpnv_531",footer:"_footer_1mpnv_611",alert:"_alert_1mpnv_682"};var o0=()=>{let{gotoAddressPage:t}=Et(),{isSm:e}=Ve(),[r]=le(),[n]=qe(),[o]=we(),a=(0,wd.useSelector)(it),s=xa(),u=Eu(Au(o,"balance"))[0],l=![Ee,Ce,ke,se,ve].includes(r?.localType),[c,f,v,p]=Dd({...u,network:n,token:r,isEvmTransaction:l}),[h,m,i]=Ad(r?.localType),{dataSource:C,columns:E}=gd({token:r,network:n,amountSetting:h,networkFee:a}),[A={},w]=ct(),[F,S]=xd({dataSource:C,amountSetting:h,intervalSetting:A}),k=Ea();return rt.default.createElement(Sr,{footer:rt.default.createElement(y.Box,{className:kt.footer},rt.default.createElement(ee,{block:e,category:ee.CATEGORY.outline,type:ee.TYPE.primary,size:e?ee.SIZE.lg:ee.SIZE.xl,onClick:()=>{t()}},T("wallet_extension_footer_btn_back")),rt.default.createElement(ee,{block:e,category:ee.CATEGORY.fill,type:ee.TYPE.highlight,size:e?ee.SIZE.lg:ee.SIZE.xl,onClick:()=>{S(),Mu(s())},disabled:F||!a},T("wallet_extension_footer_btn_confirm"))),useOkg:!1},rt.default.createElement(y.Box,{className:(0,uo.default)(kt.root)},rt.default.createElement(Fn,{title:T("wallet_extension_amount_title_input_amount"),subtitle:T("wallet_extension_amount_subtitle_input_number")}),rt.default.createElement(Aa,{className:kt.statistics,statistics:k}),rt.default.createElement(y.Box,{className:kt.setting},rt.default.createElement(y.Box,{className:(0,uo.default)(kt.amount,{[kt.no_gas]:!l})},rt.default.createElement(fd,{value:h,options:m,onChange:i})),rt.default.createElement(y.Box,{className:(0,uo.default)(kt.interval,{[kt.no_gas]:!l})},rt.default.createElement(id,{value:A,onChange:w})),l&&rt.default.createElement(y.Box,{className:kt.gas},rt.default.createElement(sd,{loading:c,network:n,options:f,onChange:v,value:a,onCustomChange:p})))),rt.default.createElement(y.Box,{className:(0,uo.default)(kt.address)},r?.localType===se&&h.type===de.ALL&&rt.default.createElement(bn,{closable:!1,className:kt.alert,title:T("wallet_extension_toast_zksync_max_num")}),rt.default.createElement(Ba,{dataSource:C,columns:E})))},Fd=rt.default.memo(o0);g();D();var gt=_(Q());he();g();D();var St=_(Q());he();var io=_($e());je();g();D();var vt={root:"_root_a40u5_2",select:"_select_a40u5_67",titleBox:"_titleBox_a40u5_88",title:"_title_a40u5_88",tip:"_tip_a40u5_115",card:"_card_a40u5_131",icon:"_icon_a40u5_188",checkBox:"_checkBox_a40u5_204",check:"_check_a40u5_204",disabled:"_disabled_a40u5_220",active:"_active_a40u5_224",disabledContent:"_disabledContent_a40u5_227",name:"_name_a40u5_230",subtitle:"_subtitle_a40u5_237"};function a0(t){let{icon:e,name:r,mode:n,disable:o,active:a,onSelected:s,subtitle:u}=t,l=()=>{s(n);let c={[X.ONE_TO_MANY]:"1tomany",[X.MANY_TO_MANY]:"manytomany",[X.MANY_TO_ONE]:"manyto1"};Iu({button_name:c[n]})};return St.default.createElement(y.Box,{className:(0,io.default)(vt.card,{[vt.active]:a,[vt.disabled]:o}),onClick:l},St.default.createElement("img",{src:e,height:72,alt:"",className:(0,io.default)(vt.icon,{[vt.disabledContent]:o})}),St.default.createElement(y.Box,{className:(0,io.default)(vt.name,{[vt.disabledContent]:o})},r),u&&St.default.createElement(y.Box,{className:(0,io.default)(vt.subtitle,{[vt.disabledContent]:o})},u),a&&St.default.createElement(y.Box,{className:vt.checkBox},St.default.createElement(Fr.Circle,{checked:!0})))}function s0(){let t=T("wallet_extension_type_title_transaction_method");return St.default.createElement(y.FlexBox,{className:vt.titleBox,align:y.ALIGN.center},St.default.createElement(y.Box,{className:vt.title},t))}function u0(t){let{mode:e,onSelected:r,selectedNetwork:n}=t,o=So({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),a=So({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),s=So({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),u={[X.ONE_TO_MANY]:{mode:X.ONE_TO_MANY,icon:o,disable:n?.localType===se,name:T("wallet_extension_type_pic_one_to_many")},[X.MANY_TO_ONE]:{mode:X.MANY_TO_ONE,icon:a,name:T("wallet_extension_type_pic_many_to_one")},[X.MANY_TO_MANY]:{mode:X.MANY_TO_MANY,icon:s,name:T("wallet_extension_type_pic_many_to_many")}};return St.default.createElement(y.Box,{className:vt.root},St.default.createElement(s0,null),St.default.createElement(y.Box,{className:vt.select},Object.values(u).map((l,c)=>St.default.createElement(a0,{key:c,onSelected:r,active:l.mode===e,...l}))))}var yd=u0;g();D();var Pe=_(Q()),Oa=_(Ae()),nu=_($e()),Td=_(hi());he();je();g();D();var lr={root:"_root_11bg3_1",title:"_title_11bg3_4",inputWrap:"_inputWrap_11bg3_22",option:"_option_11bg3_25",inputPopup:"_inputPopup_11bg3_37",show:"_show_11bg3_53",loadingWrap:"_loadingWrap_11bg3_56","select-up-active":"_select-up-active_11bg3_62",selectUpActive:"_select-up-active_11bg3_62","item-image":"_item-image_11bg3_66",itemImage:"_item-image_11bg3_66","arrow-down-icon":"_arrow-down-icon_11bg3_70",arrowDownIcon:"_arrow-down-icon_11bg3_70"};var i0="0x",l0=async(t,e)=>{try{return!zi(e)||await t.eth.getCode(e)===i0}catch{return!0}},c0=async(t,e)=>{let r=new e.eth.Contract(Td.default,t),[n,o,a]=await Promise.all([r.methods.symbol().call(),r.methods.decimals().call(),r.methods.name().call()]);return{name:a,symbol:n,decimals:o}},ru=!1;function f0(t,e){let{value:r,options:n,disabled:o,selectedNetwork:a,onSelect:s,onInputChange:u,onCustomContractChange:l,refreshInfiniteScrollRef:c,tokensLoadingMore:f}=t,v=(0,Pe.useRef)(),[p,h]=(0,Pe.useState)(!1),[m,i]=(0,Pe.useState)(!1),[C,E]=(0,Pe.useState)(!1),[A,w]=(0,Pe.useState)(r?.address||""),F=K=>(ru=!0,E(!1),w(""),s(K?{...K,custom:!1}:null)),S=(0,Oa.useMemoizedFn)(async({target:K})=>{w(K?.value)},[a?.rpcUrl]);(0,Pe.useEffect)(()=>{u?.(A)},[A,u]);let k=async()=>{let K=n.find(({address:R})=>!!A&&R===A);if(K)F(K);else if(!ru&&A&&![Ee,Ce,ke,se,ve].includes(a?.localType)){let R=await Oo(a?.rpcUrl);if(await l0(R,A)===!1){let Y=await c0(A,R);l?.({...Y,address:A,custom:!0}),E(!1)}else E(!0),l?.(null)}ru=!1};(0,Pe.useEffect)(()=>{w(""),E(!1)},[a?.chainId]);let P=Yt();(0,Pe.useEffect)(()=>{w(""),E(!1)},[P]);let L=A&&C,I=!!n?.length;(0,Pe.useEffect)(()=>{!p||(I?I&&i(!0):i(!1))},[I]),(0,Pe.useLayoutEffect)(()=>{m&&c?.()},[m,c]),(0,Oa.useClickAway)(()=>{h(!1),i(!1)},v);let j=T("wallet_extension_type_placeholder_select_crypto");return Pe.default.createElement(y.Box,{className:lr.root},Pe.default.createElement(y.Box,{className:lr.title},T("wallet_extension_type_title_select_coin")),Pe.default.createElement("div",{className:lr.inputWrap},Pe.default.createElement(ye,{onRef:K=>{v.current=K},style:{width:"100%"},error:L&&T("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),placeholder:j,value:r&&r?.custom===!1?r?.symbol:A||r?.address,onChange:S,onBlur:()=>{k()},onFocus:()=>{h(!0),I&&i(!0)},size:ye.SIZE.xl,disabled:o,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:Pe.default.createElement(Ge,{className:(0,nu.default)({[lr["select-up-active"]]:m}),icon:"okds-arrow-chevron-down-md",size:Ge.SIZE.xs}),onClear:()=>F(null)}),!!m&&Pe.default.createElement("div",{ref:e,className:(0,nu.default)(lr.inputPopup,{[lr.show]:m})},n.map(K=>{let{image:R,imageUrl:U,symbol:Y}=K;return Pe.default.createElement("div",{className:lr.option,key:Y,onClick:()=>{F(K)}},Pe.default.createElement(Ge,{className:lr.itemImage,src:R||U,text:Y,size:Ge.SIZE.md}),Y)}),!!f&&Pe.default.createElement("div",{className:lr.loadingWrap},Pe.default.createElement(Ut.Circle,{size:Ut.SIZE.md})))))}var Sd=Pe.default.forwardRef(f0);g();D();var rn=_(Q());he();g();D();var yn={"retina-border-basic":"_retina-border-basic_1vvj9_1",retinaBorderBasic:"_retina-border-basic_1vvj9_1",root:"_root_1vvj9_30",title:"_title_1vvj9_95",item:"_item_1vvj9_118",question:"_question_1vvj9_194",answer:"_answer_1vvj9_211"};g();D();var Tn=_(Q());g();D();var d0=t=>`${Bi()}${t}`,_d=d0;he();var bd=()=>{let t=_d("/cdn/assets/files/235/C7BA61E964654AF6.csv");return{questions:[{question:T("wallet_extension_faq_title_distinction"),answer:Tn.default.createElement("pre",null,T("wallet_extension_faq_text_one_to_many"))},{question:T("wallet_extension_sending_title_multisender_network"),answer:Tn.default.createElement("pre",null,T("wallet_extension_sending_subtitle_multisender_evm"))},{question:T("wallet_extension_faq_title_what_transfer"),answer:Tn.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_definition"))},{question:T("wallet_extension_faq_title_how_transfer"),answer:Tn.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_method",{btn:Tn.default.createElement(Nn,{type:Nn.TYPE.primary,href:t,weight:Nn.WEIGHT.muted,size:Nn.SIZE.sm},T("wallet_extension_multisender_btn_download"))}))}]}};function m0(){let t=T("wallet_extension_faq_maintitle_question"),{questions:e}=bd();return rn.default.createElement(y.Box,{className:yn.root},rn.default.createElement(y.Box,{className:yn.title},t),rn.default.createElement(y.Box,null,e.map((r,n)=>rn.default.createElement(y.Box,{key:n,className:yn.item},rn.default.createElement(y.Box,{className:yn.question},r.question),rn.default.createElement(y.Box,{className:yn.answer},r.answer)))))}var Nd=m0;g();D();var Kt=_(Q()),Od=_(Dt()),Id=_(Ae());he();g();D();var Vt={root:"_root_1jex4_2",footer:"_footer_1jex4_11",network:"_network_1jex4_80",networkTitle:"_networkTitle_1jex4_156",networkSelectBox:"_networkSelectBox_1jex4_175",networkSelect:"_networkSelect_1jex4_175",tokenSelect:"_tokenSelect_1jex4_221",icon:"_icon_1jex4_262",loader:"_loader_1jex4_265","network-icon":"_network-icon_1jex4_268",networkIcon:"_network-icon_1jex4_268"};var p0=()=>{let[t,e]=(0,Kt.useState)(!1),r=pl(),[,n]=le(),{isRpcMode:o,currentNetworkUniqueId:a}=(0,Od.useSelector)(To),s=r.find(p=>o?p.uniqueId===a:p.netWorkId===a),[u,l]=qe(s),c=(0,Kt.useMemo)(()=>r.map(p=>{let{chainId:h,icon:m,chainName:i,rpcUrl:C}=p;return{network:p,value:h,searchKeyword:i,label:Kt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{height:"20px",width:"100%"}},Kt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{flex:1}},u?.rpcUrl===C&&t?Kt.default.createElement(Ut,{className:Vt.loader,size:Ut.SIZE.md}):Kt.default.createElement(Ge,{className:Vt.networkIcon,src:m,text:i,size:Ge.SIZE.md}),i))}}),[r,u?.rpcUrl,t]),f=async p=>{try{e(!0),await(await Oo(p)).eth.getGasPrice()}catch{let m=Wr.warn({title:T("developer_mode_network_toast_connect_failed"),text:T("developer_mode_network_toast_changenetwork"),cancelText:T("wallet_extension_sending_btn_cancel"),confirmText:T("developer_mode_network_btn_retry"),confirmBtnProps:{type:ee.TYPE.highlight,size:ee.SIZE.lg},onCancel:()=>{m.destroy(),l(null)},onConfirm:()=>{m.destroy(),f(p)}})}finally{e(!1)}},v=(0,Id.useMemoizedFn)(({network:p={},label:h,...m})=>{l({...p,...m}),p?.appBaseChain==="ethereum"?f(p.rpcUrl).then(()=>{n(null)}).catch(()=>{}):n(null),Pu()},[]);return(0,Kt.useEffect)(()=>{n(null)},[o]),[t,u,c,v]},Pd=p0;g();D();var Ia=_(Ae());var Ld=_(Q());var h0=t=>{let[e,r]=le(),[n,o]=(0,Ld.useState)(""),a=Yt(),s=Io(),{list:u,listRef:l,refreshDom:c,loadingMore:f}=vl(t,n),v=async C=>{if(!C){r(null);return}let E=!C?.address,A=await Ci({coinId:C.coinId}),w;E?w=A:w=s.find(({coinId:S})=>S===C.baseCoinId);let{chainId:F}=t||{};A===null||!E&&w===null||r({chainId:F,...C,...A,baseCoin:E?void 0:w})},p=C=>{let E=!C?.address,{chainId:A}=t||{},w=s.find(({chainId:F})=>F===Ro(A));r({chainId:A,...C,baseCoin:E?void 0:w})},h=(0,Ia.useMemoizedFn)(C=>{v(C)}),m=(0,Ia.useMemoizedFn)(C=>{o(C)}),i=(0,Ia.useMemoizedFn)(C=>{p(C)});return[e,u,l,c,f,{onBatchTokenChange:a?i:h,onBatchCustomTokenChange:i,onInputChange:m}]},kd=h0;var v0=()=>{let{isSm:t}=Ve(),{gotoAddressPage:e}=Et(),[r,n]=ut(),[o,a,s,u]=Pd(),[l,c,f,v,p,{onBatchTokenChange:h,onBatchCustomTokenChange:m,onInputChange:i}]=kd(a);return gt.default.createElement(Sr,{footer:gt.default.createElement(y.FlexBox,{justify:"flex-end",className:Vt.footer},gt.default.createElement(ee,{block:t,category:ee.CATEGORY.fill,type:ee.TYPE.highlight,size:t?ee.SIZE.lg:ee.SIZE.xl,disabled:!a?.chainId||!r||!l?.symbol,onClick:e},T("wallet_extension_footer_btn_next")))},gt.default.createElement(y.Box,{className:Vt.root},gt.default.createElement(Fn,{title:T("wallet_extension_type_title_select_type"),subtitle:T("wallet_extension_type_subtitle_select")}),gt.default.createElement(y.Box,{className:Vt.network},gt.default.createElement(y.Box,{className:Vt.networkSelectBox},gt.default.createElement(y.Box,{className:Vt.networkTitle},T("wallet_extension_type_title_select_internet")),gt.default.createElement(ja,{block:!0,placeholder:T("wallet_extension_type_placeholder_ethereum"),size:ja.SIZE.xl,onChange:u,value:a?.chainId,options:s,className:Vt.networkSelect,disabled:o,searchFocus:!1,searchPlaceholder:T("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),gt.default.createElement(y.Box,{className:Vt.tokenSelect},gt.default.createElement(Sd,{ref:f,disabled:!a?.chainId,value:l,options:c,onSelect:h,onInputChange:i,onCustomContractChange:m,selectedNetwork:a,tokensLoadingMore:p,refreshInfiniteScrollRef:v}))),gt.default.createElement(yd,{mode:r,selectedNetwork:a,onSelected:n}),gt.default.createElement(Nd,null)))},Md=gt.default.memo(v0);g();D();var nt=_(Q()),Nm=_($e());st();g();D();var Mr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash",MEMO:"memo"},Pa=[{title:"wallet_extension_list_title_send_address",key:Mr.FROM,type:Ze.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Mr.TO,type:Ze.ADDRESS},{title:"wallet_extension_list_title_amount",key:Mr.TX_AMOUNT,type:Ze.AMOUNT},{title:"wallet_extension_list_colheader_state",key:Mr.STATUS,type:Ze.STATUS},{title:"wallet_extension_list_colheader_hash",key:Mr.HASH,type:Ze.HASH,align:"center",width:"200px"}],La={title:"wallet_extension_ton_header_comment",key:Mr.MEMO,type:Ze.MEMO};var oe={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},Rd={[oe.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:ee.CATEGORY.outline,type:ee.TYPE.primary},actionType:oe.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:ee.CATEGORY.outline,type:ee.TYPE.primary},actionType:oe.PAUSE}],[oe.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:ee.CATEGORY.outline,type:ee.TYPE.primary},actionType:oe.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:ee.CATEGORY.fill,type:ee.TYPE.highlight},actionType:oe.SENDING}],[oe.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:ee.CATEGORY.fill,type:ee.TYPE.highlight},actionType:oe.DONE}],[oe.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:ee.CATEGORY.outline,type:ee.TYPE.primary},actionType:oe.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:ee.CATEGORY.fill,type:ee.TYPE.highlight},actionType:oe.DONE}],[oe.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:ee.CATEGORY.outline,type:ee.TYPE.primary},actionType:oe.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:ee.CATEGORY.fill,type:ee.TYPE.highlight},actionType:oe.FAILED}]},zd={[oe.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[oe.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[oe.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[oe.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};je();In();On();g();D();var nn=_(Q());he();g();D();var He={root:"_root_edfdl_1",header:"_header_edfdl_24",content:"_content_edfdl_24",alert:"_alert_edfdl_28",statistics:"_statistics_edfdl_57",address:"_address_edfdl_73",footer:"_footer_edfdl_100",loadingIcon:"_loadingIcon_edfdl_171",pauseLoadingIcon:"_pauseLoadingIcon_edfdl_186",finished:"_finished_edfdl_190",finishedIcon:"_finishedIcon_edfdl_193",failed:"_failed_edfdl_197",failedIcon:"_failedIcon_edfdl_200",sendError:"_sendError_edfdl_204",warning:"_warning_edfdl_207",export:"_export_edfdl_214",exportIcon:"_exportIcon_edfdl_239",finishedConfirm:"_finishedConfirm_edfdl_243","status-icon":"_status-icon_edfdl_285",statusIcon:"_status-icon_edfdl_285","status-icon-pause":"_status-icon-pause_edfdl_298",statusIconPause:"_status-icon-pause_edfdl_298","status-title":"_status-title_edfdl_301",statusTitle:"_status-title_edfdl_301","status-desc-text":"_status-desc-text_edfdl_310",statusDescText:"_status-desc-text_edfdl_310","status-desc-container":"_status-desc-container_edfdl_326",statusDescContainer:"_status-desc-container_edfdl_326","result-main":"_result-main_edfdl_335",resultMain:"_result-main_edfdl_335"};g();D();var lo=_(Q());he();var jd=({onExport:t,isFinished:e,isSm:r})=>lo.default.createElement(y.Box,{className:He.warning},e&&lo.default.createElement(y.Box,{className:He.export,onClick:t},lo.default.createElement(Ge,{size:Ge.SIZE.sm,icon:"okx-wallet-plugin-export"}),lo.default.createElement(y.Box,null,T("wallet_extension_complete_btn_export_transaction"))),!e&&!r&&T("wallet_extension_sending_text_no_close_page"));var g0=({onExport:t,onSendStatusChange:e,sendStatus:r=oe.SENDING})=>{let{isSm:n}=Ve(),o=Rd[r],a=r===oe.FINISHED,s=a?y.Box:nn.default.Fragment;return nn.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:He.footer},nn.default.createElement(jd,{onExport:t,isFinished:a,isSm:n}),o.map(({actionProps:{children:u,...l},actionType:c})=>nn.default.createElement(s,{className:n&&He.finishedConfirm},nn.default.createElement(ee,{block:n,...l,size:n?ee.SIZE.lg:ee.SIZE.xl,onClick:()=>{e?.(c)}},T(u)))))},Wd=nn.default.memo(g0);g();D();var Zt=_(Q()),Ud=_($e());he();var D0=({sendStatus:t})=>{if([oe.SENDING,oe.PAUSE].includes(t))return Zt.default.createElement(Ut,{loaderClassName:(0,Ud.default)(He.loadingIcon,{[He.pauseLoadingIcon]:t===oe.PAUSE})});let e={className:He["status-icon"]};return t===oe.FAILED?e=Object.assign(e,{icon:"okds-fail-circle",style:{color:"var(--okd-color-semantic-negative)"}}):t===oe.FINISHED&&(e=Object.assign(e,{icon:"okds-success-circle",style:{color:"var(--okd-color-semantic-positive)"}})),Zt.default.createElement(Ge,{...e})},C0=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=Ve(),{title:n,style:o}=zd[t],a=T(n),s=(0,Zt.useMemo)(()=>Zt.default.createElement(xe.Text,{strong:700,style:o,className:He["status-title"]},a),[o,a]);return Zt.default.createElement(y.Space,{className:He["result-main"],space:r?"16px":"22px",align:y.ALIGN.center,direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal},Zt.default.createElement(D0,{sendStatus:t}),Zt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"8px"},s,Zt.default.createElement(y.Space,{space:r?"4px":"8px",direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:He["status-desc-container"]},e.map(({title:u,args:l,style:c})=>Zt.default.createElement(xe.Text,{key:u,style:c,className:He["status-desc-text"]},T(u,l))))))},Hd=C0;g();D();var co=_(Q());he();function E0({sendStatus:t}){let{isSm:e}=Ve(),[r,n]=(0,co.useState)(!0),o=ju.FINISHED===t,a=T("wallet_extension_sending_text_no_close_page"),s=e&&r&&!o;return co.default.createElement(y.Box,{className:He.alert},s?co.default.createElement(bn,{desc:a,type:bn.TYPE.info,onClose:()=>{n(!1)}}):null)}var Yd=E0;g();D();var Gd=_(Q());he();je();var A0=()=>{let[t]=le(),[e=[]]=we(),r=e.map((s,u)=>({...s,showShortAddress:!0,showTextOneLine:!0,order:u+1,index:u,txAmount:H.truncate(H.div(s?.txAmount,10**(t?.decimals??18)),6,!1)})),n=(0,Gd.useMemo)(()=>({[Mr.FROM]:{showOrder:!0,isFromAddress:!0}}),[]),o=[...Pa];t?.localType===ve&&o.splice(2,0,La);let a=o.map(s=>{let{title:u,key:l,type:c,...f}=s;return{title:T(u),dataIndex:l,key:l,render:Sa(ya[c],n[l]),...f}});return{dataSource:r,columns:a}},qd=A0;g();D();var ou=_(Q());he();var $d=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,ou.useMemo)(()=>{let n=0,o=0,a=0,s=e?.length;return e.forEach(({txStatus:u})=>{u===te.FAILED&&n++,u===te.SUCCEED&&o++,u===te.PENDING&&a++}),{total:s,failed:n,success:o,notExecuted:s-n-a-o}},[e]);return(0,ou.useMemo)(()=>{if(t===oe.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:n,failed:o,success:a,notExecuted:s}=r,u=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:H.thousandFormat(a)}}];return o>0&&u.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:H.thousandFormat(o)},style:{color:"var(--okd-color-semantic-negative)"}}),t===oe.FINISHED?s>0&&u.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:H.thousandFormat(s)}}):u.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:H.thousandFormat(n)}}),u},[t,r])};g();D();var an=_(Q()),xm=_(Dt()),wm=_(Xa()),Fm=_(Ae());je();g();D();var lm=_(Ae());g();D();var au=_(Q()),fo=_(Dt()),on=_(Ae());he();g();D();var Vd=_(Ae());var Kd=t=>{let e=er(t);return(0,Vd.useMemoizedFn)(async r=>{if(e?.baseCoinId===0||!r)return{tokenAccountAddress:"",createAssociatedAddress:!1};let{data:n}=await Di({coinId:t,address:r});return{createAssociatedAddress:!n?.legal,tokenAccountAddress:n?.tokenAccountAddress}})};Ya();Um();je();g();D();st();Wm();var Zd=({address:t,localType:e,contractAddress:r,symbol:n,errorMsg:o,txParams:a})=>{try{iu.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:n,txParams:a,errorMsg:o})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{lu()}};g();D();var Xd=_(Ae());In();On();var Jd=_(Q()),B0=()=>{let t=(0,Jd.useRef)();return(0,Xd.useMemoizedFn)(e=>new Promise(r=>{let n=async()=>{let{data:o}=await Xt(Jt.batchGetTxStatus,{txHashList:[e]}),a=o[e];["SUCCESS","ERROR"].includes(a)&&(r(a),clearInterval(t.current))};t.current=setInterval(()=>{n()},2e3)}))},ka=B0;g();D();var Qd=_(Ae());var x0=t=>{let e=qr(t);return(0,Qd.useMemoizedFn)(async r=>await(await e()).eth.getTransactionCount(r,"latest"),[e])},em=x0;g();D();var tm=_(Ae());je();var w0=()=>{let t=Ct(),e=pn(Ce);return(0,tm.useMemoizedFn)(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:wr,address:e});return r})},rm=w0;var nm=t=>{let e=qr(t),[r]=ut(),n=(0,au.useRef)(!1),o=(0,au.useRef)({}),[a]=le(),[s]=qe(),u=em(t),l=qo(t),c=ji(),[f]=vn(),v=(0,fo.useSelector)(it),p=_i(),h=(0,fo.useSelector)(Vu);return n.current=h,o.current=v,(0,on.useMemoizedFn)(async({to:m,from:i,value:C,usedBalance:E,balance:A,baseCoinBalance:w,transferAmountType:F,gasPrice:S})=>{let k=null,P=n.current||!1,L=null;try{let I=C,j=await e(),{chainId:K}=s,R=yt(a),U=i&&Qe(i,a?.localType),Y=m&&Qe(m,a?.localType),G=await p(Qe(a?.address,a?.localType),U,j)||A,ne=await l({to:Y,from:U,value:C},Qe(a?.address,a?.localType)),ce=await u(U),ie=o.current,re=S?.gasPrice||ie?.gasPrice,fe=S?.maxFeePerGas||ie?.maxFeePerGas,Se=S?.maxPriorityFeePerGas||ie?.maxPriorityFeePerGas,{networkFeeInt:ge}=tr({gasPrice:re,gasLimit:ne}),Me={to:m,from:i,value:C,nonce:ce,chainId:K,gasLimit:ne,supportEip1559:f,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType};if(f?Me={maxFeePerGas:fe,maxPriorityFeePerGas:Se,type:qa.FEE_MARKET,...Me}:Me={gasPrice:re,type:qa.LEGACY,...Me},L=ko({to:m,from:i,value:C,nonce:ce,chainId:K,gasLimit:ne,gasPrice:re,maxFeePerGas:fe,supportEip1559:f,maxPriorityFeePerGas:Se,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType}),P){let V=await c({...L,coinId:a?.coinId});ge=H.add(ge,V)}R&&r!==X.ONE_TO_MANY&&F===de.ALL&&(I=H.sub(G,ge),L=ko(Object.assign(Me,{value:I}))),R&&r===X.ONE_TO_MANY&&F===de.ALL&&(I=H.sub(E,ge),L=ko(Object.assign(Me,{value:I})));let x=Gr({isBaseCoin:R,balance:G,baseCoinBalance:w,txAmount:Me?.value,networkFee:ge}),q=await Gi(U);if(!x||!q)return{to:m,from:i,txStatus:te?.FAILED};k=await No(L,bo(L?.from,a.localType),xi(a.localType));let W=await zn(Fu,k);return await j.eth.sendSignedTransaction(k),{to:m,from:i,txHash:W,txAmount:I,txStatus:te?.SUCCEED}}catch(I){return Zd({address:i,localType:s?.localType,contractAddress:Qe(a?.address,a?.localType),symbol:a?.symbol,errorMsg:I?.message,txParams:L}),{to:m,from:i,txStatus:te?.FAILED}}},[e])},om=()=>{let[t]=le(),[e]=ut(),r=Yr({localType:Ce,coinId:t?.coinId}),n=rm(),o=$o(),a=Kd(t?.coinId),s=(0,fo.useSelector)(it);return(0,on.useMemoizedFn)(async({to:u,from:l,amount:c,balance:f,usedBalance:v,baseCoinBalance:p,transferAmountType:h})=>{try{let m=c,i=yt(t),C=await n(),E=await o({coinId:t?.coinId,chainId:t?.chainId,to:u,from:l}),{createAssociatedAddress:A}=await a(u),w=E||s||{},{computeUnitLimit:F,computeUnitPrice:S,networkFeeInt:k}=w;h===de.ALL&&i&&e!==X.ONE_TO_MANY&&(m=H.sub(f,k)),h===de.ALL&&i&&e===X.ONE_TO_MANY&&(m=H.sub(v,k));let P={to:u,from:l,blockHash:C,payer:l,computeUnitLimit:F,computeUnitPrice:S,amount:m,type:i?$a.TRANSFER:$a.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(P,{mint:t.address,createAssociatedAddress:A}),t?.protocolType===Pn.SPL_TOKEN_2022&&Object.assign(P,{token2022:!0,decimal:t?.decimals}),!Gr({isBaseCoin:i,balance:f,baseCoinBalance:p,txAmount:m,networkFee:k}))return{to:u,from:l,txStatus:te?.FAILED};let I=await No(P,l,Ce),j=await zn(Ce,I);return await r(I,{txHash:j,signedTx:I,toAdr:u,fromAdr:l,coinAmount:m,serviceCharge:k,walletId:void 0}),{to:u,from:l,txHash:j,txAmount:m,startTime:Date.now(),txStatus:te?.PENDING}}catch{return{to:u,from:l,txStatus:te?.FAILED}}})},am=()=>{let[t]=le(),[e]=ut(),r=fl(t?.coinId),n=dl(t?.coinId),o=Ho(),a=ka();return(0,on.useMemoizedFn)(async({to:s,from:u,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p})=>{try{let h=l,m=yt(t),i=await o({to:s,from:u,value:l,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(p===de.ALL&&m&&e!==X.ONE_TO_MANY&&(h=H.sub(c,i)),p===de.ALL&&m&&e===X.ONE_TO_MANY&&(h=H.sub(f,i)),!Gr({isBaseCoin:m,balance:c,baseCoinBalance:v,txAmount:h,networkFee:i}))return{to:s,from:u,txStatus:te?.FAILED};let{tx:E,txBytes:A,signedTx:w}=await r({to:s,from:u,value:l,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:F}=w||{};return await n({tx:E,txBytes:A,to:s,from:u,coinAmount:l,signedTx:w}),e===X.ONE_TO_MANY&&await a(F)==="ERROR"?{to:s,from:u,txStatus:te?.FAILED}:{to:s,from:u,txHash:F,txAmount:h,startTime:Date.now(),txStatus:te?.PENDING}}catch{return{to:s,from:u,txStatus:te?.FAILED}}})},sm=()=>{let[t]=le(),[e]=ut(),r=Ct(),n=Yr({localType:se,coinId:t?.coinId}),o=(0,fo.useSelector)(it),a=Vo(t?.coinId);return(0,on.useMemoizedFn)(async({to:s,from:u,amount:l,balance:c,baseCoinBalance:f,transferAmountType:v})=>{try{let p=l,h=yt(t),m=await r({value:"0",toAddr:s,address:u,fromAddr:u,coinId:t?.coinId}),{accountId:i,nonce:C}=m||{},A=await a({to:s,chainId:t?.chainId,contractAddress:t?.address})||o||{},{networkFeeInt:w}=A;v===de.ALL&&h&&e!==X.ONE_TO_MANY&&(p=H.sub(c,w));let F={to:s,from:u,type:"transfer",fees:w,amounts:p,decimals:t?.decimals,nonce:parseInt(C,10),accountId:parseInt(i,10),tokenSymbol:t?.originSymbol,tokenId:parseInt(t?.tokenId,10)};if(!Gr({isBaseCoin:h,balance:c,baseCoinBalance:f,txAmount:p,networkFee:w}))return{to:s,from:u,txStatus:te?.FAILED};let k=await No(F,u,se);if(k?.code)return{to:s,from:u,txStatus:te?.FAILED};let{signature:P,tx:L}=k,{txHash:I,...j}=L||{};return await n(JSON.stringify({signature:P,tx:j}),{txHash:I,signedTx:k,toAdr:L?.to,fromAdr:u,coinAmount:p,serviceCharge:L?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:s,from:u,txHash:I,txAmount:p,startTime:Date.now(),txStatus:te?.PENDING}}catch{return{to:s,from:u,txStatus:te?.FAILED}}})},um=()=>{let[t]=le(),[e]=ut(),r=ll(),n=Yr({localType:Ee,coinId:t?.coinId}),o=Uo(),a=ka();return(0,on.useMemoizedFn)(async({to:s,from:u,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p})=>{try{let h=l,m=t?.baseCoinId===0,{tyArg:i,chainId:C,networkFee:E,sequenceNumber:A,maxGasAmount:w,gasUnitPrice:F,expirationTimestampSecs:S}=await o({address:u,coinId:t?.coinId});if(p===de.ALL&&m&&e!==X.ONE_TO_MANY&&(h=H.sub(c,E)),p===de.ALL&&m&&e===X.ONE_TO_MANY&&(h=H.sub(f,E)),!Gr({isBaseCoin:m,balance:c,baseCoinBalance:v,txAmount:h,networkFee:E}))return{to:s,from:u,txStatus:te?.FAILED};let P=await r({to:s,from:u,tyArg:i,chainId:C,gasUnitPrice:F,maxGasAmount:w,sequenceNumber:A,amount:h,coinId:t?.coinId,expirationTimestampSecs:S,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),L=await zn(Ee,P);return await n(P,{txHash:L,signedTx:P,toAdr:s,fromAdr:u,coinAmount:h,serviceCharge:E,walletId:void 0,extJson:JSON.stringify({nonce:A})}),e===X.ONE_TO_MANY?(await a(L),{to:s,from:u,txHash:L,txAmount:h,txStatus:te?.SUCCEED}):{to:s,from:u,txHash:L,txAmount:h,startTime:Date.now(),txStatus:te?.PENDING}}catch{return{to:s,from:u,txStatus:te?.FAILED}}})};function im(){let[t]=le(),[e]=ut(),r=Ko(),n=hn({localType:ve}),o=Yr({coinId:t?.coinId,localType:ve}),a=ka();return(0,on.useMemoizedFn)(async({to:s,from:u,amount:l,balance:c,usedBalance:f,baseCoinBalance:v,transferAmountType:p,memo:h,isLast:m})=>{try{let i=t?.baseCoinId===0,C;(e===X.MANY_TO_MANY||e===X.MANY_TO_ONE||e===X.ONE_TO_MANY&&m)&&p===de.ALL?C=yr.CARRY_ALL_REMAINING_BALANCE:C=yr.PAY_GAS_SEPARATELY+yr.IGNORE_ERRORS;let{signInfo:E,gasLimitInfo:A,bodyParams:w,networkFeeInt:F}=await r({baseCoinId:t.baseCoinId,coinId:t.coinId,chainId:t.chainId,from:u,to:s,tokenAddress:t.address,decimals:t.decimals,amount:l,sendMode:C,memo:h}),S=l,k;p===de.ALL&&i&&e!==X.ONE_TO_MANY&&(S=H.sub(c,F)),p===de.ALL&&i&&e===X.ONE_TO_MANY&&(S=H.sub(f,F),m&&(k="0"));let{minTonLimit:P}=E||{},L=w;if(i?L={...L,amount:S}:(L={...L,messageAttachedTons:P,invokeNotificationFee:A?.invokeNotificationFee},E?.customPayload&&(L={...L,customPayload:E?.customPayload,stateInit:E?.stateInit})),!Gr({isBaseCoin:i,balance:c,baseCoinBalance:v,txAmount:S,networkFee:F}))return{to:s,from:u,txStatus:te?.FAILED};let K=(await n({params:L,fromAddr:u}))?.boc,R=await zn(ve,K);return await o(K,{coinAmount:k||S,fromAdr:u,toAdr:s,serviceCharge:F,txHash:R,extJson:JSON.stringify({nonce:L.seqno,isClaim:!!L.customPayload}),accountId:void 0,memo:L.memo}),e===X.ONE_TO_MANY?(await a(R),{to:s,from:u,txHash:R,txAmount:S,txStatus:te?.SUCCEED}):{to:s,from:u,txHash:R,txAmount:S,startTime:Date.now(),txStatus:te?.PENDING}}catch{return{to:s,from:u,txStatus:te?.FAILED}}})}g();D();g();D();var cr={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},mo=class{constructor(e){Wt(this,"status",cr.uninitialized);Wt(this,"nextInfo",null);Wt(this,"cb",null);Wt(this,"args",[]);Wt(this,"next",(...e)=>{[cr.waiting,cr.canceled,cr.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=cr.waiting,this.nextInfo.execute())});Wt(this,"execute",()=>{this.status=cr.working,this.cb?.(this.next)});Wt(this,"cancel",()=>{this.status=cr.canceled,this.nextInfo?.cancel?.(),this.cb=void 0});Wt(this,"pause",()=>{this.status=cr.paused,this.nextInfo?.pause?.()});Wt(this,"start",(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()});Wt(this,"continue",()=>{this.status=cr.initialized,this.next()});this.generator=e,this.status=cr.initialized,this.nextInfo=null,this.cb=null}};function F0(t){let e=(r,n)=>{let o;return{execute:()=>{o=setTimeout(r,n??t??0)},cancel:()=>{clearTimeout(o)},pause:()=>{clearTimeout(o)}}};return new mo(e)}var Mt=F0;var cm=()=>{let[t]=ct(),[e]=lt(),[r,n]=we(),o=um();return(0,lm.useMemoizedFn)(async()=>{let a=0,{type:s,min:u,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:i}=v;return{to:p,from:h,interval:s===Ye.NONE?100:wt(u,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:i}}),f=Mt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:te.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:i,startTime:C,txAmount:E}=await p.request();n({from:i,startTime:C,to:p?.to,txStatus:h,txAmount:E,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var fm=_(Dt()),dm=_(Ae());var mm=()=>{let[t]=ct(),[e]=lt(),[r,n]=we(),o=nm(),a=(0,fm.useSelector)(it),s=a?.level===Je.CUSTOM;return(0,dm.useMemoizedFn)(async()=>{let u=0,{type:l,min:c,max:f}=t,v=r.map(h=>{let{to:m,from:i,txAmount:C,id:E}=h;return{to:m,from:i,interval:l===Ye.NONE?100:wt(c,f,0)*1e3,request:async()=>o({...h,from:i,value:C,transferAmountType:e.type,gasPrice:s?a:{}}),id:E}}),p=Mt();return p.start(async h=>{let m=v[u];if(m)try{n({to:m?.to,from:m?.from,txStatus:te.PENDING,id:m?.id});let{txStatus:i,txHash:C,from:E,txAmount:A}=await m.request();n({from:E,to:m?.to,txStatus:i,txHash:C,txAmount:A,id:m?.id})}catch(i){console.log(i)}finally{u++,h(m.interval)}}),p},[])};g();D();var pm=_(Ae());var hm=()=>{let[t]=ct(),[e]=lt(),[r,n]=we(),o=om();return(0,pm.useMemoizedFn)(async()=>{let a=0,{type:s,min:u,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:i}=v;return{to:p,from:h,interval:s===Ye.NONE?100:wt(u,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:i}}),f=Mt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:te.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:i,startTime:C,txAmount:E}=await p.request();n({from:i,startTime:C,to:p?.to,txStatus:h,txAmount:E,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var vm=_(Ae());var gm=()=>{let[t]=ct(),[e]=lt(),[r,n]=we(),o=am();return(0,vm.useMemoizedFn)(async()=>{let a=0,{type:s,min:u,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:i}=v;return{to:p,from:h,interval:s===Ye.NONE?100:wt(u,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:i}}),f=Mt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:te.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:i,startTime:C,txAmount:E}=await p.request();n({from:i,startTime:C,to:p?.to,txStatus:h,txAmount:E,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};g();D();var Dm=_(Q()),Cm=_(Ae());function Em(){let[t]=ut(),[e]=ct(),[r]=lt(),[n,o]=we(),a=im(),s=(0,Dm.useRef)(-1);return(0,Cm.useMemoizedFn)(async()=>{let u=0,{type:l,min:c,max:f}=e,v=n.map((h,m)=>{let{to:i,from:C,txAmount:E,id:A}=h;return{to:i,from:C,interval:l===Ye.NONE?100:wt(c,f,0)*1e3,request:async()=>a({...h,amount:E,transferAmountType:r.type,isLast:m===n.length-1}),id:A}}),p=Mt();return p.start(async h=>{let m=v[u];if(m){if(t===X.ONE_TO_MANY&&s.current===u)return;s.current=u;try{o({to:m?.to,from:m?.from,txStatus:te.PENDING,id:m?.id});let{txStatus:i,txHash:C,from:E,startTime:A,txAmount:w}=await m.request();o({from:E,startTime:A,to:m?.to,txStatus:i,txAmount:w,txHash:C,id:m?.id})}catch(i){console.log(i)}finally{s.current=-1,u++,h(m.interval)}}}),p},[])}g();D();var Am=_(Ae());var Bm=()=>{let[t]=ct(),[e]=lt(),[r,n]=we(),o=sm();return(0,Am.useMemoizedFn)(async()=>{let a=0,{type:s,min:u,max:l}=t,c=r.map(v=>{let{to:p,from:h,txAmount:m,id:i}=v;return{to:p,from:h,interval:s===Ye.NONE?100:wt(u,l,0)*1e3,request:async()=>o({...v,amount:m,transferAmountType:e.type}),id:i}}),f=Mt();return f.start(async v=>{let p=c[a];if(p)try{n({to:p?.to,from:p?.from,txStatus:te.PENDING,id:p?.id});let{txStatus:h,txHash:m,from:i,startTime:C,txAmount:E}=await p.request();n({from:i,startTime:C,to:p?.to,txStatus:h,txAmount:E,txHash:m,id:p?.id})}catch(h){console.log(h)}finally{a++,v(p.interval)}}),f},[])};var ym=t=>{let[e]=le(),r=(0,wm.useHistory)(),n=(0,xm.useDispatch)(),o=ol(),a=(0,an.useRef)(),[s,u]=(0,an.useState)(oe.SENDING),l=il(),c=mm(s,e?.localType),f=hm(s,e?.localType),v=gm(),p=Bm(),h=cm(),m=Em(),i=c;e?.localType===Ce?i=f:e?.localType===ke?i=v:e?.localType===se?i=p:e?.localType===Ee?i=h:e?.localType===ve&&(i=m),(0,an.useEffect)(()=>{let A=!t.some(({txStatus:F})=>F!==te.FAILED),w=!t.some(({txStatus:F})=>F===te.PENDING||!F);A?u(oe.FAILED):w&&u(oe.FINISHED)},[t]);let C=()=>{i().then(A=>{a.current=A}).catch(A=>{console.log(A)})};(0,an.useEffect)(()=>{C()},[]);let E=(0,Fm.useMemoizedFn)(async A=>{A===oe.DONE?o():A===oe.PAUSE?(a.current?.pause(),u(oe.PAUSE)):A===oe.CANCELED?(a.current?.cancel(),u(oe.FINISHED)):A===oe.SENDING?(a.current?.continue(),u(oe.SENDING)):A===oe.FINISHED?u(oe.FINISHED):A===oe.FAILED?(a.current?.cancel(),l(),u(oe.SENDING),C()):A===oe.BACK_TO_HOME&&(r.replace(Hr),n(di()))},[]);return[s,E]};g();D();var su=_(Q()),_m=_(Ae());st();he();g();D();var Tm=_(Hi()),y0=(t,e)=>{let r=window.URL||window.webkitURL||window,n=r.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,o.click(),r.revokeObjectURL(n)},T0=(t=[],e="result.csv",r)=>{let n=Tm.default.unparse(t,r),o="\uFEFF",a=new Blob([`${o}${n}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});y0(a,e)},Sm=T0;je();function S0(t=[]){let[e]=le(),r=(0,su.useMemo)(()=>{let s=[...Pa];return e?.localType===ve&&s.splice(2,0,La),s},[e?.localType]),n=(0,su.useMemo)(()=>r.map(({key:s})=>s),[]),o=(0,_m.useMemoizedFn)(s=>{let u=T("wallet_extension_multisender_colbody_success"),l=T("wallet_extension_multisender_colbody_fail");switch(s){case te.SUCCEED:return u;case te.FAILED:case te.DROPPED:return l;default:return"-"}});return()=>{let s=`${T("wallet_extension_multisender_colheader_history")}.csv`,u=t.map(f=>{let v={...f,txAmount:H.thousandFormat(f.txAmount??0),txStatus:o(f.txStatus),memo:f.memo||""};return Object.values(Du(v,n))}),c={fields:r.map(f=>T(f.title)),data:u};Sm(c,s)}}var bm=S0;var _0={ERROR:te.FAILED,SUCCESS:te.SUCCEED},b0=()=>{let t=(0,nt.useRef)(),e=(0,nt.useRef)(),[r]=le(),[n=[],o]=we(),{dataSource:a,columns:s}=qd(),{isSm:u}=Ve(),[l,c]=ym(a),f=bm(a),v=$d({sendStatus:l,sendAddress:a}),p=Ea(),h=xa(),m=(0,nt.useMemo)(()=>Sn(du(n,({txStatus:C,txHash:E})=>E&&C===te.PENDING),"txHash"),[n]),i=async()=>{let{data:C}=await Xt(Jt.batchGetTxStatus,{txHashList:e.current});C&&Object.keys(C).forEach(E=>{let A=C[E];["SUCCESS","ERROR"].includes(A)&&o({txHash:E,txStatus:_0[A]})})};return(0,nt.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&i()},2e3),()=>{clearInterval(t.current)}),[]),(0,nt.useEffect)(()=>{[Ee,Ce,ke,se,ve].includes(r?.localType)&&(e.current=m)},[r?.localType,m]),(0,nt.useEffect)(()=>{(l===oe.FINISHED||l===oe.FAILED)&&Lu(h())},[l]),nt.default.createElement(Sr,{footer:nt.default.createElement(Wd,{sendStatus:l,onSendStatusChange:c,onExport:f}),useOkg:!1,headerProps:{className:(0,Nm.default)(He.header,He.content)}},nt.default.createElement(y.Box,{className:He.root},nt.default.createElement(Yd,{sendStatus:l}),nt.default.createElement(Hd,{sendStatus:l,sendResult:v}),nt.default.createElement(Aa,{className:He.statistics,statistics:p})),nt.default.createElement(y.Box,{className:He.address},nt.default.createElement(Ba,{dataSource:a,columns:s,scroll:{x:u}})))},Om=nt.default.memo(b0);var jL=()=>{let[t]=le(),e=(0,Ma.useDispatch)(),r=Cl(),n=(0,Ma.useSelector)(it);return(0,Rr.useEffect)(()=>{if(![Ee,Ce,ke,se,ve].includes(t?.localType)&&r?.length&&n?.level){let{gasLimit:o,tokenPrice:a,usdToThisRate:s}=n,u=r.find(({level:l})=>l===n?.level);if(u){let{gasPrice:l}=u,{networkFee:c,networkFeeInt:f,networkFeeMarket:v}=tr({gasPrice:l,gasLimit:o,price:a,usdToThisRate:s});e(Ft({...n,...u,networkFee:c,networkFeeInt:f,networkFeeMarket:v,unitPriceDisplay:Su(l)}))}}},[e,r,t?.localType]),Rr.default.createElement(sn.Switch,null,Rr.default.createElement(sn.Route,{path:Hr,component:Md,exact:!0}),Rr.default.createElement(sn.Route,{path:Ln,component:Yf,exact:!0}),Rr.default.createElement(sn.Route,{path:kn,component:Fd,exact:!0}),Rr.default.createElement(sn.Route,{path:Mn,component:Om,exact:!0}))};export{jL as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=BatchTransfer-EBF2NL65.js.map
