import{a as Cs,b as ys,l as Es}from"./chunk-LE4YORYM.js";import{a as xs,b as hs}from"./chunk-6L7MO5V7.js";import{a as Ee,b as Ae,c as uo,d as Xn,e as jn,f as Jn,g as Rn,i as wt}from"./chunk-VUKLCWMB.js";import{a as Qn}from"./chunk-7K7KPFPU.js";import{d as y}from"./chunk-PDO3D532.js";import"./chunk-YNDUHMHI.js";import{a as fo,b as Oo,c as Lo,d as St,e as fs,f as _s,g as Ts,h as gs}from"./chunk-2PFUDPEL.js";import{a as es,b as At,c as is,d as as,e as ms,f as ls,i as cs,j as ps,k as ds,n as us}from"./chunk-5YK5XB6Y.js";import{a as N,b,c as $e,d as os,e as ts,f as Pe,g as rs,h as Pt,i as ns,k as ss}from"./chunk-2AM235ZQ.js";import"./chunk-ITES77TJ.js";import"./chunk-VOXYDIZC.js";import{a as we}from"./chunk-V4WIOWAX.js";import{a as Ga}from"./chunk-YFIMSZQS.js";import"./chunk-AJOCLBXF.js";import{a as qn}from"./chunk-2UR4VSKY.js";import"./chunk-4G27AIO2.js";import{a as Un,b as Hn,c as Wn,d as zn,e as Kn,f as Zn}from"./chunk-YBLVS2JZ.js";import{a as Gn}from"./chunk-7SVEA7IT.js";import{a as Mn}from"./chunk-IS3W5LUX.js";import"./chunk-KGQRYI2T.js";import"./chunk-BX423ZLZ.js";import{a as Yn}from"./chunk-N5S5QTWQ.js";import"./chunk-HGH3KFHX.js";import"./chunk-IWG35R5Y.js";import"./chunk-POZULQ6W.js";import"./chunk-5HI5GQGI.js";import"./chunk-FNW4DT3E.js";import"./chunk-F2JTGB57.js";import"./chunk-COAFX7AN.js";import"./chunk-WQC3OIFR.js";import{b as $n}from"./chunk-I5LO3JZA.js";import"./chunk-GHKJNUVY.js";import"./chunk-N5KXYLI6.js";import{a as Bn}from"./chunk-CUTSXOOS.js";import"./chunk-37XSQI5O.js";import"./chunk-CLAWFLRW.js";import{a as Ln}from"./chunk-DIVFRUSZ.js";import"./chunk-PEC3MSS4.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import{a as Nn,d as wn}from"./chunk-GGC2CY5E.js";import"./chunk-JKSK4TNM.js";import"./chunk-UTSCFP3M.js";import"./chunk-VPEGTYK6.js";import{a as fr}from"./chunk-HYFMV74Y.js";import{a as An}from"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import{a as Do,b as Dn,d as Tr}from"./chunk-NFPXRZGF.js";import{a as Sn}from"./chunk-7P3TAB2X.js";import"./chunk-F2DBKTIG.js";import{a as Pn,c as _r}from"./chunk-2AZAHALD.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import{f as co}from"./chunk-B2JJAXTZ.js";import{f as ur}from"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import{b as bn}from"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import"./chunk-QHPYMFK2.js";import"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import{a as se}from"./chunk-2P7I7CKT.js";import{a as Vn}from"./chunk-T53OIOY2.js";import"./chunk-TLRNMD3C.js";import"./chunk-TQS4TSWH.js";import{a as Nt,b as Fn}from"./chunk-24AOYM6E.js";import"./chunk-BWH5KOIX.js";import"./chunk-6LLKXSCU.js";import"./chunk-EN4DK4ZN.js";import{a as bt}from"./chunk-IVW4C2AK.js";import"./chunk-7XOHQAJS.js";import"./chunk-UNBGCT5E.js";import"./chunk-FOZHYRP7.js";import{a as On}from"./chunk-ELJZY4AU.js";import{b as po}from"./chunk-4L5OPDYI.js";import"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import{a as vn}from"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-PJAFZEEL.js";import"./chunk-3OCLT7XJ.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import"./chunk-YTZNCB6W.js";import"./chunk-IZDAKZMI.js";import{c as Ha}from"./chunk-7HMKI4ZN.js";import{a as Oa,c as mo,d as ne,e as Po,f as gn}from"./chunk-FPOQ42OX.js";import{b as j,c as Ce,d as ht,e as ao,f as sn,g as Ct,h as an,i as mr,j as wo,k as yt,l as Ao,m as lr,n as mn,o as ln,p as cn,q as pn,r as dn,s as un,t as cr,u as fn,v as _n,y as Tn,z as Et}from"./chunk-42UMOS57.js";import"./chunk-WAEF6YGC.js";import"./chunk-J2TPGTMF.js";import{b as xt}from"./chunk-FK74IDTO.js";import"./chunk-KABAXRU7.js";import"./chunk-UW2D7AS7.js";import"./chunk-Z3UC5W2F.js";import"./chunk-ICS7QRDT.js";import{b as xn}from"./chunk-GGZ73X5S.js";import"./chunk-IEUJSLGG.js";import"./chunk-QIV5EJPL.js";import"./chunk-4HIOE2KZ.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import{d as pr}from"./chunk-4X3SKD2N.js";import{c as en,f as on,g as tn,m as vt,o as de,p as w,q as hn,s as Cn,u as yn,v as En,w as In}from"./chunk-GCAD5G3O.js";import{a as D}from"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import{b as pe}from"./chunk-OGS4HURJ.js";import"./chunk-WEQ53GNQ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import{$ as Wr,O as Gr,na as Vr}from"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import{a as kn}from"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import{d as io}from"./chunk-ZZLPMRQY.js";import{a as dr,h as kt}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import"./chunk-AKJZXDVD.js";import"./chunk-E75DNWM4.js";import{a as V}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as Ne}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{$ as qr,Aa as ce,Ba as dt,Ca as ut,Da as ft,Ea as _t,Fa as Tt,Ga as no,Ha as gt,Q as Yr,R as Kr,T as Zr,a as q,ab as Xr,i as $r,xa as Qr,ya as pt,za as ro}from"./chunk-WSXZYUQ4.js";import{b as It}from"./chunk-JRZXGORL.js";import{m as lo,q as ye}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import{f as so}from"./chunk-DZHQUYHS.js";import{o as J}from"./chunk-AUURQ3HI.js";import{Db as Jr,Eb as Rr,cc as A,m as G,zb as jr}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as W}from"./chunk-VLKJDIZ5.js";import{a as Da}from"./chunk-N4B7HQY5.js";import{d as zr,f as Ua}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{a as ae,b as nn}from"./chunk-XRF6BZHR.js";import{e as rn}from"./chunk-OWU5GWTN.js";import{a as Fa,i as No,q as to}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as So}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{Ib as $,Lb as vo,Nb as at,Nc as ar,Ob as mt,Pb as Ve,Qb as bo,Rb as eo,W as Br,Wb as ze,Xb as ie,_a as Sa,_c as Ma,ac as lt,hc as te,kc as Fr,m as Lr,qc as La,z as Pa}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{A as he,D as H,G as oo,H as Hr,c as Mr,o as ct,q as S,y as Ur}from"./chunk-E44TZGUB.js";import{J as Sr,K as it,f as wr,ka as Dr,oa as Je,r as Ar,y as Pr}from"./chunk-KBQXBPIW.js";import{O as v,e as Re,l as M,n as Or,w as l}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as re,T as F,Z as ir,ca as O}from"./chunk-W7JONHX2.js";import{a as Ba}from"./chunk-O3LHCDGR.js";import{a as _}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-TKZ7N5JX.js";import"./chunk-CWRZ2WAJ.js";import"./chunk-OMIXKWD3.js";import"./chunk-PBODVK5S.js";import"./chunk-OENPHC74.js";import"./chunk-KHHBU7RQ.js";import"./chunk-TNAXYRKK.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as a,h as sr,o as n,q as s}from"./chunk-FJHLV356.js";n();s();var ot=a(_()),Aa=a(A()),Eo=a(W());n();s();var Z=a(_()),ee=a(W());n();s();var k=a(_()),Fo=a(A()),Ms=a(W()),Us=a(Ha()),Hs=a(J());v();La();Pa();n();s();var me=a(_()),Is=a(W()),ks=a(re()),vs=a(dr());v();n();s();var Bo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var Wa=190,bs=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>Wa,[e.length,o]),{paddingBottom:i,buttonPaddingBottom:m,absoluteBottom:c}=$n({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:Bo.wrapper},me.default.createElement("div",{style:{paddingBottom:i}},me.default.createElement(pr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(pr.Coin,{name:p?.name,symbol:p?.symbol,to:`${no}?${vs.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?Bo.showButton:""} ${Bo.button}`,style:{bottom:c,paddingBottom:m}},me.default.createElement(Is.Link,{to:ft},me.default.createElement(O,{circle:!0,type:O.TYPE.primary,category:O.CATEGORY.outline},me.default.createElement(F,{className:(0,ks.default)("okx-wallet-plugin-edit-wallet",Bo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();s();var Se=a(_()),ws=a(W()),As=a(dr());n();s();var Ns=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Ps=()=>{let{isNotBackupWallet:e}=bt(),t=Nt(),o=(0,ws.useHistory)(),r=de(),{extensionConfig:i}=D("rpc_info"),m=(0,Se.useMemo)(()=>r.filter(({balance:I})=>!!Number(I)),[r]),c=(0,Se.useCallback)(()=>{m.length===1?o.push(`${ce}?${As.default.stringify({address:m[0]?.address})}`):o.push(ut)},[m]),p=(0,Se.useCallback)(()=>{e?t():o.push(ro)},[e]),d=()=>{o.push(Tt)},f=(0,Se.useCallback)(()=>{i.faucetUrl&&globalThis.open(i.faucetUrl)},[i.faucetUrl]),{hasNewFeature:T}=Vn(),g=()=>{Gr({button_name:"more",site:""})},x=()=>{o.push($r)},h=(0,Se.useCallback)(I=>{switch(I.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":x();break;case"MORE":g();break;default:break}},[x,f,d,p,c]),E=(0,Se.useMemo)(()=>Ns.map(I=>I.type==="FAUCET"?{...I,disabled:!i?.faucetUrl}:I.type==="MORE"?{...I,hasNewFeature:T}:I),[T,i]);return{clickHandle:h,iconOptions:E}};n();s();var Dt=a(_()),Ds=a(A()),Os=a(W()),Ls=a(J());v();n();s();var Ya=a(_()),Ka=a(A());n();s();var za=a(_()),$a=a(re());var Ss="SHOW-SWITCH";var Bs=()=>{let e=se(),t=(0,Os.useHistory)(),o=de(),{extensionConfig:r}=D("rpc_info"),i=pe(),[m,c]=Dt.default.useState(!0),{isNotBackupWallet:p}=bt(),d=(0,Ds.useSelector)(jr);(0,Ls.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Or.listen(Ss,()=>{c(!0)}))});let f=(0,Dt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:i,isNotBackupWallet:p,switchVisible:m}};n();s();var Fs={wrapper:"_wrapper_11hdl_1"};var Za=({history:e,unapprovedTxCount:t,isNotBackupWallet:o,unapprovedRequestCount:r,unapprovedPermissionsRequestId:i,triggerShowBackupWalletDialog:m})=>{o&&r!==0?m({text:l("wallet_dapp_conncetion_alert_backup_wallet")},i):t>0?e.push(Zr):r>0&&e.push(Yr)},qa=({history:e,isRpcMode:t})=>{t||e.replace(q)},Qa=({walletAccount:e})=>{let{walletId:t}=e||{};return t},Gs=()=>{let e=(0,Ms.useHistory)(),t=Nt(),o=(0,Fo.useDispatch)(),{rpcInfo:r,chainTokens:i,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Bs(),d=kt(),f=(0,k.useRef)(null),[T,g]=(0,k.useState)(0),[x,h]=(0,k.useState)(0),E=(0,k.useRef)(null),{unapprovedRequestCount:I,unapprovedTxCount:xe,unapprovedPermissionsRequestId:Q}=us(),z=Un();(0,k.useEffect)(()=>{Za({history:e,unapprovedTxCount:xe,isNotBackupWallet:m,unapprovedRequestCount:I,unapprovedPermissionsRequestId:Q,triggerShowBackupWalletDialog:t})},[m,I]);let Ge=(0,Fo.useSelector)(Jr);(0,k.useEffect)(()=>{(async()=>{I===0&&!Ge&&await o(xn())})()},[I]);let{isRpcMode:oe}=(0,Fo.useSelector)(io);(0,k.useEffect)(()=>{qa({history:e,isRpcMode:oe})},[oe]);let Io=Fr()===Lr;(0,k.useEffect)(()=>{Ge&&Io&&globalThis.platform.openExtensionInPopup(pt)},[]);let We=lo(c.balance),{clickHandle:or,iconOptions:tr}=Ps(),{isNeedShowDisconnectUpgrade:Xe,setDisconnectUpgrade:tt}=Mn(),U=(0,k.useCallback)(()=>{Xe&&(oo.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),tt())},[Xe,tt]),[rr,je]=(0,k.useState)(po.init),nr=Yn(),{run:rt}=(0,Hs.useDebounceFn)(()=>{h(E.current?.scrollTop||0)},{wait:50,maxWait:50}),nt=()=>{!r.rpcUrl||(je(po.loading),xs(r.rpcUrl).then(()=>{console.log("rpc success"),je(po.success)}).catch(()=>{console.log("rpc failed"),je(po.failed)}))};(0,k.useEffect)(()=>{nt()},[r]),(0,k.useLayoutEffect)(()=>{f.current&&m&&g(f.current?.clientHeight||0)},[m]);let st=Qa({walletAccount:d}),{chainId:ko,symbol:X}=r;return(0,k.useEffect)(()=>{c?.balance&&ko&&Wr({wallet_id:st,main_coin_number_by_networks:[{chain_id:(0,Us.hexToDecimalString)(ko),main_token_symbol:X,main_token_amount:c?.balance}]})},[st,c?.balance,ko,X]),k.default.createElement("div",{className:Fs.wrapper,ref:E,onScroll:()=>{rt()}},k.default.createElement("div",null,k.default.createElement(Kn,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:G(p),address:p,chainName:r?.name}),k.default.createElement(Wn,{balance:We,symbol:c.symbol}),k.default.createElement(zn,{clickHandle:or,iconOptions:tr}),k.default.createElement(bs,{dataSource:i,scrollTop:x,backupHeight:m?T+24:0})),k.default.createElement(Hn,{disconnectCallback:U}),k.default.createElement("div",{ref:f},k.default.createElement(Fn,{offsetBottom:24})),k.default.createElement(Zn,{showBackup:()=>{}}),k.default.createElement(hs,{visible:rr===po.failed,onRetry:nt,onChangeNet:()=>{e.push(`${Kr}?tab=${nr?.networkType??"1"}`)}}),z&&k.default.createElement(Gn,{actionMap:{["RECOVER"]:()=>{e.push(`${Xr}?action=${vn.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${qr}?fromHome=1`)}}}))};n();s();var Zs=a(_());n();s();var Mo=a(_()),Ws=a(A()),Ot=a(J());Je();var Vs=a(Oa());te();var gr=class extends Vs.default{constructor(){super();sr(this,"DROPPED_BUFFER_COUNT",3);sr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,i){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:x}=T;p={id:g,transactionReceipt:x}}}}),p?r(p,o.id):c===m.length&&i(o.id)}async checkOnePendingTx(o){let{id:r,txHash:i}=o;if(!i||o.status===N.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.web3.eth.getTransactionReceipt(i);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&eo(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:i,txParams:{nonce:m,from:c}}=o,p=`${r}-${i}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if(it(d)||bo(ae(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function zs(){let e=vt(),t=is(),o=(0,Ws.useSelector)(xt),r=(0,Ot.useLatest)(pe()),i=(0,Ot.useLatest)(Pe()),m=(0,Ot.useLatest)(os()),c=(0,Mo.useRef)(!1),p=(0,Mo.useRef)(new gr),d=async(g,x,h)=>{let E=await es({txId:g,replaceTxId:x,tx:h});t(E)},f=g=>{d(g,null,{status:N.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:x},h)=>{let E={blockNumber:x.blockNumber,gasUsed:x.gasUsed,finishTime:+new Date,extraParams:{contractAddress:x.contractAddress}};x.status?E.status=N.SUCCEED:E.status=N.FAILED,d(h,g,E)};(0,Mo.useEffect)(()=>{(async()=>{if(!(i.current.length===0||c.current)){c.current=!0;try{let x=await e();p.current.setWeb3(x),p.current.setConfirmedTxs(m.current);let h=null;try{h=await x.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(i.current.map(E=>h!==null&&bo(ae(E.txParams.nonce),h)?null:p.current.checkPendingTx(E,T,f)))}finally{c.current=!1}}})()},[o,e])}n();s();Je();var _o=a(_()),Lt=a(A()),$s=a(J()),Ys=a(Da());var Xa=3*60*1e3,ja={mainTokens:[],chainTokens:[]},Ks=()=>{let e=(0,Lt.useDispatch)(),t=(0,_o.useRef)(null),o=Cn(),r=(0,_o.useRef)(ja),i=En(),{isRpcMode:m}=(0,Lt.useSelector)(io);(0,_o.useEffect)(()=>{let{chainId:d,chainTokens:f}=i,T=Pr(Dr(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[i]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:x})=>{e(tn({chainId:d,address:x,price:g}))})}catch(d){Ys.default.debug(`fetch coin price failed 
${d}`)}};(0,$s.useMount)(()=>{p()}),(0,_o.useEffect)(()=>(m?t.current=setInterval(()=>{p()},Xa):c(),()=>{c()}),[m])};var Ja=()=>(qn(),_s(),Ks(),zs(),gs(),null),qs=(0,Zs.memo)(Ja);n();s();var Bt=a(_()),Qs=a(W());var Ra=()=>{let e=(0,Qs.useHistory)(),t=se(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:i}=D("rpc_info"),m=w(r),c=pe(),p=`ethereum:${c}`;return Bt.default.createElement(bn,{navigator:{bordered:!1,onClose:o?()=>{e.push(q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:i?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},Xs=(0,Bt.memo)(Ra);n();s();var fe=a(_()),ci=a(A()),pi=a(J());n();s();var Ye=a(_()),Uo=a(A());v();function em(){let e=(0,Uo.useDispatch)(),t=(0,Uo.useSelector)(Ce),o=(0,Uo.useSelector)(ht),r=(0,Ye.useRef)(null),i=c=>{let{value:p}=c.target,d=null;p?p&&!co(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(cn(p)),e(pn(d))};(0,Ye.useLayoutEffect)(()=>{r.current.focus()},[]);let m=l("wallet_extension_transaction_placeholder_input_address");return Ye.default.createElement(we.Row,null,Ye.default.createElement(S.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:m,size:S.SIZE.xl,autoResize:!0,errorType:S.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:i}))}var js=em;n();s();var ue=a(_()),De=a(A()),Mt=a(J());v();te();n();s();var Ft={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function om(){let e=(0,De.useDispatch)(),t=(0,De.useSelector)(j),o=w(),r=w(t),i=o?.balance,m=Oo(),c=!t,{run:p,cancel:d}=(0,Mt.useThrottleFn)(f=>{let T=null,g=vo(i,m);at(g,0)?T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}:Ve(f,c?g:r?.balance)&&(T={key:"wallet_transfer_errortip_insufficient_balance"}),e(un(T))},{wait:100});return(0,Mt.useUnmount)(d),p}function tm(){let e=(0,De.useDispatch)(),t=w(),o=(0,De.useSelector)(j),r=(0,De.useSelector)(ao),i=(0,De.useSelector)(Ct),m=w(o),c=m?.balance,p=fo(c,{symbol:m?.symbol,decimals:m?.decimals}),d=om(),f=Oo(),T=(0,ue.useRef)(!!r),g=h=>{T.current=!0,e(dn(h))},x=()=>{if(o)g(c);else{let h=vo(c,f);g(mt(h,0)?"0":h)}};return(0,ue.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),ue.default.createElement(we.Row,null,ue.default.createElement(S.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:S.SIZE.xl,enableMinus:!1,precision:m?.decimals,value:r,error:i&&l(i.key,i.args),errorType:S.TIP_TYPE.always,onChange:g,action:ue.default.createElement(ye.Text,{size:ye.SIZE.xs,type:ye.TYPE.secondary,className:Ft["balance-wrap"],onClick:x},`${l("wallet_extension_send_text_balance")}:`,ue.default.createElement(ye.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Ft.balance},p)),suffix:ue.default.createElement(ye.Text,{className:Ft["max-button"],onClick:x},l("wallet_extension_send_text_max"))}))}var Js=tm;n();s();var Rs=a(_()),ei=a(W());v();var Ho=a(A());function rm(){let e=(0,Ho.useSelector)(Ce),t=(0,Ho.useSelector)(ht),o=(0,Ho.useSelector)(Ct);return!e||!!t||!!o}function nm({loading:e}){let t=(0,ei.useHistory)(),o=(0,Ho.useSelector)(j),r=rm(),i=()=>{let m=dt;o&&(m+=`?address=${o}`),t.push(m)};return Rs.default.createElement(O,{category:O.CATEGORY.fill,type:O.TYPE.highlight,size:O.SIZE.lg,loading:e,block:!0,disabled:r,onClick:i},l("wallet_extension_send_btn_next"))}var oi=nm;n();s();var ti=a(_());var ri=a(W()),Go=a(A());var sm=()=>{let e=(0,ri.useHistory)(),t=(0,Go.useDispatch)(),r=se().get("showClose"),i=(0,Go.useSelector)(yt),m=(0,Go.useSelector)(j),c=w(m),p=()=>{setTimeout(()=>{t(Et())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(i||q)}:null;return ti.default.createElement(V,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},ni=sm;n();s();var Oe=a(_()),ke=a(A()),si=a(Fa());Je();v();te();n();s();function im(){let e=(0,ke.useDispatch)(),t=(0,ke.useSelector)(j),o=w(t),r=(0,ke.useSelector)(Ce),i=(0,ke.useSelector)(ao);(0,Oe.useEffect)(()=>{if(t&&co(r)&&o?.decimals){let m=!i||Sr(Number(i));e(cr(On(r,m?"0":(0,si.addHexPrefix)(nn($(i,10**o?.decimals))))))}},[t,o?.decimals,r,i])}function am(){let e=(0,ke.useDispatch)(),o=!(0,ke.useSelector)(j),r=(0,ke.useSelector)(an);return im(),o?Oe.default.createElement(we.Row,null,Oe.default.createElement(S,{title:Oe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Oe.default.createElement(he,{title:l("developer_mode_send_tooltip_additional_data"),placement:he.DIRECTION.topRight},Oe.default.createElement(F,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:S.TIP_TYPE.always,size:S.SIZE.xl,value:r,onChange:i=>{e(cr(i.target.value))}})):null}var ii=am;n();s();var To=a(_()),Wo=a(A()),ai=a(re());Je();v();te();n();s();function mm(){let e=(0,Wo.useDispatch)(),t=(0,Wo.useSelector)(wo),o=(0,Wo.useSelector)(Ao),r=p=>{e(fn(p))},i;t&&(Ve(t,o)?i=l("developer_mode_send_tooltip_higher",{num:o}):at(t,o)&&(i=l("developer_mode_send_tooltip_lower",{num:o})));let m=l("developer_mode_send_maintitle_nonce1"),c=`${it(o)?"":M.thousandFormat(o)}`;return To.default.createElement(we.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},To.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},To.default.createElement(S.Number,{innerClassName:(0,ai.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:S.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(o+1),!1):!0,onSub:()=>!t&&Ve(o,0)?(r(o-1),!1):!0,onChange:r})),i&&To.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},To.default.createElement(F,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),i))}var mi=mm;n();s();var li={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function lm(){let e=(0,ci.useDispatch)(),t=se(),{chainGasLimitLoading:o}=St(),{loadingNonce:r}=fs();return(0,pi.useMount)(()=>{e(ln(t.get("address")))}),fe.default.createElement(So.Container,null,fe.default.createElement(ni,null),fe.default.createElement(So.Box,{className:li["rpc-evm-send-edit__inner"]},fe.default.createElement(js,null),fe.default.createElement(Js,null),fe.default.createElement(ii,null),fe.default.createElement(mi,null)),fe.default.createElement(Ne.FooterActions,{usePortal:!0},fe.default.createElement(oi,{loading:o||r})))}var di=lm;n();s();var P=a(_()),L=a(A()),ui=a(W()),fi=a(J());Je();v();Sa();function cm(){let e=(0,L.useSelector)(lr),t=(0,L.useSelector)(j),o=!t,r=pe(),i=(0,L.useSelector)(Ce),m=(0,L.useSelector)(mr),c=(0,L.useSelector)(sn),p=(0,L.useSelector)(wo),d=(0,L.useSelector)(Ao),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?i:t,value:o?c:"0x0",data:m},[g,x]=cs(T),h=ps({data:T.data,type:g}),E=w(T.to),I=lo(h?.amount||0,{decimals:E?.decimals||6});return{txMeta:ds({tx:T,customGasInfo:e,nonce:p||d,txData:h,tokenInfo:E,chain:f,approvedAmount:I,formattedAmount:I,txType:g}),loadingTxData:x}}var pm=()=>{let e=(0,ui.useHistory)(),t=(0,L.useDispatch)(),o=(0,L.useSelector)(yt),r=(0,L.useSelector)(j),i=w(r),m=w(),c=(0,L.useSelector)(ao),p=kn(),d=kt(p),f=(0,L.useSelector)(Ce),T=Oo(),g=(0,L.useSelector)(wo),x=(0,L.useSelector)(Ao),h=(0,L.useSelector)(mr),{extensionConfig:E}=D("rpc_info"),I=as(),xe=Ln(p),[Q,z]=(0,P.useState)(!1),[Ge,oe]=(0,P.useState)(!1),{chainGasLoading:Io,chainGasLoadFailed:We,stopPollingGasPrice:or,chainGasLimitLoadFailed:tr}=St(),Xe=(0,L.useSelector)(lr),tt=(0,L.useSelector)(mn),{txMeta:U,loadingTxData:rr}=cm();(0,fi.useMount)(()=>{if(!f){let X=ce;r&&(X+=`?address=${r}`),e.replace(X)}});let je=(0,P.useMemo)(()=>[b.AUTHORIZATION,b.CANCEL_AUTHORIZATION].includes(U.type)?!1:U.type===b.TRANS_OUT?U.extraParams?.value:c,[c,U]),nr=(0,P.useMemo)(()=>U.type===b.TRANS_OUT?U.extraParams?.coinSymbol:[b.AUTHORIZATION,b.CANCEL_AUTHORIZATION].includes(U.type)?l($e[U.type],{symbol:U.extraParams?.coinSymbol}):l($e[U.type]),[U]),rt=()=>{setTimeout(()=>{t(Et())},200),e.push(o||q)},nt=X=>{t(Tn(X)),z(!1)},st=async()=>{try{oe(!0),await I(U,void 0,X=>{let Nr=en[d?.keyringIdentityType];Vr({tx_source:"transfer",from_addr:X?.txParams?.from,to_addr:f,main_token_symbol:E?.symbol,token_symbol:X?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:X?.txHash,wallet_type:Nr,chain_id:parseInt(E?.chainId,16)})}),rt()}catch(X){wr(X)}finally{oe(!1)}},ko=(0,P.useMemo)(()=>We?{type:Tr.TIP_TYPE.FEE_ERROR}:Xe?.baseFeePerGas==="0"?{type:Mr.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,[We,Xe?.baseFeePerGas]);return P.default.createElement(So.Container,null,P.default.createElement(V,{icon:U.type===b.TRANS_OUT&&{text:U.extraParams?.coinSymbol},title:nr,onClose:rt}),je&&P.default.createElement(Do,null,P.default.createElement(Dn,{summaryList:[{useMinPrecision:!1,coinAmount:je,injectCoin:i,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),P.default.createElement(Do,null,P.default.createElement(_r,{localType:Br,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{xe({trade:"send",all_confirmation:"wallet_used_address"})}}),P.default.createElement(_r,{address:f,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{xe({trade:"send",all_confirmation:"to_address"})}})),P.default.createElement(Do,null,P.default.createElement(Sn,{onClick:()=>{z(!0)},injectCoin:m,estimateFailed:!!We,networkFee:Io?void 0:M.mul(T,10**m?.decimals),loading:Io})),P.default.createElement(Do,{bordered:!1},P.default.createElement(Pn,{title:l("developer_mode_send_maintitle_nonce1")},P.default.createElement(ye.Text,{size:ye.SIZE.sm},g||x)),!!h&&P.default.createElement(Bn,{copyable:!0,defaultExpanded:!0,data:h})),P.default.createElement(Ne,{placeholder:!0,offsetBottom:0},P.default.createElement(Tr,{...ko}),P.default.createElement(ur,{buttonGroup:[{disabled:!!We,onClick:st,actionType:ur.ACTION_TYPE.CONFIRM,loading:(rr||Ge||Io)&&!We}]})),Q&&P.default.createElement(Ts,{onBack:()=>z(!1),rpcInfo:E,chainGasInfo:tt,customGasInfo:Xe,stopPollingGasPrice:or,updateCustomGasInfo:nt,chainGasLimitLoadFailed:tr}))},_i=pm;n();s();var Fe=a(_());v();var Hi=a(J()),Gi=a(A());n();s();var Ti=a(_()),Ut=a(A());v();var gi=a(J());function dm(){let e=(0,Ut.useDispatch)(),t=(0,Ut.useSelector)(ne),o=Pe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:mo.PENDING},{text:l("wallet_extension_history_tab_completed"),value:mo.COMPLETE}];return(0,gi.useMount)(()=>{o.length===0&&e(Po({status:mo.COMPLETE}))}),Ti.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:i=>{e(Po({status:i}))}})}var xi=dm;n();s();var Vo=a(_()),Gt=a(A()),hi=a(re());v();Ua();n();s();var Ht={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function um(){let e=(0,Gt.useDispatch)(),t=(0,Gt.useSelector)(ne),o=Pe(),r=()=>{o.length!==0&&ct.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await zr().rpcEvmClearPendingTransaction(),Hr.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Vo.default.createElement("div",{className:Ht.root},Vo.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(i,m)=>{e(Po({dates:m}))}}),Vo.default.createElement(he,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:he.DIRECTION.bottomRight},Vo.default.createElement(F,{className:(0,hi.default)("okx-wallet-plugin-brush-20",Ht.resetNonceIcon,{[Ht.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var Ci=um;n();s();var Be=a(_()),Mi=a(A());n();s();n();s();var qe=a(_());v();n();s();var _e=a(_());v();n();s();n();s();var Vt=a(_());te();n();s();te();var Wt=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:i,type:m}=e.txParams,c={gasLimit:i};return m===to.FEE_MARKET?(c.maxFeePerGas=lt($(o,1.2),0),c.maxPriorityFeePerGas=lt($(r,1.2),0)):c.gasPrice=lt($(t,1.2),0),c};function fm({txId:e,onClose:t}){let o=Pt(e),r=ms(),[i,m]=(0,Vt.useState)(!1),c=Wt(o),p=async()=>{if(i)return;m(!0);let z=await At(o.id);if(!z||z.status!==N.PENDING){m(!1),t();return}r(o,c).catch(Ge=>{console.log(Ge)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},x="",h="";g===to.FEE_MARKET?(x=f,h=c.maxFeePerGas):(x=d,h=c.gasPrice);let E=Lo(ie($(x,T))),I=`=Gas Price(${ze(x)})`,xe=Lo(ie($(h,c.gasLimit))),Q=`=Gas Price(${ze(h)})`;return Vt.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:i,onClose:t,oldGasFeeDisplay:E,oldGasDetailDisplay:I,newGasFeeDisplay:xe,newGasDetailDisplay:Q})}var zo=fm;n();s();var zt=a(_());te();function _m({txId:e,onClose:t}){let o=Pt(e),r=ls(),i=w(),[m,c]=(0,zt.useState)(!1),p=Wt(o),d=async()=>{if(m)return;if(c(!0),(await At(o.id)).status!==N.PENDING){c(!1),t();return}r(o,p).catch(E=>{console.log(E)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===to.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=Lo(ie($(T,p.gasLimit))),x=`Gas Price (${ze(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return zt.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:i?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:x})}var $o=_m;n();s();var ve=a(_());n();s();var Ke=a(_()),Ii=a(A());v();n();s();var Yo=a(_());v();var yi=({onClick:e,children:t})=>Yo.default.createElement(O,{className:"rpc-evm-tx-actions__button",category:O.CATEGORY.outline,type:O.TYPE.primary,size:O.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function Tm({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:i}=e,m=i?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?Yo.default.createElement("div",{className:"rpc-evm-tx-actions"},Yo.default.createElement(yi,{onClick:t},m),!i&&Yo.default.createElement(yi,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var Ei=Tm;n();s();v();Ma();te();function $t({type:e,extraParams:t}){let o=$e[e],r,i=l(o);return e===b.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===b.AUTHORIZATION||e===b.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",i=l(o,{symbol:t?.coinSymbol})):e===b.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===b.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:i}}function Yt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===b.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:ar.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:i}=t||{},m=ae(i);return Ve(m,0)?[{direction:ar.OUT,coinAmount:`${M.thousandFormat(ie(m))} ${r.symbol||""}`}]:[]}function Kt(e){let t;return e.type===b.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${G(e.extraParams.toAddress)}`:e.type===b.AUTHORIZATION||e.type===b.CANCEL_AUTHORIZATION?t=G(e.extraParams?.approvedAddress):t=G(e.txParams.to),t}function gm({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",i="";return e?(r=No.PENDING,t?i=l("wallet_extension_send_status_speedingup"):o?i=l("wallet_extension_send_status_canceling"):i=l("wallet_extension_history_list_status_pending")):(r=No.WAITING,i=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:i}}function xm(e){let t=Kt(e),o=(0,Ii.useSelector)(so),r=[t],i=Re(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(i),r}function hm({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:i,title:m}=$t(e),{labelType:c,labelText:p}=gm(e),d=Yt(e),f=xm(e),T=wt(f,d),g=Ke.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return Ke.default.createElement(y.ItemContainer,{onClick:x=>{t&&t(e,x)}},Ke.default.createElement(y.Row,{assets:d,align:T},Ke.default.createElement(y.Info,{icons:i,title:m,label:g,details:f}),Ke.default.createElement(y.Assets,{assets:d})),Ke.default.createElement(Ei,{tx:e,onCancel:o,onSpeed:r}))}var Ko=hm;function Cm({txs:e,onClick:t}){let[o,r]=(0,ve.useState)(null),[i,m]=(0,ve.useState)(null);return ve.default.createElement(ve.default.Fragment,null,e.map(c=>ve.default.createElement(Ko,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ve.default.createElement(zo,{txId:o,onClose:()=>{r(null)}}),ve.default.createElement($o,{txId:i,onClose:()=>{m(null)}}))}var Zo=Cm;n();s();var Ze=a(_());v();var xr=a(A());function ym({txs:e,onClick:t}){let o=(0,xr.useSelector)(so),{dates:r}=(0,xr.useSelector)(ne),i=(0,Ze.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:Re(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return Ze.default.createElement(y.List,null,i.map(({date:m,list:c},p)=>Ze.default.createElement("div",{key:p},Ze.default.createElement(y.Date,null,m),c.map(d=>Ze.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var qo=ym;n();s();var go=a(_());v();function Em({status:e}){let t="",o="";return(e===N.FAILED||e===N.DROPPED)&&(t=No.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function Im(e){return[Kt(e)]}function km({tx:e,onClick:t}){let{icons:o,title:r}=$t(e),i=Yt(e),m=Im(e),c=wt(m,i),{labelType:p,labelText:d}=Em(e),f=go.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return go.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},go.default.createElement(y.Row,{assets:i,align:c},go.default.createElement(y.Info,{icons:o,title:r,label:f,details:m}),go.default.createElement(y.Assets,{assets:i})))}var Qo=km;function vm({tx:e}){let t=ss(),{status:o,isShowPending:r,isCanceling:i}=e,[m,c]=(0,_e.useState)(!1),[p,d]=(0,_e.useState)(!1);return _e.default.createElement(_e.default.Fragment,null,(o===N.SUCCEED||o===N.FAILED)&&_e.default.createElement(jn,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===N.PENDING&&_e.default.createElement(Jn,{isShowCancel:!i,isShowSpeedUp:!i,isShowSpeedupCancel:i,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&_e.default.createElement(zo,{txId:e?.id,onClose:()=>{d(!1)}}),m&&_e.default.createElement($o,{txId:e?.id,onClose:()=>{c(!1)}}))}var ki=vm;n();s();var Le=a(_());v();n();s();var hr=a(_()),Cr=a(re());n();s();var bm={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Nm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function wm({icon:e,className:t,text:o,size:r="normal",fontSize:i,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(m){let I=bm[m];f=I?.color,T=I?.background,g=I?.border}let x,h;if(typeof r=="string"){let I=Nm[r];x=I?.size,h=I?.fontSize}else x=r.size;let E={width:`${x}px`,height:`${x}px`};return e?hr.default.createElement("img",{alt:"icon",src:e,style:E,className:(0,Cr.default)("capitalize-letter",t)}):(E={...E,fontSize:`${i||h}px`,color:c||f,background:p||T,border:g},hr.default.createElement("div",{style:E,className:(0,Cr.default)("capitalize-letter",t)},d))}var Y=wm;te();n();s();var R=a(_()),Zt=a(re()),vi=a(Ba());v();n();s();function Am({className:e,label:t,children:o}){return R.default.createElement("div",{className:(0,Zt.default)("rpc-evm-coin-flow__label",e)},R.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),R.default.createElement("div",null,o))}function Pm({isNFT:e,icon:t,title:o,address:r}){let i=typeof t=="string"?R.default.createElement(An,{className:(0,Zt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return R.default.createElement("div",{className:"rpc-evm-coin-flow__record"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},i),R.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&R.default.createElement(Ae,{className:"rpc-evm-coin-flow__record-address",label:G(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function yr({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:i,label:m,...c}=r;return R.default.createElement(Am,{...c,label:m,key:r},i.map((p,d)=>R.default.createElement(Pm,{...p,key:d})))};return R.default.createElement("div",{className:(0,Zt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var bi=yr;yr.propTypes={data:vi.default.array};yr.defaultProps={data:[]};var{TRANS_OUT:Ni,CONTRACT_CALL:wi,AUTHORIZATION:qt,CANCEL_AUTHORIZATION:Qt,CONTRACT_DEPLOY:Ai}=b,Sm={[qt]:"wallet_extension_header_approval_title_approve",[Qt]:"wallet_extension_header_approval_title_cancel_approval"},Dm={[qt]:"wallet_extension_header_approval_title_for",[Qt]:"wallet_extension_header_approval_title_for"},Om="/static/images/tx-history/default-protocol.svg";function Lm(e){let{type:t}=e,o=w("",!0);switch(t){case Ni:{let{value:r,coinSymbol:i}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${i||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Le.default.createElement(Y,{icon:!i&&rn,text:i,size:"large",theme:"black"}),title:Le.default.createElement(fr,{maxWidth:"284px",text:m})}]}}case wi:{let{value:r}=e.txParams||{},i=ae(r);if(eo(i,0))return null;let m=`- ${fo(ie(i),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Le.default.createElement(Y,{text:o.symbol,size:"large",theme:"black"}),title:Le.default.createElement(fr,{text:m,maxWidth:"284px"})}]}}case qt:case Qt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(Sm[t]),items:[{icon:Le.default.createElement(Y,{text:r,size:"large",theme:"black"}),title:r}]}:null}case Ai:default:return null}}function Bm(e){let{type:t,extraParams:o}=e;switch(t){case qt:case Qt:{let{approvedAddress:r}=o||{};return{label:l(Dm[t]),items:[{icon:Om,title:Le.default.createElement(Ae,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:G(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case Ni:case wi:case Ai:default:return null}}function Fm({tx:e}){let t=Lm(e),o=Bm(e);return Le.default.createElement(bi,{data:[t,o]})}var Pi=Fm;n();s();var C=a(_()),Er=a(A()),Si=a(re());v();te();function Mm({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let i,m="";return e===N.SUCCEED?(i=uo.TxStatusInfoEnum.SUCCESS,m=l("wallet_extension_history_status_completed")):e===N.FAILED||e===N.DROPPED?(i=uo.TxStatusInfoEnum.FAILED,m=l("wallet_extension_history_status_failed")):e===N.PENDING&&(r?(i=uo.TxStatusInfoEnum.PENDING,t?m=l("wallet_extension_send_status_canceling"):o?m=l("wallet_extension_send_status_speedingup"):m=l("wallet_extension_history_list_status_pending")):(i=uo.TxStatusInfoEnum.WAITING,m=l("wallet_extension_history_list_status_waiting"))),C.default.createElement(uo,{label:l("wallet_extension_mid_text_status"),status:i,statusText:m})}function Um({status:e,sendTime:t,finishTime:o}){let r=(0,Er.useSelector)(so);return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_time"),value:Re(e===N.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function Hm({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==b.AUTHORIZATION?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function Gm({status:e,blockNumber:t}){let o=(0,Er.useSelector)(xt),r=vo(o,t);return e===N.PENDING||e===N.DROPPED||mt(r,0)||bo(r,14)?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function Wm(){let{extensionConfig:e}=D("rpc_info");return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_network"),value:C.default.createElement(C.default.Fragment,null,C.default.createElement(Y,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Vm({txParams:e}){let{from:t}=e;return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_from"),value:C.default.createElement(Ae,{label:G(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function zm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:i,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===b.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=i;else if(t===b.CONTRACT_DEPLOY)if(e===N.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===b.AUTHORIZATION||t===b.CANCEL_AUTHORIZATION?f=m:f=p;return C.default.createElement(Ee,{label:d,value:C.default.createElement(Ae,{label:G(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function $m({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:i,maxFeePerGas:m,gasPrice:c}=o,p=Nn($,ie),d=c||m,f=fo(p(d,t||i),{symbol:r?.symbol,decimals:r?.decimals});return C.default.createElement(Xn,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===N.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat(ze(d)),gasLimit:M.thousandFormat(i)})})}function Ym({txParams:e}){let{data:t}=e,[o,r]=(0,C.useState)(!1);return t?C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(i=>!i)}},l("developer_mode_history_title_transaction_data"),C.default.createElement(F,{className:(0,Si.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function Km({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},C.default.createElement(Mm,{...e}),C.default.createElement(Um,{...e}),C.default.createElement(Hm,{...e}),C.default.createElement(Gm,{...e}),C.default.createElement(Wm,{...e}),C.default.createElement(Vm,{...e}),C.default.createElement(zm,{...e}),C.default.createElement($m,{...e}),C.default.createElement(Ee,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),C.default.createElement(Ee,{label:l("wallet_extension_mid_text_transaction_hash"),value:C.default.createElement(Ae,{label:G(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),C.default.createElement(Ym,{...e}))}var Di=Km;var Zm=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=$e[t];return t===b.AUTHORIZATION||t===b.CANCEL_AUTHORIZATION?l(r,{symbol:o?.coinSymbol||""}):l(r)};function qm({txId:e,onBack:t}){let r=rs().find(({id:m})=>m===e),i=Zm(r);return qe.default.createElement(ct.Action,{isFull:!0,titleCenter:!0,title:i,visible:!!e,onClose:t},qe.default.createElement(Rn,{message:r?.errorMessage}),!!r&&qe.default.createElement("div",{className:"rpc-mode-tx-detail__content"},qe.default.createElement(Pi,{tx:r}),qe.default.createElement(Di,{tx:r}),qe.default.createElement(ki,{tx:r})))}var Xo=qm;n();s();var Ir=a(_());function Qm({symbol:e}){return Ir.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},Ir.default.createElement(Y,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var kr=Qm;n();s();n();s();var Xt=a(_()),Oi=a(A());function Xm({onClick:e}){let{dates:t}=(0,Oi.useSelector)(ne),o=Pe({dates:t});return o.length===0?Xt.default.createElement(y.Empty,{top:72}):Xt.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},Xt.default.createElement(Zo,{txs:o,onClick:e}))}var Li=Xm;n();s();var xo=a(_());var Bi=a(A());function jm({onClick:e}){let{dates:t}=(0,Bi.useSelector)(ne),o=ts({dates:t}),r=(0,xo.useMemo)(()=>o.map(i=>({...i,sortTime:i.finishTime,Comp:Qo})),[o]);return r.length===0?xo.default.createElement(y.Empty,{top:72}):xo.default.createElement(y.ListContainer,null,xo.default.createElement(qo,{txs:r,onClick:e}))}var Fi=jm;function Jm(){let e=(0,Mi.useSelector)(ne),[t,o]=(0,Be.useState)(null),r=i=>{o(i.id)};return Be.default.createElement(Be.default.Fragment,null,e.status===mo.PENDING?Be.default.createElement(Li,{onClick:r}):Be.default.createElement(Fi,{onClick:r}),t&&Be.default.createElement(Xo,{txId:t,onBack:()=>{o(null)}}))}var Ui=Jm;n();s();function Rm(){let e=(0,Gi.useDispatch)();return(0,Hi.useUnmount)(()=>{e(gn())}),Fe.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},Fe.default.createElement(Ne,{className:"rpc-evm-tx-history__top",offsetTop:0},Fe.default.createElement(V,{sticky:!1,title:l("wallet_extension_header_text_history")}),Fe.default.createElement(xi,null),Fe.default.createElement(Ci,null)),Fe.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Fe.default.createElement(Ui,null)))}var Wi=Rm;n();s();var Co=a(_());n();s();var ho=a(_()),Vi=a(W());v();n();s();function Me(){return se().get("address")}var el=()=>{let e=(0,Vi.useHistory)(),t=Me(),o=w(t),r=()=>{e.push(q)};return ho.default.createElement(V,{title:ho.default.createElement(kr,{symbol:o?.symbol}),onBack:r},t&&ho.default.createElement(he,{title:l("developer_mode_infor_tooltip_token_details"),placement:he.DIRECTION.bottom},ho.default.createElement(F,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${gt}?address=${t}`)}})))},zi=ho.default.memo(el);n();s();var Te=a(_());n();s();var $i=a(_());function ol({txs:e,onClick:t}){return e.length===0?null:$i.default.createElement(Zo,{txs:e,onClick:t})}var Yi=ol;n();s();var jt=a(_());function tl({txs:e,onClick:t}){let o=(0,jt.useMemo)(()=>e.map(r=>{let i,m;return r.status===N.PENDING?(i=r.sendTime,m=Ko):(i=r.finishTime,m=Qo),{...r,sortTime:i,Comp:m}}),[e]);return o.length===0?null:jt.default.createElement(qo,{txs:o,onClick:t})}var Ki=tl;function rl(){let e=Me(),t=ns({tokenAddress:e}),[o,r]=(0,Te.useState)(null),[i,m]=(0,Te.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?Te.default.createElement(y.Empty,null):Te.default.createElement("div",null,Te.default.createElement(Yi,{txs:i,onClick:c}),Te.default.createElement(Ki,{txs:m,onClick:c}),Te.default.createElement(Xo,{txId:o,onBack:()=>{r(null)}}))}var Zi=rl;n();s();var Jo=a(_()),ji=a(A());te();n();s();var jo=a(_()),qi=a(A()),Qi=a(W());v();te();function nl(){let e=(0,Qi.useHistory)(),t=(0,qi.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=Me(),i=w(r),m=`${no}?address=${r||""}`,c=!r&&o?.faucetUrl;return jo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},jo.default.createElement(It.IconButtonWithLabel,{disabled:eo(i?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(_n(m));let p=`${ce}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),jo.default.createElement(It.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${ro}?showClose=1${p}`)}}),c&&jo.default.createElement(It.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var Xi=nl;function sl(){let e=Me(),t=w(e),o=t?.balance||0,{symbol:r,usdToThisRate:i}=(0,ji.useSelector)(Rr),m=$(t?.price,i);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:lo(o),currencyAmountDisplay:wn({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function il(){let e=pe(),{coinSymbol:t,coinAmountDisplay:o}=sl();return Jo.default.createElement(Es,null,Jo.default.createElement(ys,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),Jo.default.createElement(Cs,{address:e}),Jo.default.createElement(Xi,null))}var Ji=il;n();s();function al(){return Co.default.createElement("div",{className:"rpc-evm-coin-detail"},Co.default.createElement(zi,null),Co.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Co.default.createElement(Ji,null),Co.default.createElement(Zi,null)))}var Ri=al;n();s();var le=a(_()),aa=a(dr());v();var ma=a(W());n();s();var ta=a(_()),ra=a(re());n();s();var yo=a(_()),ea=a(re());var oa=({token:e,className:t,children:o,onClick:r})=>yo.default.createElement("div",{onClick:r,className:(0,ea.default)("rc-mode__token",t)},yo.default.createElement(Y,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),yo.default.createElement("div",{className:"rc-mode__token__info"},yo.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),yo.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var na=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:i="div",...m})=>{let c=!t.length;return ta.default.createElement(i,{className:(0,ra.default)("rc-mode__tokens",e),...m},t.map(p=>o(p)),c&&r)};na.Item=oa;var Ue=na;n();s();var Ro=a(_()),sa=a(J());var ia=()=>{let e=de(),[t,o]=Ro.default.useState(),r=(0,sa.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),i=(0,Ro.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,Ro.useMemo)(()=>t?i.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):i,[t,i]),{onChange:r,value:t,showSearch:!!i.length}]};n();s();var la=()=>{let[e,{showSearch:t,...o}]=ia();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(V,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(S.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(Ue,{dataSource:e,renderItem:r=>le.default.createElement(ma.Link,{to:`${ce}?${aa.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(Ue.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Ur.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();s();var Qe=a(_()),_a=a(W()),Ta=a(J());v();n();s();n();s();var Jt=a(_()),ml=({children:e})=>Jt.default.createElement("div",{className:"token-detail-container"},e),ca=(0,Jt.memo)(ml);n();s();var He=a(_()),ll=({image:e,symbol:t,name:o})=>He.default.createElement("div",{className:"token-detail-intro"},He.default.createElement("div",{className:"token-detail-intro__image"},e),He.default.createElement("div",{className:"token-detail-intro__desc"},He.default.createElement("div",{className:"token-detail-intro__symbol"},t),He.default.createElement("div",{className:"token-detail-intro__name"},o))),pa=(0,He.memo)(ll);n();s();var ge=a(_()),da=a(re());var cl=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:i,copyNotificationDesc:m})=>{let c=(0,da.default)("token-detail-row",e),[p,d]=Qn();return ge.default.createElement("div",{className:c},ge.default.createElement("div",{className:"token-detail-row__title"},t),ge.default.createElement("div",{className:"token-detail-row__content"},ge.default.createElement("div",{className:"token-detail-row__text"},o),r&&ge.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),oo.success({title:i,desc:ge.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},ge.default.createElement(F,{className:"okx-wallet-plugin-copy"}))))},Rt=(0,ge.memo)(cl);n();s();var et=a(_()),ua=a(re());var pl=({details:e})=>et.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",i=(0,ua.default)(t?.className,r);return et.default.createElement(Rt,{...t,className:i})})),fa=(0,et.memo)(pl);var er={Container:ca,Intro:pa,Row:Rt,Details:fa};n();s();function dl(){let e=(0,_a.useHistory)(),o=se().get("address"),r=w(o,!0),{extensionConfig:i}=D("rpc_info"),m=[{title:l("developer_mode_infor_subtitle_contractadd"),text:G(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:i.name}];return(0,Ta.useMount)(()=>{o||e.replace(q)}),Qe.default.createElement("div",{className:"rpc-evm-token-detail"},Qe.default.createElement(V,{title:l("developer_mode_infor_maintitle_tokendetails")}),Qe.default.createElement(er.Container,null,Qe.default.createElement(er.Intro,{image:Qe.default.createElement(Y,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Qe.default.createElement(er.Details,{details:m})))}var ga=dl;n();s();var K=a(_()),Ea=a(W()),Ia=a(re()),vr=a(Ga());v();n();s();var xa=a(_()),ha=a(A()),Ca=a(J());var ya=()=>{let e=(0,ha.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=de(!0,!0),i=(0,xa.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,Ca.useMemoizedFn)(({address:c,isDeleted:p})=>{e(on({chainId:o,address:c,isDeleted:!p}))},[o]);return[i,m]};n();s();var ka=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=ya();return K.default.createElement("div",{className:"rpc-mode-manage-crypto"},K.default.createElement(V,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),K.default.createElement(Ea.Link,{to:_t},K.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},K.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),K.default.createElement(F,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),K.default.createElement(Ue,{component:vr.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let i=!r.address;return K.default.createElement(Ue.Item,{token:r},K.default.createElement(F,{className:(0,Ia.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":i}),onClick:()=>o(r)}))}}),!!t.length&&K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),K.default.createElement(Ue,{component:vr.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>K.default.createElement(Ue.Item,{token:r,key:r?.address},K.default.createElement(F,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();s();var B=a(_());v();n();s();var be=a(_()),va=a(W()),br=a(J());Je();v();var ul="0x",fl=()=>{let e=vt();return async t=>{try{return!co(t)||await(await e()).eth.getCode(t)===ul}catch(o){return console.log(o),!0}}},ba=()=>{let e=H.useForm(),t=(0,va.useHistory)(),[o,r]=be.default.useState(null),[i,m]=be.default.useState(!1),[c,p]=be.default.useState(!1),d=In(),f=hn(),T=yn(),g=fl(),x=de(!0,!0),{extensionConfig:h}=D("rpc_info");be.default.useEffect(()=>{e?.setFieldsValue({network:h.name})},[h]);let E=(0,br.useMemoizedFn)(()=>{let{chainId:Q}=h,z=e.getFieldsValue();d(Q,z.address,z),T({chainId:Q,address:z.address}),oo.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[h]),I=(0,br.useMemoizedFn)(Ar(async()=>{r(null),p(null);let Q=e.getFieldValue("address");if(e.cleanErrors(),!Q)return!1;let z=x.find(oe=>oe.address===Q);if(z&&!z.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await g(Q))return m(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let oe=await f(Q);r(oe),e.setFieldsValue(oe)}catch(oe){p(!0),e.setErrors({address:""}),console.log("error",oe)}finally{m(!1)}},250),[x]),xe=(0,be.useMemo)(()=>c?be.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),be.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:I},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:h,fetching:i,addressError:xe,onConfirm:E,onAddressTrigger:I}};n();s();var _l=11,Na=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:i,addressError:m,onAddressTrigger:c}=ba();return B.default.createElement("div",{className:"rpc-mode-custom-crypto"},B.default.createElement(V,{title:l("developer_mode_manage_maintitle_customcpt")}),B.default.createElement(H,{form:e,size:H.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},B.default.createElement(H.Item,{name:"network",label:l("developer_mode_manage_title_network")},B.default.createElement(S,{size:H.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:B.default.createElement(Y,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),B.default.createElement(H.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:m},B.default.createElement(S.TextArea,{autoResize:!0,size:H.SIZE.xl,onChange:c,errorType:S.TIP_TYPE.always,suffix:r&&B.default.createElement(ir.Circle,{size:ir.SIZE.sm})})),B.default.createElement(H.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>_l?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},B.default.createElement(S,{size:H.SIZE.xl})),B.default.createElement(H.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},B.default.createElement(S,{size:H.SIZE.xl,disabled:!0})),B.default.createElement(H.Item,{hidden:!0,name:"name"},B.default.createElement(S,{size:H.SIZE.xl})),B.default.createElement(H.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>B.default.createElement(Ne.FooterActions,{usePortal:!0,offsetBottom:0},B.default.createElement(O,{size:O.SIZE.lg,type:O.TYPE.highlight,category:O.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:i},l("developer_mode_manage_btn_confirm"))))))};var wa=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(ee.Switch,null,Z.default.createElement(ee.Route,{path:pt,component:Gs,exact:!0}),Z.default.createElement(ee.Route,{path:ro,component:Xs,exact:!0}),Z.default.createElement(ee.Route,{path:ce,component:di,exact:!0}),Z.default.createElement(ee.Route,{path:dt,component:_i,exact:!0}),Z.default.createElement(ee.Route,{path:ut,component:la,exact:!0}),Z.default.createElement(ee.Route,{path:ft,component:ka,exact:!0}),Z.default.createElement(ee.Route,{path:_t,component:Na,exact:!0}),Z.default.createElement(ee.Route,{path:Tt,component:Wi,exact:!0}),Z.default.createElement(ee.Route,{path:no,component:Ri,exact:!0}),Z.default.createElement(ee.Route,{path:gt,component:ga,exact:!0})),Z.default.createElement(qs,null));var IE=()=>{let e=(0,Eo.useHistory)(),{isRpcMode:t}=(0,Aa.useSelector)(io);return(0,ot.useEffect)(()=>{t||e.replace(q)},[t]),ot.default.createElement(Eo.Switch,null,ot.default.createElement(Eo.Route,{path:Qr,component:wa}))};export{IE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-COUGN254.js.map
