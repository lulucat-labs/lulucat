import{a as ic,b as _r}from"./chunk-W4PU74UA.js";import{a as Jo,b as sc}from"./chunk-NQVV4PME.js";import{a as Ap,b as Qt,c as Tp}from"./chunk-WQANRNZ2.js";import{a as hh}from"./chunk-7MZSFBF4.js";import{b as rc}from"./chunk-TKZ7N5JX.js";import{w as _p}from"./chunk-SHMKQUVK.js";import{c as x,o as h,p as E,q as g}from"./chunk-FJHLV356.js";var sr=x(oc=>{"use strict";h();g();Object.defineProperty(oc,"__esModule",{value:!0});oc.HexString=void 0;var gh=Qt(),hi=class{static fromBuffer(e){return hi.fromUint8Array(e)}static fromUint8Array(e){return new hi((0,gh.bytesToHex)(e))}static ensure(e){return typeof e=="string"?new hi(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from((0,gh.hexToBytes)(this.noPrefix()))}};oc.HexString=hi});var Qo=x(ht=>{"use strict";h();g();Object.defineProperty(ht,"__esModule",{value:!0});ht.output=ht.exists=ht.hash=ht.bytes=ht.bool=ht.number=void 0;function ac(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}ht.number=ac;function yh(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}ht.bool=yh;function pl(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}ht.bytes=pl;function bh(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ac(t.outputLen),ac(t.blockLen)}ht.hash=bh;function ph(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}ht.exists=ph;function mh(t,e){pl(t);let n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}ht.output=mh;var Sp={number:ac,bool:yh,bytes:pl,hash:bh,exists:ph,output:mh};ht.default=Sp});var wh=x(cc=>{"use strict";h();g();Object.defineProperty(cc,"__esModule",{value:!0});cc.crypto=void 0;cc.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var gi=x(re=>{"use strict";h();g();Object.defineProperty(re,"__esModule",{value:!0});re.randomBytes=re.wrapConstructorWithOpts=re.wrapConstructor=re.checkOpts=re.Hash=re.concatBytes=re.toBytes=re.utf8ToBytes=re.asyncLoop=re.nextTick=re.hexToBytes=re.bytesToHex=re.isLE=re.rotr=re.createView=re.u32=re.u8=void 0;var ml=wh(),Ep=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);re.u8=Ep;var Bp=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));re.u32=Bp;var vp=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);re.createView=vp;var xp=(t,e)=>t<<32-e|t>>>e;re.rotr=xp;re.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!re.isLE)throw new Error("Non little-endian hardware is not supported");var Up=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ip(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Up[t[n]];return e}re.bytesToHex=Ip;function Pp(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){let r=n*2,i=t.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[n]=s}return e}re.hexToBytes=Pp;var zp=async()=>{};re.nextTick=zp;async function Np(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);let s=Date.now()-r;s>=0&&s<e||(await(0,re.nextTick)(),r+=s)}}re.asyncLoop=Np;function _h(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}re.utf8ToBytes=_h;function _l(t){if(typeof t=="string"&&(t=_h(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}re.toBytes=_l;function Op(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((r,i)=>r+i.length,0),n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){let s=t[r];n.set(s,i),i+=s.length}return n}re.concatBytes=Op;var wl=class{clone(){return this._cloneInto()}};re.Hash=wl;var Mp=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function qp(t,e){if(e!==void 0&&(typeof e!="object"||!Mp(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}re.checkOpts=qp;function Rp(t){let e=r=>t().update(_l(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}re.wrapConstructor=Rp;function Hp(t){let e=(r,i)=>t(i).update(_l(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}re.wrapConstructorWithOpts=Hp;function Cp(t=32){if(ml.crypto&&typeof ml.crypto.getRandomValues=="function")return ml.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}re.randomBytes=Cp});var Th=x(ea=>{"use strict";h();g();Object.defineProperty(ea,"__esModule",{value:!0});ea.hmac=void 0;var uc=Qo(),Ah=gi(),lc=class extends Ah.Hash{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,uc.default.hash(e);let r=(0,Ah.toBytes)(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return uc.default.exists(this),this.iHash.update(e),this}digestInto(e){uc.default.exists(this),uc.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Kp=(t,e,n)=>new lc(t,e).update(n).digest();ea.hmac=Kp;ea.hmac.create=(t,e)=>new lc(t,e)});var Bh=x(Ts=>{"use strict";h();g();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.pbkdf2Async=Ts.pbkdf2=void 0;var dc=Qo(),jp=Th(),As=gi();function Sh(t,e,n,r){dc.default.hash(t);let i=(0,As.checkOpts)({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(dc.default.number(s),dc.default.number(o),dc.default.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=(0,As.toBytes)(e),l=(0,As.toBytes)(n),d=new Uint8Array(o),u=jp.hmac.create(t,c),y=u._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:u,PRFSalt:y}}function Eh(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function Lp(t,e,n,r){let{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=Sh(t,e,n,r),l,d=new Uint8Array(4),u=(0,As.createView)(d),y=new Uint8Array(a.outputLen);for(let m=1,w=0;w<s;m++,w+=a.outputLen){let f=o.subarray(w,w+a.outputLen);u.setInt32(0,m,!1),(l=c._cloneInto(l)).update(d).digestInto(y),f.set(y.subarray(0,f.length));for(let b=1;b<i;b++){a._cloneInto(l).update(y).digestInto(y);for(let _=0;_<f.length;_++)f[_]^=y[_]}}return Eh(a,c,o,l,y)}Ts.pbkdf2=Lp;async function Dp(t,e,n,r){let{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:l}=Sh(t,e,n,r),d,u=new Uint8Array(4),y=(0,As.createView)(u),m=new Uint8Array(c.outputLen);for(let w=1,f=0;f<s;w++,f+=c.outputLen){let b=a.subarray(f,f+c.outputLen);y.setInt32(0,w,!1),(d=l._cloneInto(d)).update(u).digestInto(m),b.set(m.subarray(0,b.length)),await(0,As.asyncLoop)(i-1,o,_=>{c._cloneInto(d).update(m).digestInto(m);for(let p=0;p<b.length;p++)b[p]^=m[p]})}return Eh(c,l,a,d,m)}Ts.pbkdf2Async=Dp});var Sl=x(fc=>{"use strict";h();g();Object.defineProperty(fc,"__esModule",{value:!0});fc.SHA2=void 0;var Al=Qo(),ta=gi();function Vp(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);let i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}var Tl=class extends ta.Hash{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,ta.createView)(this.buffer)}update(e){Al.default.exists(this);let{view:n,buffer:r,blockLen:i}=this;e=(0,ta.toBytes)(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let c=(0,ta.createView)(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Al.default.exists(this),Al.default.output(e,this),this.finished=!0;let{buffer:n,view:r,blockLen:i,isLE:s}=this,{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let u=o;u<i;u++)n[u]=0;Vp(r,i-8,BigInt(this.length*8),s),this.process(r,0);let a=(0,ta.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,d[u],s)}digest(){let{buffer:e,outputLen:n}=this;this.digestInto(e);let r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};fc.SHA2=Tl});var vh=x(Ss=>{"use strict";h();g();Object.defineProperty(Ss,"__esModule",{value:!0});Ss.sha224=Ss.sha256=void 0;var kp=Sl(),en=gi(),Gp=(t,e,n)=>t&e^~t&n,Fp=(t,e,n)=>t&e^t&n^e&n,$p=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ar=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tr=new Uint32Array(64),hc=class extends kp.SHA2{constructor(){super(64,32,8,!1),this.A=Ar[0]|0,this.B=Ar[1]|0,this.C=Ar[2]|0,this.D=Ar[3]|0,this.E=Ar[4]|0,this.F=Ar[5]|0,this.G=Ar[6]|0,this.H=Ar[7]|0}get(){let{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let u=0;u<16;u++,n+=4)Tr[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){let y=Tr[u-15],m=Tr[u-2],w=(0,en.rotr)(y,7)^(0,en.rotr)(y,18)^y>>>3,f=(0,en.rotr)(m,17)^(0,en.rotr)(m,19)^m>>>10;Tr[u]=f+Tr[u-7]+w+Tr[u-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:d}=this;for(let u=0;u<64;u++){let y=(0,en.rotr)(a,6)^(0,en.rotr)(a,11)^(0,en.rotr)(a,25),m=d+y+Gp(a,c,l)+$p[u]+Tr[u]|0,f=((0,en.rotr)(r,2)^(0,en.rotr)(r,13)^(0,en.rotr)(r,22))+Fp(r,i,s)|0;d=l,l=c,c=a,a=o+m|0,o=s,s=i,i=r,r=m+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,l,d)}roundClean(){Tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},El=class extends hc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Ss.sha256=(0,en.wrapConstructor)(()=>new hc);Ss.sha224=(0,en.wrapConstructor)(()=>new El)});var Ih=x(tn=>{"use strict";h();g();Object.defineProperty(tn,"__esModule",{value:!0});tn.add=tn.toBig=tn.split=tn.fromBig=void 0;var gc=BigInt(2**32-1),Bl=BigInt(32);function vl(t,e=!1){return e?{h:Number(t&gc),l:Number(t>>Bl&gc)}:{h:Number(t>>Bl&gc)|0,l:Number(t&gc)|0}}tn.fromBig=vl;function xh(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:o}=vl(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}tn.split=xh;var Wp=(t,e)=>BigInt(t>>>0)<<Bl|BigInt(e>>>0);tn.toBig=Wp;var Xp=(t,e,n)=>t>>>n,Zp=(t,e,n)=>t<<32-n|e>>>n,Yp=(t,e,n)=>t>>>n|e<<32-n,Jp=(t,e,n)=>t<<32-n|e>>>n,Qp=(t,e,n)=>t<<64-n|e>>>n-32,em=(t,e,n)=>t>>>n-32|e<<64-n,tm=(t,e)=>e,nm=(t,e)=>t,rm=(t,e,n)=>t<<n|e>>>32-n,im=(t,e,n)=>e<<n|t>>>32-n,sm=(t,e,n)=>e<<n-32|t>>>64-n,om=(t,e,n)=>t<<n-32|e>>>64-n;function Uh(t,e,n,r){let i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}tn.add=Uh;var am=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),cm=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,um=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),lm=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,dm=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),fm=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,hm={fromBig:vl,split:xh,toBig:tn.toBig,shrSH:Xp,shrSL:Zp,rotrSH:Yp,rotrSL:Jp,rotrBH:Qp,rotrBL:em,rotr32H:tm,rotr32L:nm,rotlSH:rm,rotlSL:im,rotlBH:sm,rotlBL:om,add:Uh,add3L:am,add3H:cm,add4L:um,add4H:lm,add5H:fm,add5L:dm};tn.default=hm});var Ph=x(nn=>{"use strict";h();g();Object.defineProperty(nn,"__esModule",{value:!0});nn.sha384=nn.sha512_256=nn.sha512_224=nn.sha512=nn.SHA512=void 0;var gm=Sl(),ee=Ih(),yc=gi(),[ym,bm]=ee.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Sr=new Uint32Array(80),Er=new Uint32Array(80),yi=class extends gm.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:y,Gh:m,Gl:w,Hh:f,Hl:b}=this;return[e,n,r,i,s,o,a,c,l,d,u,y,m,w,f,b]}set(e,n,r,i,s,o,a,c,l,d,u,y,m,w,f,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=y|0,this.Gh=m|0,this.Gl=w|0,this.Hh=f|0,this.Hl=b|0}process(e,n){for(let S=0;S<16;S++,n+=4)Sr[S]=e.getUint32(n),Er[S]=e.getUint32(n+=4);for(let S=16;S<80;S++){let v=Sr[S-15]|0,U=Er[S-15]|0,B=ee.default.rotrSH(v,U,1)^ee.default.rotrSH(v,U,8)^ee.default.shrSH(v,U,7),I=ee.default.rotrSL(v,U,1)^ee.default.rotrSL(v,U,8)^ee.default.shrSL(v,U,7),z=Sr[S-2]|0,F=Er[S-2]|0,V=ee.default.rotrSH(z,F,19)^ee.default.rotrBH(z,F,61)^ee.default.shrSH(z,F,6),q=ee.default.rotrSL(z,F,19)^ee.default.rotrBL(z,F,61)^ee.default.shrSL(z,F,6),oe=ee.default.add4L(I,q,Er[S-7],Er[S-16]),ie=ee.default.add4H(oe,B,V,Sr[S-7],Sr[S-16]);Sr[S]=ie|0,Er[S]=oe|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:y,Fh:m,Fl:w,Gh:f,Gl:b,Hh:_,Hl:p}=this;for(let S=0;S<80;S++){let v=ee.default.rotrSH(u,y,14)^ee.default.rotrSH(u,y,18)^ee.default.rotrBH(u,y,41),U=ee.default.rotrSL(u,y,14)^ee.default.rotrSL(u,y,18)^ee.default.rotrBL(u,y,41),B=u&m^~u&f,I=y&w^~y&b,z=ee.default.add5L(p,U,I,bm[S],Er[S]),F=ee.default.add5H(z,_,v,B,ym[S],Sr[S]),V=z|0,q=ee.default.rotrSH(r,i,28)^ee.default.rotrBH(r,i,34)^ee.default.rotrBH(r,i,39),oe=ee.default.rotrSL(r,i,28)^ee.default.rotrBL(r,i,34)^ee.default.rotrBL(r,i,39),ie=r&s^r&a^s&a,H=i&o^i&c^o&c;_=f|0,p=b|0,f=m|0,b=w|0,m=u|0,w=y|0,{h:u,l:y}=ee.default.add(l|0,d|0,F|0,V|0),l=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;let T=ee.default.add3L(V,oe,H);r=ee.default.add3H(T,F,q,ie),i=T|0}({h:r,l:i}=ee.default.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ee.default.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ee.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=ee.default.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:y}=ee.default.add(this.Eh|0,this.El|0,u|0,y|0),{h:m,l:w}=ee.default.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:f,l:b}=ee.default.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:_,l:p}=ee.default.add(this.Hh|0,this.Hl|0,_|0,p|0),this.set(r,i,s,o,a,c,l,d,u,y,m,w,f,b,_,p)}roundClean(){Sr.fill(0),Er.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};nn.SHA512=yi;var xl=class extends yi{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Ul=class extends yi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Il=class extends yi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};nn.sha512=(0,yc.wrapConstructor)(()=>new yi);nn.sha512_224=(0,yc.wrapConstructor)(()=>new xl);nn.sha512_256=(0,yc.wrapConstructor)(()=>new Ul);nn.sha384=(0,yc.wrapConstructor)(()=>new Il)});var Ol=x(D=>{"use strict";h();g();Object.defineProperty(D,"__esModule",{value:!0});D.bytes=D.stringToBytes=D.str=D.bytesToString=D.hex=D.utf8=D.bech32m=D.bech32=D.base58check=D.createBase58check=D.base58xmr=D.base58xrp=D.base58flickr=D.base58=D.base64urlnopad=D.base64url=D.base64nopad=D.base64=D.base32crockford=D.base32hexnopad=D.base32hex=D.base32nopad=D.base32=D.base16=D.utils=void 0;D.assertNumber=Br;function Br(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function ra(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function gt(...t){let e=s=>s,n=(s,o)=>a=>s(o(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function Et(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(Br(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function Bt(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function ia(t,e="="){if(Br(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function qh(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function Pl(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0,i=[],s=Array.from(t);for(s.forEach(o=>{if(Br(o),o<0||o>=e)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=r;c<s.length;c++){let l=s[c],d=e*o+l;if(!Number.isSafeInteger(d)||e*o/e!==o||d-l!==e*o)throw new Error("convertRadix: carry overflow");o=d%n;let u=Math.floor(d/n);if(s[c]=u,!Number.isSafeInteger(u)||u*n+o!==d)throw new Error("convertRadix: carry overflow");if(a)u?a=!1:r=c;else continue}if(i.push(o),a)break}for(let o=0;o<t.length-1&&t[o]===0;o++)i.push(0);return i.reverse()}var Rh=(t,e)=>e?Rh(e,t%e):t,bc=(t,e)=>t+(e-Rh(t,e));function pc(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(bc(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${bc(e,n)}`);let i=0,s=0,o=2**n-1,a=[];for(let c of t){if(Br(c),c>=2**e)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function Hh(t){return Br(t),{encode:e=>{if(!ra(e))throw new Error("radix.encode input should be Uint8Array");return Pl(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Pl(e,t,2**8))}}}function Lt(t,e=!1){if(Br(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(bc(8,t)>32||bc(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!ra(n))throw new Error("radix2.encode input should be Uint8Array");return pc(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(pc(n,t,8,e))}}}function zh(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}function Ch(t,e){if(Br(t),typeof e!="function")throw new Error("checksum fn should be function");return{encode(n){if(!ra(n))throw new Error("checksum.encode: input should be Uint8Array");let r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!ra(n))throw new Error("checksum.decode: input should be Uint8Array");let r=n.slice(0,-t),i=e(r).slice(0,t),s=n.slice(-t);for(let o=0;o<t;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return r}}}D.utils={alphabet:Et,chain:gt,checksum:Ch,convertRadix:Pl,convertRadix2:pc,radix:Hh,radix2:Lt,join:Bt,padding:ia};D.base16=gt(Lt(4),Et("0123456789ABCDEF"),Bt(""));D.base32=gt(Lt(5),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ia(5),Bt(""));D.base32nopad=gt(Lt(5),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Bt(""));D.base32hex=gt(Lt(5),Et("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ia(5),Bt(""));D.base32hexnopad=gt(Lt(5),Et("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Bt(""));D.base32crockford=gt(Lt(5),Et("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Bt(""),qh(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));D.base64=gt(Lt(6),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ia(6),Bt(""));D.base64nopad=gt(Lt(6),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Bt(""));D.base64url=gt(Lt(6),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ia(6),Bt(""));D.base64urlnopad=gt(Lt(6),Et("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Bt(""));var Nl=t=>gt(Hh(58),Et(t),Bt(""));D.base58=Nl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");D.base58flickr=Nl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");D.base58xrp=Nl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var Nh=[0,2,3,5,6,7,9,10,11];D.base58xmr={encode(t){let e="";for(let n=0;n<t.length;n+=8){let r=t.subarray(n,n+8);e+=D.base58.encode(r).padStart(Nh[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){let r=t.slice(n,n+11),i=Nh.indexOf(r.length),s=D.base58.decode(r);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(e)}};var pm=t=>gt(Ch(4,e=>t(t(e))),D.base58);D.createBase58check=pm;D.base58check=D.createBase58check;var zl=gt(Et("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Bt("")),Oh=[996825010,642813549,513874426,1027748829,705979059];function na(t){let e=t>>25,n=(t&33554431)<<5;for(let r=0;r<Oh.length;r++)(e>>r&1)===1&&(n^=Oh[r]);return n}function Mh(t,e,n=1){let r=t.length,i=1;for(let s=0;s<r;s++){let o=t.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);i=na(i)^o>>5}i=na(i);for(let s=0;s<r;s++)i=na(i)^t.charCodeAt(s)&31;for(let s of e)i=na(i)^s;for(let s=0;s<6;s++)i=na(i);return i^=n,zl.encode(pc([i%2**30],30,5,!1))}function Kh(t){let e=t==="bech32"?1:734539939,n=Lt(5),r=n.decode,i=n.encode,s=zh(r);function o(u,y,m=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(y instanceof Uint8Array&&(y=Array.from(y)),!Array.isArray(y)||y.length&&typeof y[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof y}`);if(u.length===0)throw new TypeError(`Invalid prefix length ${u.length}`);let w=u.length+7+y.length;if(m!==!1&&w>m)throw new TypeError(`Length ${w} exceeds limit ${m}`);let f=u.toLowerCase(),b=Mh(f,y,e);return`${f}1${zl.encode(y)}${b}`}function a(u,y=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||y!==!1&&u.length>y)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${y})`);let m=u.toLowerCase();if(u!==m&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");let w=m.lastIndexOf("1");if(w===0||w===-1)throw new Error('Letter "1" must be present between prefix and data only');let f=m.slice(0,w),b=m.slice(w+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");let _=zl.decode(b).slice(0,-6),p=Mh(f,_,e);if(!b.endsWith(p))throw new Error(`Invalid checksum in ${u}: expected "${p}"`);return{prefix:f,words:_}}let c=zh(a);function l(u){let{prefix:y,words:m}=a(u,!1);return{prefix:y,words:m,bytes:r(m)}}function d(u,y){return o(u,i(y))}return{encode:o,decode:a,encodeFromBytes:d,decodeToBytes:l,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:s,toWords:i}}D.bech32=Kh("bech32");D.bech32m=Kh("bech32m");D.utf8={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)};D.hex=gt(Lt(4),Et("0123456789abcdef"),Bt(""),qh(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));var mc={utf8:D.utf8,hex:D.hex,base16:D.base16,base32:D.base32,base64:D.base64,base64url:D.base64url,base58:D.base58,base58xmr:D.base58xmr},jh="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",mm=(t,e)=>{if(typeof t!="string"||!mc.hasOwnProperty(t))throw new TypeError(jh);if(!ra(e))throw new TypeError("bytesToString() expects Uint8Array");return mc[t].encode(e)};D.bytesToString=mm;D.str=D.bytesToString;var wm=(t,e)=>{if(!mc.hasOwnProperty(t))throw new TypeError(jh);if(typeof e!="string")throw new TypeError("stringToBytes() expects string");return mc[t].decode(e)};D.stringToBytes=wm;D.bytes=D.stringToBytes});var ql=x(vt=>{"use strict";h();g();Object.defineProperty(vt,"__esModule",{value:!0});vt.mnemonicToSeedSync=vt.mnemonicToSeed=vt.validateMnemonic=vt.entropyToMnemonic=vt.mnemonicToEntropy=vt.generateMnemonic=void 0;var Lh=Qo(),Dh=Bh(),_m=vh(),Vh=Ph(),Am=gi(),wc=Ol(),Tm=t=>t[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function kh(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Ml(t){let e=kh(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function Gh(t){Lh.default.bytes(t,16,20,24,28,32)}function Sm(t,e=128){if(Lh.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return Wh((0,Am.randomBytes)(e/8),t)}vt.generateMnemonic=Sm;var Em=t=>{let e=8-t.length/4;return new Uint8Array([(0,_m.sha256)(t)[0]>>e<<e])};function Fh(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),wc.utils.chain(wc.utils.checksum(1,Em),wc.utils.radix2(11,!0),wc.utils.alphabet(t))}function $h(t,e){let{words:n}=Ml(t),r=Fh(e).decode(n);return Gh(r),r}vt.mnemonicToEntropy=$h;function Wh(t,e){return Gh(t),Fh(e).encode(t).join(Tm(e)?"\u3000":" ")}vt.entropyToMnemonic=Wh;function Bm(t,e){try{$h(t,e)}catch{return!1}return!0}vt.validateMnemonic=Bm;var Xh=t=>kh(`mnemonic${t}`);function vm(t,e=""){return(0,Dh.pbkdf2Async)(Vh.sha512,Ml(t).nfkd,Xh(e),{c:2048,dkLen:64})}vt.mnemonicToSeed=vm;function xm(t,e=""){return(0,Dh.pbkdf2)(Vh.sha512,Ml(t).nfkd,Xh(e),{c:2048,dkLen:64})}vt.mnemonicToSeedSync=xm});var Qh=x(Qe=>{"use strict";h();g();var Um=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.derivePath=Qe.isValidPath=Qe.getPublicKey=Qe.CKDPriv=Qe.getMasterKeyFromSeed=void 0;var Im=Um(hh()),Zh=Jo(),Yh=sc(),Pm=Qt(),zm=/^m(\/[0-9]+')+$/,Jh=t=>t.replace("'",""),Nm="ed25519 seed",Om=2147483648,Mm=t=>{let n=Zh.hmac.create(Yh.sha512,Nm).update((0,Pm.hexToBytes)(t)).digest(),r=n.slice(0,32),i=n.slice(32);return{key:r,chainCode:i}};Qe.getMasterKeyFromSeed=Mm;var qm=({key:t,chainCode:e},n)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);let i=new Uint8Array(r),s=new Uint8Array([0]),o=new Uint8Array([...s,...t,...i]),a=Zh.hmac.create(Yh.sha512,e).update(o).digest(),c=a.slice(0,32),l=a.slice(32);return{key:c,chainCode:l}};Qe.CKDPriv=qm;var Rm=(t,e=!0)=>{let r=Im.default.sign.keyPair.fromSeed(t).secretKey.subarray(32),i=new Uint8Array([0]);return e?new Uint8Array([...i,...r]):r};Qe.getPublicKey=Rm;var Hm=t=>zm.test(t)?!t.split("/").slice(1).map(Jh).some(Number.isNaN):!1;Qe.isValidPath=Hm;var Cm=(t,e,n=Om)=>{if(!(0,Qe.isValidPath)(t))throw new Error("Invalid derivation path");let{key:r,chainCode:i}=(0,Qe.getMasterKeyFromSeed)(e);return t.split("/").slice(1).map(Jh).map(o=>parseInt(o,10)).reduce((o,a)=>(0,Qe.CKDPriv)(o,a+n),{key:r,chainCode:i})};Qe.derivePath=Cm});var eg=x(Pn=>{"use strict";h();g();Object.defineProperty(Pn,"__esModule",{value:!0});Pn.APTOS_COIN=Pn.DEFAULT_TXN_TIMEOUT_SEC=Pn.DEFAULT_TXN_EXP_SEC_FROM_NOW=Pn.DEFAULT_MAX_GAS_AMOUNT=void 0;Pn.DEFAULT_MAX_GAS_AMOUNT=2e5;Pn.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;Pn.DEFAULT_TXN_TIMEOUT_SEC=20;Pn.APTOS_COIN="0x1::aptos_coin::AptosCoin"});var rg=x(vr=>{"use strict";h();g();Object.defineProperty(vr,"__esModule",{value:!0});vr.clear=vr.MemoizeExpiring=vr.Memoize=void 0;function ng(t){let e,n,r;return typeof t=="object"?(e=t.hashFunction,n=t.ttlMs,r=t.tags):e=t,(i,s,o)=>{if(o.value!=null)o.value=tg(o.value,e,n,r);else if(o.get!=null)o.get=tg(o.get,e,n,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}vr.Memoize=ng;function Km(t,e){return ng({ttlMs:t,hashFunction:e})}vr.MemoizeExpiring=Km;var _c=new Map;function jm(t){let e=new Set;for(let n of t){let r=_c.get(n);if(r)for(let i of r)e.has(i)||(i.clear(),e.add(i))}return e.size}vr.clear=jm;function tg(t,e,n=0,r){let i=Symbol("__memoized_map__");return function(...s){let o,a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let c=a[i];if(Array.isArray(r))for(let l of r)_c.has(l)?_c.get(l).push(c):_c.set(l,[c]);if(e||s.length>0||n>0){let l;e===!0?l=s.map(y=>y.toString()).join("!"):e?l=e.apply(a,s):l=s[0];let d=`${l}__timestamp`,u=!1;if(n>0)if(!c.has(d))u=!0;else{let y=c.get(d);u=Date.now()-y>n}c.has(l)&&!u?o=c.get(l):(o=t.apply(a,s),c.set(l,o),n>0&&c.set(d,Date.now()))}else{let l=a;c.has(l)?o=c.get(l):(o=t.apply(a,s),c.set(l,o))}return o}}});var Rl=x(xr=>{"use strict";h();g();var Lm=xr&&xr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ig=xr&&xr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Lm(e,t,n)};Object.defineProperty(xr,"__esModule",{value:!0});ig(eg(),xr);ig(rg(),xr)});var oa=x(Ac=>{"use strict";h();g();Object.defineProperty(Ac,"__esModule",{value:!0});Ac.AccountAddress=void 0;var sa=sr(),et=class{constructor(e){if(e.length!==et.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let n=sa.HexString.ensure(e);n.noPrefix().length%2!==0&&(n=new sa.HexString(`0${n.noPrefix()}`));let r=n.toUint8Array();if(r.length>et.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===et.LENGTH)return new et(r);let i=new Uint8Array(et.LENGTH);return i.set(r,et.LENGTH-r.length),new et(i)}static isValid(e){if(e==="")return!1;let n=sa.HexString.ensure(e);return n.noPrefix().length%2!==0&&(n=new sa.HexString(`0${n.noPrefix()}`)),n.toUint8Array().length<=et.LENGTH}toHexString(){return sa.HexString.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new et(e.deserializeFixedBytes(et.LENGTH))}static standardizeAddress(e){let n=e.toLowerCase();return`0x${(n.startsWith("0x")?n.slice(2):n).padStart(64,"0")}`}};Ac.AccountAddress=et;et.LENGTH=32;et.CORE_CODE_ADDRESS=et.fromHex("0x1")});var og=x(sg=>{"use strict";h();g();Object.defineProperty(sg,"__esModule",{value:!0})});var Hl=x(xt=>{"use strict";h();g();Object.defineProperty(xt,"__esModule",{value:!0});xt.MAX_U256_BIG_INT=xt.MAX_U128_BIG_INT=xt.MAX_U64_BIG_INT=xt.MAX_U32_NUMBER=xt.MAX_U16_NUMBER=xt.MAX_U8_NUMBER=void 0;xt.MAX_U8_NUMBER=2**8-1;xt.MAX_U16_NUMBER=2**16-1;xt.MAX_U32_NUMBER=2**32-1;xt.MAX_U64_BIG_INT=BigInt(2**64)-1n;xt.MAX_U128_BIG_INT=BigInt(2**128)-1n;xt.MAX_U256_BIG_INT=BigInt(2**256)-BigInt(1)});var Cl=x(Es=>{"use strict";h();g();var bi=Es&&Es.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(Es,"__esModule",{value:!0});Es.Serializer=void 0;var zn=Hl(),Nn=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,n,r){this.ensureBufferWillHandleSize(n);let i=new DataView(this.buffer,this.offset);e.apply(i,[0,r,!0]),this.offset+=n}serializeStr(e){let n=new TextEncoder;this.serializeBytes(n.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");let n=e?1:0;this.serialize(new Uint8Array([n]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let n=BigInt(e.toString())&BigInt(zn.MAX_U32_NUMBER),r=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(r))}serializeU128(e){let n=BigInt(e.toString())&zn.MAX_U64_BIG_INT,r=BigInt(e.toString())>>BigInt(64);this.serializeU64(n),this.serializeU64(r)}serializeU256(e){let n=BigInt(e.toString())&zn.MAX_U128_BIG_INT,r=BigInt(e.toString())>>BigInt(128);this.serializeU128(n),this.serializeU128(r)}serializeU32AsUleb128(e){let n=e,r=[];for(;n>>>7!==0;)r.push(n&127|128),n>>>=7;r.push(n),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};bi([pi(0,zn.MAX_U8_NUMBER)],Nn.prototype,"serializeU8",null);bi([pi(0,zn.MAX_U16_NUMBER)],Nn.prototype,"serializeU16",null);bi([pi(0,zn.MAX_U32_NUMBER)],Nn.prototype,"serializeU32",null);bi([pi(BigInt(0),zn.MAX_U64_BIG_INT)],Nn.prototype,"serializeU64",null);bi([pi(BigInt(0),zn.MAX_U128_BIG_INT)],Nn.prototype,"serializeU128",null);bi([pi(BigInt(0),zn.MAX_U256_BIG_INT)],Nn.prototype,"serializeU256",null);bi([pi(0,zn.MAX_U32_NUMBER)],Nn.prototype,"serializeU32AsUleb128",null);Es.Serializer=Nn;function pi(t,e,n){return(r,i,s)=>{let o=s.value;return s.value=function(c){let l=BigInt(c.toString());if(l>BigInt(e.toString())||l<BigInt(t.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},s}}});var cg=x(Tc=>{"use strict";h();g();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Deserializer=void 0;var ag=Hl(),Kl=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),n=this.deserializeU32();return BigInt(BigInt(n)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),n=this.deserializeU64();return BigInt(n<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),n=this.deserializeU128();return BigInt(n<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),n=0;for(;e<ag.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(n),(r&128)===0)break;n+=7}if(e>ag.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};Tc.Deserializer=Kl});var ug=x(de=>{"use strict";h();g();Object.defineProperty(de,"__esModule",{value:!0});de.bcsSerializeFixedBytes=de.bcsSerializeBytes=de.bcsSerializeStr=de.bcsSerializeBool=de.bcsSerializeU256=de.bcsSerializeU128=de.bcsSerializeU32=de.bcsSerializeU16=de.bcsSerializeU8=de.bcsSerializeUint64=de.bcsToBytes=de.deserializeVector=de.serializeVectorWithFunc=de.serializeVector=void 0;var rn=Cl();function Dm(t,e){e.serializeU32AsUleb128(t.length),t.forEach(n=>{n.serialize(e)})}de.serializeVector=Dm;function Vm(t,e){let n=new rn.Serializer;n.serializeU32AsUleb128(t.length);let r=n[e];return t.forEach(i=>{r.call(n,i)}),n.getBytes()}de.serializeVectorWithFunc=Vm;function km(t,e){let n=t.deserializeUleb128AsU32(),r=[];for(let i=0;i<n;i+=1)r.push(e.deserialize(t));return r}de.deserializeVector=km;function Gm(t){let e=new rn.Serializer;return t.serialize(e),e.getBytes()}de.bcsToBytes=Gm;function Fm(t){let e=new rn.Serializer;return e.serializeU64(t),e.getBytes()}de.bcsSerializeUint64=Fm;function $m(t){let e=new rn.Serializer;return e.serializeU8(t),e.getBytes()}de.bcsSerializeU8=$m;function Wm(t){let e=new rn.Serializer;return e.serializeU16(t),e.getBytes()}de.bcsSerializeU16=Wm;function Xm(t){let e=new rn.Serializer;return e.serializeU32(t),e.getBytes()}de.bcsSerializeU32=Xm;function Zm(t){let e=new rn.Serializer;return e.serializeU128(t),e.getBytes()}de.bcsSerializeU128=Zm;function Ym(t){let e=new rn.Serializer;return e.serializeU256(t),e.getBytes()}de.bcsSerializeU256=Ym;function Jm(t){let e=new rn.Serializer;return e.serializeBool(t),e.getBytes()}de.bcsSerializeBool=Jm;function Qm(t){let e=new rn.Serializer;return e.serializeStr(t),e.getBytes()}de.bcsSerializeStr=Qm;function ew(t){let e=new rn.Serializer;return e.serializeBytes(t),e.getBytes()}de.bcsSerializeBytes=ew;function tw(t){let e=new rn.Serializer;return e.serializeFixedBytes(t),e.getBytes()}de.bcsSerializeFixedBytes=tw});var Mn=x(On=>{"use strict";h();g();var nw=On&&On.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Sc=On&&On.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&nw(e,t,n)};Object.defineProperty(On,"__esModule",{value:!0});Sc(og(),On);Sc(Cl(),On);Sc(cg(),On);Sc(ug(),On)});var Ec=x(Bs=>{"use strict";h();g();Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Ed25519Signature=Bs.Ed25519PublicKey=void 0;var Ur=class{constructor(e){if(e.length!==Ur.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Ur.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let n=e.deserializeBytes();return new Ur(n)}};Bs.Ed25519PublicKey=Ur;Ur.LENGTH=32;var Ir=class{constructor(e){if(this.value=e,e.length!==Ir.LENGTH)throw new Error(`Ed25519Signature length should be ${Ir.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let n=e.deserializeBytes();return new Ir(n)}};Bs.Ed25519Signature=Ir;Ir.LENGTH=64});var Ll=x(vs=>{"use strict";h();g();Object.defineProperty(vs,"__esModule",{value:!0});vs.MultiEd25519Signature=vs.MultiEd25519PublicKey=void 0;var sn=Ec(),jl=32,aa=class{constructor(e,n){if(this.public_keys=e,this.threshold=n,n>jl)throw new Error(`"threshold" cannot be larger than ${jl}`)}toBytes(){let e=new Uint8Array(this.public_keys.length*sn.Ed25519PublicKey.LENGTH+1);return this.public_keys.forEach((n,r)=>{e.set(n.value,r*sn.Ed25519PublicKey.LENGTH)}),e[this.public_keys.length*sn.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let n=e.deserializeBytes(),r=n[n.length-1],i=[];for(let s=0;s<n.length-1;s+=sn.Ed25519PublicKey.LENGTH){let o=s;i.push(new sn.Ed25519PublicKey(n.subarray(o,o+sn.Ed25519PublicKey.LENGTH)))}return new aa(i,r)}};vs.MultiEd25519PublicKey=aa;var or=class{constructor(e,n){if(this.signatures=e,this.bitmap=n,n.length!==or.BITMAP_LEN)throw new Error(`"bitmap" length should be ${or.BITMAP_LEN}`)}toBytes(){let e=new Uint8Array(this.signatures.length*sn.Ed25519Signature.LENGTH+or.BITMAP_LEN);return this.signatures.forEach((n,r)=>{e.set(n.value,r*sn.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*sn.Ed25519Signature.LENGTH),e}static createBitmap(e){let r=new Uint8Array([0,0,0,0]),i=new Set;return e.forEach(s=>{if(s>=jl)throw new Error(`Invalid bit value ${s}.`);if(i.has(s))throw new Error("Duplicated bits detected.");i.add(s);let o=Math.floor(s/8),a=r[o];a|=128>>s%8,r[o]=a}),r}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let n=e.deserializeBytes(),r=n.subarray(n.length-4),i=[];for(let s=0;s<n.length-r.length;s+=sn.Ed25519Signature.LENGTH){let o=s;i.push(new sn.Ed25519Signature(n.subarray(o,o+sn.Ed25519Signature.LENGTH)))}return new or(i,r)}};vs.MultiEd25519Signature=or;or.BITMAP_LEN=4});var Vl=x(We=>{"use strict";h();g();Object.defineProperty(We,"__esModule",{value:!0});We.AccountAuthenticatorMultiEd25519=We.AccountAuthenticatorEd25519=We.AccountAuthenticator=We.TransactionAuthenticatorFeePayer=We.TransactionAuthenticatorMultiAgent=We.TransactionAuthenticatorMultiEd25519=We.TransactionAuthenticatorEd25519=We.TransactionAuthenticator=void 0;var Pr=Mn(),Dl=oa(),Bc=Ec(),vc=Ll(),mi=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return xs.load(e);case 1:return Us.load(e);case 2:return Is.load(e);case 3:return Ps.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}};We.TransactionAuthenticator=mi;var xs=class extends mi{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=Bc.Ed25519PublicKey.deserialize(e),r=Bc.Ed25519Signature.deserialize(e);return new xs(n,r)}};We.TransactionAuthenticatorEd25519=xs;var Us=class extends mi{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=vc.MultiEd25519PublicKey.deserialize(e),r=vc.MultiEd25519Signature.deserialize(e);return new Us(n,r)}};We.TransactionAuthenticatorMultiEd25519=Us;var Is=class extends mi{constructor(e,n,r){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),(0,Pr.serializeVector)(this.secondary_signer_addresses,e),(0,Pr.serializeVector)(this.secondary_signers,e)}static load(e){let n=qn.deserialize(e),r=(0,Pr.deserializeVector)(e,Dl.AccountAddress),i=(0,Pr.deserializeVector)(e,qn);return new Is(n,r,i)}};We.TransactionAuthenticatorMultiAgent=Is;var Ps=class extends mi{constructor(e,n,r,i){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),(0,Pr.serializeVector)(this.secondary_signer_addresses,e),(0,Pr.serializeVector)(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let n=qn.deserialize(e),r=(0,Pr.deserializeVector)(e,Dl.AccountAddress),i=(0,Pr.deserializeVector)(e,qn),s=Dl.AccountAddress.deserialize(e),o=qn.deserialize(e),a={address:s,authenticator:o};return new Ps(n,r,i,a)}};We.TransactionAuthenticatorFeePayer=Ps;var qn=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return zs.load(e);case 1:return Ns.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}};We.AccountAuthenticator=qn;var zs=class extends qn{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=Bc.Ed25519PublicKey.deserialize(e),r=Bc.Ed25519Signature.deserialize(e);return new zs(n,r)}};We.AccountAuthenticatorEd25519=zs;var Ns=class extends qn{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=vc.MultiEd25519PublicKey.deserialize(e),r=vc.MultiEd25519Signature.deserialize(e);return new Ns(n,r)}};We.AccountAuthenticatorMultiEd25519=Ns});var Uc=x(xc=>{"use strict";h();g();Object.defineProperty(xc,"__esModule",{value:!0});xc.Identifier=void 0;var ca=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){let n=e.deserializeStr();return new ca(n)}};xc.Identifier=ca});var Pc=x(ne=>{"use strict";h();g();Object.defineProperty(ne,"__esModule",{value:!0});ne.TypeTagParserError=ne.TypeTagParser=ne.objectStructTag=ne.optionStructTag=ne.stringStructTag=ne.StructTag=ne.TypeTagStruct=ne.TypeTagVector=ne.TypeTagSigner=ne.TypeTagAddress=ne.TypeTagU256=ne.TypeTagU128=ne.TypeTagU64=ne.TypeTagU32=ne.TypeTagU16=ne.TypeTagU8=ne.TypeTagBool=ne.TypeTag=void 0;var wi=oa(),lg=Mn(),Rn=Uc(),st=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return _i.load(e);case 1:return Ai.load(e);case 2:return Ei.load(e);case 3:return Bi.load(e);case 4:return Nr.load(e);case 5:return Os.load(e);case 6:return xi.load(e);case 7:return Or.load(e);case 8:return Ti.load(e);case 9:return Si.load(e);case 10:return vi.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}};ne.TypeTag=st;var _i=class extends st{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new _i}};ne.TypeTagBool=_i;var Ai=class extends st{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Ai}};ne.TypeTagU8=Ai;var Ti=class extends st{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new Ti}};ne.TypeTagU16=Ti;var Si=class extends st{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new Si}};ne.TypeTagU32=Si;var Ei=class extends st{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Ei}};ne.TypeTagU64=Ei;var Bi=class extends st{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Bi}};ne.TypeTagU128=Bi;var vi=class extends st{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new vi}};ne.TypeTagU256=vi;var Nr=class extends st{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Nr}};ne.TypeTagAddress=Nr;var Os=class extends st{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Os}};ne.TypeTagSigner=Os;var xi=class extends st{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let n=st.deserialize(e);return new xi(n)}};ne.TypeTagVector=xi;var Or=class extends st{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let n=yn.deserialize(e);return new Or(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===wi.AccountAddress.CORE_CODE_ADDRESS.toHexString()}};ne.TypeTagStruct=Or;var yn=class{constructor(e,n,r,i){this.address=e,this.module_name=n,this.name=r,this.type_args=i}static fromString(e){let n=new Ms(e).parseTypeTag();return new yn(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),(0,lg.serializeVector)(this.type_args,e)}static deserialize(e){let n=wi.AccountAddress.deserialize(e),r=Rn.Identifier.deserialize(e),i=Rn.Identifier.deserialize(e),s=(0,lg.deserializeVector)(e,st);return new yn(n,r,i,s)}};ne.StructTag=yn;ne.stringStructTag=new yn(wi.AccountAddress.fromHex("0x1"),new Rn.Identifier("string"),new Rn.Identifier("String"),[]);function rw(t){return new yn(wi.AccountAddress.fromHex("0x1"),new Rn.Identifier("option"),new Rn.Identifier("Option"),[t])}ne.optionStructTag=rw;function iw(t){return new yn(wi.AccountAddress.fromHex("0x1"),new Rn.Identifier("object"),new Rn.Identifier("Object"),[t])}ne.objectStructTag=iw;function zr(t){throw new Ic(t)}function dg(t){return!!t.match(/\s/)}function fg(t){return!!t.match(/[_A-Za-z0-9]/g)}function sw(t){return!!t.match(/T\d+/g)}function ow(t,e){let n=t[e];if(n===":"){if(t.slice(e,e+2)==="::")return[["COLON","::"],2];zr("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(dg(n)){let r="";for(let i=e;i<t.length;i+=1){let s=t[i];if(dg(s))r=`${r}${s}`;else break}return[["SPACE",r],r.length]}else if(fg(n)){let r="";for(let i=e;i<t.length;i+=1){let s=t[i];if(fg(s))r=`${r}${s}`;else break}return sw(r)?[["GENERIC",r],r.length]:[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function aw(t){let e=0,n=[];for(;e<t.length;){let[r,i]=ow(t,e);r[0]!=="SPACE"&&n.push(r),e+=i}return n}var Ms=class{constructor(e,n){this.typeTags=[],this.tokens=aw(e),this.typeTags=n||[]}consume(e){let n=this.tokens.shift();(!n||n[1]!==e)&&zr("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,n){let r=[];for(this.tokens.length<=0&&zr("Invalid type tag.");this.tokens[0][1]!==e&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&n)));)this.tokens.length<=0&&zr("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&zr("Invalid type tag.");let[e,n]=this.tokens.shift();if(n==="u8")return new Ai;if(n==="u16")return new Ti;if(n==="u32")return new Si;if(n==="u64")return new Ei;if(n==="u128")return new Bi;if(n==="u256")return new vi;if(n==="bool")return new _i;if(n==="address")return new Nr;if(n==="vector"){this.consume("<");let r=this.parseTypeTag();return this.consume(">"),new xi(r)}if(n==="string")return new Or(ne.stringStructTag);if(e==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){let r=wi.AccountAddress.fromHex(n);this.consume("::");let[i,s]=this.tokens.shift();i!=="IDENT"&&zr("Invalid type tag."),this.consume("::");let[o,a]=this.tokens.shift();if(o!=="IDENT"&&zr("Invalid type tag."),wi.AccountAddress.CORE_CODE_ADDRESS.toHexString()===r.toHexString()&&s==="object"&&a==="Object")return this.consumeWholeGeneric(),new Nr;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));let l=new yn(r,new Rn.Identifier(s),new Rn.Identifier(a),c);return new Or(l)}if(e==="GENERIC"){this.typeTags.length===0&&zr("Can't convert generic type since no typeTags were specified.");let r=parseInt(n.substring(1),10);return new Ms(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}};ne.TypeTagParser=Ms;var Ic=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}};ne.TypeTagParserError=Ic});var Fl=x(k=>{"use strict";h();g();Object.defineProperty(k,"__esModule",{value:!0});k.UserTransaction=k.Transaction=k.TransactionArgumentBool=k.TransactionArgumentU8Vector=k.TransactionArgumentAddress=k.TransactionArgumentU256=k.TransactionArgumentU128=k.TransactionArgumentU64=k.TransactionArgumentU32=k.TransactionArgumentU16=k.TransactionArgumentU8=k.TransactionArgument=k.ChainId=k.TransactionPayloadMultisig=k.TransactionPayloadEntryFunction=k.TransactionPayloadScript=k.TransactionPayload=k.FeePayerRawTransaction=k.MultiAgentRawTransaction=k.RawTransactionWithData=k.SignedTransaction=k.WriteSet=k.ChangeSet=k.ModuleId=k.Module=k.MultiSig=k.MultiSigTransactionPayload=k.EntryFunction=k.Script=k.RawTransaction=void 0;var hg=_r(),cw=sr(),bn=Mn(),Mr=oa(),uw=Vl(),zc=Uc(),gg=Pc(),qr=class{constructor(e,n,r,i,s,o,a){this.sender=e,this.sequence_number=n,this.payload=r,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let n=Mr.AccountAddress.deserialize(e),r=e.deserializeU64(),i=Ui.deserialize(e),s=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=ks.deserialize(e);return new qr(n,r,i,s,o,a,c)}};k.RawTransaction=qr;var qs=class{constructor(e,n,r){this.code=e,this.ty_args=n,this.args=r}serialize(e){e.serializeBytes(this.code),(0,bn.serializeVector)(this.ty_args,e),(0,bn.serializeVector)(this.args,e)}static deserialize(e){let n=e.deserializeBytes(),r=(0,bn.deserializeVector)(e,gg.TypeTag),i=(0,bn.deserializeVector)(e,Dt);return new qs(n,r,i)}};k.Script=qs;var ar=class{constructor(e,n,r,i){this.module_name=e,this.function_name=n,this.ty_args=r,this.args=i}static natural(e,n,r,i){return new ar(Rr.fromStr(e),new zc.Identifier(n),r,i)}static natual(e,n,r,i){return ar.natural(e,n,r,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),(0,bn.serializeVector)(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{e.serializeBytes(n)})}static deserialize(e){let n=Rr.deserialize(e),r=zc.Identifier.deserialize(e),i=(0,bn.deserializeVector)(e,gg.TypeTag),s=e.deserializeUleb128AsU32(),o=[];for(let c=0;c<s;c+=1)o.push(e.deserializeBytes());let a=o;return new ar(n,r,i,a)}};k.EntryFunction=ar;var Rs=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new Rs(ar.deserialize(e))}};k.MultiSigTransactionPayload=Rs;var Hs=class{constructor(e,n){this.multisig_address=e,this.transaction_payload=n}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let n=Mr.AccountAddress.deserialize(e),r=e.deserializeBool(),i;return r&&(i=Rs.deserialize(e)),new Hs(n,i)}};k.MultiSig=Hs;var ua=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){let n=e.deserializeBytes();return new ua(n)}};k.Module=ua;var Rr=class{constructor(e,n){this.address=e,this.name=n}static fromStr(e){let n=e.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new Rr(Mr.AccountAddress.fromHex(new cw.HexString(n[0])),new zc.Identifier(n[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let n=Mr.AccountAddress.deserialize(e),r=zc.Identifier.deserialize(e);return new Rr(n,r)}};k.ModuleId=Rr;var kl=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}};k.ChangeSet=kl;var Gl=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}};k.WriteSet=Gl;var Cs=class{constructor(e,n){this.raw_txn=e,this.authenticator=n}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let n=qr.deserialize(e),r=uw.TransactionAuthenticator.deserialize(e);return new Cs(n,r)}};k.SignedTransaction=Cs;var la=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return Ks.load(e);case 1:return js.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}};k.RawTransactionWithData=la;var Ks=class extends la{constructor(e,n){super(),this.raw_txn=e,this.secondary_signer_addresses=n}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),(0,bn.serializeVector)(this.secondary_signer_addresses,e)}static load(e){let n=qr.deserialize(e),r=(0,bn.deserializeVector)(e,Mr.AccountAddress);return new Ks(n,r)}};k.MultiAgentRawTransaction=Ks;var js=class extends la{constructor(e,n,r){super(),this.raw_txn=e,this.secondary_signer_addresses=n,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),(0,bn.serializeVector)(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){let n=qr.deserialize(e),r=(0,bn.deserializeVector)(e,Mr.AccountAddress),i=Mr.AccountAddress.deserialize(e);return new js(n,r,i)}};k.FeePayerRawTransaction=js;var Ui=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return Ls.load(e);case 2:return Ds.load(e);case 3:return Vs.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}};k.TransactionPayload=Ui;var Ls=class extends Ui{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){let n=qs.deserialize(e);return new Ls(n)}};k.TransactionPayloadScript=Ls;var Ds=class extends Ui{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){let n=ar.deserialize(e);return new Ds(n)}};k.TransactionPayloadEntryFunction=Ds;var Vs=class extends Ui{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let n=Hs.deserialize(e);return new Vs(n)}};k.TransactionPayloadMultisig=Vs;var ks=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){let n=e.deserializeU8();return new ks(n)}};k.ChainId=ks;var Dt=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return Gs.load(e);case 1:return Ws.load(e);case 2:return Xs.load(e);case 3:return Ys.load(e);case 4:return Js.load(e);case 5:return Qs.load(e);case 6:return Fs.load(e);case 7:return $s.load(e);case 8:return Zs.load(e);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}};k.TransactionArgument=Dt;var Gs=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){let n=e.deserializeU8();return new Gs(n)}};k.TransactionArgumentU8=Gs;var Fs=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){let n=e.deserializeU16();return new Fs(n)}};k.TransactionArgumentU16=Fs;var $s=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){let n=e.deserializeU32();return new $s(n)}};k.TransactionArgumentU32=$s;var Ws=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){let n=e.deserializeU64();return new Ws(n)}};k.TransactionArgumentU64=Ws;var Xs=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){let n=e.deserializeU128();return new Xs(n)}};k.TransactionArgumentU128=Xs;var Zs=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){let n=e.deserializeU256();return new Zs(n)}};k.TransactionArgumentU256=Zs;var Ys=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let n=Mr.AccountAddress.deserialize(e);return new Ys(n)}};k.TransactionArgumentAddress=Ys;var Js=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){let n=e.deserializeBytes();return new Js(n)}};k.TransactionArgumentU8Vector=Js;var Qs=class extends Dt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){let n=e.deserializeBool();return new Qs(n)}};k.TransactionArgumentBool=Qs;var Nc=class{getHashSalt(){let e=hg.sha3_256.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return eo.load(e);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}};k.Transaction=Nc;var eo=class extends Nc{constructor(e){super(),this.value=e}hash(){let e=hg.sha3_256.create();return e.update(this.getHashSalt()),e.update((0,bn.bcsToBytes)(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new eo(Cs.deserialize(e))}};k.UserTransaction=eo});var bg=x(Oc=>{"use strict";h();g();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.AuthenticationKey=void 0;var lw=sr(),yg=_r(),Vt=class{constructor(e){if(e.length!==Vt.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){let n=e.toBytes(),r=new Uint8Array(n.length+1);r.set(n),r.set([Vt.MULTI_ED25519_SCHEME],n.length);let i=yg.sha3_256.create();return i.update(r),new Vt(i.digest())}static fromEd25519PublicKey(e){let n=e.value,r=new Uint8Array(n.length+1);r.set(n),r.set([Vt.ED25519_SCHEME],n.length);let i=yg.sha3_256.create();return i.update(r),new Vt(i.digest())}derivedAddress(){return lw.HexString.fromUint8Array(this.bytes)}};Oc.AuthenticationKey=Vt;Vt.LENGTH=32;Vt.MULTI_ED25519_SCHEME=1;Vt.ED25519_SCHEME=0;Vt.DERIVE_RESOURCE_ACCOUNT_SCHEME=255});var Cr=x(Ut=>{"use strict";h();g();var dw=Ut&&Ut.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Hr=Ut&&Ut.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dw(e,t,n)};Object.defineProperty(Ut,"__esModule",{value:!0});Hr(oa(),Ut);Hr(Vl(),Ut);Hr(Fl(),Ut);Hr(Pc(),Ut);Hr(Uc(),Ut);Hr(Ec(),Ut);Hr(Ll(),Ut);Hr(bg(),Ut)});var $l=x(ot=>{"use strict";h();g();var fw=ot&&ot.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hw=ot&&ot.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gw=ot&&ot.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},yw=ot&&ot.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&fw(e,t,n);return hw(e,t),e},bw=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ot,"__esModule",{value:!0});ot.getAddressFromAccountOrAddress=ot.AptosAccount=void 0;var pn=sr(),Mc=bw(hh()),pw=yw(ql()),mw=Qt(),ww=ic(),_w=_r(),Aw=Qh(),Tw=Rl(),qc=Cr(),Sw=Mn(),Ew=_p(),Hn=class{static fromAptosAccountObject(e){return new Hn(pn.HexString.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromPrivateKey(e){return new Hn(e.toUint8Array())}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,n){if(!Hn.isValidPath(e))throw new Error("Invalid derivation path");let r=n.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:i}=(0,Aw.derivePath)(e,(0,mw.bytesToHex)(pw.mnemonicToSeedSync(r)));return new Hn(i)}constructor(e,n){if(!e||e.length!==32&&e.length!==64)throw new Error("invalid key");e?this.signingKey=Mc.default.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Mc.default.sign.keyPair(),this.accountAddress=pn.HexString.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){let e=new qc.Ed25519PublicKey(this.signingKey.publicKey);return qc.AuthenticationKey.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,n){let r=(0,Sw.bcsToBytes)(qc.AccountAddress.fromHex(e)),i=new Uint8Array([...r,...n,qc.AuthenticationKey.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=_w.sha3_256.create();return s.update(i),pn.HexString.fromUint8Array(s.digest())}static getCollectionID(e,n){let r=new Ew.TextEncoder().encode(`${e}::${n}`),i=ww.sha256.create();return i.update(r),pn.HexString.fromUint8Array(i.digest())}pubKey(){return pn.HexString.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){let n=Mc.default.sign.detached(e,this.signingKey.secretKey);return pn.HexString.fromUint8Array(n)}signHexString(e){let n=pn.HexString.ensure(e).toUint8Array();return this.signBuffer(n)}verifySignature(e,n){let r=pn.HexString.ensure(e).toUint8Array(),i=pn.HexString.ensure(n).toUint8Array();return Mc.default.sign.detached.verify(r,i,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:pn.HexString.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};gw([(0,Tw.Memoize)()],Hn.prototype,"authKey",null);ot.AptosAccount=Hn;function Bw(t){return t instanceof Hn?t.address():pn.HexString.ensure(t)}ot.getAddressFromAccountOrAddress=Bw});var pg=x(on=>{"use strict";h();g();Object.defineProperty(on,"__esModule",{value:!0});on.EntryFunctionABI=on.TransactionScriptABI=on.ScriptABI=on.ArgumentABI=on.TypeArgumentABI=void 0;var Kr=Mn(),vw=Fl(),xw=Pc(),Ii=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){let n=e.deserializeStr();return new Ii(n)}};on.TypeArgumentABI=Ii;var Pi=class{constructor(e,n){this.name=e,this.type_tag=n}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){let n=e.deserializeStr(),r=xw.TypeTag.deserialize(e);return new Pi(n,r)}};on.ArgumentABI=Pi;var da=class{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return to.load(e);case 1:return no.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}};on.ScriptABI=da;var to=class extends da{constructor(e,n,r,i,s){super(),this.name=e,this.doc=n,this.code=r,this.ty_args=i,this.args=s}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),(0,Kr.serializeVector)(this.ty_args,e),(0,Kr.serializeVector)(this.args,e)}static load(e){let n=e.deserializeStr(),r=e.deserializeStr(),i=e.deserializeBytes(),s=(0,Kr.deserializeVector)(e,Ii),o=(0,Kr.deserializeVector)(e,Pi);return new to(n,r,i,s,o)}};on.TransactionScriptABI=to;var no=class extends da{constructor(e,n,r,i,s){super(),this.name=e,this.module_name=n,this.doc=r,this.ty_args=i,this.args=s}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),(0,Kr.serializeVector)(this.ty_args,e),(0,Kr.serializeVector)(this.args,e)}static load(e){let n=e.deserializeStr(),r=vw.ModuleId.deserialize(e),i=e.deserializeStr(),s=(0,Kr.deserializeVector)(e,Ii),o=(0,Kr.deserializeVector)(e,Pi);return new no(n,r,i,s,o)}};on.EntryFunctionABI=no});var wg=x(an=>{"use strict";h();g();Object.defineProperty(an,"__esModule",{value:!0});an.argToTransactionArgument=an.serializeArg=an.ensureBigInt=an.ensureNumber=an.ensureBoolean=void 0;var Rc=sr(),ce=Cr();function Hc(t,e,n){if(!e?.includes(typeof t))throw new Error(n||`Invalid arg: ${t} type should be ${e instanceof Array?e.join(" or "):e}`)}function Wl(t){if(Hc(t,["boolean","string"]),typeof t=="boolean")return t;if(t==="true")return!0;if(t==="false")return!1;throw new Error("Invalid boolean string.")}an.ensureBoolean=Wl;function zi(t){if(Hc(t,["number","string"]),typeof t=="number")return t;let e=Number.parseInt(t,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}an.ensureNumber=zi;function Ni(t){return Hc(t,["number","bigint","string"]),BigInt(t)}an.ensureBigInt=Ni;function Uw(t,e,n){Xl(t,e,n,0)}an.serializeArg=Uw;function Xl(t,e,n,r){if(e instanceof ce.TypeTagBool)n.serializeBool(Wl(t));else if(e instanceof ce.TypeTagU8)n.serializeU8(zi(t));else if(e instanceof ce.TypeTagU16)n.serializeU16(zi(t));else if(e instanceof ce.TypeTagU32)n.serializeU32(zi(t));else if(e instanceof ce.TypeTagU64)n.serializeU64(Ni(t));else if(e instanceof ce.TypeTagU128)n.serializeU128(Ni(t));else if(e instanceof ce.TypeTagU256)n.serializeU256(Ni(t));else if(e instanceof ce.TypeTagAddress)mg(t,n);else if(e instanceof ce.TypeTagVector)Iw(t,e,n,r);else if(e instanceof ce.TypeTagStruct)Pw(t,e,n,r);else throw new Error("Unsupported arg type.")}function mg(t,e){let n;if(typeof t=="string"||t instanceof Rc.HexString)n=ce.AccountAddress.fromHex(t);else if(t instanceof ce.AccountAddress)n=t;else throw new Error("Invalid account address.");n.serialize(e)}function Iw(t,e,n,r){if(e.value instanceof ce.TypeTagU8){if(t instanceof Uint8Array){n.serializeBytes(t);return}if(t instanceof Rc.HexString){n.serializeBytes(t.toUint8Array());return}if(typeof t=="string"){n.serializeStr(t);return}}if(!Array.isArray(t))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(t.length),t.forEach(i=>Xl(i,e.value,n,r+1))}function Pw(t,e,n,r){let{address:i,module_name:s,name:o,type_args:a}=e.value,c=`${Rc.HexString.fromUint8Array(i.address).toShortString()}::${s.value}::${o.value}`;if(c==="0x1::string::String")Hc(t,["string"]),n.serializeStr(t);else if(c==="0x1::object::Object")mg(t,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);zw(t,a[0],n,r)}else throw new Error("Unsupported struct type in function argument")}function zw(t,e,n,r){t==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),Xl(t,e,n,r+1))}function Nw(t,e){if(e instanceof ce.TypeTagBool)return new ce.TransactionArgumentBool(Wl(t));if(e instanceof ce.TypeTagU8)return new ce.TransactionArgumentU8(zi(t));if(e instanceof ce.TypeTagU16)return new ce.TransactionArgumentU16(zi(t));if(e instanceof ce.TypeTagU32)return new ce.TransactionArgumentU32(zi(t));if(e instanceof ce.TypeTagU64)return new ce.TransactionArgumentU64(Ni(t));if(e instanceof ce.TypeTagU128)return new ce.TransactionArgumentU128(Ni(t));if(e instanceof ce.TypeTagU256)return new ce.TransactionArgumentU256(Ni(t));if(e instanceof ce.TypeTagAddress){let n;if(typeof t=="string"||t instanceof Rc.HexString)n=ce.AccountAddress.fromHex(t);else if(t instanceof ce.AccountAddress)n=t;else throw new Error("Invalid account address.");return new ce.TransactionArgumentAddress(n)}if(e instanceof ce.TypeTagVector&&e.value instanceof ce.TypeTagU8){if(!(t instanceof Uint8Array))throw new Error(`${t} should be an instance of Uint8Array`);return new ce.TransactionArgumentU8Vector(t)}throw new Error("Unknown type for TransactionArgument.")}an.argToTransactionArgument=Nw});var Eg=x(It=>{"use strict";h();g();Object.defineProperty(It,"__esModule",{value:!0});It.buildRawTransactionByABI=It.fetchABI=It.TransactionBuilderABI=It.TransactionBuilderMultiEd25519=It.TransactionBuilderEd25519=It.TransactionBuilder=void 0;var Ow=_r(),tt=Cr(),ro=Mn(),Mw=sr(),Oi=pg(),_g=wg(),Tg=Cr(),Ag=Rl(),qw="APTOS::RawTransaction",Rw="APTOS::RawTransactionWithData",Mi=class{constructor(e,n){this.rawTxnBuilder=n,this.signingFunction=e}build(e,n,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,n,r)}static getSigningMessage(e){let n=Ow.sha3_256.create();if(e instanceof tt.RawTransaction)n.update(qw);else if(e instanceof tt.MultiAgentRawTransaction)n.update(Rw);else throw new Error("Unknown transaction type.");let r=n.digest(),i=(0,ro.bcsToBytes)(e),s=new Uint8Array(r.length+i.length);return s.set(r),s.set(i,r.length),s}};It.TransactionBuilder=Mi;var Zl=class extends Mi{constructor(e,n,r){super(e,r),this.publicKey=n}rawToSigned(e){let n=Mi.getSigningMessage(e),r=this.signingFunction(n),i=new tt.TransactionAuthenticatorEd25519(new tt.Ed25519PublicKey(this.publicKey),r);return new tt.SignedTransaction(e,i)}sign(e){return(0,ro.bcsToBytes)(this.rawToSigned(e))}};It.TransactionBuilderEd25519=Zl;var Yl=class extends Mi{constructor(e,n){super(e),this.publicKey=n}rawToSigned(e){let n=Mi.getSigningMessage(e),r=this.signingFunction(n),i=new tt.TransactionAuthenticatorMultiEd25519(this.publicKey,r);return new tt.SignedTransaction(e,i)}sign(e){return(0,ro.bcsToBytes)(this.rawToSigned(e))}};It.TransactionBuilderMultiEd25519=Yl;var qi=class{constructor(e,n){this.abiMap=new Map,e.forEach(r=>{let i=new ro.Deserializer(r),s=Oi.ScriptABI.deserialize(i),o;if(s instanceof Oi.EntryFunctionABI){let a=s,{address:c,name:l}=a.module_name;o=`${Mw.HexString.fromUint8Array(c.address).toShortString()}::${l.value}::${a.name}`}else o=s.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,s)}),this.builderConfig={maxGasAmount:BigInt(Ag.DEFAULT_MAX_GAS_AMOUNT),expSecFromNow:Ag.DEFAULT_TXN_EXP_SEC_FROM_NOW,...n}}static toBCSArgs(e,n){if(e.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((r,i)=>{let s=new ro.Serializer;return(0,_g.serializeArg)(r,e[i].type_tag,s),s.getBytes()})}static toTransactionArguments(e,n){if(e.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((r,i)=>(0,_g.argToTransactionArgument)(r,e[i].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,n,r){let i=n.map(a=>new Tg.TypeTagParser(a).parseTypeTag()),s;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);let o=this.abiMap.get(e);if(o instanceof Oi.EntryFunctionABI){let a=o,c=qi.toBCSArgs(a.args,r);s=new tt.TransactionPayloadEntryFunction(new tt.EntryFunction(a.module_name,new tt.Identifier(a.name),i,c))}else if(o instanceof Oi.TransactionScriptABI){let a=o,c=qi.toTransactionArguments(a.args,r);s=new tt.TransactionPayloadScript(new tt.Script(a.code,i,c))}else throw new Error("Unknown ABI format.");return s}build(e,n,r){let{sender:i,sequenceNumber:s,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:l}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");let d=i instanceof tt.AccountAddress?i:tt.AccountAddress.fromHex(i),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),y=this.buildTransactionPayload(e,n,r);if(y)return new tt.RawTransaction(d,BigInt(s),y,BigInt(a),BigInt(o),u,new tt.ChainId(Number(l)));throw new Error("Invalid ABI.")}};It.TransactionBuilderABI=qi;function Sg(t){let e=t.map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${r.address}::${r.name}::${i.name}`,...i}))),n=new Map;return e.forEach(r=>{n.set(r.fullName,r)}),n}It.fetchABI=Sg;function Hw(t,e,n,r,i){if(n=(f=>f.replace(/^0[xX]0*/g,"0x"))(n),n.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");let[a,c]=n.split("::"),l=Sg(t);if(!l.has(n))throw new Error(`${n} doesn't exist.`);let d=l.get(n);if(!d)throw Error("abi miss");let y=d.params.filter(f=>f!=="signer"&&f!=="&signer").map((f,b)=>new Oi.ArgumentABI(`var${b}`,new Tg.TypeTagParser(f,r).parseTypeTag())),m=new Oi.EntryFunctionABI(d.name,tt.ModuleId.fromStr(`${a}::${c}`),"",d.generic_type_params.map((f,b)=>new Oi.TypeArgumentABI(`${b}`)),y);return new qi([(0,ro.bcsToBytes)(m)],e).build(n,r,i)}It.buildRawTransactionByABI=Hw});var Bg=x(fa=>{"use strict";h();g();Object.defineProperty(fa,"__esModule",{value:!0});fa.MoveFunctionVisibility=void 0;var Cw;(function(t){t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend"})(Cw=fa.MoveFunctionVisibility||(fa.MoveFunctionVisibility={}))});var Ql=x(nt=>{"use strict";h();g();var vg=nt&&nt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Kw=nt&&nt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jw=nt&&nt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&vg(e,t,n)},Jl=nt&&nt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&vg(e,t,n);return Kw(e,t),e};Object.defineProperty(nt,"__esModule",{value:!0});nt.MoveTypes=nt.TxnBuilderTypes=nt.BCS=void 0;jw(Eg(),nt);nt.BCS=Jl(Mn());nt.TxnBuilderTypes=Jl(Cr());nt.MoveTypes=Jl(Bg())});var Cc=x(Pt=>{"use strict";h();g();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.MAX_U256_BIG_INT=Pt.MAX_U128_BIG_INT=Pt.MAX_U64_BIG_INT=Pt.MAX_U32_NUMBER=Pt.MAX_U16_NUMBER=Pt.MAX_U8_NUMBER=void 0;Pt.MAX_U8_NUMBER=255;Pt.MAX_U16_NUMBER=65535;Pt.MAX_U32_NUMBER=4294967295;Pt.MAX_U64_BIG_INT=18446744073709551615n;Pt.MAX_U128_BIG_INT=340282366920938463463374607431768211455n;Pt.MAX_U256_BIG_INT=115792089237316195423570985008687907853269984665640564039457584007913129639935n});var Ug=x(Kc=>{"use strict";h();g();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.Deserializer=void 0;var xg=Cc(),ed=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),n=this.deserializeU32();return BigInt(BigInt(n)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),n=this.deserializeU64();return BigInt(n<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),n=this.deserializeU128();return BigInt(n<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),n=0;for(;e<xg.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(n),(r&128)===0)break;n+=7}if(e>xg.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let n=this.deserializeUleb128AsU32(),r=new Array;for(let i=0;i<n;i+=1)r.push(this.deserialize(e));return r}};Kc.Deserializer=ed});var Lc=x(jc=>{"use strict";h();g();Object.defineProperty(jc,"__esModule",{value:!0});jc.ParsingError=void 0;var td=class extends Error{constructor(e,n){super(e),this.invalidReason=n}};jc.ParsingError=td});var mn=x(Ri=>{"use strict";h();g();Object.defineProperty(Ri,"__esModule",{value:!0});Ri.Hex=Ri.HexInvalidReason=void 0;var Ig=Qt(),nd=Lc(),Dc;(function(t){t.TOO_SHORT="too_short",t.INVALID_LENGTH="invalid_length",t.INVALID_HEX_CHARS="invalid_hex_chars"})(Dc=Ri.HexInvalidReason||(Ri.HexInvalidReason={}));var jr=class{constructor(e){this.data=e}toUint8Array(){return this.data}toStringWithoutPrefix(){return(0,Ig.bytesToHex)(this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromHexString(e){let n=e;if(n.startsWith("0x")&&(n=n.slice(2)),n.length===0)throw new nd.ParsingError("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.",Dc.TOO_SHORT);if(n.length%2!==0)throw new nd.ParsingError("Hex string must be an even number of hex characters.",Dc.INVALID_LENGTH);try{return new jr((0,Ig.hexToBytes)(n))}catch(r){throw new nd.ParsingError(`Hex string contains invalid hex characters: ${r?.message}`,Dc.INVALID_HEX_CHARS)}}static fromHexInput(e){return e instanceof Uint8Array?new jr(e):jr.fromHexString(e)}static isValid(e){try{return jr.fromHexString(e),{valid:!0}}catch(n){return{valid:!1,invalidReason:n?.invalidReason,invalidReasonMessage:n?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((n,r)=>n===e.data[r])}};Ri.Hex=jr});var De=x(yt=>{"use strict";h();g();var Hi=yt&&yt.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(yt,"__esModule",{value:!0});yt.validateNumberInRange=yt.outOfRangeErrorMessage=yt.ensureBoolean=yt.Serializer=yt.Serializable=void 0;var Cn=Cc(),Lw=mn(),rd=class{bcsToBytes(){let e=new wn;return this.serialize(e),e.toUint8Array()}bcsToHex(){let e=this.bcsToBytes();return Lw.Hex.fromHexInput(e)}};yt.Serializable=rd;var wn=class{constructor(e=64){if(e<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(e),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}appendToBuffer(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,n,r){this.ensureBufferWillHandleSize(n);let i=new DataView(this.buffer,this.offset);e.apply(i,[0,r,!0]),this.offset+=n}serializeStr(e){let n=new TextEncoder;this.serializeBytes(n.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.appendToBuffer(e)}serializeFixedBytes(e){this.appendToBuffer(e)}serializeBool(e){Pg(e);let n=e?1:0;this.appendToBuffer(new Uint8Array([n]))}serializeU8(e){this.appendToBuffer(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let n=BigInt(e)&BigInt(Cn.MAX_U32_NUMBER),r=BigInt(e)>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(r))}serializeU128(e){let n=BigInt(e)&Cn.MAX_U64_BIG_INT,r=BigInt(e)>>BigInt(64);this.serializeU64(n),this.serializeU64(r)}serializeU256(e){let n=BigInt(e)&Cn.MAX_U128_BIG_INT,r=BigInt(e)>>BigInt(128);this.serializeU128(n),this.serializeU128(r)}serializeU32AsUleb128(e){let n=e,r=[];for(;n>>>7!==0;)r.push(n&127|128),n>>>=7;r.push(n),this.appendToBuffer(new Uint8Array(r))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(e){e.serialize(this)}serializeVector(e){this.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(this)})}};Hi([Ci(0,Cn.MAX_U8_NUMBER)],wn.prototype,"serializeU8",null);Hi([Ci(0,Cn.MAX_U16_NUMBER)],wn.prototype,"serializeU16",null);Hi([Ci(0,Cn.MAX_U32_NUMBER)],wn.prototype,"serializeU32",null);Hi([Ci(BigInt(0),Cn.MAX_U64_BIG_INT)],wn.prototype,"serializeU64",null);Hi([Ci(BigInt(0),Cn.MAX_U128_BIG_INT)],wn.prototype,"serializeU128",null);Hi([Ci(BigInt(0),Cn.MAX_U256_BIG_INT)],wn.prototype,"serializeU256",null);Hi([Ci(0,Cn.MAX_U32_NUMBER)],wn.prototype,"serializeU32AsUleb128",null);yt.Serializer=wn;function Pg(t){if(typeof t!="boolean")throw new Error(`${t} is not a boolean value`)}yt.ensureBoolean=Pg;var Dw=(t,e,n)=>`${t} is out of range: [${e}, ${n}]`;yt.outOfRangeErrorMessage=Dw;function zg(t,e,n){let r=BigInt(t);if(r>BigInt(n)||r<BigInt(e))throw new Error((0,yt.outOfRangeErrorMessage)(t,e,n))}yt.validateNumberInRange=zg;function Ci(t,e){return(n,r,i)=>{let s=i.value;return i.value=function(a){return zg(a,t,e),s.apply(this,[a])},i}}});var id=x(Vc=>{"use strict";h();g();Object.defineProperty(Vc,"__esModule",{value:!0});Vc.FixedBytes=void 0;var Vw=De(),kw=mn(),ha=class extends Vw.Serializable{constructor(e){super(),this.value=kw.Hex.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,n){let r=e.deserializeFixedBytes(n);return new ha(r)}};Vc.FixedBytes=ha});var sd=x(kc=>{"use strict";h();g();Object.defineProperty(kc,"__esModule",{value:!0});kc.EntryFunctionBytes=void 0;var Gw=De(),Ng=id(),ga=class extends Gw.Serializable{constructor(e){super(),this.value=new Ng.FixedBytes(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,n){let r=Ng.FixedBytes.deserialize(e,n);return new ga(r.value)}};kc.EntryFunctionBytes=ga});var Mg=x(Og=>{"use strict";h();g();Object.defineProperty(Og,"__esModule",{value:!0})});var Xe=x(R=>{"use strict";h();g();var Fw=R&&R.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$w=R&&R.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Fw(e,t,n)};Object.defineProperty(R,"__esModule",{value:!0});R.DeriveScheme=R.SigningSchemeInput=R.SigningScheme=R.RoleType=R.MoveAbility=R.MoveFunctionVisibility=R.isMultiEd25519Signature=R.isFeePayerSignature=R.isMultiAgentSignature=R.isSecp256k1Signature=R.isEd25519Signature=R.isStateCheckpointTransactionResponse=R.isBlockMetadataTransactionResponse=R.isGenesisTransactionResponse=R.isUserTransactionResponse=R.isPendingTransactionResponse=R.TransactionResponseType=R.AnySignatureVariant=R.AnyPublicKeyVariant=R.AccountAuthenticatorVariant=R.TransactionAuthenticatorVariant=R.TransactionVariants=R.TransactionPayloadVariants=R.ScriptTransactionArgumentVariants=R.TypeTagVariants=R.MimeType=void 0;$w(Mg(),R);var Ww;(function(t){t.JSON="application/json",t.BCS="application/x-bcs",t.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs"})(Ww=R.MimeType||(R.MimeType={}));var Xw;(function(t){t[t.Bool=0]="Bool",t[t.U8=1]="U8",t[t.U64=2]="U64",t[t.U128=3]="U128",t[t.Address=4]="Address",t[t.Signer=5]="Signer",t[t.Vector=6]="Vector",t[t.Struct=7]="Struct",t[t.U16=8]="U16",t[t.U32=9]="U32",t[t.U256=10]="U256",t[t.Reference=254]="Reference",t[t.Generic=255]="Generic"})(Xw=R.TypeTagVariants||(R.TypeTagVariants={}));var Zw;(function(t){t[t.U8=0]="U8",t[t.U64=1]="U64",t[t.U128=2]="U128",t[t.Address=3]="Address",t[t.U8Vector=4]="U8Vector",t[t.Bool=5]="Bool",t[t.U16=6]="U16",t[t.U32=7]="U32",t[t.U256=8]="U256"})(Zw=R.ScriptTransactionArgumentVariants||(R.ScriptTransactionArgumentVariants={}));var Yw;(function(t){t[t.Script=0]="Script",t[t.EntryFunction=2]="EntryFunction",t[t.Multisig=3]="Multisig"})(Yw=R.TransactionPayloadVariants||(R.TransactionPayloadVariants={}));var Jw;(function(t){t[t.MultiAgentTransaction=0]="MultiAgentTransaction",t[t.FeePayerTransaction=1]="FeePayerTransaction"})(Jw=R.TransactionVariants||(R.TransactionVariants={}));var Qw;(function(t){t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.MultiAgent=2]="MultiAgent",t[t.FeePayer=3]="FeePayer",t[t.SingleSender=4]="SingleSender"})(Qw=R.TransactionAuthenticatorVariant||(R.TransactionAuthenticatorVariant={}));var e1;(function(t){t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey"})(e1=R.AccountAuthenticatorVariant||(R.AccountAuthenticatorVariant={}));var t1;(function(t){t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1"})(t1=R.AnyPublicKeyVariant||(R.AnyPublicKeyVariant={}));var n1;(function(t){t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1"})(n1=R.AnySignatureVariant||(R.AnySignatureVariant={}));var io;(function(t){t.Pending="pending_transaction",t.User="user_transaction",t.Genesis="genesis_transaction",t.BlockMetadata="block_metadata_transaction",t.StateCheckpoint="state_checkpoint_transaction"})(io=R.TransactionResponseType||(R.TransactionResponseType={}));function r1(t){return t.type===io.Pending}R.isPendingTransactionResponse=r1;function i1(t){return t.type===io.User}R.isUserTransactionResponse=i1;function s1(t){return t.type===io.Genesis}R.isGenesisTransactionResponse=s1;function o1(t){return t.type===io.BlockMetadata}R.isBlockMetadataTransactionResponse=o1;function a1(t){return t.type===io.StateCheckpoint}R.isStateCheckpointTransactionResponse=a1;function c1(t){return"signature"in t&&t.signature==="ed25519_signature"}R.isEd25519Signature=c1;function u1(t){return"signature"in t&&t.signature==="secp256k1_ecdsa_signature"}R.isSecp256k1Signature=u1;function l1(t){return t.type==="multi_agent_signature"}R.isMultiAgentSignature=l1;function d1(t){return t.type==="fee_payer_signature"}R.isFeePayerSignature=d1;function f1(t){return t.type==="multi_ed25519_signature"}R.isMultiEd25519Signature=f1;var h1;(function(t){t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend"})(h1=R.MoveFunctionVisibility||(R.MoveFunctionVisibility={}));var g1;(function(t){t.STORE="store",t.DROP="drop",t.KEY="key",t.COPY="copy"})(g1=R.MoveAbility||(R.MoveAbility={}));var y1;(function(t){t.VALIDATOR="validator",t.FULL_NODE="full_node"})(y1=R.RoleType||(R.RoleType={}));var b1;(function(t){t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey"})(b1=R.SigningScheme||(R.SigningScheme={}));var p1;(function(t){t[t.Ed25519=0]="Ed25519",t[t.Secp256k1Ecdsa=2]="Secp256k1Ecdsa"})(p1=R.SigningSchemeInput||(R.SigningSchemeInput={}));var m1;(function(t){t[t.DeriveAuid=251]="DeriveAuid",t[t.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",t[t.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",t[t.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",t[t.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress"})(m1=R.DeriveScheme||(R.DeriveScheme={}))});var Gc=x(at=>{"use strict";h();g();Object.defineProperty(at,"__esModule",{value:!0});at.U256=at.U128=at.U64=at.U32=at.U16=at.U8=at.Bool=void 0;var so=Cc(),zt=De(),Ki=Xe(),ya=class extends zt.Serializable{constructor(e){super(),(0,zt.ensureBoolean)(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.Bool),e.serialize(this)}static deserialize(e){return new ya(e.deserializeBool())}};at.Bool=ya;var ba=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,0,so.MAX_U8_NUMBER),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U8),e.serialize(this)}static deserialize(e){return new ba(e.deserializeU8())}};at.U8=ba;var pa=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,0,so.MAX_U16_NUMBER),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U16),e.serialize(this)}static deserialize(e){return new pa(e.deserializeU16())}};at.U16=pa;var ma=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,0,so.MAX_U32_NUMBER),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U32),e.serialize(this)}static deserialize(e){return new ma(e.deserializeU32())}};at.U32=ma;var wa=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,BigInt(0),so.MAX_U64_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U64),e.serialize(this)}static deserialize(e){return new wa(e.deserializeU64())}};at.U64=wa;var _a=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,BigInt(0),so.MAX_U128_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U128),e.serialize(this)}static deserialize(e){return new _a(e.deserializeU128())}};at.U128=_a;var Aa=class extends zt.Serializable{constructor(e){super(),(0,zt.validateNumberInRange)(e,BigInt(0),so.MAX_U256_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Ki.ScriptTransactionArgumentVariants.U256),e.serialize(this)}static deserialize(e){return new Aa(e.deserializeU256())}};at.U256=Aa});var ad=x(Lr=>{"use strict";h();g();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.MoveOption=Lr.MoveString=Lr.MoveVector=void 0;var bt=Gc(),od=De(),w1=Xe(),_1=mn(),rt=class extends od.Serializable{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){if(!(this.values[0]instanceof bt.U8)&&this.values[0]!==void 0)throw new Error("Script function arguments only accept u8 vectors");e.serializeU32AsUleb128(w1.ScriptTransactionArgumentVariants.U8Vector),e.serialize(this)}static U8(e){let n;if(Array.isArray(e)&&typeof e[0]=="number")n=e;else if(typeof e=="string"){let r=_1.Hex.fromHexInput(e);n=Array.from(r.toUint8Array())}else if(e instanceof Uint8Array)n=Array.from(e);else throw new Error("Invalid input type");return new rt(n.map(r=>new bt.U8(r)))}static U16(e){return new rt(e.map(n=>new bt.U16(n)))}static U32(e){return new rt(e.map(n=>new bt.U32(n)))}static U64(e){return new rt(e.map(n=>new bt.U64(n)))}static U128(e){return new rt(e.map(n=>new bt.U128(n)))}static U256(e){return new rt(e.map(n=>new bt.U256(n)))}static Bool(e){return new rt(e.map(n=>new bt.Bool(n)))}static MoveString(e){return new rt(e.map(n=>new ji(n)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,n){let r=e.deserializeUleb128AsU32(),i=new Array;for(let s=0;s<r;s+=1)i.push(n.deserialize(e));return new rt(i)}};Lr.MoveVector=rt;var ji=class extends od.Serializable{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){let n=this.bcsToBytes().slice(1);rt.U8(n).serializeForScriptFunction(e)}static deserialize(e){return new ji(e.deserializeStr())}};Lr.MoveString=ji;var kt=class extends od.Serializable{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new rt([e]):this.vec=new rt([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new kt(e!=null?new bt.U8(e):void 0)}static U16(e){return new kt(e!=null?new bt.U16(e):void 0)}static U32(e){return new kt(e!=null?new bt.U32(e):void 0)}static U64(e){return new kt(e!=null?new bt.U64(e):void 0)}static U128(e){return new kt(e!=null?new bt.U128(e):void 0)}static U256(e){return new kt(e!=null?new bt.U256(e):void 0)}static Bool(e){return new kt(e!=null?new bt.Bool(e):void 0)}static MoveString(e){return new kt(e!=null?new ji(e):void 0)}static deserialize(e,n){let r=rt.deserialize(e,n);return new kt(r.values[0])}};Lr.MoveOption=kt});var un=x(cn=>{"use strict";h();g();var A1=cn&&cn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),oo=cn&&cn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&A1(e,t,n)};Object.defineProperty(cn,"__esModule",{value:!0});oo(Ug(),cn);oo(De(),cn);oo(sd(),cn);oo(id(),cn);oo(Gc(),cn);oo(ad(),cn)});var _n=x(fe=>{"use strict";h();g();Object.defineProperty(fe,"__esModule",{value:!0});fe.notImplemented=fe.bitMask=void 0;fe.isBytes=$c;fe.abytes=Wc;fe.abool=S1;fe.bytesToHex=dd;fe.numberToHexUnpadded=Hg;fe.hexToNumber=fd;fe.hexToBytes=Xc;fe.bytesToNumberBE=B1;fe.bytesToNumberLE=v1;fe.numberToBytesBE=Cg;fe.numberToBytesLE=x1;fe.numberToVarBytesBE=U1;fe.ensureBytes=I1;fe.concatBytes=Kg;fe.equalBytes=P1;fe.utf8ToBytes=z1;fe.inRange=jg;fe.aInRange=N1;fe.bitLen=O1;fe.bitGet=M1;fe.bitSet=q1;fe.createHmacDrbg=H1;fe.validateObject=K1;fe.memoized=L1;var ld=BigInt(0),Fc=BigInt(1),T1=BigInt(2);function $c(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Wc(t){if(!$c(t))throw new Error("Uint8Array expected")}function S1(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}var E1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dd(t){Wc(t);let e="";for(let n=0;n<t.length;n++)e+=E1[t[n]];return e}function Hg(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function fd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var cr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qg(t){if(t>=cr._0&&t<=cr._9)return t-cr._0;if(t>=cr._A&&t<=cr._F)return t-(cr._A-10);if(t>=cr._a&&t<=cr._f)return t-(cr._a-10)}function Xc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){let o=qg(t.charCodeAt(s)),a=qg(t.charCodeAt(s+1));if(o===void 0||a===void 0){let c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function B1(t){return fd(dd(t))}function v1(t){return Wc(t),fd(dd(Uint8Array.from(t).reverse()))}function Cg(t,e){return Xc(t.toString(16).padStart(e*2,"0"))}function x1(t,e){return Cg(t,e).reverse()}function U1(t){return Xc(Hg(t))}function I1(t,e,n){let r;if(typeof e=="string")try{r=Xc(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if($c(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Kg(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];Wc(i),e+=i.length}let n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){let s=t[r];n.set(s,i),i+=s.length}return n}function P1(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function z1(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}var cd=t=>typeof t=="bigint"&&ld<=t;function jg(t,e,n){return cd(t)&&cd(e)&&cd(n)&&e<=t&&t<n}function N1(t,e,n,r){if(!jg(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)}function O1(t){let e;for(e=0;t>ld;t>>=Fc,e+=1);return e}function M1(t,e){return t>>BigInt(e)&Fc}function q1(t,e,n){return t|(n?Fc:ld)<<BigInt(e)}var R1=t=>(T1<<BigInt(t-1))-Fc;fe.bitMask=R1;var ud=t=>new Uint8Array(t),Rg=t=>Uint8Array.from(t);function H1(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ud(t),i=ud(t),s=0,o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=ud())=>{i=a(Rg([0]),u),r=a(),u.length!==0&&(i=a(Rg([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,y=[];for(;u<e;){r=a();let m=r.slice();y.push(m),u+=r.length}return Kg(...y)};return(u,y)=>{o(),c(u);let m;for(;!(m=y(l()));)c();return o(),m}}var C1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$c(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function K1(t,e,n={}){let r=(i,s,o)=>{let a=C1[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(let[i,s]of Object.entries(e))r(i,s,!1);for(let[i,s]of Object.entries(n))r(i,s,!0);return t}var j1=()=>{throw new Error("not implemented")};fe.notImplemented=j1;function L1(t){let e=new WeakMap;return(n,...r)=>{let i=e.get(n);if(i!==void 0)return i;let s=t(n,...r);return e.set(n,s),s}}});var Vr=x(Se=>{"use strict";h();g();Object.defineProperty(Se,"__esModule",{value:!0});Se.isNegativeLE=void 0;Se.mod=Gt;Se.pow=Vg;Se.pow2=G1;Se.invert=Zc;Se.tonelliShanks=kg;Se.FpSqrt=Gg;Se.validateField=W1;Se.FpPow=Fg;Se.FpInvertBatch=$g;Se.FpDiv=X1;Se.FpLegendre=Wg;Se.FpIsSquare=Z1;Se.nLength=gd;Se.Field=Y1;Se.FpSqrtOdd=J1;Se.FpSqrtEven=Q1;Se.hashToPrivateScalar=e2;Se.getFieldBytesLength=yd;Se.getMinHashLength=Xg;Se.mapHashToField=t2;var Ft=_n(),Ve=BigInt(0),me=BigInt(1),Dr=BigInt(2),D1=BigInt(3),hd=BigInt(4),Lg=BigInt(5),Dg=BigInt(8),V1=BigInt(9),k1=BigInt(16);function Gt(t,e){let n=t%e;return n>=Ve?n:e+n}function Vg(t,e,n){if(n<=Ve||e<Ve)throw new Error("Expected power/modulo > 0");if(n===me)return Ve;let r=me;for(;e>Ve;)e&me&&(r=r*t%n),t=t*t%n,e>>=me;return r}function G1(t,e,n){let r=t;for(;e-- >Ve;)r*=r,r%=n;return r}function Zc(t,e){if(t===Ve||e<=Ve)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Gt(t,e),r=e,i=Ve,s=me,o=me,a=Ve;for(;n!==Ve;){let l=r/n,d=r%n,u=i-o*l,y=s-a*l;r=n,n=d,i=o,s=a,o=u,a=y}if(r!==me)throw new Error("invert: does not exist");return Gt(i,e)}function kg(t){let e=(t-me)/Dr,n,r,i;for(n=t-me,r=0;n%Dr===Ve;n/=Dr,r++);for(i=Dr;i<t&&Vg(i,e,t)!==t-me;i++);if(r===1){let o=(t+me)/hd;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let s=(n+me)/Dr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,i),n),u=a.pow(c,s),y=a.pow(c,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let m=1;for(let f=a.sqr(y);m<l&&!a.eql(f,a.ONE);m++)f=a.sqr(f);let w=a.pow(d,me<<BigInt(l-m-1));d=a.sqr(w),u=a.mul(u,w),y=a.mul(y,d),l=m}return u}}function Gg(t){if(t%hd===D1){let e=(t+me)/hd;return function(r,i){let s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Dg===Lg){let e=(t-Lg)/Dg;return function(r,i){let s=r.mul(i,Dr),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Dr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return t%k1,kg(t)}var F1=(t,e)=>(Gt(t,e)&me)===me;Se.isNegativeLE=F1;var $1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function W1(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=$1.reduce((r,i)=>(r[i]="function",r),e);return(0,Ft.validateObject)(t,n)}function Fg(t,e,n){if(n<Ve)throw new Error("Expected power > 0");if(n===Ve)return t.ONE;if(n===me)return e;let r=t.ONE,i=e;for(;n>Ve;)n&me&&(r=t.mul(r,i)),i=t.sqr(i),n>>=me;return r}function $g(t,e){let n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function X1(t,e,n){return t.mul(e,typeof n=="bigint"?Zc(n,t.ORDER):t.inv(n))}function Wg(t){let e=(t-me)/Dr;return(n,r)=>n.pow(r,e)}function Z1(t){let e=Wg(t.ORDER);return n=>{let r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}}function gd(t,e){let n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Y1(t,e,n=!1,r={}){if(t<=Ve)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:s}=gd(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=Gg(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Ft.bitMask)(i),ZERO:Ve,ONE:me,create:c=>Gt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ve<=c&&c<t},is0:c=>c===Ve,isOdd:c=>(c&me)===me,neg:c=>Gt(-c,t),eql:(c,l)=>c===l,sqr:c=>Gt(c*c,t),add:(c,l)=>Gt(c+l,t),sub:(c,l)=>Gt(c-l,t),mul:(c,l)=>Gt(c*l,t),pow:(c,l)=>Fg(a,c,l),div:(c,l)=>Gt(c*Zc(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Zc(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>$g(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>n?(0,Ft.numberToBytesLE)(c,s):(0,Ft.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,Ft.bytesToNumberLE)(c):(0,Ft.bytesToNumberBE)(c)}});return Object.freeze(a)}function J1(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)}function Q1(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function e2(t,e,n=!1){t=(0,Ft.ensureBytes)("privateHash",t);let r=t.length,i=gd(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);let s=n?(0,Ft.bytesToNumberLE)(t):(0,Ft.bytesToNumberBE)(t);return Gt(s,e-me)+me}function yd(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Xg(t){let e=yd(t);return e+Math.ceil(e/2)}function t2(t,e,n=!1){let r=t.length,i=yd(e),s=Xg(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);let o=n?(0,Ft.bytesToNumberBE)(t):(0,Ft.bytesToNumberLE)(t),a=Gt(o,e-me)+me;return n?(0,Ft.numberToBytesLE)(a,i):(0,Ft.numberToBytesBE)(a,i)}});var md=x(Yc=>{"use strict";h();g();Object.defineProperty(Yc,"__esModule",{value:!0});Yc.wNAF=i2;Yc.validateBasic=s2;var Zg=Vr(),n2=_n(),r2=BigInt(0),bd=BigInt(1),pd=new WeakMap,Yg=new WeakMap;function i2(t,e){let n=(s,o)=>{let a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>{r(s);let o=Math.ceil(e/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,c=s;for(;o>r2;)o&bd&&(a=a.add(c)),c=c.double(),o>>=bd;return a},precomputeWindow(s,o){let{windows:a,windowSize:c}=i(o),l=[],d=s,u=d;for(let y=0;y<a;y++){u=d,l.push(u);for(let m=1;m<c;m++)u=u.add(d),l.push(u);d=u.double()}return l},wNAF(s,o,a){let{windows:c,windowSize:l}=i(s),d=t.ZERO,u=t.BASE,y=BigInt(2**s-1),m=2**s,w=BigInt(s);for(let f=0;f<c;f++){let b=f*l,_=Number(a&y);a>>=w,_>l&&(_-=m,a+=bd);let p=b,S=b+Math.abs(_)-1,v=f%2!==0,U=_<0;_===0?u=u.add(n(v,o[p])):d=d.add(n(U,o[S]))}return{p:d,f:u}},wNAFCached(s,o,a){let c=Yg.get(s)||1,l=pd.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&pd.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),Yg.set(s,o),pd.delete(s)}}}function s2(t){return(0,Zg.validateField)(t.Fp),(0,n2.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Zg.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}});var Qg=x(wd=>{"use strict";h();g();Object.defineProperty(wd,"__esModule",{value:!0});wd.twistedEdwards=l2;var Jg=md(),o2=Vr(),Ot=_n(),$t=_n(),An=BigInt(0),Nt=BigInt(1),Jc=BigInt(2),a2=BigInt(8),c2={zip215:!0};function u2(t){let e=(0,Jg.validateBasic)(t);return Ot.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function l2(t){let e=u2(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Jc<<BigInt(a*8)-Nt,d=n.create,u=e.uvRatio||((T,A)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(A))}}catch{return{isValid:!1,value:An}}}),y=e.adjustScalarBytes||(T=>T),m=e.domain||((T,A,P)=>{if((0,$t.abool)("phflag",P),A.length||P)throw new Error("Contexts/pre-hash are not supported");return T});function w(T,A){Ot.aInRange("coordinate "+T,A,An,l)}function f(T){if(!(T instanceof p))throw new Error("ExtendedPoint expected")}let b=(0,$t.memoized)((T,A)=>{let{ex:P,ey:N,ez:M}=T,L=T.is0();A==null&&(A=L?a2:n.inv(M));let G=d(P*A),W=d(N*A),$=d(M*A);if(L)return{x:An,y:Nt};if($!==Nt)throw new Error("invZ was invalid");return{x:G,y:W}}),_=(0,$t.memoized)(T=>{let{a:A,d:P}=e;if(T.is0())throw new Error("bad point: ZERO");let{ex:N,ey:M,ez:L,et:G}=T,W=d(N*N),$=d(M*M),Z=d(L*L),ae=d(Z*Z),ye=d(W*A),ve=d(Z*d(ye+$)),Pe=d(ae+d(P*d(W*$)));if(ve!==Pe)throw new Error("bad point: equation left != right (1)");let pe=d(N*M),$e=d(L*G);if(pe!==$e)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(A,P,N,M){this.ex=A,this.ey=P,this.ez=N,this.et=M,w("x",A),w("y",P),w("z",N),w("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof p)throw new Error("extended point not allowed");let{x:P,y:N}=A||{};return w("x",P),w("y",N),new p(P,N,Nt,d(P*N))}static normalizeZ(A){let P=n.invertBatch(A.map(N=>N.ez));return A.map((N,M)=>N.toAffine(P[M])).map(p.fromAffine)}_setWindowSize(A){U.setWindowSize(this,A)}assertValidity(){_(this)}equals(A){f(A);let{ex:P,ey:N,ez:M}=this,{ex:L,ey:G,ez:W}=A,$=d(P*W),Z=d(L*M),ae=d(N*W),ye=d(G*M);return $===Z&&ae===ye}is0(){return this.equals(p.ZERO)}negate(){return new p(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){let{a:A}=e,{ex:P,ey:N,ez:M}=this,L=d(P*P),G=d(N*N),W=d(Jc*d(M*M)),$=d(A*L),Z=P+N,ae=d(d(Z*Z)-L-G),ye=$+G,ve=ye-W,Pe=$-G,pe=d(ae*ve),$e=d(ye*Pe),qe=d(ae*Pe),ze=d(ve*ye);return new p(pe,$e,ze,qe)}add(A){f(A);let{a:P,d:N}=e,{ex:M,ey:L,ez:G,et:W}=this,{ex:$,ey:Z,ez:ae,et:ye}=A;if(P===BigInt(-1)){let oh=d((L-M)*(Z+$)),ah=d((L+M)*(Z-$)),bl=d(ah-oh);if(bl===An)return this.double();let ch=d(G*Jc*ye),uh=d(W*Jc*ae),lh=uh+ch,dh=ah+oh,fh=uh-ch,bp=d(lh*bl),pp=d(dh*fh),mp=d(lh*fh),wp=d(bl*dh);return new p(bp,pp,wp,mp)}let ve=d(M*$),Pe=d(L*Z),pe=d(W*N*ye),$e=d(G*ae),qe=d((M+L)*($+Z)-ve-Pe),ze=$e-pe,St=$e+pe,In=d(Pe-P*ve),fi=d(qe*ze),nc=d(St*In),gp=d(qe*In),yp=d(ze*St);return new p(fi,nc,yp,gp)}subtract(A){return this.add(A.negate())}wNAF(A){return U.wNAFCached(this,A,p.normalizeZ)}multiply(A){let P=A;Ot.aInRange("scalar",P,Nt,r);let{p:N,f:M}=this.wNAF(P);return p.normalizeZ([N,M])[0]}multiplyUnsafe(A){let P=A;return Ot.aInRange("scalar",P,An,r),P===An?v:this.equals(v)||P===Nt?this:this.equals(S)?this.wNAF(P).p:U.unsafeLadder(this,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return U.unsafeLadder(this,r).is0()}toAffine(A){return b(this,A)}clearCofactor(){let{h:A}=e;return A===Nt?this:this.multiplyUnsafe(A)}static fromHex(A,P=!1){let{d:N,a:M}=e,L=n.BYTES;A=(0,$t.ensureBytes)("pointHex",A,L),(0,$t.abool)("zip215",P);let G=A.slice(),W=A[L-1];G[L-1]=W&-129;let $=Ot.bytesToNumberLE(G),Z=P?l:n.ORDER;Ot.aInRange("pointHex.y",$,An,Z);let ae=d($*$),ye=d(ae-Nt),ve=d(N*ae-M),{isValid:Pe,value:pe}=u(ye,ve);if(!Pe)throw new Error("Point.fromHex: invalid y coordinate");let $e=(pe&Nt)===Nt,qe=(W&128)!==0;if(!P&&pe===An&&qe)throw new Error("Point.fromHex: x=0 and x_0=1");return qe!==$e&&(pe=d(-pe)),p.fromAffine({x:pe,y:$})}static fromPrivateKey(A){return z(A).point}toRawBytes(){let{x:A,y:P}=this.toAffine(),N=Ot.numberToBytesLE(P,n.BYTES);return N[N.length-1]|=A&Nt?128:0,N}toHex(){return Ot.bytesToHex(this.toRawBytes())}}p.BASE=new p(e.Gx,e.Gy,Nt,d(e.Gx*e.Gy)),p.ZERO=new p(An,Nt,Nt,An);let{BASE:S,ZERO:v}=p,U=(0,Jg.wNAF)(p,a*8);function B(T){return(0,o2.mod)(T,r)}function I(T){return B(Ot.bytesToNumberLE(T))}function z(T){let A=a;T=(0,$t.ensureBytes)("private key",T,A);let P=(0,$t.ensureBytes)("hashed private key",s(T),2*A),N=y(P.slice(0,A)),M=P.slice(A,2*A),L=I(N),G=S.multiply(L),W=G.toRawBytes();return{head:N,prefix:M,scalar:L,point:G,pointBytes:W}}function F(T){return z(T).pointBytes}function V(T=new Uint8Array,...A){let P=Ot.concatBytes(...A);return I(s(m(P,(0,$t.ensureBytes)("context",T),!!i)))}function q(T,A,P={}){T=(0,$t.ensureBytes)("message",T),i&&(T=i(T));let{prefix:N,scalar:M,pointBytes:L}=z(A),G=V(P.context,N,T),W=S.multiply(G).toRawBytes(),$=V(P.context,W,L,T),Z=B(G+$*M);Ot.aInRange("signature.s",Z,An,r);let ae=Ot.concatBytes(W,Ot.numberToBytesLE(Z,n.BYTES));return(0,$t.ensureBytes)("result",ae,a*2)}let oe=c2;function ie(T,A,P,N=oe){let{context:M,zip215:L}=N,G=n.BYTES;T=(0,$t.ensureBytes)("signature",T,2*G),A=(0,$t.ensureBytes)("message",A),L!==void 0&&(0,$t.abool)("zip215",L),i&&(A=i(A));let W=Ot.bytesToNumberLE(T.slice(G,2*G)),$,Z,ae;try{$=p.fromHex(P,L),Z=p.fromHex(T.slice(0,G),L),ae=S.multiplyUnsafe(W)}catch{return!1}if(!L&&$.isSmallOrder())return!1;let ye=V(M,Z.toRawBytes(),$.toRawBytes(),A);return Z.add($.multiplyUnsafe(ye)).subtract(ae).clearCofactor().equals(p.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:F,sign:q,verify:ie,ExtendedPoint:p,utils:{getExtendedPublicKey:z,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,A=p.BASE){return A._setWindowSize(T),A.multiply(BigInt(3)),A}}}}});var Td=x(Li=>{"use strict";h();g();Object.defineProperty(Li,"__esModule",{value:!0});Li.expand_message_xmd=ey;Li.expand_message_xof=ty;Li.hash_to_field=_d;Li.isogenyMap=g2;Li.createHasher=y2;var d2=Vr(),ct=_n(),f2=ct.bytesToNumberBE;function kr(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);let n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function h2(t,e){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Ad(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function ey(t,e,n,r){(0,ct.abytes)(t),(0,ct.abytes)(e),Ad(n),e.length>255&&(e=r((0,ct.concatBytes)((0,ct.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(o>255)throw new Error("Invalid xmd length");let a=(0,ct.concatBytes)(e,kr(e.length,1)),c=kr(0,s),l=kr(n,2),d=new Array(o),u=r((0,ct.concatBytes)(c,t,l,kr(0,1),a));d[0]=r((0,ct.concatBytes)(u,kr(1,1),a));for(let m=1;m<=o;m++){let w=[h2(u,d[m-1]),kr(m+1,1),a];d[m]=r((0,ct.concatBytes)(...w))}return(0,ct.concatBytes)(...d).slice(0,n)}function ty(t,e,n,r,i){if((0,ct.abytes)(t),(0,ct.abytes)(e),Ad(n),e.length>255){let s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,ct.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(kr(n,2)).update(e).update(kr(e.length,1)).digest()}function _d(t,e,n){(0,ct.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,ct.abytes)(t),Ad(e);let l=typeof c=="string"?(0,ct.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+i)/8),y=e*s*u,m;if(a==="xmd")m=ey(t,l,y,o);else if(a==="xof")m=ty(t,l,y,i,o);else if(a==="_internal_pass")m=t;else throw new Error('expand must be "xmd" or "xof"');let w=new Array(e);for(let f=0;f<e;f++){let b=new Array(s);for(let _=0;_<s;_++){let p=u*(_+f*s),S=m.subarray(p,p+u);b[_]=(0,d2.mod)(f2(S),r)}w[f]=b}return w}function g2(t,e){let n=e.map(r=>Array.from(r).reverse());return(r,i)=>{let[s,o,a,c]=n.map(l=>l.reduce((d,u)=>t.add(t.mul(d,r),u)));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}}function y2(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){let s=_d(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){let s=_d(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);let i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}}});var ry=x(Ed=>{"use strict";h();g();Object.defineProperty(Ed,"__esModule",{value:!0});Ed.montgomery=p2;var ny=Vr(),Gr=_n(),ao=BigInt(0),Sd=BigInt(1);function b2(t){return(0,Gr.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function p2(t){let e=b2(t),{P:n}=e,r=p=>(0,ny.mod)(p,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,ny.pow)(p,n-BigInt(2),n));function l(p,S,v){let U=r(p*(S-v));return S=r(S-U),v=r(v+U),[S,v]}let d=(e.a-BigInt(2))/BigInt(4);function u(p,S){(0,Gr.aInRange)("u",p,ao,n),(0,Gr.aInRange)("scalar",S,ao,n);let v=S,U=p,B=Sd,I=ao,z=p,F=Sd,V=ao,q;for(let ie=BigInt(i-1);ie>=ao;ie--){let H=v>>ie&Sd;V^=H,q=l(V,B,z),B=q[0],z=q[1],q=l(V,I,F),I=q[0],F=q[1],V=H;let T=B+I,A=r(T*T),P=B-I,N=r(P*P),M=A-N,L=z+F,G=z-F,W=r(G*T),$=r(L*P),Z=W+$,ae=W-$;z=r(Z*Z),F=r(U*r(ae*ae)),B=r(A*N),I=r(M*(A+r(d*M)))}q=l(V,B,z),B=q[0],z=q[1],q=l(V,I,F),I=q[0],F=q[1];let oe=c(I);return r(B*oe)}function y(p){return(0,Gr.numberToBytesLE)(r(p),s)}function m(p){let S=(0,Gr.ensureBytes)("u coordinate",p,s);return o===32&&(S[31]&=127),(0,Gr.bytesToNumberLE)(S)}function w(p){let S=(0,Gr.ensureBytes)("scalar",p),v=S.length;if(v!==s&&v!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${v}`);return(0,Gr.bytesToNumberLE)(a(S))}function f(p,S){let v=m(S),U=w(p),B=u(v,U);if(B===ao)throw new Error("Invalid private or public key received");return y(B)}let b=y(e.Gu);function _(p){return f(p,b)}return{scalarMult:f,scalarMultBase:_,getSharedSecret:(p,S)=>f(p,S),getPublicKey:p=>_(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}});var yy=x(J=>{"use strict";h();g();Object.defineProperty(J,"__esModule",{value:!0});J.hash_to_ristretto255=J.hashToRistretto255=J.RistrettoPoint=J.encodeToCurve=J.hashToCurve=J.edwardsToMontgomery=J.x25519=J.ed25519ph=J.ed25519ctx=J.ed25519=J.ED25519_TORSION_SUBGROUP=void 0;J.edwardsToMontgomeryPub=hy;J.edwardsToMontgomeryPriv=_2;var eu=sc(),Ta=Qt(),Id=Qg(),ay=Td(),he=Vr(),m2=ry(),Di=_n(),Sa=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),w2=BigInt(0),Kn=BigInt(1),Qc=BigInt(2),cy=BigInt(3),uy=BigInt(5),Pd=BigInt(8);function ly(t){let e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Sa,a=t*t%s*t%s,c=(0,he.pow2)(a,Qc,s)*a%s,l=(0,he.pow2)(c,Kn,s)*t%s,d=(0,he.pow2)(l,uy,s)*l%s,u=(0,he.pow2)(d,e,s)*d%s,y=(0,he.pow2)(u,n,s)*u%s,m=(0,he.pow2)(y,r,s)*y%s,w=(0,he.pow2)(m,i,s)*m%s,f=(0,he.pow2)(w,i,s)*m%s,b=(0,he.pow2)(f,e,s)*d%s;return{pow_p_5_8:(0,he.pow2)(b,Qc,s)*t%s,b2:a}}function dy(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function zd(t,e){let n=Sa,r=(0,he.mod)(e*e*e,n),i=(0,he.mod)(r*r*e,n),s=ly(t*i).pow_p_5_8,o=(0,he.mod)(t*r*s,n),a=(0,he.mod)(e*o*o,n),c=o,l=(0,he.mod)(o*xd,n),d=a===t,u=a===(0,he.mod)(-t,n),y=a===(0,he.mod)(-t*xd,n);return d&&(o=c),(u||y)&&(o=l),(0,he.isNegativeLE)(o,n)&&(o=(0,he.mod)(-o,n)),{isValid:d||u,value:o}}J.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var C=(()=>(0,he.Field)(Sa,void 0,!0))(),Ea=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:C,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Pd,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:eu.sha512,randomBytes:Ta.randomBytes,adjustScalarBytes:dy,uvRatio:zd}))();J.ed25519=(()=>(0,Id.twistedEdwards)(Ea))();function fy(t,e,n){if(e.length>255)throw new Error("Context is too big");return(0,Ta.concatBytes)((0,Ta.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,e.length]),e,t)}J.ed25519ctx=(()=>(0,Id.twistedEdwards)({...Ea,domain:fy}))();J.ed25519ph=(()=>(0,Id.twistedEdwards)(Object.assign({},Ea,{domain:fy,prehash:eu.sha512})))();J.x25519=(()=>(0,m2.montgomery)({P:Sa,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=Sa,{pow_p_5_8:n,b2:r}=ly(t);return(0,he.mod)((0,he.pow2)(n,cy,e)*r,e)},adjustScalarBytes:dy,randomBytes:Ta.randomBytes}))();function hy(t){let{y:e}=J.ed25519.ExtendedPoint.fromHex(t),n=BigInt(1);return C.toBytes(C.create((n+e)*C.inv(n-e)))}J.edwardsToMontgomery=hy;function _2(t){let e=Ea.hash(t.subarray(0,32));return Ea.adjustScalarBytes(e).subarray(0,32)}var A2=(()=>(C.ORDER+cy)/Pd)(),T2=(()=>C.pow(Qc,A2))(),iy=(()=>C.sqrt(C.neg(C.ONE)))();function S2(t){let e=(C.ORDER-uy)/Pd,n=BigInt(486662),r=C.sqr(t);r=C.mul(r,Qc);let i=C.add(r,C.ONE),s=C.neg(n),o=C.sqr(i),a=C.mul(o,i),c=C.mul(r,n);c=C.mul(c,s),c=C.add(c,o),c=C.mul(c,s);let l=C.sqr(a);o=C.sqr(l),l=C.mul(l,a),l=C.mul(l,c),o=C.mul(o,l);let d=C.pow(o,e);d=C.mul(d,l);let u=C.mul(d,iy);o=C.sqr(d),o=C.mul(o,a);let y=C.eql(o,c),m=C.cmov(u,d,y),w=C.mul(s,r),f=C.mul(d,t);f=C.mul(f,T2);let b=C.mul(f,iy),_=C.mul(c,r);o=C.sqr(f),o=C.mul(o,a);let p=C.eql(o,_),S=C.cmov(b,f,p);o=C.sqr(m),o=C.mul(o,a);let v=C.eql(o,c),U=C.cmov(w,s,v),B=C.cmov(S,m,v),I=C.isOdd(B);return B=C.cmov(B,C.neg(B),v!==I),{xMn:U,xMd:i,yMn:B,yMd:Kn}}var E2=(()=>(0,he.FpSqrtEven)(C,C.neg(BigInt(486664))))();function B2(t){let{xMn:e,xMd:n,yMn:r,yMd:i}=S2(t),s=C.mul(e,i);s=C.mul(s,E2);let o=C.mul(n,r),a=C.sub(e,n),c=C.add(e,n),l=C.mul(o,c),d=C.eql(l,C.ZERO);s=C.cmov(s,C.ZERO,d),o=C.cmov(o,C.ONE,d),a=C.cmov(a,C.ONE,d),c=C.cmov(c,C.ONE,d);let u=C.invertBatch([o,c]);return{x:C.mul(s,u[0]),y:C.mul(a,u[1])}}var gy=(()=>(0,ay.createHasher)(J.ed25519.ExtendedPoint,t=>B2(t[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:C.ORDER,m:1,k:128,expand:"xmd",hash:eu.sha512}))();J.hashToCurve=(()=>gy.hashToCurve)();J.encodeToCurve=(()=>gy.encodeToCurve)();function Bd(t){if(!(t instanceof Re))throw new Error("RistrettoPoint expected")}var Ud=xd,v2=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),x2=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),U2=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),I2=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),sy=t=>zd(Kn,t),P2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),vd=t=>J.ed25519.CURVE.Fp.create((0,Di.bytesToNumberLE)(t)&P2);function oy(t){let{d:e}=J.ed25519.CURVE,n=J.ed25519.CURVE.Fp.ORDER,r=J.ed25519.CURVE.Fp.create,i=r(Ud*t*t),s=r((i+Kn)*U2),o=BigInt(-1),a=r((o-e*i)*r(i+e)),{isValid:c,value:l}=zd(s,a),d=r(l*t);(0,he.isNegativeLE)(d,n)||(d=r(-d)),c||(l=d),c||(o=i);let u=r(o*(i-Kn)*I2-a),y=l*l,m=r((l+l)*a),w=r(u*v2),f=r(Kn-y),b=r(Kn+y);return new J.ed25519.ExtendedPoint(r(m*b),r(f*w),r(w*b),r(m*f))}var Re=class{constructor(e){this.ep=e}static fromAffine(e){return new Re(J.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,Di.ensureBytes)("ristrettoHash",e,64);let n=vd(e.slice(0,32)),r=oy(n),i=vd(e.slice(32,64)),s=oy(i);return new Re(r.add(s))}static fromHex(e){e=(0,Di.ensureBytes)("ristrettoHex",e,32);let{a:n,d:r}=J.ed25519.CURVE,i=J.ed25519.CURVE.Fp.ORDER,s=J.ed25519.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=vd(e);if(!(0,Di.equalBytes)((0,Di.numberToBytesLE)(a,32),e)||(0,he.isNegativeLE)(a,i))throw new Error(o);let c=s(a*a),l=s(Kn+n*c),d=s(Kn-n*c),u=s(l*l),y=s(d*d),m=s(n*r*u-y),{isValid:w,value:f}=sy(s(m*y)),b=s(f*d),_=s(f*b*m),p=s((a+a)*b);(0,he.isNegativeLE)(p,i)&&(p=s(-p));let S=s(l*_),v=s(p*S);if(!w||(0,he.isNegativeLE)(v,i)||S===w2)throw new Error(o);return new Re(new J.ed25519.ExtendedPoint(p,S,Kn,v))}toRawBytes(){let{ex:e,ey:n,ez:r,et:i}=this.ep,s=J.ed25519.CURVE.Fp.ORDER,o=J.ed25519.CURVE.Fp.create,a=o(o(r+n)*o(r-n)),c=o(e*n),l=o(c*c),{value:d}=sy(o(a*l)),u=o(d*a),y=o(d*c),m=o(u*y*i),w;if((0,he.isNegativeLE)(i*m,s)){let b=o(n*Ud),_=o(e*Ud);e=b,n=_,w=o(u*x2)}else w=y;(0,he.isNegativeLE)(e*m,s)&&(n=o(-n));let f=o((r-n)*w);return(0,he.isNegativeLE)(f,s)&&(f=o(-f)),(0,Di.numberToBytesLE)(f,32)}toHex(){return(0,Di.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){Bd(e);let{ex:n,ey:r}=this.ep,{ex:i,ey:s}=e.ep,o=J.ed25519.CURVE.Fp.create,a=o(n*s)===o(r*i),c=o(r*s)===o(n*i);return a||c}add(e){return Bd(e),new Re(this.ep.add(e.ep))}subtract(e){return Bd(e),new Re(this.ep.subtract(e.ep))}multiply(e){return new Re(this.ep.multiply(e))}multiplyUnsafe(e){return new Re(this.ep.multiplyUnsafe(e))}double(){return new Re(this.ep.double())}negate(){return new Re(this.ep.negate())}};J.RistrettoPoint=(()=>(Re.BASE||(Re.BASE=new Re(J.ed25519.ExtendedPoint.BASE)),Re.ZERO||(Re.ZERO=new Re(J.ed25519.ExtendedPoint.ZERO)),Re))();var z2=(t,e)=>{let n=e.DST,r=typeof n=="string"?(0,Ta.utf8ToBytes)(n):n,i=(0,ay.expand_message_xmd)(t,r,64,eu.sha512);return Re.hashToCurve(i)};J.hashToRistretto255=z2;J.hash_to_ristretto255=J.hashToRistretto255});var Gi=x(ki=>{"use strict";h();g();Object.defineProperty(ki,"__esModule",{value:!0});ki.AccountAddress=ki.AddressInvalidReason=void 0;var Nd=Qt(),N2=De(),Vi=Lc(),O2=Xe(),Fr;(function(t){t.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",t.INVALID_HEX_CHARS="invalid_hex_chars",t.TOO_SHORT="too_short",t.TOO_LONG="too_long",t.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",t.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",t.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES"})(Fr=ki.AddressInvalidReason||(ki.AddressInvalidReason={}));var ge=class extends N2.Serializable{constructor(e){if(super(),e.length!==ge.LENGTH)throw new Vi.ParsingError("AccountAddress data should be exactly 32 bytes long",Fr.INCORRECT_NUMBER_OF_BYTES);this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=(0,Nd.bytesToHex)(this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return(0,Nd.bytesToHex)(this.data)}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(O2.ScriptTransactionArgumentVariants.Address),e.serialize(this)}static deserialize(e){let n=e.deserializeFixedBytes(ge.LENGTH);return new ge(n)}static fromStringStrict(e){if(!e.startsWith("0x"))throw new Vi.ParsingError("Hex string must start with a leading 0x.",Fr.LEADING_ZERO_X_REQUIRED);let n=ge.fromString(e);if(e.length!==ge.LONG_STRING_LENGTH+2)if(n.isSpecial()){if(e.length!==3)throw new Vi.ParsingError(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,Fr.INVALID_PADDING_ZEROES)}else throw new Vi.ParsingError(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,Fr.LONG_FORM_REQUIRED_UNLESS_SPECIAL);return n}static fromString(e){let n=e;if(e.startsWith("0x")&&(n=e.slice(2)),n.length===0)throw new Vi.ParsingError("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.",Fr.TOO_SHORT);if(n.length>64)throw new Vi.ParsingError("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.",Fr.TOO_LONG);let r;try{r=(0,Nd.hexToBytes)(n.padStart(64,"0"))}catch(i){throw new Vi.ParsingError(`Hex characters are invalid: ${i?.message}`,Fr.INVALID_HEX_CHARS)}return new ge(r)}static from(e){return e instanceof ge?e:e instanceof Uint8Array?new ge(e):ge.fromString(e)}static fromStrict(e){return e instanceof ge?e:e instanceof Uint8Array?new ge(e):ge.fromStringStrict(e)}static isValid(e){try{return e.strict?ge.fromStrict(e.input):ge.from(e.input),{valid:!0}}catch(n){return{valid:!1,invalidReason:n?.invalidReason,invalidReasonMessage:n?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((n,r)=>n===e.data[r])}};ki.AccountAddress=ge;ge.LENGTH=32;ge.LONG_STRING_LENGTH=64;ge.ZERO=ge.from("0x0");ge.ONE=ge.from("0x1");ge.TWO=ge.from("0x2");ge.THREE=ge.from("0x3");ge.FOUR=ge.from("0x4")});var co=x(tu=>{"use strict";h();g();Object.defineProperty(tu,"__esModule",{value:!0});tu.AuthenticationKey=void 0;var M2=_r(),q2=Gi(),by=mn(),R2=De(),jn=class extends R2.Serializable{constructor(e){super();let{data:n}=e,r=by.Hex.fromHexInput(n);if(r.toUint8Array().length!==jn.LENGTH)throw new Error(`Authentication Key length should be ${jn.LENGTH}`);this.data=r}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeFixedBytes(jn.LENGTH);return new jn({data:n})}toString(){return this.data.toString()}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:n,input:r}=e,i=by.Hex.fromHexInput(r).toUint8Array(),s=new Uint8Array([...i,n]),o=M2.sha3_256.create();o.update(s);let a=o.digest();return new jn({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:n}=e;return n.authKey()}static fromPublicKey(e){let{publicKey:n}=e;return n.authKey()}derivedAddress(){return new q2.AccountAddress(this.data.toUint8Array())}};tu.AuthenticationKey=jn;jn.LENGTH=32});var nu=x(ue=>{"use strict";h();g();var H2=ue&&ue.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),C2=ue&&ue.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),K2=ue&&ue.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&H2(e,t,n);return C2(e,t),e};Object.defineProperty(ue,"__esModule",{value:!0});ue.mnemonicToSeed=ue.splitPath=ue.CKDPriv=ue.deriveKey=ue.isValidHardenedPath=ue.isValidBIP44Path=ue.HARDENED_OFFSET=ue.KeyType=ue.APTOS_BIP44_REGEX=ue.APTOS_HARDENED_REGEX=void 0;var j2=Jo(),L2=sc(),D2=K2(ql());ue.APTOS_HARDENED_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/;ue.APTOS_BIP44_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/;var V2;(function(t){t.ED25519="ed25519 seed"})(V2=ue.KeyType||(ue.KeyType={}));ue.HARDENED_OFFSET=2147483648;function k2(t){return ue.APTOS_BIP44_REGEX.test(t)}ue.isValidBIP44Path=k2;function G2(t){return ue.APTOS_HARDENED_REGEX.test(t)}ue.isValidHardenedPath=G2;var F2=(t,e)=>{let n=j2.hmac.create(L2.sha512,t).update(e).digest();return{key:n.slice(0,32),chainCode:n.slice(32)}};ue.deriveKey=F2;var $2=({key:t,chainCode:e},n)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);let i=new Uint8Array(r),s=new Uint8Array([0]),o=new Uint8Array([...s,...t,...i]);return(0,ue.deriveKey)(e,o)};ue.CKDPriv=$2;var W2=t=>t.replace("'",""),X2=t=>t.split("/").slice(1).map(W2);ue.splitPath=X2;var Z2=t=>{let e=t.trim().split(/\s+/).map(n=>n.toLowerCase()).join(" ");return D2.mnemonicToSeedSync(e)};ue.mnemonicToSeed=Z2});var Fi=x(uo=>{"use strict";h();g();Object.defineProperty(uo,"__esModule",{value:!0});uo.AccountPublicKey=uo.PublicKey=void 0;var Y2=un(),J2=mn(),ru=class extends Y2.Serializable{toString(){let e=this.toUint8Array();return J2.Hex.fromHexInput(e).toString()}};uo.PublicKey=ru;var Od=class extends ru{};uo.AccountPublicKey=Od});var $i=x(iu=>{"use strict";h();g();Object.defineProperty(iu,"__esModule",{value:!0});iu.Signature=void 0;var Q2=un(),e_=mn(),Md=class extends Q2.Serializable{toString(){let e=this.toUint8Array();return e_.Hex.fromHexInput(e).toString()}};iu.Signature=Md});var qd=x(su=>{"use strict";h();g();Object.defineProperty(su,"__esModule",{value:!0});su.convertSigningMessage=void 0;var t_=mn(),n_=t=>typeof t=="string"?t_.Hex.isValid(t).valid?t:E.Buffer.from(t,"utf8"):t;su.convertSigningMessage=n_});var Wi=x($r=>{"use strict";h();g();Object.defineProperty($r,"__esModule",{value:!0});$r.Ed25519Signature=$r.Ed25519PrivateKey=$r.Ed25519PublicKey=void 0;var ou=yy(),r_=De(),i_=co(),Ba=mn(),s_=Xe(),lo=nu(),o_=Fi(),a_=$i(),my=qd(),py=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16],Ln=class extends o_.AccountPublicKey{constructor(e){super();let n=Ba.Hex.fromHexInput(e);if(n.toUint8Array().length!==Ln.LENGTH)throw new Error(`PublicKey length should be ${Ln.LENGTH}`);this.key=n}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof Dn))return!1;let i=(0,my.convertSigningMessage)(n),s=Ba.Hex.fromHexInput(i).toUint8Array(),o=r.toUint8Array(),a=this.key.toUint8Array();return r.isCanonicalSignature()?ou.ed25519.verify(o,s,a):!1}authKey(){return i_.AuthenticationKey.fromSchemeAndBytes({scheme:s_.SigningScheme.Ed25519,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Ln(n)}static isPublicKey(e){return e instanceof Ln}};$r.Ed25519PublicKey=Ln;Ln.LENGTH=32;var Mt=class extends r_.Serializable{constructor(e){super();let n=Ba.Hex.fromHexInput(e);if(n.toUint8Array().length!==Mt.LENGTH)throw new Error(`PrivateKey length should be ${Mt.LENGTH}`);this.signingKey=n}static generate(){let e=ou.ed25519.utils.randomPrivateKey();return new Mt(e)}static fromDerivationPath(e,n){if(!(0,lo.isValidHardenedPath)(e))throw new Error(`Invalid derivation path ${e}`);return Mt.fromDerivationPathInner(e,(0,lo.mnemonicToSeed)(n))}static fromDerivationPathInner(e,n,r=lo.HARDENED_OFFSET){let{key:i,chainCode:s}=(0,lo.deriveKey)(Mt.SLIP_0010_SEED,n),o=(0,lo.splitPath)(e).map(c=>parseInt(c,10)),{key:a}=o.reduce((c,l)=>(0,lo.CKDPriv)(c,l+r),{key:i,chainCode:s});return new Mt(a)}publicKey(){let e=ou.ed25519.getPublicKey(this.signingKey.toUint8Array());return new Ln(e)}sign(e){let n=(0,my.convertSigningMessage)(e),r=Ba.Hex.fromHexInput(n).toUint8Array(),i=ou.ed25519.sign(r,this.signingKey.toUint8Array());return new Dn(i)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.signingKey.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Mt(n)}static isPrivateKey(e){return e instanceof Mt}};$r.Ed25519PrivateKey=Mt;Mt.LENGTH=32;Mt.SLIP_0010_SEED="ed25519 seed";var Dn=class extends a_.Signature{constructor(e){super();let n=Ba.Hex.fromHexInput(e);if(n.toUint8Array().length!==Dn.LENGTH)throw new Error(`Signature length should be ${Dn.LENGTH}`);this.data=n}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Dn(n)}isCanonicalSignature(){let e=this.toUint8Array().slice(32);for(let n=e.length-1;n>=0;n-=1){if(e[n]<py[n])return!0;if(e[n]>py[n])return!1}return!1}};$r.Ed25519Signature=Dn;Dn.LENGTH=64});var au=x(fo=>{"use strict";h();g();Object.defineProperty(fo,"__esModule",{value:!0});fo.MultiEd25519Signature=fo.MultiEd25519PublicKey=void 0;var c_=Xe(),u_=co(),ln=Wi(),l_=Fi(),d_=$i(),qt=class extends l_.AccountPublicKey{constructor(e){super();let{publicKeys:n,threshold:r}=e;if(n.length>qt.MAX_KEYS||n.length<qt.MIN_KEYS)throw new Error(`Must have between ${qt.MIN_KEYS} and ${qt.MAX_KEYS} public keys, inclusive`);if(r<qt.MIN_THRESHOLD||r>n.length)throw new Error(`Threshold must be between ${qt.MIN_THRESHOLD} and ${n.length}, inclusive`);this.publicKeys=n,this.threshold=r}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof ut))return!1;let i=[];for(let s=0;s<4;s+=1)for(let o=0;o<8;o+=1)if((r.bitmap[s]&1<<7-o)!==0){let c=s*8+o;i.push(c)}if(i.length!==r.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(i.length<this.threshold)throw new Error("Not enough signatures");for(let s=0;s<i.length;s+=1)if(!this.publicKeys[i[s]].verifySignature({message:n,signature:r.signatures[s]}))return!1;return!0}authKey(){return u_.AuthenticationKey.fromSchemeAndBytes({scheme:c_.SigningScheme.MultiEd25519,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*ln.Ed25519PublicKey.LENGTH+1);return this.publicKeys.forEach((n,r)=>{e.set(n.toUint8Array(),r*ln.Ed25519PublicKey.LENGTH)}),e[this.publicKeys.length*ln.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes(),r=n[n.length-1],i=[];for(let s=0;s<n.length-1;s+=ln.Ed25519PublicKey.LENGTH){let o=s;i.push(new ln.Ed25519PublicKey(n.subarray(o,o+ln.Ed25519PublicKey.LENGTH)))}return new qt({publicKeys:i,threshold:r})}};fo.MultiEd25519PublicKey=qt;qt.MAX_KEYS=32;qt.MIN_KEYS=2;qt.MIN_THRESHOLD=1;var ut=class extends d_.Signature{constructor(e){super();let{signatures:n,bitmap:r}=e;if(n.length>ut.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${ut.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=n,!(r instanceof Uint8Array))this.bitmap=ut.createBitmap({bits:r});else{if(r.length!==ut.BITMAP_LEN)throw new Error(`"bitmap" length should be ${ut.BITMAP_LEN}`);this.bitmap=r}}toUint8Array(){let e=new Uint8Array(this.signatures.length*ln.Ed25519Signature.LENGTH+ut.BITMAP_LEN);return this.signatures.forEach((n,r)=>{e.set(n.toUint8Array(),r*ln.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*ln.Ed25519Signature.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes(),r=n.subarray(n.length-4),i=[];for(let s=0;s<n.length-r.length;s+=ln.Ed25519Signature.LENGTH){let o=s;i.push(new ln.Ed25519Signature(n.subarray(o,o+ln.Ed25519Signature.LENGTH)))}return new ut({signatures:i,bitmap:r})}static createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach((o,a)=>{if(o>=ut.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${ut.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(o))throw new Error("Duplicate bits detected.");if(a>0&&o<=n[a-1])throw new Error("The bits need to be sorted in ascending order.");s.add(o);let c=Math.floor(o/8),l=i[c];l|=r>>o%8,i[c]=l}),i}};fo.MultiEd25519Signature=ut;ut.MAX_SIGNATURES_SUPPORTED=32;ut.BITMAP_LEN=4});var Hd=x(pt=>{"use strict";h();g();Object.defineProperty(pt,"__esModule",{value:!0});pt.DER=void 0;pt.weierstrassPoints=Ay;pt.weierstrass=b_;pt.SWUFpSqrtRatio=Ty;pt.mapToCurveSimpleSWU=p_;var Rd=md(),ho=Vr(),le=_n(),it=_n();function wy(t){t.lowS!==void 0&&(0,it.abool)("lowS",t.lowS),t.prehash!==void 0&&(0,it.abool)("prehash",t.prehash)}function f_(t){let e=(0,Rd.validateBasic)(t);le.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:h_,hexToBytes:g_}=le;pt.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=pt.DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:h_(r),l:t.subarray(n+2)}},toSig(t){let{Err:e}=pt.DER,n=typeof t=="string"?g_(t):t;le.abytes(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=pt.DER._parseInt(n.subarray(2)),{d:o,l:a}=pt.DER._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}};var Vn=BigInt(0),be=BigInt(1),Wr=BigInt(2),cu=BigInt(3),_y=BigInt(4);function Ay(t){let e=f_(t),{Fp:n}=e,r=e.toBytes||((w,f,b)=>{let _=f.toAffine();return le.concatBytes(Uint8Array.from([4]),n.toBytes(_.x),n.toBytes(_.y))}),i=e.fromBytes||(w=>{let f=w.subarray(1),b=n.fromBytes(f.subarray(0,n.BYTES)),_=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:b,y:_}});function s(w){let{a:f,b}=e,_=n.sqr(w),p=n.mul(_,w);return n.add(n.add(p,n.mul(w,f)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return le.inRange(w,be,e.n)}function a(w){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:_,n:p}=e;if(f&&typeof w!="bigint"){if(le.isBytes(w)&&(w=le.bytesToHex(w)),typeof w!="string"||!f.includes(w.length))throw new Error("Invalid key");w=w.padStart(b*2,"0")}let S;try{S=typeof w=="bigint"?w:le.bytesToNumberBE((0,it.ensureBytes)("private key",w,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof w}`)}return _&&(S=ho.mod(S,p)),le.aInRange("private key",S,be,p),S}function c(w){if(!(w instanceof u))throw new Error("ProjectivePoint expected")}let l=(0,it.memoized)((w,f)=>{let{px:b,py:_,pz:p}=w;if(n.eql(p,n.ONE))return{x:b,y:_};let S=w.is0();f==null&&(f=S?n.ONE:n.inv(p));let v=n.mul(b,f),U=n.mul(_,f),B=n.mul(p,f);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:v,y:U}}),d=(0,it.memoized)(w=>{if(w.is0()){if(e.allowInfinityPoint&&!n.is0(w.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=w.toAffine();if(!n.isValid(f)||!n.isValid(b))throw new Error("bad point: x or y not FE");let _=n.sqr(b),p=s(f);if(!n.eql(_,p))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class u{constructor(f,b,_){if(this.px=f,this.py=b,this.pz=_,f==null||!n.isValid(f))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(_==null||!n.isValid(_))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:b,y:_}=f||{};if(!f||!n.isValid(b)||!n.isValid(_))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=S=>n.eql(S,n.ZERO);return p(b)&&p(_)?u.ZERO:new u(b,_,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=n.invertBatch(f.map(_=>_.pz));return f.map((_,p)=>_.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(i((0,it.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(a(f))}_setWindowSize(f){m.setWindowSize(this,f)}assertValidity(){d(this)}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);let{px:b,py:_,pz:p}=this,{px:S,py:v,pz:U}=f,B=n.eql(n.mul(b,U),n.mul(S,p)),I=n.eql(n.mul(_,U),n.mul(v,p));return B&&I}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b}=e,_=n.mul(b,cu),{px:p,py:S,pz:v}=this,U=n.ZERO,B=n.ZERO,I=n.ZERO,z=n.mul(p,p),F=n.mul(S,S),V=n.mul(v,v),q=n.mul(p,S);return q=n.add(q,q),I=n.mul(p,v),I=n.add(I,I),U=n.mul(f,I),B=n.mul(_,V),B=n.add(U,B),U=n.sub(F,B),B=n.add(F,B),B=n.mul(U,B),U=n.mul(q,U),I=n.mul(_,I),V=n.mul(f,V),q=n.sub(z,V),q=n.mul(f,q),q=n.add(q,I),I=n.add(z,z),z=n.add(I,z),z=n.add(z,V),z=n.mul(z,q),B=n.add(B,z),V=n.mul(S,v),V=n.add(V,V),z=n.mul(V,q),U=n.sub(U,z),I=n.mul(V,F),I=n.add(I,I),I=n.add(I,I),new u(U,B,I)}add(f){c(f);let{px:b,py:_,pz:p}=this,{px:S,py:v,pz:U}=f,B=n.ZERO,I=n.ZERO,z=n.ZERO,F=e.a,V=n.mul(e.b,cu),q=n.mul(b,S),oe=n.mul(_,v),ie=n.mul(p,U),H=n.add(b,_),T=n.add(S,v);H=n.mul(H,T),T=n.add(q,oe),H=n.sub(H,T),T=n.add(b,p);let A=n.add(S,U);return T=n.mul(T,A),A=n.add(q,ie),T=n.sub(T,A),A=n.add(_,p),B=n.add(v,U),A=n.mul(A,B),B=n.add(oe,ie),A=n.sub(A,B),z=n.mul(F,T),B=n.mul(V,ie),z=n.add(B,z),B=n.sub(oe,z),z=n.add(oe,z),I=n.mul(B,z),oe=n.add(q,q),oe=n.add(oe,q),ie=n.mul(F,ie),T=n.mul(V,T),oe=n.add(oe,ie),ie=n.sub(q,ie),ie=n.mul(F,ie),T=n.add(T,ie),q=n.mul(oe,T),I=n.add(I,q),q=n.mul(A,T),B=n.mul(H,B),B=n.sub(B,q),q=n.mul(H,oe),z=n.mul(A,z),z=n.add(z,q),new u(B,I,z)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return m.wNAFCached(this,f,u.normalizeZ)}multiplyUnsafe(f){le.aInRange("scalar",f,Vn,e.n);let b=u.ZERO;if(f===Vn)return b;if(f===be)return this;let{endo:_}=e;if(!_)return m.unsafeLadder(this,f);let{k1neg:p,k1:S,k2neg:v,k2:U}=_.splitScalar(f),B=b,I=b,z=this;for(;S>Vn||U>Vn;)S&be&&(B=B.add(z)),U&be&&(I=I.add(z)),z=z.double(),S>>=be,U>>=be;return p&&(B=B.negate()),v&&(I=I.negate()),I=new u(n.mul(I.px,_.beta),I.py,I.pz),B.add(I)}multiply(f){let{endo:b,n:_}=e;le.aInRange("scalar",f,be,_);let p,S;if(b){let{k1neg:v,k1:U,k2neg:B,k2:I}=b.splitScalar(f),{p:z,f:F}=this.wNAF(U),{p:V,f:q}=this.wNAF(I);z=m.constTimeNegate(v,z),V=m.constTimeNegate(B,V),V=new u(n.mul(V.px,b.beta),V.py,V.pz),p=z.add(V),S=F.add(q)}else{let{p:v,f:U}=this.wNAF(f);p=v,S=U}return u.normalizeZ([p,S])[0]}multiplyAndAddUnsafe(f,b,_){let p=u.BASE,S=(U,B)=>B===Vn||B===be||!U.equals(p)?U.multiplyUnsafe(B):U.multiply(B),v=S(this,b).add(S(f,_));return v.is0()?void 0:v}toAffine(f){return l(this,f)}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===be)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===be?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return(0,it.abool)("isCompressed",f),this.assertValidity(),r(u,this,f)}toHex(f=!0){return(0,it.abool)("isCompressed",f),le.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);let y=e.nBitLength,m=(0,Rd.wNAF)(u,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:o}}function y_(t){let e=(0,Rd.validateBasic)(t);return le.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function b_(t){let e=y_(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(H){return ho.mod(H,r)}function a(H){return ho.invert(H,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:u}=Ay({...e,toBytes(H,T,A){let P=T.toAffine(),N=n.toBytes(P.x),M=le.concatBytes;return(0,it.abool)("isCompressed",A),A?M(Uint8Array.from([T.hasEvenY()?2:3]),N):M(Uint8Array.from([4]),N,n.toBytes(P.y))},fromBytes(H){let T=H.length,A=H[0],P=H.subarray(1);if(T===i&&(A===2||A===3)){let N=le.bytesToNumberBE(P);if(!le.inRange(N,be,n.ORDER))throw new Error("Point is not on curve");let M=d(N),L;try{L=n.sqrt(M)}catch($){let Z=$ instanceof Error?": "+$.message:"";throw new Error("Point is not on curve"+Z)}let G=(L&be)===be;return(A&1)===1!==G&&(L=n.neg(L)),{x:N,y:L}}else if(T===s&&A===4){let N=n.fromBytes(P.subarray(0,n.BYTES)),M=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:N,y:M}}else throw new Error(`Point of length ${T} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=H=>le.bytesToHex(le.numberToBytesBE(H,e.nByteLength));function m(H){let T=r>>be;return H>T}function w(H){return m(H)?o(-H):H}let f=(H,T,A)=>le.bytesToNumberBE(H.slice(T,A));class b{constructor(T,A,P){this.r=T,this.s=A,this.recovery=P,this.assertValidity()}static fromCompact(T){let A=e.nByteLength;return T=(0,it.ensureBytes)("compactSignature",T,A*2),new b(f(T,0,A),f(T,A,2*A))}static fromDER(T){let{r:A,s:P}=pt.DER.toSig((0,it.ensureBytes)("DER",T));return new b(A,P)}assertValidity(){le.aInRange("r",this.r,be,r),le.aInRange("s",this.s,be,r)}addRecoveryBit(T){return new b(this.r,this.s,T)}recoverPublicKey(T){let{r:A,s:P,recovery:N}=this,M=B((0,it.ensureBytes)("msgHash",T));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let L=N===2||N===3?A+e.n:A;if(L>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let G=(N&1)===0?"02":"03",W=c.fromHex(G+y(L)),$=a(L),Z=o(-M*$),ae=o(P*$),ye=c.BASE.multiplyAndAddUnsafe(W,Z,ae);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return le.hexToBytes(this.toDERHex())}toDERHex(){return pt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return le.hexToBytes(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let _={isValidPrivateKey(H){try{return l(H),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let H=ho.getMinHashLength(e.n);return ho.mapHashToField(e.randomBytes(H),e.n)},precompute(H=8,T=c.BASE){return T._setWindowSize(H),T.multiply(BigInt(3)),T}};function p(H,T=!0){return c.fromPrivateKey(H).toRawBytes(T)}function S(H){let T=le.isBytes(H),A=typeof H=="string",P=(T||A)&&H.length;return T?P===i||P===s:A?P===2*i||P===2*s:H instanceof c}function v(H,T,A=!0){if(S(H))throw new Error("first arg must be private key");if(!S(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(H)).toRawBytes(A)}let U=e.bits2int||function(H){let T=le.bytesToNumberBE(H),A=H.length*8-e.nBitLength;return A>0?T>>BigInt(A):T},B=e.bits2int_modN||function(H){return o(U(H))},I=le.bitMask(e.nBitLength);function z(H){return le.aInRange(`num < 2^${e.nBitLength}`,H,Vn,I),le.numberToBytesBE(H,e.nByteLength)}function F(H,T,A=V){if(["recovered","canonical"].some(Pe=>Pe in A))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:N}=e,{lowS:M,prehash:L,extraEntropy:G}=A;M==null&&(M=!0),H=(0,it.ensureBytes)("msgHash",H),wy(A),L&&(H=(0,it.ensureBytes)("prehashed msgHash",P(H)));let W=B(H),$=l(T),Z=[z($),z(W)];if(G!=null&&G!==!1){let Pe=G===!0?N(n.BYTES):G;Z.push((0,it.ensureBytes)("extraEntropy",Pe))}let ae=le.concatBytes(...Z),ye=W;function ve(Pe){let pe=U(Pe);if(!u(pe))return;let $e=a(pe),qe=c.BASE.multiply(pe).toAffine(),ze=o(qe.x);if(ze===Vn)return;let St=o($e*o(ye+ze*$));if(St===Vn)return;let In=(qe.x===ze?0:2)|Number(qe.y&be),fi=St;return M&&m(St)&&(fi=w(St),In^=1),new b(ze,fi,In)}return{seed:ae,k2sig:ve}}let V={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function oe(H,T,A=V){let{seed:P,k2sig:N}=F(H,T,A),M=e;return le.createHmacDrbg(M.hash.outputLen,M.nByteLength,M.hmac)(P,N)}c.BASE._setWindowSize(8);function ie(H,T,A,P=q){let N=H;if(T=(0,it.ensureBytes)("msgHash",T),A=(0,it.ensureBytes)("publicKey",A),"strict"in P)throw new Error("options.strict was renamed to lowS");wy(P);let{lowS:M,prehash:L}=P,G,W;try{if(typeof N=="string"||le.isBytes(N))try{G=b.fromDER(N)}catch(qe){if(!(qe instanceof pt.DER.Err))throw qe;G=b.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){let{r:qe,s:ze}=N;G=new b(qe,ze)}else throw new Error("PARSE");W=c.fromHex(A)}catch(qe){if(qe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&G.hasHighS())return!1;L&&(T=e.hash(T));let{r:$,s:Z}=G,ae=B(T),ye=a(Z),ve=o(ae*ye),Pe=o($*ye),pe=c.BASE.multiplyAndAddUnsafe(W,ve,Pe)?.toAffine();return pe?o(pe.x)===$:!1}return{CURVE:e,getPublicKey:p,getSharedSecret:v,sign:oe,verify:ie,ProjectivePoint:c,Signature:b,utils:_}}function Ty(t,e){let n=t.ORDER,r=Vn;for(let w=n-be;w%Wr===Vn;w/=Wr)r+=be;let i=r,s=Wr<<i-be-be,o=s*Wr,a=(n-be)/o,c=(a-be)/Wr,l=o-be,d=s,u=t.pow(e,a),y=t.pow(e,(a+be)/Wr),m=(w,f)=>{let b=u,_=t.pow(f,l),p=t.sqr(_);p=t.mul(p,f);let S=t.mul(w,p);S=t.pow(S,c),S=t.mul(S,_),_=t.mul(S,f),p=t.mul(S,w);let v=t.mul(p,_);S=t.pow(v,d);let U=t.eql(S,t.ONE);_=t.mul(p,y),S=t.mul(v,b),p=t.cmov(_,p,U),v=t.cmov(S,v,U);for(let B=i;B>be;B--){let I=B-Wr;I=Wr<<I-be;let z=t.pow(v,I),F=t.eql(z,t.ONE);_=t.mul(p,b),b=t.mul(b,b),z=t.mul(v,b),p=t.cmov(_,p,F),v=t.cmov(z,v,F)}return{isValid:U,value:p}};if(t.ORDER%_y===cu){let w=(t.ORDER-cu)/_y,f=t.sqrt(t.neg(e));m=(b,_)=>{let p=t.sqr(_),S=t.mul(b,_);p=t.mul(p,S);let v=t.pow(p,w);v=t.mul(v,S);let U=t.mul(v,f),B=t.mul(t.sqr(v),_),I=t.eql(B,b),z=t.cmov(U,v,I);return{isValid:I,value:z}}}return m}function p_(t,e){if(ho.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let n=Ty(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,l,d,u;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),d=t.mul(i,o);let{isValid:y,value:m}=n(s,l);u=t.mul(i,r),u=t.mul(u,m),d=t.cmov(d,o,y),u=t.cmov(u,m,y);let w=t.isOdd(r)===t.isOdd(u);return u=t.cmov(t.neg(u),u,w),d=t.div(d,a),{x:d,y:u}}}});var By=x(uu=>{"use strict";h();g();Object.defineProperty(uu,"__esModule",{value:!0});uu.getHash=Ey;uu.createCurve=__;var m_=Jo(),Sy=Qt(),w_=Hd();function Ey(t){return{hash:t,hmac:(e,...n)=>(0,m_.hmac)(t,e,(0,Sy.concatBytes)(...n)),randomBytes:Sy.randomBytes}}function __(t,e){let n=r=>(0,w_.weierstrass)({...t,...Ey(r)});return Object.freeze({...n(e),create:n})}});var qy=x(Ht=>{"use strict";h();g();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.encodeToCurve=Ht.hashToCurve=Ht.schnorr=Ht.secp256k1=void 0;var lu=ic(),A_=Qt(),T_=By(),Uy=Td(),Ze=Vr(),Rt=_n(),S_=Hd(),Ua=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),du=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),va=BigInt(1),fu=BigInt(2),vy=(t,e)=>(t+e/fu)/e;function Iy(t){let e=Ua,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,d=l*l*t%e,u=(0,Ze.pow2)(d,n,e)*d%e,y=(0,Ze.pow2)(u,n,e)*d%e,m=(0,Ze.pow2)(y,fu,e)*l%e,w=(0,Ze.pow2)(m,i,e)*m%e,f=(0,Ze.pow2)(w,s,e)*w%e,b=(0,Ze.pow2)(f,a,e)*f%e,_=(0,Ze.pow2)(b,c,e)*b%e,p=(0,Ze.pow2)(_,a,e)*f%e,S=(0,Ze.pow2)(p,n,e)*d%e,v=(0,Ze.pow2)(S,o,e)*w%e,U=(0,Ze.pow2)(v,r,e)*l%e,B=(0,Ze.pow2)(U,fu,e);if(!Xr.eql(Xr.sqr(B),t))throw new Error("Cannot find square root");return B}var Xr=(0,Ze.Field)(Ua,void 0,void 0,{sqrt:Iy});Ht.secp256k1=(0,T_.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Xr,n:du,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=du,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-va*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=vy(s*t,e),c=vy(-r*t,e),l=(0,Ze.mod)(t-a*n-c*i,e),d=(0,Ze.mod)(-a*r-c*s,e),u=l>o,y=d>o;if(u&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:l,k2neg:y,k2:d}}}},lu.sha256);var Py=BigInt(0),xy={};function hu(t,...e){let n=xy[t];if(n===void 0){let r=(0,lu.sha256)(Uint8Array.from(t,i=>i.charCodeAt(0)));n=(0,Rt.concatBytes)(r,r),xy[t]=n}return(0,lu.sha256)((0,Rt.concatBytes)(n,...e))}var Ld=t=>t.toRawBytes(!0).slice(1),Kd=t=>(0,Rt.numberToBytesBE)(t,32),Cd=t=>(0,Ze.mod)(t,Ua),xa=t=>(0,Ze.mod)(t,du),Dd=Ht.secp256k1.ProjectivePoint,E_=(t,e,n)=>Dd.BASE.multiplyAndAddUnsafe(t,e,n);function jd(t){let e=Ht.secp256k1.utils.normPrivateKeyToScalar(t),n=Dd.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:xa(-e),bytes:Ld(n)}}function zy(t){(0,Rt.aInRange)("x",t,va,Ua);let e=Cd(t*t),n=Cd(e*t+BigInt(7)),r=Iy(n);r%fu!==Py&&(r=Cd(-r));let i=new Dd(t,r,va);return i.assertValidity(),i}var go=Rt.bytesToNumberBE;function Ny(...t){return xa(go(hu("BIP0340/challenge",...t)))}function B_(t){return jd(t).bytes}function v_(t,e,n=(0,A_.randomBytes)(32)){let r=(0,Rt.ensureBytes)("message",t),{bytes:i,scalar:s}=jd(e),o=(0,Rt.ensureBytes)("auxRand",n,32),a=Kd(s^go(hu("BIP0340/aux",o))),c=hu("BIP0340/nonce",a,i,r),l=xa(go(c));if(l===Py)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=jd(l),y=Ny(d,i,r),m=new Uint8Array(64);if(m.set(d,0),m.set(Kd(xa(u+y*s)),32),!Oy(m,r,i))throw new Error("sign: Invalid signature produced");return m}function Oy(t,e,n){let r=(0,Rt.ensureBytes)("signature",t,64),i=(0,Rt.ensureBytes)("message",e),s=(0,Rt.ensureBytes)("publicKey",n,32);try{let o=zy(go(s)),a=go(r.subarray(0,32));if(!(0,Rt.inRange)(a,va,Ua))return!1;let c=go(r.subarray(32,64));if(!(0,Rt.inRange)(c,va,du))return!1;let l=Ny(Kd(a),Ld(o),i),d=E_(o,c,xa(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}Ht.schnorr=(()=>({getPublicKey:B_,sign:v_,verify:Oy,utils:{randomPrivateKey:Ht.secp256k1.utils.randomPrivateKey,lift_x:zy,pointToBytes:Ld,numberToBytesBE:Rt.numberToBytesBE,bytesToNumberBE:Rt.bytesToNumberBE,taggedHash:hu,mod:Ze.mod}}))();var x_=(()=>(0,Uy.isogenyMap)(Xr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))))(),U_=(()=>(0,S_.mapToCurveSimpleSWU)(Xr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Xr.create(BigInt("-11"))}))(),My=(()=>(0,Uy.createHasher)(Ht.secp256k1.ProjectivePoint,t=>{let{x:e,y:n}=U_(Xr.create(t[0]));return x_(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Xr.ORDER,m:1,k:128,expand:"xmd",hash:lu.sha256}))();Ht.hashToCurve=(()=>My.hashToCurve)();Ht.encodeToCurve=(()=>My.encodeToCurve)()});var Ky=x(yo=>{"use strict";h();g();Object.defineProperty(yo,"__esModule",{value:!0});yo.ripemd160=yo.RIPEMD160=void 0;var I_=Tp(),Ia=Qt(),P_=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Hy=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),z_=Hy.map(t=>(9*t+5)%16),Vd=[Hy],kd=[z_];for(let t=0;t<4;t++)for(let e of[Vd,kd])e.push(e[t].map(n=>P_[n]));var Cy=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),N_=Vd.map((t,e)=>t.map(n=>Cy[e][n])),O_=kd.map((t,e)=>t.map(n=>Cy[e][n])),M_=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),q_=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Ry(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}var gu=new Uint32Array(16),yu=class extends I_.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let m=0;m<16;m++,n+=4)gu[m]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,c=a,l=this.h3|0,d=l,u=this.h4|0,y=u;for(let m=0;m<5;m++){let w=4-m,f=M_[m],b=q_[m],_=Vd[m],p=kd[m],S=N_[m],v=O_[m];for(let U=0;U<16;U++){let B=(0,Ia.rotl)(r+Ry(m,s,a,l)+gu[_[U]]+f,S[U])+u|0;r=u,u=l,l=(0,Ia.rotl)(a,10)|0,a=s,s=B}for(let U=0;U<16;U++){let B=(0,Ia.rotl)(i+Ry(w,o,c,d)+gu[p[U]]+b,v[U])+y|0;i=y,y=d,d=(0,Ia.rotl)(c,10)|0,c=o,o=B}}this.set(this.h1+a+d|0,this.h2+l+y|0,this.h3+u+i|0,this.h4+r+o|0,this.h0+s+c|0)}roundClean(){gu.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};yo.RIPEMD160=yu;yo.ripemd160=(0,Ia.wrapConstructor)(()=>new yu)});var Xi=x(Ee=>{"use strict";h();g();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.bitMask=void 0;Ee.isBytes=pu;Ee.abytes=mu;Ee.bytesToHex=Fd;Ee.numberToHexUnpadded=Vy;Ee.hexToNumber=$d;Ee.hexToBytes=wu;Ee.bytesToNumberBE=C_;Ee.bytesToNumberLE=K_;Ee.numberToBytesBE=ky;Ee.numberToBytesLE=j_;Ee.numberToVarBytesBE=L_;Ee.ensureBytes=D_;Ee.concatBytes=Gy;Ee.equalBytes=V_;Ee.utf8ToBytes=k_;Ee.bitLen=G_;Ee.bitGet=F_;Ee.bitSet=$_;Ee.createHmacDrbg=X_;Ee.validateObject=Y_;var Dy=BigInt(0),bu=BigInt(1),R_=BigInt(2);function pu(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function mu(t){if(!pu(t))throw new Error("Uint8Array expected")}var H_=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fd(t){mu(t);let e="";for(let n=0;n<t.length;n++)e+=H_[t[n]];return e}function Vy(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function $d(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var ur={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function jy(t){if(t>=ur._0&&t<=ur._9)return t-ur._0;if(t>=ur._A&&t<=ur._F)return t-(ur._A-10);if(t>=ur._a&&t<=ur._f)return t-(ur._a-10)}function wu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){let o=jy(t.charCodeAt(s)),a=jy(t.charCodeAt(s+1));if(o===void 0||a===void 0){let c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function C_(t){return $d(Fd(t))}function K_(t){return mu(t),$d(Fd(Uint8Array.from(t).reverse()))}function ky(t,e){return wu(t.toString(16).padStart(e*2,"0"))}function j_(t,e){return ky(t,e).reverse()}function L_(t){return wu(Vy(t))}function D_(t,e,n){let r;if(typeof e=="string")try{r=wu(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(pu(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Gy(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];mu(i),e+=i.length}let n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){let s=t[r];n.set(s,i),i+=s.length}return n}function V_(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function k_(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function G_(t){let e;for(e=0;t>Dy;t>>=bu,e+=1);return e}function F_(t,e){return t>>BigInt(e)&bu}function $_(t,e,n){return t|(n?bu:Dy)<<BigInt(e)}var W_=t=>(R_<<BigInt(t-1))-bu;Ee.bitMask=W_;var Gd=t=>new Uint8Array(t),Ly=t=>Uint8Array.from(t);function X_(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Gd(t),i=Gd(t),s=0,o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=Gd())=>{i=a(Ly([0]),u),r=a(),u.length!==0&&(i=a(Ly([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,y=[];for(;u<e;){r=a();let m=r.slice();y.push(m),u+=r.length}return Gy(...y)};return(u,y)=>{o(),c(u);let m;for(;!(m=y(l()));)c();return o(),m}}var Z_={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||pu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Y_(t,e,n={}){let r=(i,s,o)=>{let a=Z_[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(let[i,s]of Object.entries(e))r(i,s,!1);for(let[i,s]of Object.entries(n))r(i,s,!0);return t}});var bo=x(xe=>{"use strict";h();g();Object.defineProperty(xe,"__esModule",{value:!0});xe.isNegativeLE=void 0;xe.mod=Wt;xe.pow=Wy;xe.pow2=tA;xe.invert=_u;xe.tonelliShanks=Xy;xe.FpSqrt=Zy;xe.validateField=iA;xe.FpPow=Yy;xe.FpInvertBatch=Jy;xe.FpDiv=sA;xe.FpIsSquare=oA;xe.nLength=Xd;xe.Field=aA;xe.FpSqrtOdd=cA;xe.FpSqrtEven=uA;xe.hashToPrivateScalar=lA;xe.getFieldBytesLength=Zd;xe.getMinHashLength=Qy;xe.mapHashToField=dA;var Xt=Xi(),ke=BigInt(0),we=BigInt(1),Zr=BigInt(2),J_=BigInt(3),Wd=BigInt(4),Fy=BigInt(5),$y=BigInt(8),Q_=BigInt(9),eA=BigInt(16);function Wt(t,e){let n=t%e;return n>=ke?n:e+n}function Wy(t,e,n){if(n<=ke||e<ke)throw new Error("Expected power/modulo > 0");if(n===we)return ke;let r=we;for(;e>ke;)e&we&&(r=r*t%n),t=t*t%n,e>>=we;return r}function tA(t,e,n){let r=t;for(;e-- >ke;)r*=r,r%=n;return r}function _u(t,e){if(t===ke||e<=ke)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Wt(t,e),r=e,i=ke,s=we,o=we,a=ke;for(;n!==ke;){let l=r/n,d=r%n,u=i-o*l,y=s-a*l;r=n,n=d,i=o,s=a,o=u,a=y}if(r!==we)throw new Error("invert: does not exist");return Wt(i,e)}function Xy(t){let e=(t-we)/Zr,n,r,i;for(n=t-we,r=0;n%Zr===ke;n/=Zr,r++);for(i=Zr;i<t&&Wy(i,e,t)!==t-we;i++);if(r===1){let o=(t+we)/Wd;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let s=(n+we)/Zr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,i),n),u=a.pow(c,s),y=a.pow(c,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let m=1;for(let f=a.sqr(y);m<l&&!a.eql(f,a.ONE);m++)f=a.sqr(f);let w=a.pow(d,we<<BigInt(l-m-1));d=a.sqr(w),u=a.mul(u,w),y=a.mul(y,d),l=m}return u}}function Zy(t){if(t%Wd===J_){let e=(t+we)/Wd;return function(r,i){let s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%$y===Fy){let e=(t-Fy)/$y;return function(r,i){let s=r.mul(i,Zr),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Zr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return t%eA,Xy(t)}var nA=(t,e)=>(Wt(t,e)&we)===we;xe.isNegativeLE=nA;var rA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function iA(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rA.reduce((r,i)=>(r[i]="function",r),e);return(0,Xt.validateObject)(t,n)}function Yy(t,e,n){if(n<ke)throw new Error("Expected power > 0");if(n===ke)return t.ONE;if(n===we)return e;let r=t.ONE,i=e;for(;n>ke;)n&we&&(r=t.mul(r,i)),i=t.sqr(i),n>>=we;return r}function Jy(t,e){let n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function sA(t,e,n){return t.mul(e,typeof n=="bigint"?_u(n,t.ORDER):t.inv(n))}function oA(t){let e=(t.ORDER-we)/Zr;return n=>{let r=t.pow(n,e);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}}function Xd(t,e){let n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function aA(t,e,n=!1,r={}){if(t<=ke)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:s}=Xd(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=Zy(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Xt.bitMask)(i),ZERO:ke,ONE:we,create:c=>Wt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ke<=c&&c<t},is0:c=>c===ke,isOdd:c=>(c&we)===we,neg:c=>Wt(-c,t),eql:(c,l)=>c===l,sqr:c=>Wt(c*c,t),add:(c,l)=>Wt(c+l,t),sub:(c,l)=>Wt(c-l,t),mul:(c,l)=>Wt(c*l,t),pow:(c,l)=>Yy(a,c,l),div:(c,l)=>Wt(c*_u(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_u(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Jy(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>n?(0,Xt.numberToBytesLE)(c,s):(0,Xt.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,Xt.bytesToNumberLE)(c):(0,Xt.bytesToNumberBE)(c)}});return Object.freeze(a)}function cA(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)}function uA(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function lA(t,e,n=!1){t=(0,Xt.ensureBytes)("privateHash",t);let r=t.length,i=Xd(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);let s=n?(0,Xt.bytesToNumberLE)(t):(0,Xt.bytesToNumberBE)(t);return Wt(s,e-we)+we}function Zd(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Qy(t){let e=Zd(t);return e+Math.ceil(e/2)}function dA(t,e,n=!1){let r=t.length,i=Zd(e),s=Qy(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);let o=n?(0,Xt.bytesToNumberBE)(t):(0,Xt.bytesToNumberLE)(t),a=Wt(o,e-we)+we;return n?(0,Xt.numberToBytesLE)(a,i):(0,Xt.numberToBytesBE)(a,i)}});var t0=x(Au=>{"use strict";h();g();Object.defineProperty(Au,"__esModule",{value:!0});Au.wNAF=gA;Au.validateBasic=yA;var e0=bo(),fA=Xi(),hA=BigInt(0),Yd=BigInt(1);function gA(t,e){let n=(i,s)=>{let o=s.negate();return i?o:s},r=i=>{let s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>hA;)s&Yd&&(o=o.add(a)),a=a.double(),s>>=Yd;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=r(s),c=[],l=i,d=l;for(let u=0;u<o;u++){d=l,c.push(d);for(let y=1;y<a;y++)d=d.add(l),c.push(d);l=d.double()}return c},wNAF(i,s,o){let{windows:a,windowSize:c}=r(i),l=t.ZERO,d=t.BASE,u=BigInt(2**i-1),y=2**i,m=BigInt(i);for(let w=0;w<a;w++){let f=w*c,b=Number(o&u);o>>=m,b>c&&(b-=y,o+=Yd);let _=f,p=f+Math.abs(b)-1,S=w%2!==0,v=b<0;b===0?d=d.add(n(S,s[_])):l=l.add(n(v,s[p]))}return{p:l,f:d}},wNAFCached(i,s,o,a){let c=i._WINDOW_SIZE||1,l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function yA(t){return(0,e0.validateField)(t.Fp),(0,fA.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,e0.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}});var Qd=x(mt=>{"use strict";h();g();Object.defineProperty(mt,"__esModule",{value:!0});mt.DER=void 0;mt.weierstrassPoints=r0;mt.weierstrass=_A;mt.SWUFpSqrtRatio=i0;mt.mapToCurveSimpleSWU=AA;var Jd=t0(),po=bo(),Ue=Xi(),kn=Xi();function bA(t){let e=(0,Jd.validateBasic)(t);Ue.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:pA,hexToBytes:mA}=Ue;mt.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=mt.DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:pA(r),l:t.subarray(n+2)}},toSig(t){let{Err:e}=mt.DER,n=typeof t=="string"?mA(t):t;Ue.abytes(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=mt.DER._parseInt(n.subarray(2)),{d:o,l:a}=mt.DER._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}};var Tn=BigInt(0),Ne=BigInt(1),Yr=BigInt(2),Tu=BigInt(3),n0=BigInt(4);function r0(t){let e=bA(t),{Fp:n}=e,r=e.toBytes||((w,f,b)=>{let _=f.toAffine();return Ue.concatBytes(Uint8Array.from([4]),n.toBytes(_.x),n.toBytes(_.y))}),i=e.fromBytes||(w=>{let f=w.subarray(1),b=n.fromBytes(f.subarray(0,n.BYTES)),_=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:b,y:_}});function s(w){let{a:f,b}=e,_=n.sqr(w),p=n.mul(_,w);return n.add(n.add(p,n.mul(w,f)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&Tn<w&&w<e.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:_,n:p}=e;if(f&&typeof w!="bigint"){if(Ue.isBytes(w)&&(w=Ue.bytesToHex(w)),typeof w!="string"||!f.includes(w.length))throw new Error("Invalid key");w=w.padStart(b*2,"0")}let S;try{S=typeof w=="bigint"?w:Ue.bytesToNumberBE((0,kn.ensureBytes)("private key",w,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof w}`)}return _&&(S=po.mod(S,p)),a(S),S}let l=new Map;function d(w){if(!(w instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(f,b,_){if(this.px=f,this.py=b,this.pz=_,f==null||!n.isValid(f))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(_==null||!n.isValid(_))throw new Error("z required")}static fromAffine(f){let{x:b,y:_}=f||{};if(!f||!n.isValid(b)||!n.isValid(_))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=S=>n.eql(S,n.ZERO);return p(b)&&p(_)?u.ZERO:new u(b,_,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=n.invertBatch(f.map(_=>_.pz));return f.map((_,p)=>_.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(i((0,kn.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=this.toAffine();if(!n.isValid(f)||!n.isValid(b))throw new Error("bad point: x or y not FE");let _=n.sqr(b),p=s(f);if(!n.eql(_,p))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){d(f);let{px:b,py:_,pz:p}=this,{px:S,py:v,pz:U}=f,B=n.eql(n.mul(b,U),n.mul(S,p)),I=n.eql(n.mul(_,U),n.mul(v,p));return B&&I}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b}=e,_=n.mul(b,Tu),{px:p,py:S,pz:v}=this,U=n.ZERO,B=n.ZERO,I=n.ZERO,z=n.mul(p,p),F=n.mul(S,S),V=n.mul(v,v),q=n.mul(p,S);return q=n.add(q,q),I=n.mul(p,v),I=n.add(I,I),U=n.mul(f,I),B=n.mul(_,V),B=n.add(U,B),U=n.sub(F,B),B=n.add(F,B),B=n.mul(U,B),U=n.mul(q,U),I=n.mul(_,I),V=n.mul(f,V),q=n.sub(z,V),q=n.mul(f,q),q=n.add(q,I),I=n.add(z,z),z=n.add(I,z),z=n.add(z,V),z=n.mul(z,q),B=n.add(B,z),V=n.mul(S,v),V=n.add(V,V),z=n.mul(V,q),U=n.sub(U,z),I=n.mul(V,F),I=n.add(I,I),I=n.add(I,I),new u(U,B,I)}add(f){d(f);let{px:b,py:_,pz:p}=this,{px:S,py:v,pz:U}=f,B=n.ZERO,I=n.ZERO,z=n.ZERO,F=e.a,V=n.mul(e.b,Tu),q=n.mul(b,S),oe=n.mul(_,v),ie=n.mul(p,U),H=n.add(b,_),T=n.add(S,v);H=n.mul(H,T),T=n.add(q,oe),H=n.sub(H,T),T=n.add(b,p);let A=n.add(S,U);return T=n.mul(T,A),A=n.add(q,ie),T=n.sub(T,A),A=n.add(_,p),B=n.add(v,U),A=n.mul(A,B),B=n.add(oe,ie),A=n.sub(A,B),z=n.mul(F,T),B=n.mul(V,ie),z=n.add(B,z),B=n.sub(oe,z),z=n.add(oe,z),I=n.mul(B,z),oe=n.add(q,q),oe=n.add(oe,q),ie=n.mul(F,ie),T=n.mul(V,T),oe=n.add(oe,ie),ie=n.sub(q,ie),ie=n.mul(F,ie),T=n.add(T,ie),q=n.mul(oe,T),I=n.add(I,q),q=n.mul(A,T),B=n.mul(H,B),B=n.sub(B,q),q=n.mul(H,oe),z=n.mul(A,z),z=n.add(z,q),new u(B,I,z)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return m.wNAFCached(this,l,f,b=>{let _=n.invertBatch(b.map(p=>p.pz));return b.map((p,S)=>p.toAffine(_[S])).map(u.fromAffine)})}multiplyUnsafe(f){let b=u.ZERO;if(f===Tn)return b;if(a(f),f===Ne)return this;let{endo:_}=e;if(!_)return m.unsafeLadder(this,f);let{k1neg:p,k1:S,k2neg:v,k2:U}=_.splitScalar(f),B=b,I=b,z=this;for(;S>Tn||U>Tn;)S&Ne&&(B=B.add(z)),U&Ne&&(I=I.add(z)),z=z.double(),S>>=Ne,U>>=Ne;return p&&(B=B.negate()),v&&(I=I.negate()),I=new u(n.mul(I.px,_.beta),I.py,I.pz),B.add(I)}multiply(f){a(f);let b=f,_,p,{endo:S}=e;if(S){let{k1neg:v,k1:U,k2neg:B,k2:I}=S.splitScalar(b),{p:z,f:F}=this.wNAF(U),{p:V,f:q}=this.wNAF(I);z=m.constTimeNegate(v,z),V=m.constTimeNegate(B,V),V=new u(n.mul(V.px,S.beta),V.py,V.pz),_=z.add(V),p=F.add(q)}else{let{p:v,f:U}=this.wNAF(b);_=v,p=U}return u.normalizeZ([_,p])[0]}multiplyAndAddUnsafe(f,b,_){let p=u.BASE,S=(U,B)=>B===Tn||B===Ne||!U.equals(p)?U.multiplyUnsafe(B):U.multiply(B),v=S(this,b).add(S(f,_));return v.is0()?void 0:v}toAffine(f){let{px:b,py:_,pz:p}=this,S=this.is0();f==null&&(f=S?n.ONE:n.inv(p));let v=n.mul(b,f),U=n.mul(_,f),B=n.mul(p,f);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:v,y:U}}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===Ne)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===Ne?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),r(u,this,f)}toHex(f=!0){return Ue.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);let y=e.nBitLength,m=(0,Jd.wNAF)(u,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function wA(t){let e=(0,Jd.validateBasic)(t);return Ue.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function _A(t){let e=wA(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(T){return Tn<T&&T<n.ORDER}function a(T){return po.mod(T,r)}function c(T){return po.invert(T,r)}let{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:y}=r0({...e,toBytes(T,A,P){let N=A.toAffine(),M=n.toBytes(N.x),L=Ue.concatBytes;return P?L(Uint8Array.from([A.hasEvenY()?2:3]),M):L(Uint8Array.from([4]),M,n.toBytes(N.y))},fromBytes(T){let A=T.length,P=T[0],N=T.subarray(1);if(A===i&&(P===2||P===3)){let M=Ue.bytesToNumberBE(N);if(!o(M))throw new Error("Point is not on curve");let L=u(M),G;try{G=n.sqrt(L)}catch(Z){let ae=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+ae)}let W=(G&Ne)===Ne;return(P&1)===1!==W&&(G=n.neg(G)),{x:M,y:G}}else if(A===s&&P===4){let M=n.fromBytes(N.subarray(0,n.BYTES)),L=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:M,y:L}}else throw new Error(`Point of length ${A} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),m=T=>Ue.bytesToHex(Ue.numberToBytesBE(T,e.nByteLength));function w(T){let A=r>>Ne;return T>A}function f(T){return w(T)?a(-T):T}let b=(T,A,P)=>Ue.bytesToNumberBE(T.slice(A,P));class _{constructor(A,P,N){this.r=A,this.s=P,this.recovery=N,this.assertValidity()}static fromCompact(A){let P=e.nByteLength;return A=(0,kn.ensureBytes)("compactSignature",A,P*2),new _(b(A,0,P),b(A,P,2*P))}static fromDER(A){let{r:P,s:N}=mt.DER.toSig((0,kn.ensureBytes)("DER",A));return new _(P,N)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new _(this.r,this.s,A)}recoverPublicKey(A){let{r:P,s:N,recovery:M}=this,L=I((0,kn.ensureBytes)("msgHash",A));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");let G=M===2||M===3?P+e.n:P;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let W=(M&1)===0?"02":"03",$=l.fromHex(W+m(G)),Z=c(G),ae=a(-L*Z),ye=a(N*Z),ve=l.BASE.multiplyAndAddUnsafe($,ae,ye);if(!ve)throw new Error("point at infinify");return ve.assertValidity(),ve}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ue.hexToBytes(this.toDERHex())}toDERHex(){return mt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ue.hexToBytes(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}let p={isValidPrivateKey(T){try{return d(T),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{let T=po.getMinHashLength(e.n);return po.mapHashToField(e.randomBytes(T),e.n)},precompute(T=8,A=l.BASE){return A._setWindowSize(T),A.multiply(BigInt(3)),A}};function S(T,A=!0){return l.fromPrivateKey(T).toRawBytes(A)}function v(T){let A=Ue.isBytes(T),P=typeof T=="string",N=(A||P)&&T.length;return A?N===i||N===s:P?N===2*i||N===2*s:T instanceof l}function U(T,A,P=!0){if(v(T))throw new Error("first arg must be private key");if(!v(A))throw new Error("second arg must be public key");return l.fromHex(A).multiply(d(T)).toRawBytes(P)}let B=e.bits2int||function(T){let A=Ue.bytesToNumberBE(T),P=T.length*8-e.nBitLength;return P>0?A>>BigInt(P):A},I=e.bits2int_modN||function(T){return a(B(T))},z=Ue.bitMask(e.nBitLength);function F(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Tn<=T&&T<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ue.numberToBytesBE(T,e.nByteLength)}function V(T,A,P=q){if(["recovered","canonical"].some(pe=>pe in P))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:M}=e,{lowS:L,prehash:G,extraEntropy:W}=P;L==null&&(L=!0),T=(0,kn.ensureBytes)("msgHash",T),G&&(T=(0,kn.ensureBytes)("prehashed msgHash",N(T)));let $=I(T),Z=d(A),ae=[F(Z),F($)];if(W!=null&&W!==!1){let pe=W===!0?M(n.BYTES):W;ae.push((0,kn.ensureBytes)("extraEntropy",pe))}let ye=Ue.concatBytes(...ae),ve=$;function Pe(pe){let $e=B(pe);if(!y($e))return;let qe=c($e),ze=l.BASE.multiply($e).toAffine(),St=a(ze.x);if(St===Tn)return;let In=a(qe*a(ve+St*Z));if(In===Tn)return;let fi=(ze.x===St?0:2)|Number(ze.y&Ne),nc=In;return L&&w(In)&&(nc=f(In),fi^=1),new _(St,nc,fi)}return{seed:ye,k2sig:Pe}}let q={lowS:e.lowS,prehash:!1},oe={lowS:e.lowS,prehash:!1};function ie(T,A,P=q){let{seed:N,k2sig:M}=V(T,A,P),L=e;return Ue.createHmacDrbg(L.hash.outputLen,L.nByteLength,L.hmac)(N,M)}l.BASE._setWindowSize(8);function H(T,A,P,N=oe){let M=T;if(A=(0,kn.ensureBytes)("msgHash",A),P=(0,kn.ensureBytes)("publicKey",P),"strict"in N)throw new Error("options.strict was renamed to lowS");let{lowS:L,prehash:G}=N,W,$;try{if(typeof M=="string"||Ue.isBytes(M))try{W=_.fromDER(M)}catch(ze){if(!(ze instanceof mt.DER.Err))throw ze;W=_.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){let{r:ze,s:St}=M;W=new _(ze,St)}else throw new Error("PARSE");$=l.fromHex(P)}catch(ze){if(ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&W.hasHighS())return!1;G&&(A=e.hash(A));let{r:Z,s:ae}=W,ye=I(A),ve=c(ae),Pe=a(ye*ve),pe=a(Z*ve),$e=l.BASE.multiplyAndAddUnsafe($,Pe,pe)?.toAffine();return $e?a($e.x)===Z:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:U,sign:ie,verify:H,ProjectivePoint:l,Signature:_,utils:p}}function i0(t,e){let n=t.ORDER,r=Tn;for(let w=n-Ne;w%Yr===Tn;w/=Yr)r+=Ne;let i=r,s=Yr<<i-Ne-Ne,o=s*Yr,a=(n-Ne)/o,c=(a-Ne)/Yr,l=o-Ne,d=s,u=t.pow(e,a),y=t.pow(e,(a+Ne)/Yr),m=(w,f)=>{let b=u,_=t.pow(f,l),p=t.sqr(_);p=t.mul(p,f);let S=t.mul(w,p);S=t.pow(S,c),S=t.mul(S,_),_=t.mul(S,f),p=t.mul(S,w);let v=t.mul(p,_);S=t.pow(v,d);let U=t.eql(S,t.ONE);_=t.mul(p,y),S=t.mul(v,b),p=t.cmov(_,p,U),v=t.cmov(S,v,U);for(let B=i;B>Ne;B--){let I=B-Yr;I=Yr<<I-Ne;let z=t.pow(v,I),F=t.eql(z,t.ONE);_=t.mul(p,b),b=t.mul(b,b),z=t.mul(v,b),p=t.cmov(_,p,F),v=t.cmov(z,v,F)}return{isValid:U,value:p}};if(t.ORDER%n0===Tu){let w=(t.ORDER-Tu)/n0,f=t.sqrt(t.neg(e));m=(b,_)=>{let p=t.sqr(_),S=t.mul(b,_);p=t.mul(p,S);let v=t.pow(p,w);v=t.mul(v,S);let U=t.mul(v,f),B=t.mul(t.sqr(v),_),I=t.eql(B,b),z=t.cmov(U,v,I);return{isValid:I,value:z}}}return m}function AA(t,e){if(po.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let n=i0(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,l,d,u;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),d=t.mul(i,o);let{isValid:y,value:m}=n(s,l);u=t.mul(i,r),u=t.mul(u,m),d=t.cmov(d,o,y),u=t.cmov(u,m,y);let w=t.isOdd(r)===t.isOdd(u);return u=t.cmov(t.neg(u),u,w),d=t.div(d,a),{x:d,y:u}}}});var a0=x(Su=>{"use strict";h();g();Object.defineProperty(Su,"__esModule",{value:!0});Su.getHash=o0;Su.createCurve=EA;var TA=Jo(),s0=Qt(),SA=Qd();function o0(t){return{hash:t,hmac:(e,...n)=>(0,TA.hmac)(t,e,(0,s0.concatBytes)(...n)),randomBytes:s0.randomBytes}}function EA(t,e){let n=r=>(0,SA.weierstrass)({...t,...o0(r)});return Object.freeze({...n(e),create:n})}});var l0=x(Zi=>{"use strict";h();g();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.expand_message_xmd=c0;Zi.expand_message_xof=u0;Zi.hash_to_field=ef;Zi.isogenyMap=UA;Zi.createHasher=IA;var BA=bo(),lt=Xi(),vA=lt.bytesToNumberBE;function Jr(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);let n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function xA(t,e){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function tf(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function c0(t,e,n,r){(0,lt.abytes)(t),(0,lt.abytes)(e),tf(n),e.length>255&&(e=r((0,lt.concatBytes)((0,lt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(o>255)throw new Error("Invalid xmd length");let a=(0,lt.concatBytes)(e,Jr(e.length,1)),c=Jr(0,s),l=Jr(n,2),d=new Array(o),u=r((0,lt.concatBytes)(c,t,l,Jr(0,1),a));d[0]=r((0,lt.concatBytes)(u,Jr(1,1),a));for(let m=1;m<=o;m++){let w=[xA(u,d[m-1]),Jr(m+1,1),a];d[m]=r((0,lt.concatBytes)(...w))}return(0,lt.concatBytes)(...d).slice(0,n)}function u0(t,e,n,r,i){if((0,lt.abytes)(t),(0,lt.abytes)(e),tf(n),e.length>255){let s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,lt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Jr(n,2)).update(e).update(Jr(e.length,1)).digest()}function ef(t,e,n){(0,lt.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,lt.abytes)(t),tf(e);let l=typeof c=="string"?(0,lt.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+i)/8),y=e*s*u,m;if(a==="xmd")m=c0(t,l,y,o);else if(a==="xof")m=u0(t,l,y,i,o);else if(a==="_internal_pass")m=t;else throw new Error('expand must be "xmd" or "xof"');let w=new Array(e);for(let f=0;f<e;f++){let b=new Array(s);for(let _=0;_<s;_++){let p=u*(_+f*s),S=m.subarray(p,p+u);b[_]=(0,BA.mod)(vA(S),r)}w[f]=b}return w}function UA(t,e){let n=e.map(r=>Array.from(r).reverse());return(r,i)=>{let[s,o,a,c]=n.map(l=>l.reduce((d,u)=>t.add(t.mul(d,r),u)));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}}function IA(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){let s=ef(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){let s=ef(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);let i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}}});var A0=x(Ct=>{"use strict";h();g();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.encodeToCurve=Ct.hashToCurve=Ct.schnorr=Ct.secp256k1=void 0;var Eu=ic(),PA=Qt(),zA=a0(),h0=l0(),Ye=bo(),dt=Xi(),NA=Qd(),Uu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Bu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),g0=BigInt(1),vu=BigInt(2),d0=(t,e)=>(t+e/vu)/e;function y0(t){let e=Uu,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,d=l*l*t%e,u=(0,Ye.pow2)(d,n,e)*d%e,y=(0,Ye.pow2)(u,n,e)*d%e,m=(0,Ye.pow2)(y,vu,e)*l%e,w=(0,Ye.pow2)(m,i,e)*m%e,f=(0,Ye.pow2)(w,s,e)*w%e,b=(0,Ye.pow2)(f,a,e)*f%e,_=(0,Ye.pow2)(b,c,e)*b%e,p=(0,Ye.pow2)(_,a,e)*f%e,S=(0,Ye.pow2)(p,n,e)*d%e,v=(0,Ye.pow2)(S,o,e)*w%e,U=(0,Ye.pow2)(v,r,e)*l%e,B=(0,Ye.pow2)(U,vu,e);if(!Qr.eql(Qr.sqr(B),t))throw new Error("Cannot find square root");return B}var Qr=(0,Ye.Field)(Uu,void 0,void 0,{sqrt:y0});Ct.secp256k1=(0,zA.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Qr,n:Bu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Bu,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-g0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=d0(s*t,e),c=d0(-r*t,e),l=(0,Ye.mod)(t-a*n-c*i,e),d=(0,Ye.mod)(-a*r-c*s,e),u=l>o,y=d>o;if(u&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:l,k2neg:y,k2:d}}}},Eu.sha256);var Iu=BigInt(0),b0=t=>typeof t=="bigint"&&Iu<t&&t<Uu,OA=t=>typeof t=="bigint"&&Iu<t&&t<Bu,f0={};function xu(t,...e){let n=f0[t];if(n===void 0){let r=(0,Eu.sha256)(Uint8Array.from(t,i=>i.charCodeAt(0)));n=(0,dt.concatBytes)(r,r),f0[t]=n}return(0,Eu.sha256)((0,dt.concatBytes)(n,...e))}var of=t=>t.toRawBytes(!0).slice(1),rf=t=>(0,dt.numberToBytesBE)(t,32),nf=t=>(0,Ye.mod)(t,Uu),Pa=t=>(0,Ye.mod)(t,Bu),af=Ct.secp256k1.ProjectivePoint,MA=(t,e,n)=>af.BASE.multiplyAndAddUnsafe(t,e,n);function sf(t){let e=Ct.secp256k1.utils.normPrivateKeyToScalar(t),n=af.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Pa(-e),bytes:of(n)}}function p0(t){if(!b0(t))throw new Error("bad x: need 0 < x < p");let e=nf(t*t),n=nf(e*t+BigInt(7)),r=y0(n);r%vu!==Iu&&(r=nf(-r));let i=new af(t,r,g0);return i.assertValidity(),i}function m0(...t){return Pa((0,dt.bytesToNumberBE)(xu("BIP0340/challenge",...t)))}function qA(t){return sf(t).bytes}function RA(t,e,n=(0,PA.randomBytes)(32)){let r=(0,dt.ensureBytes)("message",t),{bytes:i,scalar:s}=sf(e),o=(0,dt.ensureBytes)("auxRand",n,32),a=rf(s^(0,dt.bytesToNumberBE)(xu("BIP0340/aux",o))),c=xu("BIP0340/nonce",a,i,r),l=Pa((0,dt.bytesToNumberBE)(c));if(l===Iu)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=sf(l),y=m0(d,i,r),m=new Uint8Array(64);if(m.set(d,0),m.set(rf(Pa(u+y*s)),32),!w0(m,r,i))throw new Error("sign: Invalid signature produced");return m}function w0(t,e,n){let r=(0,dt.ensureBytes)("signature",t,64),i=(0,dt.ensureBytes)("message",e),s=(0,dt.ensureBytes)("publicKey",n,32);try{let o=p0((0,dt.bytesToNumberBE)(s)),a=(0,dt.bytesToNumberBE)(r.subarray(0,32));if(!b0(a))return!1;let c=(0,dt.bytesToNumberBE)(r.subarray(32,64));if(!OA(c))return!1;let l=m0(rf(a),of(o),i),d=MA(o,c,Pa(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}Ct.schnorr=(()=>({getPublicKey:qA,sign:RA,verify:w0,utils:{randomPrivateKey:Ct.secp256k1.utils.randomPrivateKey,lift_x:p0,pointToBytes:of,numberToBytesBE:dt.numberToBytesBE,bytesToNumberBE:dt.bytesToNumberBE,taggedHash:xu,mod:Ye.mod}}))();var HA=(()=>(0,h0.isogenyMap)(Qr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))))(),CA=(()=>(0,NA.mapToCurveSimpleSWU)(Qr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Qr.create(BigInt("-11"))}))(),_0=(()=>(0,h0.createHasher)(Ct.secp256k1.ProjectivePoint,t=>{let{x:e,y:n}=CA(Qr.create(t[0]));return HA(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Qr.ORDER,m:1,k:128,expand:"xmd",hash:Eu.sha256}))();Ct.hashToCurve=(()=>_0.hashToCurve)();Ct.encodeToCurve=(()=>_0.encodeToCurve)()});var v0=x(fr=>{"use strict";h();g();Object.defineProperty(fr,"__esModule",{value:!0});fr.HDKey=fr.HARDENED_OFFSET=void 0;var T0=Jo(),KA=Ky(),B0=ic(),S0=sc(),za=Ap(),Gn=Qt(),lr=A0(),jA=bo(),LA=Ol(),Pu=lr.secp256k1.ProjectivePoint,cf=(0,LA.createBase58check)(B0.sha256);function E0(t){return BigInt(`0x${(0,Gn.bytesToHex)(t)}`)}function DA(t){return(0,Gn.hexToBytes)(t.toString(16).padStart(64,"0"))}var VA=(0,Gn.utf8ToBytes)("Bitcoin seed"),uf={private:76066276,public:76067358};fr.HARDENED_OFFSET=2147483648;var kA=t=>(0,KA.ripemd160)((0,B0.sha256)(t)),GA=t=>(0,Gn.createView)(t).getUint32(0,!1),zu=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error(`Invalid number=${t}. Should be from 0 to 2 ** 32 - 1`);let e=new Uint8Array(4);return(0,Gn.createView)(e).setUint32(0,t,!1),e},dr=class{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return GA(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw new Error("No private key");return cf.encode(this.serialize(this.versions.private,(0,Gn.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return cf.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,n=uf){if((0,za.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let r=(0,T0.hmac)(S0.sha512,VA,e);return new dr({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,n=uf){let r=cf.decode(e),i=(0,Gn.createView)(r),s=i.getUint32(0,!1),o={versions:n,depth:r[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),c=a[0]===0;if(s!==n[c?"private":"public"])throw new Error("Version mismatch");return c?new dr({...o,privateKey:a.slice(1)}):new dr({...o,publicKey:a})}static fromJSON(e){return dr.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||uf,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!lr.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey=typeof e.privateKey=="bigint"?e.privateKey:E0(e.privateKey),this.privKeyBytes=DA(this.privKey),this.pubKey=lr.secp256k1.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=Pu.fromHex(e.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=kA(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let n=e.replace(/^[mM]'?\//,"").split("/"),r=this;for(let i of n){let s=/^(\d+)('?)$/.exec(i),o=s&&s[1];if(!s||s.length!==3||typeof o!="string")throw new Error(`Invalid child index: ${i}`);let a=+o;if(!Number.isSafeInteger(a)||a>=fr.HARDENED_OFFSET)throw new Error("Invalid index");s[2]==="'"&&(a+=fr.HARDENED_OFFSET),r=r.deriveChild(a)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=zu(e);if(e>=fr.HARDENED_OFFSET){let a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");n=(0,Gn.concatBytes)(new Uint8Array([0]),a,n)}else n=(0,Gn.concatBytes)(this.pubKey,n);let r=(0,T0.hmac)(S0.sha512,this.chainCode,n),i=E0(r.slice(0,32)),s=r.slice(32);if(!lr.secp256k1.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");let o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let a=(0,jA.mod)(this.privKey+i,lr.secp256k1.CURVE.n);if(!lr.secp256k1.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{let a=Pu.fromHex(this.pubKey).add(Pu.fromPrivateKey(i));if(a.equals(Pu.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new dr(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,za.bytes)(e,32),lr.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,n){if((0,za.bytes)(e,32),(0,za.bytes)(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=lr.secp256k1.Signature.fromCompact(n)}catch{return!1}return lr.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,n){if(!this.chainCode)throw new Error("No chainCode set");return(0,za.bytes)(n,33),(0,Gn.concatBytes)(zu(e),new Uint8Array([this.depth]),zu(this.parentFingerprint),zu(this.index),this.chainCode,n)}};fr.HDKey=dr});var lf=x(ei=>{"use strict";h();g();Object.defineProperty(ei,"__esModule",{value:!0});ei.Secp256k1Signature=ei.Secp256k1PrivateKey=ei.Secp256k1PublicKey=void 0;var U0=_r(),Nu=qy(),FA=v0(),$A=un(),Na=mn(),x0=nu(),WA=Fi(),XA=$i(),I0=qd(),Fn=class extends WA.PublicKey{constructor(e){super();let n=Na.Hex.fromHexInput(e);if(n.toUint8Array().length!==Fn.LENGTH)throw new Error(`PublicKey length should be ${Fn.LENGTH}`);this.key=n}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof $n))return!1;let i=(0,I0.convertSigningMessage)(n),s=Na.Hex.fromHexInput(i).toUint8Array(),o=(0,U0.sha3_256)(s),a=r.toUint8Array();return Nu.secp256k1.verify(a,o,this.key.toUint8Array(),{lowS:!0})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Fn(n)}static isPublicKey(e){return e instanceof Fn}};ei.Secp256k1PublicKey=Fn;Fn.LENGTH=65;var dn=class extends $A.Serializable{constructor(e){super();let n=Na.Hex.fromHexInput(e);if(n.toUint8Array().length!==dn.LENGTH)throw new Error(`PrivateKey length should be ${dn.LENGTH}`);this.key=n}static generate(){let e=Nu.secp256k1.utils.randomPrivateKey();return new dn(e)}static fromDerivationPath(e,n){if(!(0,x0.isValidBIP44Path)(e))throw new Error(`Invalid derivation path ${e}`);return dn.fromDerivationPathInner(e,(0,x0.mnemonicToSeed)(n))}static fromDerivationPathInner(e,n){let{privateKey:r}=FA.HDKey.fromMasterSeed(n).derive(e);if(r===null)throw new Error("Invalid key");return new dn(r)}sign(e){let n=(0,I0.convertSigningMessage)(e),r=Na.Hex.fromHexInput(n),i=(0,U0.sha3_256)(r.toUint8Array()),s=Nu.secp256k1.sign(i,this.key.toUint8Array(),{lowS:!0});return new $n(s.toCompactRawBytes())}publicKey(){let e=Nu.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new Fn(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new dn(n)}static isPrivateKey(e){return e instanceof dn}};ei.Secp256k1PrivateKey=dn;dn.LENGTH=32;var $n=class extends XA.Signature{constructor(e){super();let n=Na.Hex.fromHexInput(e);if(n.toUint8Array().length!==$n.LENGTH)throw new Error(`Signature length should be ${$n.LENGTH}, received ${n.toUint8Array().length}`);this.data=n}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new $n(n)}};ei.Secp256k1Signature=$n;$n.LENGTH=64});var df=x(_o=>{"use strict";h();g();Object.defineProperty(_o,"__esModule",{value:!0});_o.AnySignature=_o.AnyPublicKey=void 0;var hr=Xe(),ZA=co(),Oa=Wi(),YA=Fi(),Ma=lf(),JA=$i(),mo=class extends YA.AccountPublicKey{constructor(e){if(super(),this.publicKey=e,e instanceof Oa.Ed25519PublicKey)this.variant=hr.AnyPublicKeyVariant.Ed25519;else if(e instanceof Ma.Secp256k1PublicKey)this.variant=hr.AnyPublicKeyVariant.Secp256k1;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:n,signature:r}=e;return r instanceof wo?this.publicKey.verifySignature({message:n,signature:r.signature}):!1}authKey(){return ZA.AuthenticationKey.fromSchemeAndBytes({scheme:hr.SigningScheme.SingleKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let n=e.deserializeUleb128AsU32(),r;switch(n){case hr.AnyPublicKeyVariant.Ed25519:r=Oa.Ed25519PublicKey.deserialize(e);break;case hr.AnyPublicKeyVariant.Secp256k1:r=Ma.Secp256k1PublicKey.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${n}`)}return new mo(r)}static isPublicKey(e){return e instanceof mo}isEd25519(){return this.publicKey instanceof Oa.Ed25519PublicKey}isSecp256k1PublicKey(){return this.publicKey instanceof Ma.Secp256k1PublicKey}};_o.AnyPublicKey=mo;var wo=class extends JA.Signature{constructor(e){if(super(),this.signature=e,e instanceof Oa.Ed25519Signature)this.variant=hr.AnySignatureVariant.Ed25519;else if(e instanceof Ma.Secp256k1Signature)this.variant=hr.AnySignatureVariant.Secp256k1;else throw new Error("Unsupported signature type")}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let n=e.deserializeUleb128AsU32(),r;switch(n){case hr.AnySignatureVariant.Ed25519:r=Oa.Ed25519Signature.deserialize(e);break;case hr.AnySignatureVariant.Secp256k1:r=Ma.Secp256k1Signature.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${n}`)}return new wo(r)}};_o.AnySignature=wo});var ff=x(Ao=>{"use strict";h();g();Object.defineProperty(Ao,"__esModule",{value:!0});Ao.MultiKeySignature=Ao.MultiKey=void 0;var QA=Xe(),eT=co(),tT=Fi(),nT=$i(),ti=df();function rT(t){let e=t;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var qa=class extends tT.AccountPublicKey{constructor(e){super();let{publicKeys:n,signaturesRequired:r}=e;if(r<1)throw new Error("The number of required signatures needs to be greater than 0");if(n.length<r)throw new Error(`Provided ${n.length} public keys is smaller than the ${r} required signatures`);this.publicKeys=n.map(i=>i instanceof ti.AnyPublicKey?i:new ti.AnyPublicKey(i)),this.signaturesRequired=r}verifySignature(e){throw new Error("not implemented")}authKey(){return eT.AuthenticationKey.fromSchemeAndBytes({scheme:QA.SigningScheme.MultiKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let n=e.deserializeVector(ti.AnyPublicKey),r=e.deserializeU8();return new qa({publicKeys:n,signaturesRequired:r})}createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach((o,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(s.has(o))throw new Error(`Duplicate bit ${o} detected.`);s.add(o);let c=Math.floor(o/8),l=i[c];l|=r>>o%8,i[c]=l}),i}getIndex(e){let n=e instanceof ti.AnyPublicKey?e:new ti.AnyPublicKey(e),r=this.publicKeys.findIndex(i=>i.toString()===n.toString());if(r!==-1)return r;throw new Error("Public key not found in MultiKey")}};Ao.MultiKey=qa;var wt=class extends nT.Signature{constructor(e){super();let{signatures:n,bitmap:r}=e;if(n.length>wt.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${wt.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=n.map(s=>s instanceof ti.AnySignature?s:new ti.AnySignature(s)),!(r instanceof Uint8Array))this.bitmap=wt.createBitmap({bits:r});else{if(r.length!==wt.BITMAP_LEN)throw new Error(`"bitmap" length should be ${wt.BITMAP_LEN}`);this.bitmap=r}let i=this.bitmap.reduce((s,o)=>s+rT(o),0);if(i!==this.signatures.length)throw new Error(`Expecting ${i} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach(o=>{if(o>=wt.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${wt.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(o))throw new Error("Duplicate bits detected.");s.add(o);let a=Math.floor(o/8),c=i[a];c|=r>>o%8,i[a]=c}),i}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let n=e.deserializeVector(ti.AnySignature),r=e.deserializeBytes();return new wt({signatures:n,bitmap:r})}};Ao.MultiKeySignature=wt;wt.BITMAP_LEN=4;wt.MAX_SIGNATURES_SUPPORTED=wt.BITMAP_LEN*8});var z0=x(P0=>{"use strict";h();g();Object.defineProperty(P0,"__esModule",{value:!0})});var ni=x(_t=>{"use strict";h();g();var iT=_t&&_t.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),gr=_t&&_t.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&iT(e,t,n)};Object.defineProperty(_t,"__esModule",{value:!0});gr(Wi(),_t);gr(nu(),_t);gr(au(),_t);gr(ff(),_t);gr(z0(),_t);gr(Fi(),_t);gr(lf(),_t);gr($i(),_t);gr(df(),_t)});var ns=x(fn=>{"use strict";h();g();Object.defineProperty(fn,"__esModule",{value:!0});fn.AccountAuthenticatorMultiKey=fn.AccountAuthenticatorSingleKey=fn.AccountAuthenticatorMultiEd25519=fn.AccountAuthenticatorEd25519=fn.AccountAuthenticator=void 0;var sT=un(),N0=ni(),O0=Wi(),M0=au(),q0=ff(),ri=Xe(),Yi=class extends sT.Serializable{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case ri.AccountAuthenticatorVariant.Ed25519:return Ji.load(e);case ri.AccountAuthenticatorVariant.MultiEd25519:return Qi.load(e);case ri.AccountAuthenticatorVariant.SingleKey:return es.load(e);case ri.AccountAuthenticatorVariant.MultiKey:return ts.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}isEd25519(){return this instanceof Ji}isMultiEd25519(){return this instanceof Qi}isSingleKey(){return this instanceof es}isMultiKey(){return this instanceof ts}};fn.AccountAuthenticator=Yi;var Ji=class extends Yi{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(ri.AccountAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=O0.Ed25519PublicKey.deserialize(e),r=O0.Ed25519Signature.deserialize(e);return new Ji(n,r)}};fn.AccountAuthenticatorEd25519=Ji;var Qi=class extends Yi{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(ri.AccountAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=M0.MultiEd25519PublicKey.deserialize(e),r=M0.MultiEd25519Signature.deserialize(e);return new Qi(n,r)}};fn.AccountAuthenticatorMultiEd25519=Qi;var es=class extends Yi{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(ri.AccountAuthenticatorVariant.SingleKey),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=N0.AnyPublicKey.deserialize(e),r=N0.AnySignature.deserialize(e);return new es(n,r)}};fn.AccountAuthenticatorSingleKey=es;var ts=class extends Yi{constructor(e,n){super(),this.public_keys=e,this.signatures=n}serialize(e){e.serializeU32AsUleb128(ri.AccountAuthenticatorVariant.MultiKey),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let n=q0.MultiKey.deserialize(e),r=q0.MultiKeySignature.deserialize(e);return new ts(n,r)}};fn.AccountAuthenticatorMultiKey=ts});var Ou=x(He=>{"use strict";h();g();Object.defineProperty(He,"__esModule",{value:!0});He.ProcessorType=He.RAW_TRANSACTION_WITH_DATA_SALT=He.RAW_TRANSACTION_SALT=He.APTOS_COIN=He.DEFAULT_TXN_TIMEOUT_SEC=He.DEFAULT_TXN_EXP_SEC_FROM_NOW=He.DEFAULT_MAX_GAS_AMOUNT=He.AptosApiType=void 0;var oT;(function(t){t.FULLNODE="Fullnode",t.INDEXER="Indexer",t.FAUCET="Faucet"})(oT=He.AptosApiType||(He.AptosApiType={}));He.DEFAULT_MAX_GAS_AMOUNT=2e5;He.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;He.DEFAULT_TXN_TIMEOUT_SEC=20;He.APTOS_COIN="0x1::aptos_coin::AptosCoin";He.RAW_TRANSACTION_SALT="APTOS::RawTransaction";He.RAW_TRANSACTION_WITH_DATA_SALT="APTOS::RawTransactionWithData";var aT;(function(t){t.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",t.DEFAULT="default_processor",t.EVENTS_PROCESSOR="events_processor",t.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",t.STAKE_PROCESSOR="stake_processor",t.TOKEN_V2_PROCESSOR="token_v2_processor",t.USER_TRANSACTION_PROCESSOR="user_transaction_processor"})(aT=He.ProcessorType||(He.ProcessorType={}))});var hf=x(Mu=>{"use strict";h();g();Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ChainId=void 0;var cT=De(),Ra=class extends cT.Serializable{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let n=e.deserializeU8();return new Ra(n)}};Mu.ChainId=Ra});var To=x(qu=>{"use strict";h();g();Object.defineProperty(qu,"__esModule",{value:!0});qu.Identifier=void 0;var uT=De(),Ha=class extends uT.Serializable{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let n=e.deserializeStr();return new Ha(n)}};qu.Identifier=Ha});var Zt=x(Sn=>{"use strict";h();g();var lT=Sn&&Sn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ca=Sn&&Sn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&lT(e,t,n)};Object.defineProperty(Sn,"__esModule",{value:!0});Ca(Gi(),Sn);Ca(co(),Sn);Ca(Lc(),Sn);Ca(ni(),Sn);Ca(mn(),Sn)});var gf=x(Ru=>{"use strict";h();g();Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ModuleId=void 0;var dT=De(),R0=Zt(),H0=To(),So=class extends dT.Serializable{constructor(e,n){super(),this.address=e,this.name=n}static fromStr(e){let n=e.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new So(R0.AccountAddress.fromString(n[0]),new H0.Identifier(n[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let n=R0.AccountAddress.deserialize(e),r=H0.Identifier.deserialize(e);return new So(n,r)}};Ru.ModuleId=So});var ja=x(te=>{"use strict";h();g();Object.defineProperty(te,"__esModule",{value:!0});te.objectStructTag=te.optionStructTag=te.stringStructTag=te.aptosCoinStructTag=te.StructTag=te.TypeTagStruct=te.TypeTagVector=te.TypeTagGeneric=te.TypeTagReference=te.TypeTagSigner=te.TypeTagAddress=te.TypeTagU256=te.TypeTagU128=te.TypeTagU64=te.TypeTagU32=te.TypeTagU16=te.TypeTagU8=te.TypeTagBool=te.TypeTag=void 0;var C0=De(),ii=Zt(),Wn=To(),_e=Xe(),Ge=class extends C0.Serializable{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case _e.TypeTagVariants.Bool:return rs.load(e);case _e.TypeTagVariants.U8:return si.load(e);case _e.TypeTagVariants.U64:return os.load(e);case _e.TypeTagVariants.U128:return as.load(e);case _e.TypeTagVariants.Address:return us.load(e);case _e.TypeTagVariants.Signer:return ls.load(e);case _e.TypeTagVariants.Vector:return oi.load(e);case _e.TypeTagVariants.Struct:return fs.load(e);case _e.TypeTagVariants.U16:return is.load(e);case _e.TypeTagVariants.U32:return ss.load(e);case _e.TypeTagVariants.U256:return cs.load(e);case _e.TypeTagVariants.Generic:return ds.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}isBool(){return this instanceof rs}isAddress(){return this instanceof us}isGeneric(){return this instanceof ds}isSigner(){return this instanceof ls}isVector(){return this instanceof oi}isStruct(){return this instanceof fs}isU8(){return this instanceof si}isU16(){return this instanceof is}isU32(){return this instanceof ss}isU64(){return this instanceof os}isU128(){return this instanceof as}isU256(){return this instanceof cs}};te.TypeTag=Ge;var rs=class extends Ge{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Bool)}static load(e){return new rs}};te.TypeTagBool=rs;var si=class extends Ge{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U8)}static load(e){return new si}};te.TypeTagU8=si;var is=class extends Ge{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U16)}static load(e){return new is}};te.TypeTagU16=is;var ss=class extends Ge{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U32)}static load(e){return new ss}};te.TypeTagU32=ss;var os=class extends Ge{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U64)}static load(e){return new os}};te.TypeTagU64=os;var as=class extends Ge{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U128)}static load(e){return new as}};te.TypeTagU128=as;var cs=class extends Ge{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.U256)}static load(e){return new cs}};te.TypeTagU256=cs;var us=class extends Ge{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Address)}static load(e){return new us}};te.TypeTagAddress=us;var ls=class extends Ge{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Signer)}static load(e){return new ls}};te.TypeTagSigner=ls;var Ka=class extends Ge{toString(){return`&${this.value.toString()}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Reference)}static load(e){let n=Ge.deserialize(e);return new Ka(n)}};te.TypeTagReference=Ka;var ds=class extends Ge{toString(){return`T${this.value}`}constructor(e){if(super(),this.value=e,e<0)throw new Error("Generic type parameter index cannot be negative")}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Generic),e.serializeU32(this.value)}static load(e){let n=e.deserializeU32();return new ds(n)}};te.TypeTagGeneric=ds;var oi=class extends Ge{toString(){return`vector<${this.value.toString()}>`}constructor(e){super(),this.value=e}static u8(){return new oi(new si)}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Vector),this.value.serialize(e)}static load(e){let n=Ge.deserialize(e);return new oi(n)}};te.TypeTagVector=oi;var fs=class extends Ge{toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(n=>n.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(_e.TypeTagVariants.Struct),this.value.serialize(e)}static load(e){let n=Xn.deserialize(e);return new fs(n)}isTypeTag(e,n,r){return this.value.moduleName.identifier===n&&this.value.name.identifier===r&&this.value.address.equals(e)}isString(){return this.isTypeTag(ii.AccountAddress.ONE,"string","String")}isOption(){return this.isTypeTag(ii.AccountAddress.ONE,"option","Option")}isObject(){return this.isTypeTag(ii.AccountAddress.ONE,"object","Object")}};te.TypeTagStruct=fs;var Xn=class extends C0.Serializable{constructor(e,n,r,i){super(),this.address=e,this.moduleName=n,this.name=r,this.typeArgs=i}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let n=ii.AccountAddress.deserialize(e),r=Wn.Identifier.deserialize(e),i=Wn.Identifier.deserialize(e),s=e.deserializeVector(Ge);return new Xn(n,r,i,s)}};te.StructTag=Xn;function fT(){return new Xn(ii.AccountAddress.ONE,new Wn.Identifier("aptos_coin"),new Wn.Identifier("AptosCoin"),[])}te.aptosCoinStructTag=fT;function hT(){return new Xn(ii.AccountAddress.ONE,new Wn.Identifier("string"),new Wn.Identifier("String"),[])}te.stringStructTag=hT;function gT(t){return new Xn(ii.AccountAddress.ONE,new Wn.Identifier("option"),new Wn.Identifier("Option"),[t])}te.optionStructTag=gT;function yT(t){return new Xn(ii.AccountAddress.ONE,new Wn.Identifier("object"),new Wn.Identifier("Object"),[t])}te.objectStructTag=yT});var yf=x(Ce=>{"use strict";h();g();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.MultiSigTransactionPayload=Ce.MultiSig=Ce.Script=Ce.EntryFunction=Ce.TransactionPayloadMultiSig=Ce.TransactionPayloadEntryFunction=Ce.TransactionPayloadScript=Ce.TransactionPayload=Ce.deserializeFromScriptArgument=void 0;var L0=De(),bT=sd(),ai=Gc(),pT=ad(),D0=Zt(),K0=To(),j0=gf(),At=Xe(),V0=ja();function k0(t){let e=t.deserializeUleb128AsU32();switch(e){case At.ScriptTransactionArgumentVariants.U8:return ai.U8.deserialize(t);case At.ScriptTransactionArgumentVariants.U64:return ai.U64.deserialize(t);case At.ScriptTransactionArgumentVariants.U128:return ai.U128.deserialize(t);case At.ScriptTransactionArgumentVariants.Address:return D0.AccountAddress.deserialize(t);case At.ScriptTransactionArgumentVariants.U8Vector:return pT.MoveVector.deserialize(t,ai.U8);case At.ScriptTransactionArgumentVariants.Bool:return ai.Bool.deserialize(t);case At.ScriptTransactionArgumentVariants.U16:return ai.U16.deserialize(t);case At.ScriptTransactionArgumentVariants.U32:return ai.U32.deserialize(t);case At.ScriptTransactionArgumentVariants.U256:return ai.U256.deserialize(t);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}Ce.deserializeFromScriptArgument=k0;var Eo=class extends L0.Serializable{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case At.TransactionPayloadVariants.Script:return Bo.load(e);case At.TransactionPayloadVariants.EntryFunction:return vo.load(e);case At.TransactionPayloadVariants.Multisig:return xo.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}};Ce.TransactionPayload=Eo;var Bo=class extends Eo{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(At.TransactionPayloadVariants.Script),this.script.serialize(e)}static load(e){let n=Uo.deserialize(e);return new Bo(n)}};Ce.TransactionPayloadScript=Bo;var vo=class extends Eo{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(At.TransactionPayloadVariants.EntryFunction),this.entryFunction.serialize(e)}static load(e){let n=ci.deserialize(e);return new vo(n)}};Ce.TransactionPayloadEntryFunction=vo;var xo=class extends Eo{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(At.TransactionPayloadVariants.Multisig),this.multiSig.serialize(e)}static load(e){let n=Io.deserialize(e);return new xo(n)}};Ce.TransactionPayloadMultiSig=xo;var ci=class{constructor(e,n,r,i){this.module_name=e,this.function_name=n,this.type_args=r,this.args=i}static build(e,n,r,i){return new ci(j0.ModuleId.fromStr(e),new K0.Identifier(n),r,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{n.serializeForEntryFunction(e)})}static deserialize(e){let n=j0.ModuleId.deserialize(e),r=K0.Identifier.deserialize(e),i=e.deserializeVector(V0.TypeTag),s=e.deserializeUleb128AsU32(),o=new Array;for(let a=0;a<s;a+=1){let c=e.deserializeUleb128AsU32(),l=bT.EntryFunctionBytes.deserialize(e,c);o.push(l)}return new ci(n,r,i,o)}};Ce.EntryFunction=ci;var Uo=class{constructor(e,n,r){this.bytecode=e,this.type_args=n,this.args=r}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{n.serializeForScriptFunction(e)})}static deserialize(e){let n=e.deserializeBytes(),r=e.deserializeVector(V0.TypeTag),i=e.deserializeUleb128AsU32(),s=new Array;for(let o=0;o<i;o+=1){let a=k0(e);s.push(a)}return new Uo(n,r,s)}};Ce.Script=Uo;var Io=class{constructor(e,n){this.multisig_address=e,this.transaction_payload=n}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let n=D0.AccountAddress.deserialize(e),r=e.deserializeBool(),i;return r&&(i=Po.deserialize(e)),new Io(n,i)}};Ce.MultiSig=Io;var Po=class extends L0.Serializable{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new Po(ci.deserialize(e))}};Ce.MultiSigTransactionPayload=Po});var Da=x(Zn=>{"use strict";h();g();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.FeePayerRawTransaction=Zn.MultiAgentRawTransaction=Zn.RawTransactionWithData=Zn.RawTransaction=void 0;var G0=De(),mT=hf(),Hu=Zt(),wT=yf(),Cu=Xe(),hs=class extends G0.Serializable{constructor(e,n,r,i,s,o,a){super(),this.sender=e,this.sequence_number=n,this.payload=r,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let n=Hu.AccountAddress.deserialize(e),r=e.deserializeU64(),i=wT.TransactionPayload.deserialize(e),s=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=mT.ChainId.deserialize(e);return new hs(n,r,i,s,o,a,c)}};Zn.RawTransaction=hs;var La=class extends G0.Serializable{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case Cu.TransactionVariants.MultiAgentTransaction:return zo.load(e);case Cu.TransactionVariants.FeePayerTransaction:return No.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}};Zn.RawTransactionWithData=La;var zo=class extends La{constructor(e,n){super(),this.raw_txn=e,this.secondary_signer_addresses=n}serialize(e){e.serializeU32AsUleb128(Cu.TransactionVariants.MultiAgentTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let n=hs.deserialize(e),r=e.deserializeVector(Hu.AccountAddress);return new zo(n,r)}};Zn.MultiAgentRawTransaction=zo;var No=class extends La{constructor(e,n,r){super(),this.raw_txn=e,this.secondary_signer_addresses=n,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(Cu.TransactionVariants.FeePayerTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let n=hs.deserialize(e),r=e.deserializeVector(Hu.AccountAddress),i=Hu.AccountAddress.deserialize(e);return new No(n,r,i)}};Zn.FeePayerRawTransaction=No});var pf=x(ju=>{"use strict";h();g();Object.defineProperty(ju,"__esModule",{value:!0});ju.RotationProofChallenge=void 0;var _T=De(),AT=Gi(),Ku=un(),bf=class extends _T.Serializable{constructor(e){super(),this.accountAddress=AT.AccountAddress.ONE,this.moduleName=new Ku.MoveString("account"),this.structName=new Ku.MoveString("RotationProofChallenge"),this.sequenceNumber=new Ku.U64(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=Ku.MoveVector.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}};ju.RotationProofChallenge=bf});var Lu=x(Kt=>{"use strict";h();g();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.TransactionAuthenticatorSingleSender=Kt.TransactionAuthenticatorFeePayer=Kt.TransactionAuthenticatorMultiAgent=Kt.TransactionAuthenticatorMultiEd25519=Kt.TransactionAuthenticatorEd25519=Kt.TransactionAuthenticator=void 0;var Oo=ns(),TT=un(),mf=Zt(),F0=Wi(),$0=au(),Yn=Xe(),ui=class extends TT.Serializable{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case Yn.TransactionAuthenticatorVariant.Ed25519:return Mo.load(e);case Yn.TransactionAuthenticatorVariant.MultiEd25519:return qo.load(e);case Yn.TransactionAuthenticatorVariant.MultiAgent:return Ro.load(e);case Yn.TransactionAuthenticatorVariant.FeePayer:return Ho.load(e);case Yn.TransactionAuthenticatorVariant.SingleSender:return Co.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}};Kt.TransactionAuthenticator=ui;var Mo=class extends ui{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(Yn.TransactionAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=F0.Ed25519PublicKey.deserialize(e),r=F0.Ed25519Signature.deserialize(e);return new Mo(n,r)}};Kt.TransactionAuthenticatorEd25519=Mo;var qo=class extends ui{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(Yn.TransactionAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=$0.MultiEd25519PublicKey.deserialize(e),r=$0.MultiEd25519Signature.deserialize(e);return new qo(n,r)}};Kt.TransactionAuthenticatorMultiEd25519=qo;var Ro=class extends ui{constructor(e,n,r){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(Yn.TransactionAuthenticatorVariant.MultiAgent),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let n=Oo.AccountAuthenticator.deserialize(e),r=e.deserializeVector(mf.AccountAddress),i=e.deserializeVector(Oo.AccountAuthenticator);return new Ro(n,r,i)}};Kt.TransactionAuthenticatorMultiAgent=Ro;var Ho=class extends ui{constructor(e,n,r,i){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(Yn.TransactionAuthenticatorVariant.FeePayer),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let n=Oo.AccountAuthenticator.deserialize(e),r=e.deserializeVector(mf.AccountAddress),i=e.deserializeVector(Oo.AccountAuthenticator),s=mf.AccountAddress.deserialize(e),o=Oo.AccountAuthenticator.deserialize(e),a={address:s,authenticator:o};return new Ho(n,r,i,a)}};Kt.TransactionAuthenticatorFeePayer=Ho;var Co=class extends ui{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(Yn.TransactionAuthenticatorVariant.SingleSender),this.sender.serialize(e)}static load(e){let n=Oo.AccountAuthenticator.deserialize(e);return new Co(n)}};Kt.TransactionAuthenticatorSingleSender=Co});var wf=x(Du=>{"use strict";h();g();Object.defineProperty(Du,"__esModule",{value:!0});Du.SignedTransaction=void 0;var ST=Lu(),ET=De(),BT=Da(),Va=class extends ET.Serializable{constructor(e,n){super(),this.raw_txn=e,this.authenticator=n}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let n=BT.RawTransaction.deserialize(e),r=ST.TransactionAuthenticator.deserialize(e);return new Va(n,r)}};Du.SignedTransaction=Va});var X0=x(W0=>{"use strict";h();g();Object.defineProperty(W0,"__esModule",{value:!0})});var _f=x(Vu=>{"use strict";h();g();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.SimpleTransaction=void 0;var vT=De(),xT=Zt(),UT=Da(),ka=class extends vT.Serializable{constructor(e,n){super(),this.rawTransaction=e,this.feePayerAddress=n}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let n=UT.RawTransaction.deserialize(e),r=e.deserializeBool(),i;return r&&(i=xT.AccountAddress.deserialize(e)),new ka(n,i)}};Vu.SimpleTransaction=ka});var Af=x(ku=>{"use strict";h();g();Object.defineProperty(ku,"__esModule",{value:!0});ku.MultiAgentTransaction=void 0;var IT=De(),Z0=Zt(),PT=Da(),Ga=class extends IT.Serializable{constructor(e,n,r){super(),this.rawTransaction=e,this.feePayerAddress=r,this.secondarySignerAddresses=n}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let n=PT.RawTransaction.deserialize(e),r=e.deserializeVector(Z0.AccountAddress),i=e.deserializeBool(),s;return i&&(s=Z0.AccountAddress.deserialize(e)),new Ga(n,r,s)}};ku.MultiAgentTransaction=Ga});var Gu=x(ft=>{"use strict";h();g();var zT=ft&&ft.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Jn=ft&&ft.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&zT(e,t,n)};Object.defineProperty(ft,"__esModule",{value:!0});Jn(hf(),ft);Jn(To(),ft);Jn(gf(),ft);Jn(Da(),ft);Jn(pf(),ft);Jn(wf(),ft);Jn(X0(),ft);Jn(yf(),ft);Jn(_f(),ft);Jn(Af(),ft)});var Fu=x(Qn=>{"use strict";h();g();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.generateSigningMessageForTransaction=Qn.generateSigningMessageForSerializable=Qn.generateSigningMessage=Qn.deriveTransactionType=void 0;var NT=_r(),Tf=Ou(),Y0=Gu();function J0(t){return t.feePayerAddress?new Y0.FeePayerRawTransaction(t.rawTransaction,t.secondarySignerAddresses??[],t.feePayerAddress):t.secondarySignerAddresses?new Y0.MultiAgentRawTransaction(t.rawTransaction,t.secondarySignerAddresses):t.rawTransaction}Qn.deriveTransactionType=J0;function Fa(t,e){let n=NT.sha3_256.create();if(!e.startsWith("APTOS::"))throw new Error(`Domain separator needs to start with 'APTOS::'.  Provided - ${e}`);n.update(e);let r=n.digest(),i=t,s=new Uint8Array(r.length+i.length);return s.set(r),s.set(i,r.length),s}Qn.generateSigningMessage=Fa;function OT(t){return Fa(t.bcsToBytes(),`APTOS::${t.constructor.name}`)}Qn.generateSigningMessageForSerializable=OT;function MT(t){let e=J0(t);return t.feePayerAddress||t.secondarySignerAddresses?Fa(e.bcsToBytes(),Tf.RAW_TRANSACTION_WITH_DATA_SALT):Fa(e.bcsToBytes(),Tf.RAW_TRANSACTION_SALT)}Qn.generateSigningMessageForTransaction=MT});var Sf=x($u=>{"use strict";h();g();Object.defineProperty($u,"__esModule",{value:!0});$u.Ed25519Account=void 0;var Q0=ns(),qT=Xe(),RT=Gi(),eb=ni(),HT=Fu(),Ko=class{constructor(e){this.signingScheme=qT.SigningScheme.Ed25519;let{privateKey:n,address:r}=e;this.privateKey=n,this.publicKey=n.publicKey(),this.accountAddress=r?RT.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(){let e=eb.Ed25519PrivateKey.generate();return new Ko({privateKey:e})}static fromDerivationPath(e){let{path:n,mnemonic:r}=e,i=eb.Ed25519PrivateKey.fromDerivationPath(n,r);return new Ko({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new Q0.AccountAuthenticatorEd25519(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new Q0.AccountAuthenticatorEd25519(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign((0,HT.generateSigningMessageForTransaction)(e))}};$u.Ed25519Account=Ko});var Ef=x(Wu=>{"use strict";h();g();Object.defineProperty(Wu,"__esModule",{value:!0});Wu.SingleKeyAccount=void 0;var tb=ns(),gs=Xe(),CT=Gi(),jo=ni(),KT=Fu(),Lo=class{constructor(e){this.signingScheme=gs.SigningScheme.SingleKey;let{privateKey:n,address:r}=e;this.privateKey=n,this.publicKey=new jo.AnyPublicKey(n.publicKey()),this.accountAddress=r?CT.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(e={}){let{scheme:n=gs.SigningSchemeInput.Ed25519}=e,r;switch(n){case gs.SigningSchemeInput.Ed25519:r=jo.Ed25519PrivateKey.generate();break;case gs.SigningSchemeInput.Secp256k1Ecdsa:r=jo.Secp256k1PrivateKey.generate();break;default:throw new Error(`Unsupported signature scheme ${n}`)}return new Lo({privateKey:r})}static fromDerivationPath(e){let{scheme:n=gs.SigningSchemeInput.Ed25519,path:r,mnemonic:i}=e,s;switch(n){case gs.SigningSchemeInput.Ed25519:s=jo.Ed25519PrivateKey.fromDerivationPath(r,i);break;case gs.SigningSchemeInput.Secp256k1Ecdsa:s=jo.Secp256k1PrivateKey.fromDerivationPath(r,i);break;default:throw new Error(`Unsupported signature scheme ${n}`)}return new Lo({privateKey:s})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new tb.AccountAuthenticatorSingleKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new tb.AccountAuthenticatorSingleKey(this.publicKey,this.signTransaction(e))}sign(e){return new jo.AnySignature(this.privateKey.sign(e))}signTransaction(e){return this.sign((0,KT.generateSigningMessageForTransaction)(e))}};Wu.SingleKeyAccount=Lo});var nb=x(Zu=>{"use strict";h();g();Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Account=void 0;var Xu=Xe(),jT=ni(),Bf=Sf(),vf=Ef(),xf=class{static generate(e={}){let{scheme:n=Xu.SigningSchemeInput.Ed25519,legacy:r=!0}=e;return n===Xu.SigningSchemeInput.Ed25519&&r?Bf.Ed25519Account.generate():vf.SingleKeyAccount.generate({scheme:n})}static fromPrivateKey(e){let{privateKey:n,address:r,legacy:i=!0}=e;return n instanceof jT.Ed25519PrivateKey&&i?new Bf.Ed25519Account({privateKey:n,address:r}):new vf.SingleKeyAccount({privateKey:n,address:r})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:n=Xu.SigningSchemeInput.Ed25519,mnemonic:r,path:i,legacy:s=!0}=e;return n===Xu.SigningSchemeInput.Ed25519&&s?Bf.Ed25519Account.fromDerivationPath({mnemonic:r,path:i}):vf.SingleKeyAccount.fromDerivationPath({scheme:n,mnemonic:r,path:i})}static authKey(e){let{publicKey:n}=e;return n.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}};Zu.Account=xf});var ib=x(Yu=>{"use strict";h();g();Object.defineProperty(Yu,"__esModule",{value:!0});Yu.MultiKeyAccount=void 0;var Uf=ni(),LT=Xe(),rb=ns(),Do=class{constructor(e){let{multiKey:n,signers:r}=e;this.publicKey=n,this.signingScheme=LT.SigningScheme.MultiKey,this.accountAddress=this.publicKey.authKey().derivedAddress();let i=[];for(let o of r)i.push(this.publicKey.getIndex(o.publicKey));let s=r.map((o,a)=>[o,i[a]]);s.sort((o,a)=>o[1]-a[1]),this.signers=s.map(o=>o[0]),this.signerIndicies=s.map(o=>o[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:i})}static fromPublicKeysAndSigners(e){let{publicKeys:n,signaturesRequired:r,signers:i}=e,s=new Uf.MultiKey({publicKeys:n,signaturesRequired:r});return new Do({multiKey:s,signers:i})}static isMultiKeySigner(e){return e instanceof Do}signWithAuthenticator(e){return new rb.AccountAuthenticatorMultiKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new rb.AccountAuthenticatorMultiKey(this.publicKey,this.signTransaction(e))}sign(e){let n=[];for(let r of this.signers)n.push(r.sign(e));return new Uf.MultiKeySignature({signatures:n,bitmap:this.signaturesBitmap})}signTransaction(e){let n=[];for(let r of this.signers)n.push(r.signTransaction(e));return new Uf.MultiKeySignature({signatures:n,bitmap:this.signaturesBitmap})}verifySignature(e){let{message:n,signature:r}=e;if(!this.signerIndicies.every((s,o)=>o===0||s>=this.signerIndicies[o-1]))return!1;for(let s=0;s<r.signatures.length;s+=1){let o=r.signatures[s];if(!this.publicKey.publicKeys[this.signerIndicies[s]].verifySignature({message:n,signature:o}))return!1}return!0}};Yu.MultiKeyAccount=Do});var If=x(er=>{"use strict";h();g();var DT=er&&er.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ju=er&&er.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&DT(e,t,n)};Object.defineProperty(er,"__esModule",{value:!0});Ju(Sf(),er);Ju(nb(),er);Ju(Ef(),er);Ju(ib(),er)});var Qu=x(yr=>{"use strict";h();g();Object.defineProperty(yr,"__esModule",{value:!0});yr.NetworkToNetworkName=yr.NetworkToChainId=yr.Network=void 0;var Vo;(function(t){t.MAINNET="mainnet",t.TESTNET="testnet",t.DEVNET="devnet",t.LOCAL="local",t.CUSTOM="custom"})(Vo=yr.Network||(yr.Network={}));yr.NetworkToChainId={mainnet:1,testnet:2};yr.NetworkToNetworkName={mainnet:Vo.MAINNET,testnet:Vo.TESTNET,devnet:Vo.DEVNET,local:Vo.LOCAL,custom:Vo.CUSTOM}});var sb=x(el=>{"use strict";h();g();Object.defineProperty(el,"__esModule",{value:!0});el.AptosConfig=void 0;var VT=Qu(),Pf=class{constructor(e){this.network=e?.network??VT.Network.DEVNET,this.moveModule=e?.moveModule}};el.AptosConfig=Pf});var zf=x(tl=>{"use strict";h();g();Object.defineProperty(tl,"__esModule",{value:!0});tl.normalizeBundle=void 0;var kT=un();function GT(t,e){let n=e.bcsToBytes(),r=new kT.Deserializer(n);return t.deserialize(r)}tl.normalizeBundle=GT});var Nf=x(br=>{"use strict";h();g();Object.defineProperty(br,"__esModule",{value:!0});br.parseTypeTag=br.TypeTagParserError=br.TypeTagParserErrorType=void 0;var Tt=ja(),FT=Zt(),ob=To();function ab(t){return!!t.match(/^[_a-zA-Z0-9]+$/)}function cb(t){return!!t.match(/\s/)}function $T(t){return!!t.match(/^T[0-9]+$/)}function WT(t,e){let n=e;for(;n<t.length;n+=1){let r=t[n];if(!cb(r))break}return n}var Ie;(function(t){t.InvalidTypeTag="unknown type",t.UnexpectedGenericType="unexpected generic type",t.UnexpectedTypeArgumentClose="unexpected '>'",t.UnexpectedWhitespaceCharacter="unexpected whitespace character",t.UnexpectedComma="unexpected ','",t.TypeArgumentCountMismatch="type argument count doesn't match expected amount",t.MissingTypeArgumentClose="no matching '>' for '<'",t.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",t.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",t.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",t.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",t.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters"})(Ie=br.TypeTagParserErrorType||(br.TypeTagParserErrorType={}));var Ae=class extends Error{constructor(e,n){super(`Failed to parse typeTag '${e}', ${n}`)}};br.TypeTagParserError=Ae;function XT(t,e){let n=e?.allowGenerics??!1,r=[],i=[],s=[],o=0,a="",c=1;for(;o<t.length;){let l=t[o];if(l==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:s}),a="",s=[],c=1;else if(l===">"){if(a!==""){let w=nl(a,i,n);s.push(w)}let d=r.pop();if(d===void 0)throw new Ae(t,Ie.UnexpectedTypeArgumentClose);if(c!==s.length)throw new Ae(t,Ie.TypeArgumentCountMismatch);let{savedStr:u,savedTypes:y,savedExpectedTypes:m}=d;i=s,s=y,a=u,c=m}else if(l===","){if(a.length!==0){let d=nl(a,i,n);i=[],s.push(d),a="",c+=1}}else if(cb(l)){let d=!1;if(a.length!==0){let y=nl(a,i,n);i=[],s.push(y),a="",d=!0}o=WT(t,o);let u=t[o];if(o<t.length&&d&&u!==","&&u!==">")throw new Ae(t,Ie.UnexpectedWhitespaceCharacter);continue}else a+=l;o+=1}if(r.length>0)throw new Ae(t,Ie.MissingTypeArgumentClose);switch(s.length){case 0:return nl(a,i,n);case 1:if(a==="")return s[0];throw new Ae(t,Ie.UnexpectedComma);default:throw new Ae(t,Ie.UnexpectedWhitespaceCharacter)}}br.parseTypeTag=XT;function nl(t,e,n){switch(t){case"&signer":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagReference(new Tt.TypeTagSigner);case"signer":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagSigner;case"bool":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagBool;case"address":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagAddress;case"u8":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU8;case"u16":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU16;case"u32":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU32;case"u64":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU64;case"u128":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU128;case"u256":if(e.length>0)throw new Ae(t,Ie.UnexpectedPrimitiveTypeArguments);return new Tt.TypeTagU256;case"vector":if(e.length!==1)throw new Ae(t,Ie.UnexpectedVectorTypeArgumentCount);return new Tt.TypeTagVector(e[0]);default:if($T(t)){if(n)return new Tt.TypeTagGeneric(Number(t.split("T")[1]));throw new Ae(t,Ie.UnexpectedGenericType)}if(!t.match(/:/))throw new Ae(t,Ie.InvalidTypeTag);let r=t.split("::");if(r.length!==3)throw new Ae(t,Ie.UnexpectedStructFormat);if(!ab(r[1]))throw new Ae(t,Ie.InvalidModuleNameCharacter);if(!ab(r[2]))throw new Ae(t,Ie.InvalidStructNameCharacter);return new Tt.TypeTagStruct(new Tt.StructTag(FT.AccountAddress.fromString(r[0]),new ob.Identifier(r[1]),new ob.Identifier(r[2]),e))}}});var rl=x(Q=>{"use strict";h();g();Object.defineProperty(Q,"__esModule",{value:!0});Q.getFunctionParts=Q.findFirstNonSignerArg=Q.throwTypeMismatch=Q.isScriptDataInput=Q.isBcsU256=Q.isBcsU128=Q.isBcsU64=Q.isBcsU32=Q.isBcsU16=Q.isBcsU8=Q.isBcsFixedBytes=Q.isBcsString=Q.isBcsAddress=Q.isBcsBool=Q.isEncodedEntryFunctionArgument=Q.isNull=Q.isLargeNumber=Q.convertNumber=Q.isNumber=Q.isString=Q.isBool=void 0;var En=un(),ZT=Zt();function YT(t){return typeof t=="boolean"}Q.isBool=YT;function ub(t){return typeof t=="string"}Q.isString=ub;function lb(t){return typeof t=="number"}Q.isNumber=lb;function JT(t){if(lb(t))return t;if(ub(t)&&t!=="")return Number.parseInt(t,10)}Q.convertNumber=JT;function QT(t){return typeof t=="number"||typeof t=="bigint"||typeof t=="string"}Q.isLargeNumber=QT;function eS(t){return t==null}Q.isNull=eS;function tS(t){return db(t)||yb(t)||bb(t)||pb(t)||mb(t)||wb(t)||_b(t)||fb(t)||hb(t)||gb(t)||t instanceof En.MoveVector||t instanceof En.MoveOption}Q.isEncodedEntryFunctionArgument=tS;function db(t){return t instanceof En.Bool}Q.isBcsBool=db;function fb(t){return t instanceof ZT.AccountAddress}Q.isBcsAddress=fb;function hb(t){return t instanceof En.MoveString}Q.isBcsString=hb;function gb(t){return t instanceof En.FixedBytes}Q.isBcsFixedBytes=gb;function yb(t){return t instanceof En.U8}Q.isBcsU8=yb;function bb(t){return t instanceof En.U16}Q.isBcsU16=bb;function pb(t){return t instanceof En.U32}Q.isBcsU32=pb;function mb(t){return t instanceof En.U64}Q.isBcsU64=mb;function wb(t){return t instanceof En.U128}Q.isBcsU128=wb;function _b(t){return t instanceof En.U256}Q.isBcsU256=_b;function nS(t){return"bytecode"in t}Q.isScriptDataInput=nS;function rS(t,e){throw new Error(`Type mismatch for argument ${e}, expected '${t}'`)}Q.throwTypeMismatch=rS;function iS(t){let e=t.params.findIndex(n=>n!=="signer"&&n!=="&signer");return e<0?t.params.length:e}Q.findFirstNonSignerArg=iS;function sS(t){let e=t.split("::");if(e.length!==3)throw new Error(`Invalid function ${t}`);let n=e[0],r=e[1],i=e[2];return{moduleAddress:n,moduleName:r,functionName:i}}Q.getFunctionParts=sS});var Mf=x(tr=>{"use strict";h();g();Object.defineProperty(tr,"__esModule",{value:!0});tr.checkOrConvertArgument=tr.convertArgument=tr.fetchEntryFunctionAbi=tr.standardizeTypeTags=void 0;var Tb=Nf(),oS=ja(),Je=un(),Ab=Zt(),X=rl();function aS(t){return t?.map(e=>(0,X.isString)(e)?(0,Tb.parseTypeTag)(e):e)??[]}tr.standardizeTypeTags=aS;async function cS(t,e,n,r){let s=JSON.parse(r?.moveModule)?.abi?.exposed_functions.find(c=>c.name===n);if(!s)throw new Error(`Could not find entry function ABI for '${t}::${e}::${n}'`);if(!s.is_entry)throw new Error(`'${t}::${e}::${n}' is not an entry function`);let o=(0,X.findFirstNonSignerArg)(s),a=[];for(let c=o;c<s.params.length;c+=1)a.push((0,Tb.parseTypeTag)(s.params[c],{allowGenerics:!0}));return{typeParameters:s.generic_type_params,parameters:a}}tr.fetchEntryFunctionAbi=cS;function uS(t,e,n,r,i){if(r>=e.parameters.length)throw new Error(`Too many arguments for '${t}', expected ${e.parameters.length}`);let s=e.parameters[r];return $a(n,s,r,i)}tr.convertArgument=uS;function $a(t,e,n,r){return(0,X.isEncodedEntryFunctionArgument)(t)?(Of(e,t,n),t):lS(t,e,n,r)}tr.checkOrConvertArgument=$a;function lS(t,e,n,r){if(e.isBool()){if((0,X.isBool)(t))return new Je.Bool(t);if((0,X.isString)(t)){if(t==="true")return new Je.Bool(!0);if(t==="false")return new Je.Bool(!1)}(0,X.throwTypeMismatch)("boolean",n)}if(e.isAddress()){if((0,X.isString)(t))return Ab.AccountAddress.fromString(t);(0,X.throwTypeMismatch)("string | AccountAddress",n)}if(e.isU8()){let i=(0,X.convertNumber)(t);if(i!==void 0)return new Je.U8(i);(0,X.throwTypeMismatch)("number|string",n)}if(e.isU16()){let i=(0,X.convertNumber)(t);if(i!==void 0)return new Je.U16(i);(0,X.throwTypeMismatch)("number | string",n)}if(e.isU32()){let i=(0,X.convertNumber)(t);if(i!==void 0)return new Je.U32(i);(0,X.throwTypeMismatch)("number | string",n)}if(e.isU64()){if((0,X.isLargeNumber)(t))return new Je.U64(BigInt(t));(0,X.throwTypeMismatch)("bigint | number | string",n)}if(e.isU128()){if((0,X.isLargeNumber)(t))return new Je.U128(BigInt(t));(0,X.throwTypeMismatch)("bigint | number | string",n)}if(e.isU256()){if((0,X.isLargeNumber)(t))return new Je.U256(BigInt(t));(0,X.throwTypeMismatch)("bigint | number | string",n)}if(e.isGeneric()){let i=e.value;if(i<0||i>=r.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${n}`);return $a(t,r[i],n,r)}if(e.isVector()){if(e.value.isU8()){if((0,X.isString)(t)){let i=new TextEncoder;return Je.MoveVector.U8(i.encode(t))}if(t instanceof Uint8Array)return Je.MoveVector.U8(t);if(t instanceof ArrayBuffer)return Je.MoveVector.U8(new Uint8Array(t))}if(Array.isArray(t))return new Je.MoveVector(t.map(i=>$a(i,e.value,n,r)));throw new Error(`Type mismatch for argument ${n}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if((0,X.isString)(t))return new Je.MoveString(t);(0,X.throwTypeMismatch)("string",n)}if(e.isObject()){if((0,X.isString)(t))return Ab.AccountAddress.fromString(t);(0,X.throwTypeMismatch)("string | AccountAddress",n)}if(e.isOption())return(0,X.isNull)(t)?new Je.MoveOption(null):new Je.MoveOption($a(t,e.value.typeArgs[0],n,r));throw new Error(`Unsupported struct input type for argument ${n}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${n}, type '${e.toString()}'`)}function Of(t,e,n){if(t.isBool()){if((0,X.isBcsBool)(e))return;(0,X.throwTypeMismatch)("Bool",n)}if(t.isAddress()){if((0,X.isBcsAddress)(e))return;(0,X.throwTypeMismatch)("AccountAddress",n)}if(t.isU8()){if((0,X.isBcsU8)(e))return;(0,X.throwTypeMismatch)("U8",n)}if(t.isU16()){if((0,X.isBcsU16)(e))return;(0,X.throwTypeMismatch)("U16",n)}if(t.isU32()){if((0,X.isBcsU32)(e))return;(0,X.throwTypeMismatch)("U32",n)}if(t.isU64()){if((0,X.isBcsU64)(e))return;(0,X.throwTypeMismatch)("U64",n)}if(t.isU128()){if((0,X.isBcsU128)(e))return;(0,X.throwTypeMismatch)("U128",n)}if(t.isU256()){if((0,X.isBcsU256)(e))return;(0,X.throwTypeMismatch)("U256",n)}if(t.isVector()){if(e instanceof Je.MoveVector){e.values.length>0&&Of(t.value,e.values[0],n);return}(0,X.throwTypeMismatch)("MoveVector",n)}if(t instanceof oS.TypeTagStruct){if(t.isString()){if((0,X.isBcsString)(e))return;(0,X.throwTypeMismatch)("MoveString",n)}if(t.isObject()){if((0,X.isBcsAddress)(e))return;(0,X.throwTypeMismatch)("AccountAddress",n)}if(t.isOption()){if(e instanceof Je.MoveOption){e.value!==void 0&&Of(t.value.typeArgs[0],e.value,n);return}(0,X.throwTypeMismatch)("MoveOption",n)}}throw new Error(`Type mismatch for argument ${n}, expected '${t.toString()}'`)}});var Sb=x(Go=>{"use strict";h();g();Object.defineProperty(Go,"__esModule",{value:!0});Go.memoize=Go.memoizeAsync=void 0;var ko=new Map;function dS(t,e,n){return async(...r)=>{if(ko.has(e)){let{value:s,timestamp:o}=ko.get(e);if(n===void 0||Date.now()-o<=n)return s}let i=await t(...r);return ko.set(e,{value:i,timestamp:Date.now()}),i}}Go.memoizeAsync=dS;function fS(t,e,n){return(...r)=>{if(ko.has(e)){let{value:s,timestamp:o}=ko.get(e);if(n===void 0||Date.now()-o<=n)return s}let i=t(...r);return ko.set(e,{value:i,timestamp:Date.now()}),i}}Go.memoize=fS});var Cf=x(Ke=>{"use strict";h();g();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.generateUserTransactionHash=Ke.hashValues=Ke.generateSignedTransaction=Ke.getAuthenticatorForSimulation=Ke.generateSignedTransactionForSimulation=Ke.buildTransaction=Ke.generateRawTransaction=Ke.generateTransactionPayloadWithABI=Ke.generateTransactionPayload=void 0;var hS=_r(),ys=Zt(),Wa=ni(),il=Wi(),Eb=Ou(),gS=zf(),bs=ns(),li=Lu(),Bn=Gu(),sl=wf(),qf=Mf(),yS=Sb(),Rf=rl(),bS=_f(),pS=Af();async function mS(t){if((0,Rf.isScriptDataInput)(t))return wS(t);let{moduleAddress:e,moduleName:n,functionName:r}=(0,Rf.getFunctionParts)(t.function),i=await ES({key:"entry-function",moduleAddress:e,moduleName:n,functionName:r,aptosConfig:t.aptosConfig,abi:t.abi,fetch:qf.fetchEntryFunctionAbi});return Bb({...t,abi:i})}Ke.generateTransactionPayload=mS;function Bb(t){let e=t.abi,{moduleAddress:n,moduleName:r,functionName:i}=(0,Rf.getFunctionParts)(t.function),s=(0,qf.standardizeTypeTags)(t.typeArguments);if(s.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${s.length}`);let o=t.functionArguments.map((c,l)=>(0,qf.convertArgument)(t.function,e,c,l,s));if(o.length!==e.parameters.length)throw new Error(`Too few arguments for '${n}::${r}::${i}', expected ${e.parameters.length} but got ${o.length}`);let a=Bn.EntryFunction.build(`${n}::${r}`,i,s,o);if("multisigAddress"in t){let c=ys.AccountAddress.from(t.multisigAddress);return new Bn.TransactionPayloadMultiSig(new Bn.MultiSig(c,new Bn.MultiSigTransactionPayload(a)))}return new Bn.TransactionPayloadEntryFunction(a)}Ke.generateTransactionPayloadWithABI=Bb;function wS(t){return new Bn.TransactionPayloadScript(new Bn.Script(ys.Hex.fromHexInput(t.bytecode).toUint8Array(),t.typeArguments??[],t.functionArguments))}async function vb(t){let{aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s}=t,o;o=i?.accountSequenceNumber;let a;a=i?.gasUnitPrice;let c;c=i?.chainId;let{maxGasAmount:l,gasUnitPrice:d,expireTimestamp:u,chainId:y}={maxGasAmount:i?.maxGasAmount?BigInt(i.maxGasAmount):BigInt(Eb.DEFAULT_MAX_GAS_AMOUNT),gasUnitPrice:BigInt(i?.gasUnitPrice),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Eb.DEFAULT_TXN_EXP_SEC_FROM_NOW),...i};return new Bn.RawTransaction(ys.AccountAddress.from(n),BigInt(o),r,BigInt(l),BigInt(d),BigInt(u),new Bn.ChainId(y))}Ke.generateRawTransaction=vb;async function _S(t){let{aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s}=t,o=await vb({aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s});if("secondarySignerAddresses"in t){let a=t.secondarySignerAddresses?.map(c=>ys.AccountAddress.from(c))??[];return new pS.MultiAgentTransaction(o,a,t.feePayerAddress?ys.AccountAddress.from(t.feePayerAddress):void 0)}return new bS.SimpleTransaction(o,t.feePayerAddress?ys.AccountAddress.from(t.feePayerAddress):void 0)}Ke.buildTransaction=_S;function AS(t){let{signerPublicKey:e,transaction:n,secondarySignersPublicKeys:r,feePayerPublicKey:i}=t,s=Xa(e);if(n.feePayerAddress){let a=new Bn.FeePayerRawTransaction(n.rawTransaction,n.secondarySignerAddresses??[],n.feePayerAddress),c=[];r&&(c=r.map(u=>Xa(u)));let l=Xa(i),d=new li.TransactionAuthenticatorFeePayer(s,n.secondarySignerAddresses??[],c,{address:n.feePayerAddress,authenticator:l});return new sl.SignedTransaction(a.raw_txn,d).bcsToBytes()}if(n.secondarySignerAddresses){let a=new Bn.MultiAgentRawTransaction(n.rawTransaction,n.secondarySignerAddresses),c=[];c=r.map(d=>Xa(d));let l=new li.TransactionAuthenticatorMultiAgent(s,n.secondarySignerAddresses,c);return new sl.SignedTransaction(a.raw_txn,l).bcsToBytes()}let o;if(s instanceof bs.AccountAuthenticatorEd25519)o=new li.TransactionAuthenticatorEd25519(s.public_key,s.signature);else if(s instanceof bs.AccountAuthenticatorSingleKey)o=new li.TransactionAuthenticatorSingleSender(s);else throw new Error("Invalid public key");return new sl.SignedTransaction(n.rawTransaction,o).bcsToBytes()}Ke.generateSignedTransactionForSimulation=AS;function Xa(t){if(t instanceof Wa.AnyPublicKey){if(t.publicKey instanceof il.Ed25519PublicKey)return new bs.AccountAuthenticatorSingleKey(t,new Wa.AnySignature(new il.Ed25519Signature(new Uint8Array(64))));if(t.publicKey instanceof Wa.Secp256k1PublicKey)return new bs.AccountAuthenticatorSingleKey(t,new Wa.AnySignature(new Wa.Secp256k1Signature(new Uint8Array(64))))}return new bs.AccountAuthenticatorEd25519(new il.Ed25519PublicKey(t.toUint8Array()),new il.Ed25519Signature(new Uint8Array(64)))}Ke.getAuthenticatorForSimulation=Xa;function xb(t){let{transaction:e,feePayerAuthenticator:n,additionalSignersAuthenticators:r}=t,i=(0,gS.normalizeBundle)(bs.AccountAuthenticator,t.senderAuthenticator),s;if(e.feePayerAddress){if(!n)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");s=new li.TransactionAuthenticatorFeePayer(i,e.secondarySignerAddresses??[],r??[],{address:e.feePayerAddress,authenticator:n})}else if(e.secondarySignerAddresses){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");s=new li.TransactionAuthenticatorMultiAgent(i,e.secondarySignerAddresses,r)}else i instanceof bs.AccountAuthenticatorEd25519?s=new li.TransactionAuthenticatorEd25519(i.public_key,i.signature):s=new li.TransactionAuthenticatorSingleSender(i);return new sl.SignedTransaction(e.rawTransaction,s).bcsToBytes()}Ke.generateSignedTransaction=xb;function Hf(t){let e=hS.sha3_256.create();for(let n of t)e.update(n);return e.digest()}Ke.hashValues=Hf;var TS=Hf(["APTOS::Transaction"]);function SS(t){let e=xb(t);return new ys.Hex(Hf([TS,new Uint8Array([0]),e])).toString()}Ke.generateUserTransactionHash=SS;async function ES({key:t,moduleAddress:e,moduleName:n,functionName:r,aptosConfig:i,abi:s,fetch:o}){return s!==void 0?s:(0,yS.memoizeAsync)(async()=>o(e,n,r,i),`${t}-${i.network}-${e}-${n}-${r}`,1e3*60*5)()}});var Ib=x(di=>{"use strict";h();g();var BS=di&&di.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ub=di&&di.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&BS(e,t,n)};Object.defineProperty(di,"__esModule",{value:!0});Ub(ns(),di);Ub(Lu(),di)});var Pb=x(nr=>{"use strict";h();g();var vS=nr&&nr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ol=nr&&nr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&vS(e,t,n)};Object.defineProperty(nr,"__esModule",{value:!0});ol(rl(),nr);ol(Cf(),nr);ol(Mf(),nr);ol(Fu(),nr)});var Nb=x(zb=>{"use strict";h();g();Object.defineProperty(zb,"__esModule",{value:!0})});var al=x(hn=>{"use strict";h();g();var xS=hn&&hn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Fo=hn&&hn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xS(e,t,n)};Object.defineProperty(hn,"__esModule",{value:!0});Fo(Ib(),hn);Fo(Gu(),hn);Fo(Pb(),hn);Fo(ja(),hn);Fo(Nf(),hn);Fo(Nb(),hn)});var ms=x(Oe=>{"use strict";h();g();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.rotateAuthKey=Oe.publicPackageTransaction=Oe.signAndSubmitTransaction=Oe.submitTransaction=Oe.simulateTransaction=Oe.signTransaction=Oe.getSigningMessage=Oe.buildRawTransaction=Oe.buildTransactionPayload=Oe.generateTransaction=void 0;var pr=un(),US=If(),Kf=Gi(),IS=pf(),ps=Cf(),rr=al();async function jf(t){let e=await Ob(t);return Mb(t,e)}Oe.generateTransaction=jf;async function Ob(t){let{aptosConfig:e,data:n}=t,r,i;return"bytecode"in n?i=await(0,ps.generateTransactionPayload)(n):"multisigAddress"in n?(r={aptosConfig:e,multisigAddress:n.multisigAddress,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments,abi:n.abi},i=await(0,ps.generateTransactionPayload)(r)):(r={aptosConfig:e,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments,abi:n.abi},i=await(0,ps.generateTransactionPayload)(r)),i}Oe.buildTransactionPayload=Ob;async function Mb(t,e){let{aptosConfig:n,sender:r,options:i}=t,s;if(PS(t)&&(s=Kf.AccountAddress.ZERO.toString()),zS(t)){let{secondarySignerAddresses:o}=t;return(0,ps.buildTransaction)({aptosConfig:n,sender:r,payload:e,options:i,secondarySignerAddresses:o,feePayerAddress:s})}return(0,ps.buildTransaction)({aptosConfig:n,sender:r,payload:e,options:i,feePayerAddress:s})}Oe.buildRawTransaction=Mb;function PS(t){return t.withFeePayer===!0}function zS(t){return"secondarySignerAddresses"in t}function NS(t){let{transaction:e}=t;return(0,rr.generateSigningMessageForTransaction)(e)}Oe.getSigningMessage=NS;function qb(t){let{signer:e,transaction:n}=t;return e.signTransactionWithAuthenticator(n)}Oe.signTransaction=qb;async function OS(t){let{aptosConfig:e,transaction:n,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:s,options:o}=t;return(0,ps.generateSignedTransactionForSimulation)({transaction:n,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:s,options:o})}Oe.simulateTransaction=OS;async function Rb(t){return(0,ps.generateSignedTransaction)({...t})}Oe.submitTransaction=Rb;async function Hb(t){let{aptosConfig:e,signer:n,transaction:r}=t,i=qb({signer:n,transaction:r});return Rb({aptosConfig:e,transaction:r,senderAuthenticator:i})}Oe.signAndSubmitTransaction=Hb;var MS={typeParameters:[],parameters:[rr.TypeTagVector.u8(),new rr.TypeTagVector(rr.TypeTagVector.u8())]};async function qS(t){let{aptosConfig:e,account:n,metadataBytes:r,moduleBytecode:i,options:s}=t,o=i.map(a=>pr.MoveVector.U8(a));return jf({aptosConfig:e,sender:Kf.AccountAddress.from(n),data:{function:"0x1::code::publish_package_txn",functionArguments:[pr.MoveVector.U8(r),new pr.MoveVector(o)],abi:MS},options:s})}Oe.publicPackageTransaction=qS;var RS={typeParameters:[],parameters:[new rr.TypeTagU8,rr.TypeTagVector.u8(),new rr.TypeTagU8,rr.TypeTagVector.u8(),rr.TypeTagVector.u8(),rr.TypeTagVector.u8()]};async function HS(t){let{aptosConfig:e,fromAccount:n,toNewPrivateKey:r,sequenceNumber:i,authenticationKey:s}=t,o=US.Account.fromPrivateKey({privateKey:r,legacy:!0}),c=new IS.RotationProofChallenge({sequenceNumber:BigInt(i),originator:n.accountAddress,currentAuthKey:Kf.AccountAddress.from(s),newPublicKey:o.publicKey}).bcsToBytes(),l=n.sign(c),d=o.sign(c),u=await jf({aptosConfig:e,sender:n.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new pr.U8(n.signingScheme),pr.MoveVector.U8(n.publicKey.toUint8Array()),new pr.U8(o.signingScheme),pr.MoveVector.U8(o.publicKey.toUint8Array()),pr.MoveVector.U8(l.toUint8Array()),pr.MoveVector.U8(d.toUint8Array())],abi:RS}});return Hb({aptosConfig:e,signer:n,transaction:u})}Oe.rotateAuthKey=HS});var Kb=x(cl=>{"use strict";h();g();Object.defineProperty(cl,"__esModule",{value:!0});cl.Build=void 0;var Cb=ms(),Lf=class{constructor(e){this.config=e}async simple(e){return(0,Cb.generateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,Cb.generateTransaction)({aptosConfig:this.config,...e})}};cl.Build=Lf});var Df=x($o=>{"use strict";h();g();Object.defineProperty($o,"__esModule",{value:!0});$o.ValidateFeePayerDataOnSimulation=$o.ValidateFeePayerDataOnSubmission=void 0;function CS(t,e,n){let r=n.value;return n.value=async function(...i){let[s]=i;if(s.transaction.feePayerAddress&&!s.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return r.apply(this,i)},n}$o.ValidateFeePayerDataOnSubmission=CS;function KS(t,e,n){let r=n.value;return n.value=async function(...i){let[s]=i;if(s.transaction.feePayerAddress&&!s.feePayerPublicKey)throw new Error("You are simulating a Fee Payer transaction but missing the feePayerPublicKey");return r.apply(this,i)},n}$o.ValidateFeePayerDataOnSimulation=KS});var Vb=x(Wo=>{"use strict";h();g();var Lb=Wo&&Wo.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.Simulate=void 0;var jb=ms(),Db=Df(),Za=class{constructor(e){this.config=e}async simple(e){return(0,jb.simulateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,jb.simulateTransaction)({aptosConfig:this.config,...e})}};Lb([Db.ValidateFeePayerDataOnSimulation],Za.prototype,"simple",null);Lb([Db.ValidateFeePayerDataOnSimulation],Za.prototype,"multiAgent",null);Wo.Simulate=Za});var $b=x(Xo=>{"use strict";h();g();var Gb=Xo&&Xo.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.Submit=void 0;var kb=ms(),Fb=Df(),Ya=class{constructor(e){this.config=e}async simple(e){return(0,kb.submitTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,kb.submitTransaction)({aptosConfig:this.config,...e})}};Gb([Fb.ValidateFeePayerDataOnSubmission],Ya.prototype,"simple",null);Gb([Fb.ValidateFeePayerDataOnSubmission],Ya.prototype,"multiAgent",null);Xo.Submit=Ya});var Wb=x(ul=>{"use strict";h();g();Object.defineProperty(ul,"__esModule",{value:!0});ul.Transaction=void 0;var Zo=ms(),jS=Kb(),LS=Vb(),DS=$b(),Vf=class{constructor(e){this.config=e,this.build=new jS.Build(this.config),this.simulate=new LS.Simulate(this.config),this.submit=new DS.Submit(this.config)}getSigningMessage(e){return(0,Zo.getSigningMessage)(e)}async publishPackageTransaction(e){return(0,Zo.publicPackageTransaction)({aptosConfig:this.config,...e})}async rotateAuthKey(e){return(0,Zo.rotateAuthKey)({aptosConfig:this.config,...e})}sign(e){return(0,Zo.signTransaction)({...e})}signAsFeePayer(e){let{signer:n,transaction:r}=e;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=n.accountAddress,(0,Zo.signTransaction)({signer:n,transaction:r})}async signAndSubmitTransaction(e){let{signer:n,transaction:r}=e;return(0,Zo.signAndSubmitTransaction)({aptosConfig:this.config,signer:n,transaction:r})}};ul.Transaction=Vf});var Xb=x(ll=>{"use strict";h();g();Object.defineProperty(ll,"__esModule",{value:!0});ll.transferFungibleAsset=void 0;var kf=al(),VS=ms(),kS={typeParameters:[{constraints:[]}],parameters:[(0,kf.parseTypeTag)("0x1::object::Object"),new kf.TypeTagAddress,new kf.TypeTagU64]};async function GS(t){let{aptosConfig:e,senderAddress:n,fungibleAssetMetadataAddress:r,recipient:i,amount:s,options:o}=t;return(0,VS.generateTransaction)({aptosConfig:e,sender:n,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[r,i,s],abi:kS},options:o})}ll.transferFungibleAsset=GS});var Zb=x(dl=>{"use strict";h();g();Object.defineProperty(dl,"__esModule",{value:!0});dl.FungibleAsset=void 0;var FS=Xb(),Gf=class{constructor(e){this.config=e}async transferFungibleAsset(e){return(0,FS.transferFungibleAsset)({aptosConfig:this.config,...e})}};dl.FungibleAsset=Gf});var Yb=x(mr=>{"use strict";h();g();var $S=mr&&mr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ff=mr&&mr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&$S(e,t,n)};Object.defineProperty(mr,"__esModule",{value:!0});Ff(sb(),mr);Ff(Wb(),mr);Ff(Zb(),mr)});var Jb=x(wr=>{"use strict";h();g();var WS=wr&&wr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$f=wr&&wr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&WS(e,t,n)};Object.defineProperty(wr,"__esModule",{value:!0});$f(Qu(),wr);$f(Ou(),wr);$f(zf(),wr)});var Wf=x(Yt=>{"use strict";h();g();var XS=Yt&&Yt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ws=Yt&&Yt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&XS(e,t,n)};Object.defineProperty(Yt,"__esModule",{value:!0});ws(If(),Yt);ws(Yb(),Yt);ws(un(),Yt);ws(Zt(),Yt);ws(al(),Yt);ws(Xe(),Yt);ws(Jb(),Yt)});var Zf=x(Y=>{"use strict";h();g();Object.defineProperty(Y,"__esModule",{value:!0});Y.validSignedTransaction=Y.signMessage=Y.createSimulateRawTransactionByABIV2=Y.createRawTransactionByABIV2=Y.createRawTransactionByABI=Y.generateBCSSimulateTransactionWithPublicKey=Y.generateBCSSimulateTransaction=Y.generateBCSTransaction=Y.claimNFTTokenPayload=Y.offerNFTTokenPayloadObject=Y.offerNFTTokenPayload=Y.createNFTTokenPayload=Y.createNFTCollectionPayload=Y.transferCoinV2=Y.transferCoin=Y.burnCoin=Y.mintCoin=Y.registerCoin=Y.transferPayload=Y.simulateTransaction=Y.createRawTransaction=Y.transfer=void 0;var ZS=sr(),YS=$l(),O=Ql(),Qb=Cr(),JS=Mn(),fl=rc(),vn=Wf();function QS(t,e,n,r,i,s,o,a){let c=ep(e,n),l=Xf(t.address(),c,r,i,s,o,a);return np(t,l)}Y.transfer=QS;function Xf(t,e,n,r,i,s,o){return new O.TxnBuilderTypes.RawTransaction(O.TxnBuilderTypes.AccountAddress.fromHex(t),n,e,i,s,o,new O.TxnBuilderTypes.ChainId(r))}Y.createRawTransaction=Xf;function eE(t,e,n,r,i,s,o){let a=Xf(t.address(),e,n,r,i,s,o);return rp(t,a)}Y.simulateTransaction=eE;function ep(t,e){return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer",[],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(t)),O.BCS.bcsSerializeUint64(e)]))}Y.transferPayload=ep;function tE(t){let e=new O.TxnBuilderTypes.TypeTagStruct(O.TxnBuilderTypes.StructTag.fromString(t));return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","register",[e],[]))}Y.registerCoin=tE;function nE(t,e,n){let r=new O.TxnBuilderTypes.TypeTagStruct(O.TxnBuilderTypes.StructTag.fromString(t));return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","mint",[r],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e)),O.BCS.bcsSerializeUint64(n)]))}Y.mintCoin=nE;function rE(t,e){let n=new O.TxnBuilderTypes.TypeTagStruct(O.TxnBuilderTypes.StructTag.fromString(t));return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","burn",[n],[O.BCS.bcsSerializeUint64(e)]))}Y.burnCoin=rE;function iE(t,e,n){let r=new O.TxnBuilderTypes.TypeTagStruct(O.TxnBuilderTypes.StructTag.fromString(t));return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::coin","transfer",[r],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e)),O.BCS.bcsSerializeUint64(n)]))}Y.transferCoin=iE;function sE(t,e,n){let r=new O.TxnBuilderTypes.TypeTagStruct(O.TxnBuilderTypes.StructTag.fromString(t));return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer_coins",[r],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e)),O.BCS.bcsSerializeUint64(n)]))}Y.transferCoinV2=sE;function tp(t){let e=new O.BCS.Serializer;return e.serializeU32AsUleb128(t.length),t.forEach(n=>{e.serializeBool(n)}),e.getBytes()}function oE(t,e,n){return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_collection_script",[],[O.BCS.bcsSerializeStr(t),O.BCS.bcsSerializeStr(e),O.BCS.bcsSerializeStr(n),O.BCS.bcsSerializeUint64(9007199254740991),tp([!1,!1,!1])]))}Y.createNFTCollectionPayload=oE;function aE(t,e,n,r,i,s){let a=new O.BCS.Serializer;return a.serializeU32AsUleb128(0),new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_token_script",[],[O.BCS.bcsSerializeStr(e),O.BCS.bcsSerializeStr(n),O.BCS.bcsSerializeStr(r),O.BCS.bcsSerializeUint64(i),O.BCS.bcsSerializeUint64(9007199254740991),O.BCS.bcsSerializeStr(s),O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(t.address())),O.BCS.bcsSerializeUint64(0),O.BCS.bcsSerializeUint64(0),tp([!1,!1,!1,!1,!1]),a.getBytes(),a.getBytes(),a.getBytes()]))}Y.createNFTTokenPayload=aE;function cE(t,e,n,r,i,s){return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","offer_script",[],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(t.hex())),O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),O.BCS.bcsSerializeStr(n),O.BCS.bcsSerializeStr(r),O.BCS.bcsSerializeUint64(i),O.BCS.bcsSerializeUint64(s)]))}Y.offerNFTTokenPayload=cE;function uE(t,e,n){return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x1::object","transfer",[Qb.StructTag.fromString("0x1::object::ObjectCore")],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(t.hex())),O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),O.BCS.bcsSerializeUint64(n)]))}Y.offerNFTTokenPayloadObject=uE;function lE(t,e,n,r,i){return new O.TxnBuilderTypes.TransactionPayloadEntryFunction(O.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","claim_script",[],[O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(t.hex())),O.BCS.bcsToBytes(O.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),O.BCS.bcsSerializeStr(n),O.BCS.bcsSerializeStr(r),O.BCS.bcsSerializeUint64(i)]))}Y.claimNFTTokenPayload=lE;function np(t,e){return new O.TransactionBuilderEd25519(r=>{let i=t.signBuffer(E.Buffer.from(r));return new O.TxnBuilderTypes.Ed25519Signature(i.toUint8Array())},t.pubKey().toUint8Array()).sign(e)}Y.generateBCSTransaction=np;function rp(t,e){return new O.TransactionBuilderEd25519(r=>{let i=new Uint8Array(64);return new O.TxnBuilderTypes.Ed25519Signature(i)},t.pubKey().toUint8Array()).sign(e)}Y.generateBCSSimulateTransaction=rp;function dE(t,e){return new O.TransactionBuilderEd25519(r=>{let i=new Uint8Array(64);return new O.TxnBuilderTypes.Ed25519Signature(i)},t).sign(e)}Y.generateBCSSimulateTransactionWithPublicKey=dE;function fE(t,e,n,r,i,s,o,a){let c={sender:t,sequenceNumber:e,gasUnitPrice:i,maxGasAmount:r,expSecFromNow:s.toString(),chainId:n},l=JSON.parse(o),d=JSON.parse(a);return(0,O.buildRawTransactionByABI)(d,c,l.function,l.type_arguments||l.typeArguments,l.arguments||l.functionArguments)}Y.createRawTransactionByABI=fE;function hE(t,e,n,r,i,s,o,a){let c=JSON.parse(o),l=JSON.parse(a),{moduleAddress:d,moduleName:u,functionName:y}=(0,vn.getFunctionParts)(c.function),m=l.find(_=>{if(d===_.abi?.address&&u==_.abi.name&&_.abi?.exposed_functions.find(S=>y==S.name))return _}),w=new vn.AptosConfig({network:vn.Network.CUSTOM,moveModule:JSON.stringify(m)}),f=new vn.Transaction(w);return f.build.simple({sender:t.accountAddress,withFeePayer:!1,data:{function:c.function,typeArguments:c.tyArg||c.typeArguments||c.type_arguments,functionArguments:c.arguments||c.functionArguments},options:{maxGasAmount:Number(r),gasUnitPrice:Number(i),expireTimestamp:Number(s),chainId:Number(n),accountSequenceNumber:Number(e)}}).then(_=>{let p=f.sign({signer:t,transaction:_}),S=new vn.SignedTransaction(_.rawTransaction,p),v=new vn.Serializer;return S.serialize(v),fl.base.toHex(v.toUint8Array())})}Y.createRawTransactionByABIV2=hE;function gE(t,e,n,r,i,s,o,a,c){let l=JSON.parse(a),d=JSON.parse(c),{moduleAddress:u,moduleName:y,functionName:m}=(0,vn.getFunctionParts)(l.function),w=d.find(p=>{if(u===p.abi?.address&&y==p.abi.name&&p.abi?.exposed_functions.find(v=>m==v.name))return p}),f=new vn.AptosConfig({network:vn.Network.CUSTOM,moveModule:JSON.stringify(w)});return new vn.Transaction(f).build.simple({sender:t,withFeePayer:!1,data:{function:l.function,typeArguments:l.tyArg||l.typeArguments||l.type_arguments,functionArguments:l.arguments||l.functionArguments},options:{maxGasAmount:Number(i),gasUnitPrice:Number(s),expireTimestamp:Number(o),chainId:Number(r),accountSequenceNumber:Number(n)}}).then(p=>{let S=(0,vn.generateSignedTransactionForSimulation)({transaction:p,signerPublicKey:e});return fl.base.toHex(S)})}Y.createSimulateRawTransactionByABIV2=gE;async function yE(t,e){let n=new TextEncoder,r=E.Buffer.from(n.encode(t)),s=YS.AptosAccount.fromPrivateKey(ZS.HexString.ensure(e)).signBuffer(r);return Promise.resolve(s.hex())}Y.signMessage=yE;function bE(t,e){let n=Qb.SignedTransaction.deserialize(new JS.Deserializer(fl.base.fromHex(t))),r=n.authenticator,i=r.public_key.value,s=r.signature.value,o=O.TransactionBuilder.getSigningMessage(n.raw_txn);if(!e&&!fl.signUtil.ed25519.verify(o,s,i))throw Error("signature error");return n}Y.validSignedTransaction=bE});var Yf=x(Ja=>{"use strict";h();g();Object.defineProperty(Ja,"__esModule",{value:!0});Ja.SignType=void 0;var pE;(function(t){t[t.Secp256k1=1]="Secp256k1",t[t.ECDSA_P256=2]="ECDSA_P256",t[t.ED25519=3]="ED25519",t[t.StarknetSignType=4]="StarknetSignType",t[t.TezosSignType=5]="TezosSignType"})(pE=Ja.SignType||(Ja.SignType={}))});var ip=x(gn=>{"use strict";h();g();Object.defineProperty(gn,"__esModule",{value:!0});gn.CoinCurveMap=gn.MultiAddressCoins=gn.segwitType=gn.Currency=void 0;var se;(function(t){t[t.NULL=-1]="NULL",t[t.BTC=0]="BTC",t[t.TBTC=1]="TBTC",t[t.ETH=60]="ETH",t[t.LTC=2]="LTC",t[t.DOGE=3]="DOGE",t[t.BCH=145]="BCH",t[t.BSV=236]="BSV",t[t.TRX=195]="TRX",t[t.SOL=501]="SOL",t[t.APTOS=637]="APTOS",t[t.OMNI_USDT=20001]="OMNI_USDT",t[t.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",t[t.SUI=784]="SUI",t[t.ATOM=118]="ATOM",t[t.OSMO=1e3]="OSMO",t[t.EVMOS=1001]="EVMOS",t[t.AXL=1002]="AXL",t[t.CRO=1003]="CRO",t[t.Iris=1004]="Iris",t[t.Juno=1005]="Juno",t[t.Kava=1006]="Kava",t[t.Kujira=1007]="Kujira",t[t.SCRT=1008]="SCRT",t[t.Stargaze=1009]="Stargaze",t[t.Terra=1010]="Terra",t[t.ZKSPACE=1011]="ZKSPACE",t[t.ZKSYNC=804]="ZKSYNC",t[t.Stx=5757]="Stx",t[t.SEI=2837]="SEI",t[t.WAX=14001]="WAX",t[t.Starknet=9004]="Starknet",t[t.ADA=1815]="ADA",t[t.INJ=2892]="INJ",t[t.Celestia=2854]="Celestia",t[t.DYDX=2897]="DYDX",t[t.Kaspa=111111]="Kaspa",t[t.TON=607]="TON",t[t.NostrAssets=1237]="NostrAssets",t[t.Near=397]="Near"})(se=gn.Currency||(gn.Currency={}));var mE;(function(t){t[t.SEGWIT_NESTED=1]="SEGWIT_NESTED",t[t.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",t[t.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",t[t.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})(mE=gn.segwitType||(gn.segwitType={}));gn.MultiAddressCoins=[se.BTC,se.TBTC,se.LTC,se.DOGE,se.BSV,se.OMNI_USDT,se.OMNI_USDT_TEST];var Te="secp256k1",hl="ed25519";gn.CoinCurveMap=new Map([[se.BTC,Te],[se.TBTC,Te],[se.ETH,Te],[se.LTC,Te],[se.DOGE,Te],[se.BCH,Te],[se.BSV,Te],[se.TRX,Te],[se.OMNI_USDT,Te],[se.OMNI_USDT_TEST,Te],[se.ATOM,Te],[se.OSMO,Te],[se.EVMOS,Te],[se.AXL,Te],[se.CRO,Te],[se.Iris,Te],[se.Juno,Te],[se.Kava,Te],[se.Kujira,Te],[se.SCRT,Te],[se.Stargaze,Te],[se.Terra,Te],[se.SEI,Te],[se.Celestia,Te],[se.DYDX,Te],[se.SOL,hl],[se.APTOS,hl],[se.SUI,hl],[se.TON,hl]])});var Jf=x(K=>{"use strict";h();g();Object.defineProperty(K,"__esModule",{value:!0});K.SignCommonMsgError=K.EstimateFeeError=K.validSignedTransactionError=K.GetPayLoadError=K.HardwareDerivePubKeyError=K.CalcTxHashError=K.SignMsgStep3Error=K.SignMsgSetupError=K.Ed25519Step3Error=K.Ed25519Step2Error=K.Ed25519Step1Error=K.Ed25519SetupError=K.EcdsaStep3Error=K.EcdsaStep2Error=K.EcdsaStep1Error=K.EcdsaSetupError=K.MPCShakeHandsError=K.MPCStepError=K.MPCAesKeyMissError=K.GetHardWareMessageHashError=K.GetHardwareSignedTransactionError=K.GetHardwareRawTransactionError=K.GetMpcTransactionError=K.GetMpcRawTransactionError=K.DerivePathError=K.GenMnemonicError=K.GenPrivateKeyError=K.UnsupportedCoinError=K.SignMsgError=K.SignTxError=K.ValidAddressError=K.NewAddressError=K.NotImplementedError=void 0;K.NotImplementedError="no implementation method";K.NewAddressError="generate address error";K.ValidAddressError="valid address error";K.SignTxError="sign tx error";K.SignMsgError="sign message error";K.UnsupportedCoinError="unsupported currency";K.GenPrivateKeyError="generate private key error";K.GenMnemonicError="generate mnemonic error";K.DerivePathError="derive hdPath error";K.GetMpcRawTransactionError="get mpc raw transaction error";K.GetMpcTransactionError="get mpc transaction error";K.GetHardwareRawTransactionError="get hardware raw transaction error";K.GetHardwareSignedTransactionError="get hardware signed transaction error";K.GetHardWareMessageHashError="get hardware message hash error";K.MPCAesKeyMissError="mpc get aes key error";K.MPCStepError="mpc step error";K.MPCShakeHandsError="mpc shake hands error";K.EcdsaSetupError="ecdsa setup error";K.EcdsaStep1Error="ecdsa step1 error";K.EcdsaStep2Error="ecdsa step2 error";K.EcdsaStep3Error="ecdsa step3 error";K.Ed25519SetupError="ed25519 setup error";K.Ed25519Step1Error="ed25519 step1 error";K.Ed25519Step2Error="ed25519 step2 error";K.Ed25519Step3Error="ed25519 step3 error";K.SignMsgSetupError="sign message setup error";K.SignMsgStep3Error="sign message step3 error";K.CalcTxHashError="calculate tx hash error";K.HardwareDerivePubKeyError="derive sub pub key error";K.GetPayLoadError="get payload error";K.validSignedTransactionError="valid signed transaction error";K.EstimateFeeError="estimate fee error";K.SignCommonMsgError="sign common msg error"});var sp=x(jt=>{"use strict";h();g();Object.defineProperty(jt,"__esModule",{value:!0});jt.jsonStringifyUniform=jt.cloneObject=jt.assertBufferLength=jt.convert2BigNumber=jt.convert2Number=jt.buildCommonSignMsg=void 0;var gl=rc();function wE(t,e){return`OKX Wallet Sign In

publicKey: ${t}
walletId: ${e}
host: api.wallet.okx
OKX Wallet Sign In`}jt.buildCommonSignMsg=wE;function _E(t){if(t!=null)return typeof t=="string"?parseInt(t):t}jt.convert2Number=_E;function AE(t){if(t!=null)return gl.BigNumber.isBigNumber(t)?t:new gl.BigNumber(t)}jt.convert2BigNumber=AE;function TE(t,e){if(t.length!=e)throw Error("buffer length is illegal")}jt.assertBufferLength=TE;function SE(t){return JSON.parse(JSON.stringify(t))}jt.cloneObject=SE;function EE(t){return JSON.stringify(t,(e,n)=>n&&(n.type==="Buffer"||n instanceof Uint8Array?gl.base.toHex(n):typeof n=="bigint"?n.toString():n))}jt.jsonStringifyUniform=EE});var Qf=x(_s=>{"use strict";h();g();var BE=_s&&_s.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vE=_s&&_s.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&BE(e,t,n)};Object.defineProperty(_s,"__esModule",{value:!0});vE(sp(),_s)});var lp=x(Be=>{"use strict";h();g();Object.defineProperty(Be,"__esModule",{value:!0});Be.SimpleWallet=Be.BaseWallet=Be.ecdsaSign=Be.fromSigned=Be.padWithZeroes=Be.toUnsigned=Be.intToHex=Be.makeSignature=Be.secp256k1SignTest=void 0;var je=Jf(),Yo=Yf(),Le=rc(),xE=Qf();function op(t){let e=Le.base.sha256("secp256k1-test"),n=Le.signUtil.secp256k1.publicKeyCreate(t,!1),{signature:r,recovery:i}=Le.signUtil.secp256k1.sign(E.Buffer.from(e),t);return Le.signUtil.secp256k1.verify(e,r,i,n)}Be.secp256k1SignTest=op;function ap(t,e,n){let r=(0,Be.fromSigned)(e),i=(0,Be.fromSigned)(n),s=t,o=eh((0,Be.toUnsigned)(r).toString("hex"),64),a=eh((0,Be.toUnsigned)(i).toString("hex"),64);return Le.base.stripHexPrefix(cp(s)).concat(o,a)}Be.makeSignature=ap;function cp(t){return`0x${t.toString(16)}`}Be.intToHex=cp;var UE=function(t){return E.Buffer.from(t.toTwos(256).toArray())};Be.toUnsigned=UE;function eh(t,e){if(t!==""&&!/^[a-f0-9]+$/iu.test(t))throw new Error(`Expected an unprefixed hex string. Received: ${t}`);if(e<0)throw new Error(`Expected a non-negative integer target length. Received: ${e}`);return String.prototype.padStart.call(t,e,"0")}Be.padWithZeroes=eh;var IE=function(t){return new Le.BN(t).fromTwos(256)};Be.fromSigned=IE;function up(t,e,n){let{signature:r,recovery:i}=Le.signUtil.secp256k1.sign(t,e),s=E.Buffer.from(r.slice(0,32)),o=E.Buffer.from(r.slice(32,64));if(n&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:n?i+(n*2+35):i+27,r:s,s:o}}Be.ecdsaSign=up;var yl=class{getRandomPrivateKey(){try{for(;;){let e=Le.base.randomBytes(32);if(op(e))return Promise.resolve(Le.base.toHex(e,!0))}}catch{}return Promise.reject(je.GenPrivateKeyError)}getDerivedPrivateKey(e){return Le.bip39.mnemonicToSeed(e.mnemonic).then(n=>{let r=Le.bip32.fromSeed(n).derivePath(e.hdPath);if(r.privateKey){let i=Le.base.toHex(r.privateKey);return Promise.resolve("0x"+i)}else return Promise.reject(je.GenPrivateKeyError)}).catch(n=>Promise.reject(je.GenPrivateKeyError))}getDerivedPath(e){return Promise.reject(je.NotImplementedError)}validPrivateKey(e){return Promise.reject(je.NotImplementedError)}signMessage(e){return Promise.reject(je.NotImplementedError)}async signCommonMsg(e){e.signType||(e.signType=Yo.SignType.Secp256k1);let n;if(e.message.text)n=e.message.text;else{let a;if(e.publicKey?a=e.publicKey:a=(await this.getNewAddress({privateKey:e.privateKey,addressType:e.addressType,hrp:e.hrp,version:e.version})).publicKey,a.startsWith("0x")&&(a=a.substring(2)),!e.message.walletId)return Promise.reject("invalid walletId");n=(0,xE.buildCommonSignMsg)(a,e.message.walletId)}let r=Le.base.magicHash(n),i=e.privateKeyHex?e.privateKeyHex:e.privateKey,s=Le.base.fromHex(i);var o;switch(e.signType){case Yo.SignType.Secp256k1:let{v:a,r:c,s:l}=up(E.Buffer.from(r),s);return Promise.resolve(ap(a,c,l));case Yo.SignType.ECDSA_P256:return o=Le.signUtil.p256.sign(E.Buffer.from(r),s).signature,Promise.resolve(Le.base.toHex(o));case Yo.SignType.ED25519:return o=Le.signUtil.ed25519.sign(r,s),Promise.resolve(Le.base.toHex(o));case Yo.SignType.StarknetSignType:return o=Le.signUtil.schnorr.stark.sign(r,s).toCompactRawBytes(),Promise.resolve(Le.base.toHex(o));case Yo.SignType.TezosSignType:return Promise.reject("not support")}}verifyMessage(e){return Promise.reject(je.NotImplementedError)}ecRecover(e,n){return Promise.reject(je.NotImplementedError)}getAddressByPublicKey(e){return Promise.reject(je.NotImplementedError)}getMPCRawTransaction(e){return Promise.reject(je.NotImplementedError)}getMPCTransaction(e){return Promise.reject(je.NotImplementedError)}getMPCRawMessage(e){return Promise.reject(je.NotImplementedError)}getMPCSignedMessage(e){return Promise.reject(je.NotImplementedError)}getHardWareRawTransaction(e){return Promise.reject(je.NotImplementedError)}getHardWareSignedTransaction(e){return Promise.reject(je.NotImplementedError)}getHardWareMessageHash(e){return Promise.reject(je.NotImplementedError)}calcTxHash(e){return Promise.reject(je.NotImplementedError)}getRawTransaction(e){return Promise.reject(je.NotImplementedError)}validSignedTransaction(e){return Promise.reject(je.NotImplementedError)}estimateFee(e){return Promise.reject(je.NotImplementedError)}};Be.BaseWallet=yl;var th=class extends yl{mockData(e,n){this.mockAddress=e,this.mockPublicKey=n}getNewAddress(e){return Promise.resolve({address:this.mockAddress,publicKey:this.mockPublicKey})}validAddress(e){throw new Error("Method not implemented.")}signTransaction(e){throw new Error("Method not implemented.")}};Be.SimpleWallet=th});var dp=x(xn=>{"use strict";h();g();var PE=xn&&xn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Qa=xn&&xn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&PE(e,t,n)};Object.defineProperty(xn,"__esModule",{value:!0});Qa(Yf(),xn);Qa(ip(),xn);Qa(Jf(),xn);Qa(lp(),xn);Qa(Qf(),xn)});var fp=x(ir=>{"use strict";h();g();var zE=ir&&ir.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),NE=ir&&ir.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OE=ir&&ir.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&zE(e,t,n);return NE(e,t),e};Object.defineProperty(ir,"__esModule",{value:!0});ir.AptosWallet=void 0;var Jt=dp(),Fe=rc(),j=hp(),nh=OE(Zf()),Me=Wf(),ec=Qu(),ME=ms(),rh=Cr(),ih=Mn(),sh=class extends Jt.BaseWallet{async getDerivedPath(e){return`m/44'/637'/${e.index}'/0'/0'`}async getRandomPrivateKey(){try{return Promise.resolve("0x"+Fe.signUtil.ed25519.ed25519_getRandomPrivateKey(!1,"hex"))}catch{return Promise.reject(Jt.GenPrivateKeyError)}}async getDerivedPrivateKey(e){try{let n=await Fe.signUtil.ed25519.ed25519_getDerivedPrivateKey(e.mnemonic,e.hdPath,!1,"hex");return Promise.resolve("0x"+n)}catch{return Promise.reject(Jt.GenPrivateKeyError)}}checkPrivateKey(e){if(!Fe.base.validateHexString(e))return!1;let n=Fe.base.fromHex(e.toLowerCase());return n.length==32||n.length==64}GetTransactionHash(e){let n=Fe.base.fromHex(e),r=Fe.base.sha3_256(E.Buffer.from("APTOS::Transaction")),i=E.Buffer.concat([E.Buffer.from(r),E.Buffer.of(0),E.Buffer.from(n)]),s=Fe.base.sha3_256(i);return Fe.base.toHex(s,!0)}getNewAddress(e){try{if(!this.checkPrivateKey(e.privateKey))return Promise.reject(Jt.NewAddressError);let n=j.AptosAccount.fromPrivateKey(j.HexString.ensure(e.privateKey)),r=n.address().hex();e.addressType&&e.addressType==="short"&&(r=n.address().toShortString());let i={address:r||"",publicKey:n.pubKey().hex()};return Promise.resolve(i)}catch{return Promise.reject(Jt.NewAddressError)}}validPrivateKey(e){let r={isValid:this.checkPrivateKey(e.privateKey),privateKey:e.privateKey};return Promise.resolve(r)}buildSimulateTx(e){let n=Fe.base.fromHex(e.publicKey),r=new Me.Ed25519PublicKey(Uint8Array.from(n)),s=r.authKey().derivedAddress(),o=e.data,a=o.base,c;switch(o.type){case"simulate_transfer":let l=o.data,d=(0,j.transferPayload)(l.recipientAddress,BigInt(l.amount)),u=(0,j.createRawTransaction)(j.HexString.fromUint8Array(s.toUint8Array()),d,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,j.generateBCSSimulateTransactionWithPublicKey)(n,u);break;case"simulate_token_transfer":let y=o.data,m=(0,j.transferCoinV2)(y.tyArg,y.recipientAddress,BigInt(y.amount)),w=(0,j.createRawTransaction)(j.HexString.fromUint8Array(s.toUint8Array()),m,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,j.generateBCSSimulateTransactionWithPublicKey)(n,w);break;case"simulate_dapp":let f=o.data;if(f.type==2){let I=new ih.Deserializer(Fe.base.fromHex(f.data)),z=rh.TransactionPayload.deserialize(I),F=(0,j.createRawTransaction)(j.HexString.fromUint8Array(s.toUint8Array()),z,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,j.generateBCSSimulateTransactionWithPublicKey)(n,F)}else return(0,j.createSimulateRawTransactionByABIV2)(s,r,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs),f.data,f.abi);break;case"simulate_fungible_asset_transfer":let b=o.data,_=new Me.AptosConfig({network:ec.Network.MAINNET}),p=new Me.FungibleAsset(_),S=b.fungibleAssetMetadataAddress,v=BigInt(b.amount),U=new Me.AccountAddress(s.toUint8Array());return p.transferFungibleAsset({senderAddress:U,fungibleAssetMetadataAddress:Me.AccountAddress.from(S),recipient:b.recipientAddress,amount:v,options:{maxGasAmount:Number(a.maxGasAmount),gasUnitPrice:Number(a.gasUnitPrice),expireTimestamp:Number(a.expirationTimestampSecs),chainId:Number(a.chainId),accountSequenceNumber:Number(a.sequenceNumber)}}).then(I=>{let z=(0,Me.generateSignedTransactionForSimulation)({transaction:I,signerPublicKey:r});return Fe.base.toHex(z)})}return Promise.resolve(Fe.base.toHex(c))}signTransaction(e){try{let n=j.AptosAccount.fromPrivateKey(j.HexString.ensure(e.privateKey)),r=e.data,i=n.address();r.base.sender&&(i=j.HexString.ensure(r.base.sender));let s=j.HexString.ensure(e.privateKey).toString(),o=new Me.Ed25519PrivateKey(s.slice(2,66)),a=Me.Account.fromPrivateKey({privateKey:o}),c=a.accountAddress,l=r.type,d;switch(l){case"transfer":{let u=r.base,y=r.data,m=(0,j.transferPayload)(y.recipientAddress,BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"tokenTransfer":{let u=r.base,y=r.data,m=(0,j.transferCoin)(y.tyArg,y.recipientAddress,BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"tokenTransferV2":{let u=r.base,y=r.data,m=(0,j.transferCoinV2)(y.tyArg,y.recipientAddress,BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"tokenMint":{let u=r.base,y=r.data,m=(0,j.mintCoin)(y.tyArg,y.recipientAddress,BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"tokenBurn":{let u=r.base,y=r.data,m=(0,j.burnCoin)(y.tyArg,BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"tokenRegister":{let u=r.base,y=r.data,m=(0,j.registerCoin)(y.tyArg),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"dapp":{let u=r.base,y=r.data;if(y.type==2){let m=new ih.Deserializer(Fe.base.fromHex(y.data)),w=rh.TransactionPayload.deserialize(m),f=(0,j.createRawTransaction)(i,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,f)}else return(0,j.createRawTransactionByABIV2)(a,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),y.data,y.abi);break}case"simulate":{let u=r.base,y=r.data;if(y.type==2){let m=new ih.Deserializer(Fe.base.fromHex(y.data)),w=rh.TransactionPayload.deserialize(m),f=(0,j.createRawTransaction)(i,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSSimulateTransaction)(n,f)}else return(0,j.createRawTransactionByABIV2)(a,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),y.data,y.abi);break}case"offerNftObject":{let u=r.base,y=r.data,m=(0,j.offerNFTTokenPayloadObject)(j.HexString.ensure(y.nftObject),j.HexString.ensure(y.receiver),BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"offerNft":{let u=r.base,y=r.data,m=(0,j.offerNFTTokenPayload)(j.HexString.ensure(y.receiver),j.HexString.ensure(y.creator),y.collectionName,y.tokenName,BigInt(y.version),BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"claimNft":{let u=r.base,y=r.data,m=(0,j.claimNFTTokenPayload)(j.HexString.ensure(y.sender),j.HexString.ensure(y.creator),y.collectionName,y.tokenName,BigInt(y.version)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSTransaction)(n,w);break}case"offerNft_simulate":{let u=r.base,y=r.data,m=(0,j.offerNFTTokenPayload)(j.HexString.ensure(y.receiver),j.HexString.ensure(y.creator),y.collectionName,y.tokenName,BigInt(y.version),BigInt(y.amount)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSSimulateTransaction)(n,w);break}case"claimNft_simulate":{let u=r.base,y=r.data,m=(0,j.claimNFTTokenPayload)(j.HexString.ensure(y.sender),j.HexString.ensure(y.creator),y.collectionName,y.tokenName,BigInt(y.version)),w=(0,j.createRawTransaction)(i,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,j.generateBCSSimulateTransaction)(n,w);break}case"simple_transaction":{let u=r.base,y=r.data,m=u.chainId==1?ec.Network.MAINNET:ec.Network.TESTNET,w='{"abi":{"address":"0x1","name":"aptos_account","friends":["0x1::genesis","0x1::resource_account"],"exposed_functions":[{"name":"assert_account_exists","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"assert_account_is_registered_for_apt","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"batch_transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"batch_transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"can_receive_direct_coin_transfers","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[],"params":["address"],"return":["bool"]},{"name":"create_account","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"deposit_coins","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["address","0x1::coin::Coin<T0>"],"return":[]},{"name":"set_allow_direct_coin_transfers","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","bool"],"return":[]},{"name":"transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","address","u64"],"return":[]},{"name":"transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","address","u64"],"return":[]}],"structs":[{"name":"DirectCoinTransferConfigUpdatedEvent","is_native":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"new_allow_direct_transfers","type":"bool"}]},{"name":"DirectTransferConfig","is_native":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"allow_arbitrary_coin_transfers","type":"bool"},{"name":"update_coin_transfer_events","type":"0x1::event::EventHandle<0x1::aptos_account::DirectCoinTransferConfigUpdatedEvent>"}]}]}}',f=y.moveModule==null?w:y.moveModule,b=new Me.AptosConfig({network:m,moveModule:f}),_=new Me.Transaction(b);if(y.signAsFeePayer){let v=y.rawTransaction,U=new Me.Deserializer(Fe.base.fromHex(v)),B=Me.RawTransaction.deserialize(U),I=new Me.SimpleTransaction(B,Me.AccountAddress.ZERO),z=_.signAsFeePayer({signer:a,transaction:I}),F={rawTransaction:I.rawTransaction.bcsToHex().toString(),sponsorSignature:z.bcsToHex().toString()};return Promise.resolve(F)}let p=y.functionArguments===void 0?[y.recipientAddress,y.amount]:y.functionArguments;return _.build.simple({sender:c,withFeePayer:y.withFeePayer,data:{function:y.function,typeArguments:y.tyArg,functionArguments:p},options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(v=>{let U=_.sign({signer:a,transaction:v});return{rawTransaction:v.rawTransaction.bcsToHex().toString(),senderSignature:U.bcsToHex().toString()}})}case"fungible_asset_transfer":{let u=r.base,y=r.data,m=new Me.AptosConfig({network:ec.Network.MAINNET}),w=new Me.FungibleAsset(m),f=y.fungibleAssetMetadataAddress,b=BigInt(y.amount);return w.transferFungibleAsset({senderAddress:a.accountAddress,fungibleAssetMetadataAddress:Me.AccountAddress.from(f),recipient:y.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let S=(0,ME.signTransaction)({signer:a,transaction:p}),v=(0,Me.generateSignedTransaction)({transaction:p,senderAuthenticator:S});return Fe.base.toHex(v)})}case"simulate_fungible_asset_transfer":{let u=r.base,y=r.data,m=new Me.AptosConfig({network:ec.Network.MAINNET}),w=new Me.FungibleAsset(m),f=y.fungibleAssetMetadataAddress,b=BigInt(y.amount);return w.transferFungibleAsset({senderAddress:a.accountAddress,fungibleAssetMetadataAddress:Me.AccountAddress.from(f),recipient:y.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let S=(0,Me.generateSignedTransactionForSimulation)({transaction:p,signerPublicKey:a.publicKey});return Fe.base.toHex(S)})}default:return Promise.reject(Jt.SignTxError)}return Promise.resolve(Fe.base.toHex(d))}catch{return Promise.reject(Jt.SignTxError)}}validAddress(e){let n;try{e.address.match(/^0x[0-9A-Fa-f]{62,64}$/)||e.address.match(/^[0-9A-Fa-f]{64}$/)?n=!0:n=!1}catch{n=!1}let r={isValid:n,address:e.address};return Promise.resolve(r)}async signMessage(e){try{let n=e.data,r=await nh.signMessage(n,e.privateKey);return r.startsWith("0x")&&(r=r.substring(2)),Promise.resolve(r)}catch{return Promise.reject(Jt.SignTxError)}}async signCommonMsg(e){return super.signCommonMsg({privateKey:e.privateKey,message:e.message,signType:Jt.SignType.ED25519})}async signMessageByPayload(e){try{let n=e.data,r="APTOS",i,s,o,a=r;n?.address&&(i=new j.AptosAccount(Fe.base.fromHex(e.privateKey)).address().hex(),a=a.concat(`
address: `,i)),n?.application&&(s=n.dAppDomain==null?"":n.dAppDomain,a=a.concat(`
application: `,s)),n.chainId&&(o=n.chain_id==null?0:n.chain_id,a=a.concat(`
chainId: `,o.toString())),a=a.concat(`
message: `,n.message),a=a.concat(`
nonce: `,n.nonce);let c=await nh.signMessage(a,e.privateKey);c.startsWith("0x")&&(c=c.substring(2));let l={address:i,application:s,chainId:o,fullMessage:a,message:n.message,nonce:n.nonce,prefix:r,signature:c};return Promise.resolve(l)}catch{return Promise.reject(Jt.SignMsgError)}}async calcTxHash(e){try{return Promise.resolve(this.GetTransactionHash(e.data))}catch{return Promise.reject(Jt.CalcTxHashError)}}async validSignedTransaction(e){try{let n=e.data?e.data.skipCheckSign:void 0,r=nh.validSignedTransaction(e.tx,n||!1);return Promise.resolve((0,Jt.jsonStringifyUniform)(r))}catch{return Promise.reject(Jt.validSignedTransactionError)}}};ir.AptosWallet=sh});var hp=x(Un=>{h();g();var qE=Un&&Un.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),tc=Un&&Un.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&qE(e,t,n)};Object.defineProperty(Un,"__esModule",{value:!0});tc(Zf(),Un);tc(sr(),Un);tc($l(),Un);tc(Ql(),Un);tc(fp(),Un)});export{hp as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-MFII2YEZ.js.map
