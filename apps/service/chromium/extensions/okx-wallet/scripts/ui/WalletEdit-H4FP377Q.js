import{a as De}from"./chunk-2PL2P2CZ.js";import{a as B,b as ye,d as $}from"./chunk-EJGKS6IT.js";import{a as Y}from"./chunk-TNO352BM.js";import{a as U}from"./chunk-N5S5QTWQ.js";import"./chunk-HGH3KFHX.js";import"./chunk-IWG35R5Y.js";import{a as oe}from"./chunk-POZULQ6W.js";import"./chunk-5HI5GQGI.js";import"./chunk-GHKJNUVY.js";import"./chunk-4L5OPDYI.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import{b as ie}from"./chunk-3PPHGVTH.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import{B as xe}from"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import"./chunk-T6GLUO36.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import{d as K}from"./chunk-ZZLPMRQY.js";import{v as _e,w as fe,x as Ne}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import{f as ge}from"./chunk-74FNJDB7.js";import"./chunk-DJ76J5SU.js";import"./chunk-E75DNWM4.js";import{a as we}from"./chunk-GOMM7VSE.js";import{d as P}from"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as ue}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{$ as me,ba as de,ca as pe}from"./chunk-WSXZYUQ4.js";import{b as h}from"./chunk-JRZXGORL.js";import{q as G}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import"./chunk-AUURQ3HI.js";import{cc as ce}from"./chunk-B32MCU7F.js";import{a as H}from"./chunk-VOLYN562.js";import{a as Be}from"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import"./chunk-XRF6BZHR.js";import"./chunk-OWU5GWTN.js";import"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as o}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{Lc as y,_c as se}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{H as v,u as q}from"./chunk-E44TZGUB.js";import{G as ne,f as ae,o as le,oa as X}from"./chunk-KBQXBPIW.js";import{O as R,w as W}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as ee,ca as F}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as O}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as w,o as n,q as s}from"./chunk-FJHLV356.js";n();s();var x=w(O()),ke=w(Be());X();R();n();s();var re=w(O());R();var Me=({isLoading:t,onDone:a})=>re.default.createElement(ue.FooterActions,{placeholder:!0},re.default.createElement(F,{onClick:a,category:F.CATEGORY.fill,type:F.TYPE.primary,size:F.SIZE.lg,block:!0,disabled:t},W("wallet_manage_btn_edit_done"))),Le=Me;n();s();var r=w(O()),Ae=w(ce()),j=w(ee());se();n();s();var V=w(O()),he=w(ee());n();s();var b={handler:"_handler_18xte_1",disabled:"_disabled_18xte_4",keyring:"_keyring_18xte_7",wallet:"_wallet_18xte_11",icon:"_icon_18xte_16",noHandler:"_noHandler_18xte_23"};var Oe=({type:t,canDrag:a,listeners:d,disabled:D,getHandlerRef:_})=>a?V.default.createElement(o.Box,{ref:_,...d,className:(0,he.default)(b.handler,b[t],{[b.disabled]:D})},V.default.createElement(h.IconButton,{className:b.icon,icon:"okx-wallet-plugin-hamburger"})):V.default.createElement(o.Box,{ref:_,...d,className:b.noHandler}),z=Oe;n();s();var m=w(O()),Z=w(ce()),te=w(ee());X();se();n();s();var N={item:"_item_fov8q_1",dragging:"_dragging_fov8q_9",children:"_children_fov8q_13",wrapper:"_wrapper_fov8q_16",wallet:"_wallet_fov8q_20",canDrag:"_canDrag_fov8q_23",delete:"_delete_fov8q_26",avatar:"_avatar_fov8q_34",name:"_name_fov8q_38",draw:"_draw_fov8q_44",text:"_text_fov8q_47",drawIcon:"_drawIcon_fov8q_61",more:"_more_fov8q_64"};var be=({keyringIdentity:t,editIdentityName:a,onDragWalletStart:d,onDragWalletEnd:D,editKeyringIdentities:_})=>{let c=t?.walletIdentities||[],f=(0,Z.useDispatch)(),{isRpcMode:p}=(0,Z.useSelector)(K),i=U(),[g]=P(),I=(0,m.useCallback)(()=>{d(t.keyringId)},[d,t]),E=(0,m.useCallback)(l=>{let L=le(_),k=L.find(({keyringId:M})=>M===t.keyringId);k.walletIdentities=l,D(L)},[_,t,D]),T=$(),A=c.length>1;return m.default.createElement(q.Sortable,{uniqueKey:"walletId",itemClassName:N.item,onDragStart:I,itemChildrenClassName:N.children,itemDraggingClassName:N.dragging,itemWrapperClassName:N.wrapper,onDragEnd:E,dataSource:c,withOverlay:!1,renderHandler:({getHandlerRef:l,listeners:L})=>m.default.createElement(z,{type:"wallet",canDrag:A,listeners:L,getHandlerRef:l})},c.map(l=>m.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,te.default)(N.wallet,{[N.canDrag]:A}),key:l.walletId},m.default.createElement(o.Box,{className:N.delete},m.default.createElement(h,{className:"okx-wallet-plugin-delete",onClick:()=>{if([y.MNEMONIC,y.HARDWARE].includes(t.keyringIdentityType)&&c.length>1){f(ie({type:"REMOVE_ACCOUNT",accountId:l.walletId,keyringType:t.keyringIdentityType}));return}T({groupId:l.groupId,keyringType:t.keyringIdentityType,keyringId:t.keyringId})}})),m.default.createElement(oe,{size:oe.SIZE.sm,className:N.avatar,walletIdentity:l}),m.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:N.name,onClick:()=>{a({type:B.WALLETACCOUNT,identity:l,initialName:l.walletName,otherNames:c.map(({walletName:L,walletId:k})=>l.keyringId===k?"":L).filter(Boolean)})}},m.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},m.default.createElement(G.Text,{ellipsis:!0,className:N.text},l.walletName),m.default.createElement(o.Box,{className:N.draw},m.default.createElement(h,{className:(0,te.default)("okx-wallet-plugin-draw",N.drawIcon)}))),m.default.createElement(Y,{isRpcMode:p,currentRpcNetwork:i,hiddenAssets:g,walletAsset:l?.walletAsset,unsopportCurrentNetwork:l?.unsupported})),m.default.createElement(H,{className:N.more,to:`${pe}?walletId=${l?.walletId}`},m.default.createElement(h.IconButton,{icon:"okx-wallet-plugin-more"})))))},Ee=be;n();s();var u={item:"_item_1os1d_1",children:"_children_1os1d_8",dragging:"_dragging_1os1d_11",wrap:"_wrap_1os1d_15",disabled:"_disabled_1os1d_22",showBottomLine:"_showBottomLine_1os1d_25",keyring:"_keyring_1os1d_35",canDrag:"_canDrag_1os1d_38",delete:"_delete_1os1d_41",name:"_name_1os1d_49",canEdit:"_canEdit_1os1d_53",draw:"_draw_1os1d_56",text:"_text_1os1d_59",more:"_more_1os1d_74"};var Fe=({editIdentityName:t,editKeyringIdentities:a,setEditKeyringIdentities:d})=>{let{isRpcMode:D}=(0,Ae.useSelector)(K),_=U(),[c]=P(),f=$(),p=(0,r.useCallback)(({keyringIdentityType:e})=>e===y.MNEMONIC||e===y.MPC||e===y.TON_MNEMONIC,[]),i=(0,r.useCallback)(({keyringIdentityType:e})=>e===y.MNEMONIC||ge(e)||e===y.MPC||e===y.TON_MNEMONIC,[]),[g,I]=(0,r.useState)(""),E=(0,r.useCallback)(({id:e})=>{I(e)},[]),T=(0,r.useCallback)(e=>{I(""),d(e)},[d]),[A,l]=(0,r.useState)(""),L=(0,r.useCallback)(e=>{l(e)},[]),k=(0,r.useCallback)(e=>{l(""),d(e)},[d]),M=a.length>1;return r.default.createElement(q.Sortable,{uniqueKey:"keyringId",itemClassName:u.item,itemChildrenClassName:u.children,itemDraggingClassName:u.dragging,onDragStart:E,onDragEnd:T,dataSource:a,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:Q})=>r.default.createElement(z,{type:"keyring",canDrag:M,listeners:Q,disabled:A,getHandlerRef:e})},a.map((e,Q)=>r.default.createElement(o.Box,{className:(0,j.default)(u.wrap,{[u.disabled]:A&&A!==e.keyringId,[u.showBottomLine]:Q!==a.length-1}),key:e.keyringId},r.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,j.default)(u.keyring,{[u.canDrag]:M})},p(e)?r.default.createElement(o.Box,{className:u.delete},r.default.createElement(h,{icon:"okx-wallet-plugin-delete",onClick:()=>{let S=e?.walletIdentities?.[0].groupId;!S||f({groupId:S,keyringType:e.keyringIdentityType,keyringId:e.keyringId})}})):null,r.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:(0,j.default)(u.name,{[u.canEdit]:i(e)}),onClick:()=>{i(e)&&t({type:B.WALLET,identity:e,initialName:e.keyringName,otherNames:a.map(({keyringName:S,keyringId:We})=>e.keyringId===We?"":S).filter(Boolean)})}},r.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},r.default.createElement(G.Text,{ellipsis:!0,className:u.text},e.keyringName),i(e)?r.default.createElement(o.Box,{className:u.draw},r.default.createElement(h,{icon:"okx-wallet-plugin-draw"})):null),r.default.createElement(Y,{isRpcMode:D,currentRpcNetwork:_,hiddenAssets:c,walletAsset:e?.walletAsset})),[y.PRIVATE_KEY].includes(e.keyringIdentityType)?null:r.default.createElement(H,{className:u.more,to:`${de}?keyringId=${e?.keyringId}`},r.default.createElement(h.IconButton,{icon:"okx-wallet-plugin-more"}))),g===e.keyringId?null:r.default.createElement(Ee,{keyringIdentity:e,editIdentityName:t,onDragWalletStart:L,onDragWalletEnd:k,editKeyringIdentities:a}))))},Ce=Fe;n();s();var J=w(O());X();R();var ve=t=>{let a=ye(),d=_e(),D=fe(),_=(0,J.useMemo)(()=>({async[B.WALLET](c,f){let p=c?.keyringId;if(p)try{await d(p,f),t(i=>i.map(g=>g.keyringId===p?{...g,keyringName:f}:g)),v.success(W("wallet_edit_wallet_toast_renamed_success"))}catch(i){console.log(i)}},async[B.WALLETACCOUNT](c,f){let p=c?.walletId;if(p)try{await D(p,f),t(i=>i.map(g=>{let I=g?.walletIdentities??[];return{...g,walletIdentities:I.map(E=>E.walletId===p?{...E,walletName:f}:E)}})),v.success(W("wallet_edit_wallet_toast_renamed_success"))}catch(i){console.log(i)}}}),[D,d,t]);return(0,J.useCallback)(({identity:c,...f})=>{a(f).then(p=>{let{type:i}=f,g=_[i];g&&g(c,p)}).catch(ae)},[_,a])},Ie=ve;n();s();var Te={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var Se=()=>{let[,t]=xe(null),[a,d]=(0,x.useState)(t),D=Ie(d),[_,c]=(0,x.useState)(!1),f=T=>{d(T),c(!0)},p=(0,ke.useHistory)(),i=Ne(),[g,I]=(0,x.useState)(!1),E=(0,x.useCallback)(async()=>{if(_){I(!0);try{let T={},A={};a.forEach(({keyringId:l,walletIdentities:L},k)=>{T[l]=k,L.forEach(({walletId:M},e)=>{A[M]=e})}),await i(T,A)}catch{v.error({title:W("extension_wallet_toast_sorting_failure")})}}p.push(`${me}?from=seedVerify`)},[p,i,a,_]);return(0,x.useEffect)(()=>{!ne(t,a)&&!_&&d(t)},[t,a]),x.default.createElement(o.Container,{className:Te.root},x.default.createElement(we,{backable:{icon:"okds-close"},bordered:!1,closeable:!1}),x.default.createElement(Ce,{editIdentityName:D,editKeyringIdentities:a,setEditKeyringIdentities:f}),x.default.createElement(Le,{isLoading:g,onDone:E}),x.default.createElement(De,null))},Wr=Se;export{Wr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-H4FP377Q.js.map
