import{b as Yo,f as qo,g as Vo,h as jo}from"./chunk-2PFUDPEL.js";import{a as Wo,b as rt,c as R,d as Ho,e as Uo}from"./chunk-FUDMWBLB.js";import{l as Oo}from"./chunk-5YK5XB6Y.js";import"./chunk-2AM235ZQ.js";import{a as Do}from"./chunk-ITES77TJ.js";import{a as Ro}from"./chunk-3BRPF4LS.js";import{a as Go}from"./chunk-VOXYDIZC.js";import"./chunk-V5PQQDYG.js";import{a as Mo}from"./chunk-V4WIOWAX.js";import{a as ft}from"./chunk-YZV77OOT.js";import{a as Lo}from"./chunk-2UR4VSKY.js";import{a as Bo}from"./chunk-JA6DNDTG.js";import"./chunk-7SGHPBSV.js";import{a as Po}from"./chunk-CUTSXOOS.js";import"./chunk-ZAFBI5BD.js";import{a as bo}from"./chunk-YSW2YY4I.js";import{g as So}from"./chunk-YDKVBWIO.js";import"./chunk-4PFFVHVY.js";import{a as tt}from"./chunk-2QOKJOXY.js";import"./chunk-JSJTP4EG.js";import{a as Co,b as ho,c as Io,e as Fo}from"./chunk-FRYK2ICE.js";import{a as ee,e as go}from"./chunk-37XSQI5O.js";import{g as we,i as ko,j as Ao}from"./chunk-HNJT6VHX.js";import{d as _e}from"./chunk-KWQDFT3S.js";import{a as Eo,b as wo}from"./chunk-CLAWFLRW.js";import"./chunk-454I7KWD.js";import{a as yo}from"./chunk-R6UCQXIY.js";import{a as ie}from"./chunk-DIVFRUSZ.js";import"./chunk-OL23QTWJ.js";import{a as _o,b as To,d as xo}from"./chunk-4VFXVCHS.js";import"./chunk-6G3RP33F.js";import"./chunk-GILBGQWV.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import"./chunk-GGC2CY5E.js";import"./chunk-JKSK4TNM.js";import"./chunk-UTSCFP3M.js";import"./chunk-VPEGTYK6.js";import"./chunk-HYFMV74Y.js";import"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import{a as J,d as ke}from"./chunk-NFPXRZGF.js";import{a as et}from"./chunk-7P3TAB2X.js";import"./chunk-F2DBKTIG.js";import{b as $,c as De}from"./chunk-2AZAHALD.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import"./chunk-B2JJAXTZ.js";import{a as po,f as P,s as fo}from"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import{d as uo}from"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import"./chunk-QHPYMFK2.js";import"./chunk-F4XZWNG2.js";import{a as ut}from"./chunk-G6PPKZHQ.js";import"./chunk-2P7I7CKT.js";import{b as vo}from"./chunk-6LLKXSCU.js";import{a as No}from"./chunk-FOZHYRP7.js";import"./chunk-ELJZY4AU.js";import{d as ot}from"./chunk-4L5OPDYI.js";import{a as Ee}from"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import{a as lo}from"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-PJAFZEEL.js";import"./chunk-3OCLT7XJ.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import{a as ao}from"./chunk-HEDYF2ME.js";import"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import"./chunk-42UMOS57.js";import"./chunk-WAEF6YGC.js";import"./chunk-J2TPGTMF.js";import"./chunk-FK74IDTO.js";import"./chunk-ICS7QRDT.js";import{b as so}from"./chunk-2LFRM3KT.js";import"./chunk-GGZ73X5S.js";import"./chunk-IEUJSLGG.js";import{b as mo}from"./chunk-FUXD4L32.js";import{a as no,b as io}from"./chunk-QIV5EJPL.js";import"./chunk-4HIOE2KZ.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import{a as Xe,c as Xt,d as Zt,g as ct,h as $t,i as Jt}from"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-4X3SKD2N.js";import{c as to,p as co}from"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import{X as Lt,na as Mt}from"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import{a as $e}from"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{m as Ze}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import{l as vt}from"./chunk-AKJZXDVD.js";import"./chunk-E75DNWM4.js";import{a as Je}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as Ie}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{a as eo}from"./chunk-WSXZYUQ4.js";import"./chunk-JRZXGORL.js";import{o as ro,q as pt}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{o as he}from"./chunk-AUURQ3HI.js";import{N as Kt,Za as Qt,_a as Qe,cc as lt}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as Wr}from"./chunk-VLKJDIZ5.js";import{Ja as ye,Na as Ht,pa as Ot,qa as Dr}from"./chunk-N4B7HQY5.js";import{d as Wt,f as Rr}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{a as q,b as de}from"./chunk-XRF6BZHR.js";import{e as oo,h as Ge}from"./chunk-OWU5GWTN.js";import{C as Yt,D as qt,H as st,V as Vt,Z as Ke,_ as jt,da as mt,fa as zt,h as Ut,q as ze}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as E}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{$a as it,Ac as Mr,Bc as Dt,Cc as Gr,Ib as Ft,Kb as fe,Lb as qe,Mc as Rt,Nb as Nt,Pb as Z,Qb as ve,Rb as Le,W as Be,Xb as Pt,_a as At,_c as Or,hc as Ce,lc as St,qc as Lr,w as ne,yb as vr,yc as Gt,z as Br}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{H as Y,c as Q,o as Bt,q as at,r as je}from"./chunk-E44TZGUB.js";import{K as Se,a as Et,b as wt,o as kt,oa as Ye}from"./chunk-KBQXBPIW.js";import{O,l as be,w as s}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-6JPTHVJO.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as bt,T as Ve,ca as Me}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as D}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-KHHBU7RQ.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as h,o as l,q as p}from"./chunk-FJHLV356.js";l();p();var me=h(D());Br();l();p();var Oe=h(D()),Xo=h(lt()),Zo=h(Wr()),$o=h(he());l();p();Ye();var Hr=e=>{let t=R(e?.chainId),n=e?.image;return Et(n)?e.image=n[0]:wt(n)&&(e.image=null),{token:e,baseCoin:t}},zo=Hr;l();p();var Ko=h(lt()),dt=h(he());O();Ht();var Ur=(e={},t={},n=!0)=>{let r=(0,Ko.useDispatch)(),i=e.address,m=$e(),u=Wo(),a=ie(),c=(0,dt.useMemoizedFn)(async()=>{a({all_confirmation:"cancel",trade:"add_token"}),await u(i,!1),await ye(r)}),{loading:o,onClick:d}=$(c),T={actionType:P.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject"),onClick:d,loading:o},f=(0,dt.useMemoizedFn)(async()=>{try{a({all_confirmation:"confirm",trade:"add_token"});let I=await Xe(t.localType,m),A={...e,contractAddress:i,blockChain:I.shortName,localType:t.localType};await so(A),await u(i,!0),await ye(r)}catch(I){Y.error(I?.data?.originalError?.msg||s("wallet_extenshion_toast_add_failed"))}}),{loading:_,onClick:x}=$(f),g={actionType:P.ACTION_TYPE.CONFIRM,disabled:!n,onClick:x,loading:_};return[T,g]},Qo=Ur;var Yr=({unapproved:e})=>{let t=(0,Xo.useSelector)(io),{token:n,baseCoin:r}=zo(e),[i,m]=(0,Oe.useState)(!0),u=$e();(0,$o.useMount)(async()=>{let c=await Xe(r.localType,u);m(!!c)});let a=Qo(n,r,i);return!n||t!==no.addToken?Oe.default.createElement(Zo.Redirect,{to:eo}):Oe.default.createElement(Ro,{token:n,supported:i,buttonGroup:a,networkName:r.chainName})},Jo=Yr;l();p();var S=h(D()),ar=h(he());O();l();p();var er=h(D());Ye();Ce();var qr=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:r}=e,{walletId:i}=t,m=R(),{coinId:u}=m,a=yo(u,i)?.coinAmountInt,{gasType:c,isNetworkFeeLoading:o,networkFee:d,getLimit:T}=n,{minGasFee:f}=_o(n),_=To(n),x=(0,er.useMemo)(()=>{if(Se(a))return r;let F=a,y=[];return r.forEach(M=>{F=qe(F,d),Z(F,0)&&y.push(M)}),y},[a,r,d]),g=o&&Le(T,0),I={level:c||jt.STANDARD,loading:o,coinId:m?.coinId,networkFee:g?void 0:f,maxNetworkFee:g?void 0:d,estimateFailed:_},A=o||x.length&&x.length===r.length,N=Se(a)||ve(a,d);return{isNetworkFeeLoading:o,estimateFailed:_,networkFeeProps:I,canApproveTxs:x,isSufficientGas:N,canApproveAll:A}},tr=qr;l();p();var rr=h(D());O();Lr();Or();vr();Gr();Mr();Ce();var or=100,Vr=e=>e.msg||s("wallet_home_toast_network_error"),jr=({txParams:e,gasLimit:t,supportEip1559:n})=>({...e,value:q(e.value),gas:t,gasPrice:q(n?e.maxFeePerGas:e.gasPrice),priorityFee:q(n?e.maxPriorityFeePerGas:0),nonce:q(e.nonce),repeatTxType:Ut.CONFIRMING,oldTxHash:"",inscriptionType:1}),zr=({ext:e,signature:t,coinId:n,txParams:r,fromAdr:i,toAdr:m,networkFee:u,txHash:a,walletId:c,walletAccount:o})=>({extJson:JSON.stringify(e),signedTx:t,coinId:n,coinAmount:q(r.value||0),fromAdr:i,toAdr:m,serviceCharge:u,txHash:a,txSource:Rt.DAPP,inputData:r.data,accountId:c,txType:1,walletType:o?.serverWalletType}),Kr=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:r,customGasInfo:i,isNetworkFeeLoading:m})=>{let{id:u}=e,{walletId:a,address:c}=t,o=Ze(a),d=ie(a),{coinId:T}=R(),f=Do(),_=Go(),x=(0,rr.useCallback)(async()=>{d({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:u})},[f,d,u]),{loading:g,onClick:I}=$(x),A={loading:g,onClick:I,actionType:P.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject")},N=o||m,{gasPrice:F,supportEip1559:y,gasLimitInfo:M={},gasLimit:v,maxFeePerGas:V,maxPriorityFeePerGas:j,networkFee:z}=i,ce=fo({fromAddr:r[0]?.txParams?.from,walletId:a,localType:it}),G=async()=>{try{let le=r.length,Ne=r[0],{from:pe,to:oe,value:xe}=Ne.txParams;if(d({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await Ee({callback:x,walletId:a}))return;let{data:re}=await Kt({checkTypes:[mt.OVERWRITTEN],coinId:T,from:pe,to:oe,amount:q(xe||0),gasPrice:F}),ue=re.find(({checkType:ge})=>ge===mt.OVERWRITTEN)||{},{newNonce:nt,toastType:Pe,pendingNum:Ar}=ue;if(Pe===zt.FAILED){Y.error(s("wallet_extension_function_toast_failed_single")),await ut(1500),await f({id:u});return}let gt=fe(Ar,le);if(Z(gt,or)){Y.error(s("wallet_extension_function_toast_pending",{TotalNum:gt,ExceededNum:or}));return}let Ct=[],yt=[];for(let ge=0;ge<r.length;ge++){let Ue=r[ge],{txParams:L}=Ue,{from:Fr,to:Nr}=L;L.nonce=St(de(fe(nt,ge))),y?(delete Ue.gasPrice,L.maxFeePerGas=de(V),L.maxPriorityFeePerGas=de(j),L.type=ze.FEE_MARKET):(delete L.maxFeePerGas,delete L.maxPriorityFeePerGas,delete L.type,L.gasPrice=de(F)),L.gas=de(v),L.gasLimit=de(v),L.gasLimitInfo=M,L.gasType=i.gasType;let Pr=ao(Ue.txParams),ht=await ce({params:Pr}),It=await po(it,ht),Sr=jr({txParams:L,gasLimit:v,supportEip1559:y}),br=zr({ext:Sr,signature:ht,coinId:T,txParams:L,fromAdr:Fr,toAdr:Nr,networkFee:z,txHash:It,walletId:a,walletAccount:t});yt.push(br),Ct.push({id:Ue.id,txHash:It})}await Gt(Dt.postSendEvmInscriptions,{txList:yt}),await _({id:u,result:Ct})}catch(le){Y.error(Vr(le)),await ut(1500),await _({id:u,error:"Failed"})}},{loading:H,onClick:U}=$(G),X={loading:H,disabled:N,actionType:P.ACTION_TYPE.CONFIRM,onClick:U};return N?[A,X]:(n||(X={actionType:P.ACTION_TYPE.FILL_UP,txId:u,coinId:T,walletId:a,address:c,receiveOnly:n}),[A,X])},nr=Kr;l();p();O();var Qr=e=>{for(let t=0;t<e.length;t++){let n=e[t],r=n();if(r)return r}return null},Xr=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:r})=>{let i=Ze(e.walletId),m=()=>i?{type:Q.TYPE.error,message:s("wallet_extension_function_alert_wallet_unsupported")}:null,u=R(),a=So({baseCoin:u,isSufficientGas:r});return Qr([m,a,()=>n?null:{type:Q.TYPE.warn,message:s("wallet_extension_function_alert_available_balance",{gasToken:u.symbol,num:t.length})}])},ir=Xr;var Zr=({unapproved:e})=>{let{coinId:t}=R(),{txParams:n={}}=e?.params?.[0],{from:r,to:i,data:m,value:u}=n,{walletId:a}=e,c=No(e),o=ie(a),d=tt(e),[T,f]=(0,S.useState)({}),_=(0,S.useCallback)(j=>{f(j)},[]),{networkFeeProps:x,canApproveTxs:g,canApproveAll:I,isSufficientGas:A,isNetworkFeeLoading:N}=tr({unapproved:e,walletAccount:c,customGasInfo:T}),F=nr({unapproved:e,walletAccount:c,canApproveTxs:g,customGasInfo:T,isSufficientGas:A,isNetworkFeeLoading:N}),y=ir({walletAccount:c,canApproveTxs:g,canApproveAll:I,isSufficientGas:A}),[M,{setTrue:v,setFalse:V}]=(0,ar.useBoolean)(!1);return S.default.createElement(E.Container,null,S.default.createElement(Je,{title:s("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),S.default.createElement(J,null,S.default.createElement(bo,{...d})),S.default.createElement(J,null,S.default.createElement(et,{onClick:v,...x})),S.default.createElement(J,{bordered:!1},S.default.createElement(De,{title:s("wallet_extension_network_address_title_walletused"),address:c.address,walletId:c.walletId,onCopyCallback:()=>{o({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),S.default.createElement(Ie,{placeholder:!0,offsetBottom:0,borderTop:!0},S.default.createElement(ke,{...y}),S.default.createElement(P,{buttonGroup:F})),S.default.createElement(xo,{visible:M,coinId:t,address:r,inputData:m,tokenAddress:i,value:q(u),onBack:V,onClose:null,onGasChange:_}))},sr=Zr;l();p();var te=h(D());At();Ce();l();p();var _r=h(D()),We=h(lt()),Re=h(he());O();Ht();Dr();l();p();var W=h(D());l();p();Rr();var Ae=()=>(0,W.useCallback)(async(t,n)=>{await Wt().updateReportTimestamp(t,n)},[]);var $r=()=>{let e=Ae();return(0,W.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},mr=(e,t)=>{let n=$r(),r=(0,W.useRef)(!1);(0,W.useEffect)(()=>{!t&&!r.current&&(r.current=!0,n(e))},[e,t,n])},cr=()=>{let e=Ae();return(0,W.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},lr=()=>{let e=Ae();return(0,W.useCallback)(async t=>{await e(t,"SIGN")},[e])},pr=()=>{let e=Ae();return(0,W.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},ur=()=>{let e=Ae();return(0,W.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},fr=()=>{let e=Ae();return(0,W.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};l();p();Ye();var dr=({isMev:e,mevInfo:t,unapproved:n,modifiedData:r,customGasInfo:i,updateData:m,gasReturnActivity:u})=>{let{nonce:a,updateGasInfo:c}=m,o=kt(n),{method:d}=o;o.txParams=o.params,delete o.params;let{supportEip1559:T,gasLimitInfo:f={},gasLimit:_,maxFeePerGas:x,gasPrice:g,maxPriorityFeePerGas:I}=i;if(r&&o.txParams&&(o.txParams.data=r),o.txParams.supportEip1559=T,T?(delete o?.txParams.gasPrice,o.txParams.maxFeePerGas=ee(x),o.txParams.maxPriorityFeePerGas=ee(I),o.txParams.type=ze.FEE_MARKET):(delete o?.txParams.maxFeePerGas,delete o?.txParams.maxPriorityFeePerGas,delete o?.txParams.type,o.txParams.gasPrice=ee(g)),c){let A=Object.entries(c).reduce((N,[F,y])=>(N[F]=ee(y),N),{});o.txParams={...o.txParams,...A}}return o.txParams.gas=ee(_),o.txParams.gasLimit=ee(_),o.txParams.nonce=ee(a),o.txParams.chainId=ee(o.chainId),o.gasLimitInfo=f||{},o.mevSuppliers=e?t?.mevSuppliers:[],o.activityId=u?.activityId,o.gasType=i.gasType,o?.txParams?.data||(o.isBaseCoinTransfer=!0),d===st.KAIA_SIGN_TRANSACTION&&(o.txParams.signFn=st.KAIA_SIGN_TRANSACTION,o.txParams.kaiaTxType=o.txParams.typeInt),o};var Jr=(e,t)=>{let n=(0,We.useSelector)(i=>Zt(i,e)),r=(0,We.useSelector)(i=>Xt(i,e)??t);return{mevInfo:n,isMev:r}},en=({extParams:e,walletId:t,from:n,to:r})=>(0,Re.useMemoizedFn)(i=>{if(e.targetConnectType===vo.OKX_CONNECT){let m=i;i===Yt&&(m="sdk-error"),Ot(`evm_tx_failed-${m}`,{to:r},{tags:{walletId:t,from:n}})}}),tn=({unapproved:e})=>{let{id:t,params:n={},extParams:r={},chainId:i}=e,m=(0,We.useDispatch)(),u=R(i),a=tt(e),{from:c,to:o,value:d}=n,{coinId:T,chainName:f}=u,{walletId:_}=rt(e.origin,c)||{},{isMev:x,mevInfo:g}=Jr(t,r?.isMev),I=cr(),A=lr(),N=pr(),F=ur(),y=fr(),M=(0,Re.useMemoizedFn)((H,U)=>{m(ct.setIsMev({isMev:H,id:t})),m(ct.setMevInfo({mevInfo:U,id:t}))});mr();let v=ie(_),V=go({walletId:_,fromAddr:c,coinId:T}),j=(0,Re.useMemoizedFn)(async()=>{v({trade:"contract_interaction",all_confirmation:"cancel",network:f,dapp_url:e.origin}),Lt(),await m($t(t)),await ye(m)}),z=Co(),ce=en({extParams:r,walletId:_,from:c,to:o}),G=(0,Re.useMemoizedFn)(async({modifiedData:H,customGasInfo:U,gasReturnActivity:X,reportGasReturnActivityDataInConfirm:le})=>{let{gasPrice:Ne}=U;if(I(t),await Ee({callback:j,walletId:_})){v({all_confirmation:"confirm",trade:"contract_interaction",network:f,dapp_url:e.origin});let oe=q(d||0),xe=await z({to:o,from:c,coinId:T,gasPrice:Ne,userGasInfo:U,amount:oe,baseCoinAmountUse:oe});le();try{let K=dr({isMev:x,mevInfo:g,unapproved:e,updateData:xe,modifiedData:H,customGasInfo:U,gasReturnActivity:X});A(t);let re=await V(K.txParams);N(t);let ue=await m(Jt(t,{...K,signedTx:re,walletId:_,coinId:T},{failTxWhenError:!1}));F(t),ft(ue?.code)?(X?.clear(),Y.error({title:ue?.msg||s("wallet_home_toast_network_error"),duration:3})):(vt({tx_id:ue?.serverTxId}),y(t))}catch(K){let re=K?.data?.originalError;ft(re?.code)?(X?.clear(),Y.error({title:re?.msg||s("wallet_home_toast_network_error"),duration:3})):K?.message===qt?Y.error(s("wallet_extension_tg_error_network")):Y.error(s("wallet_home_toast_network_error")),ce(K?.message)}await ye(m)}});return _r.default.createElement(Fo,{needMev:!0,coinId:T,openMev:x,onConfirmReplace:!0,dappInfo:a,txParams:n,txType:e?.type,walletId:_,isShowBlockSwapMevTooltip:r?.isShowBlockSwapMevTooltip,onMevChange:M,onCancel:j,onConfirm:G})},_t=tn;l();p();var k=h(D());O();Ce();l();p();var Te=h(D()),Tt=h(bt());Ye();O();Ce();l();p();var Fe={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function on({nonce:e,suggestedNonce:t,setNonce:n}){let r=m=>{n(m)},i;return e&&(Z(e,t)?i=s("developer_mode_send_tooltip_higher",{num:t}):Nt(e,t)&&(i=s("developer_mode_send_tooltip_lower",{num:t}))),Te.default.createElement(Mo.Row,{className:Fe.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},Te.default.createElement("div",{className:Fe.content},Te.default.createElement("div",{className:Fe.inner},Te.default.createElement(at.Number,{innerClassName:(0,Tt.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:s("developer_mode_send_maintitle_nonce"),placeholder:`${Se(t)?"":be.thousandFormat(t)}`,size:at.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(r(fe(t,1)),!1):!0,onSub:()=>!e&&Z(t,0)?(r(qe(t-1)),!1):!0,onChange:r})),i&&Te.default.createElement("div",{className:Fe.warningText},Te.default.createElement(Ve,{className:(0,Tt.default)(Fe.icon,"okx-wallet-plugin-warning-circle")}),i)))}var Tr=on;l();p();var ae=h(D());O();l();p();var C=h(D()),He=h(he()),xr=h(bt());O();l();p();var b={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var rn=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},nn=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:r,amount:i}=t||{},{decimals:m,symbol:u}=r,a=_e(u,12),[c,o]=(0,C.useState)(!1),[d,{toggle:T,setFalse:f,setTrue:_}]=(0,He.useBoolean)(!1),[x,g]=(0,C.useState)(0),I=(0,C.useMemo)(()=>d?{type:b.danger,text:s("wallet_extension_approve_alert_high_risk_unlimited")}:!d&&be.eq(x||0,0)?{type:b.info,text:s("wallet_extension_approve_cannot_zero")}:null,[d,x]),A=(0,He.useMemoizedFn)((y=i)=>{Qe(y)?(g(0),_()):(g(Eo(y,m)),f()),o(!0)}),N=(0,C.useMemo)(()=>d?!1:!be.gt(`${x||0}`,0),[d,x]),F=(0,He.useMemoizedFn)(()=>{o(!1);let y=d?Qt:wo(x,m);n(y)});return C.default.createElement(E.Box,{className:b.root},C.default.createElement(E.Box,{className:b.icon,onClick:()=>{A()}},C.default.createElement(Ve,{className:"okx-wallet-plugin-draw-20"})),C.default.createElement(Bt.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:c},C.default.createElement(E.Box,{className:b.editApproveAmountModal},C.default.createElement(E.Box,{className:b.content},C.default.createElement(we,{txTypeInfo:e,bordered:!1}),C.default.createElement(E.Box,{className:b.editArea},d?C.default.createElement(pt.Text,{className:b.unlimitedText},s("wallet_extension_transfer_title_unlimited_amount",{token:C.default.createElement(pt.Text,{className:b.unlimitedSymbol},a)})):C.default.createElement(uo,{symbol:a,autoSize:rn,placeholder:"0",decimals:m,value:x,onChange:g,style:{fontWeight:700,height:"42px"},symbolClassName:b.symbolClassName})),C.default.createElement(E.Box,{className:b.quickHandler},C.default.createElement(E.Box,{onClick:T,className:b.unlimited},C.default.createElement(E.Box,{className:b.text},s("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),C.default.createElement(je,{checked:d}))),!!I&&C.default.createElement(E.Box,{className:(0,xr.default)(b.authQuantityWarnTip,I.type)},I.text)),C.default.createElement(E.Box,{className:b.approveTip},s("wallet_extension_approve_desc_dapp_right")),C.default.createElement(Ie,{affixStyle:{position:"none"},placeholder:!1,className:b.footerActions},C.default.createElement(Me,{block:!0,disabled:N,category:Me.CATEGORY.fill,type:Me.TYPE.primary,size:Me.SIZE.lg,onClick:F},s("wallet_extension_approve_btn_amount_confirmation"))))))},gr=nn;var an=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:r,title:i})=>{let{isApprove:m,isRevoke:u,address:a,customApproveAmount:c=0,symbol:o=Ge,decimals:d=0,icon:T=oo}=r,f=_e(o,12);if(n)return ae.default.createElement(Bo,null);if(m){let _={title:{text:i},subTitle:t.host};if(u){let g={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},..._};return ae.default.createElement(we,{txTypeInfo:{baseInfo:g}},ae.default.createElement(ko,{imageUrl:T,text:f}))}let x={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},..._};return ae.default.createElement(we,{txTypeInfo:{baseInfo:x}},ae.default.createElement(Ao,{approveInfoList:[{amount:c,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:a,decimals:d,symbol:o}}],renderEditApproveAmount:g=>ae.default.createElement(gr,{txTypeInfo:{baseInfo:x},approve:g,onUpdateAuthAmount:e})}))}return ae.default.createElement(we,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:s("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},Cr=an;l();p();O();var sn=({chainGasLoadFailed:e,isSufficientBalance:t,isSufficientGas:n,transaction:r,actions:i,modifiedDataError:m,walletInfo:u,params:a,rpcInfo:c})=>{let o=t&&n,{chain:d,nonce:T,loading:f,gas:_}=r,{sign:x,cancel:g}=i,{chainGasLoading:I}=_,{loading:A,onClick:N}=$(g),F={actionType:P.ACTION_TYPE.CANCEL,onClick:N,loading:A},y=async()=>{try{if(!await Ee({walletId:u?.walletId,callback:g}))return}catch(G){console.error(G)}let ce=G=>{let H=to[u?.keyringIdentityType];Mt({tx_source:"dapp",from_addr:a.from,to_addr:a.to,main_token_symbol:c?.symbol,token_symbol:G?.extraParams?.coinSymbol||"",contract_address:a?.to,volume_token:a?.value,volume_usdt:"",tx_hash_unique:G?.txHash,wallet_type:H,chain_id:parseInt(d.chainId,16)})};x(u?.walletId,ce,c)},M=()=>{globalThis.open(c.faucetUrl)},v=I||e||!o&&!c?.faucetUrl||T.pending||f.sign||f.token||m,{loading:V,onClick:j}=$(y),z={disabled:v,actionType:P.ACTION_TYPE.CONFIRM,onClick:j,loading:V};return!o&&c?.faucetUrl&&(z.actionType=P.ACTION_TYPE.FILL_UP,z.onClick=M,z.btnText=s("wallet_extension_transfer_btn_via_faucet")),[F,z]},yr=sn;l();p();O();Ce();var mn=({customGasInfo:e})=>()=>e?.baseFeePerGas==="0"?{type:Q.TYPE.warn,message:s("wallet_extension_transaction_error_base_zero")}:null,cn=({modifiedDataError:e})=>()=>e?{}:null,ln=({isSufficientBalance:e})=>()=>e?null:{type:Q.TYPE.warn,message:s("wallet_extension_popup_dapp_insufficient_balance")},pn=({isSufficientGas:e,chain:t})=>()=>e?null:{type:Q.TYPE.warn,message:s("wallet_extension_popup_insufficient_network_fee",{token:t.symbol})},un=({chainGasLoadFailed:e})=>()=>e?{type:ke.TIP_TYPE.FEE_ERROR}:null,fn=({auth:e,contract:t,asset:n})=>()=>Qe(e.customApproveAmount)?{type:Q.TYPE.warn,message:s("wallet_extension_popup_unlimited_transfer",{contract:t,asset:n})}:Z(e.customApproveAmount,0)?{type:Q.TYPE.warn,message:s("extension_approve_alert_authorized_tips",{contract:t,asset:n})}:null,dn=({customGasInfo:e,chainGasLoadFailed:t,modifiedDataError:n,isSufficientBalance:r,isSufficientGas:i,isRevokeTx:m,transaction:u,loading:a})=>{let{auth:c,chain:o}=u,d=_e(c.name||Ge),T=_e(c.symbol||Ge),f=mn({customGasInfo:e}),_=cn({modifiedDataError:n}),x=ln({isSufficientBalance:r,chain:o}),g=pn({isSufficientGas:i,chain:o}),I=un({chainGasLoadFailed:t}),A=()=>m?{type:Q.TYPE.info,message:s("extension_revoke_approval_alert_evoke_authorization",{contract:d,asset:T})}:null,N=fn({auth:c,contract:d,asset:T});if(a)return null;let F=[_,g,x,A,N,I,f];for(let y=0;y<F.length;y++){let M=F[y],v=M();if(v)return v}return null},hr=dn;var xt=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:r}=e,{from:i,value:m,to:u,typeInt:a}=r,[c,o]=(0,k.useState)(""),[d,T]=(0,k.useState)(!1),f=Io(c),_=rt(n,i),[x,g]=Oo({...r,...e,walletId:_?.walletId},t),I=(0,k.useMemo)(()=>[Ke.FeeDelegatedValueTransfer,Ke.FeeDelegatedValueTransferMemo,Ke.FeeDelegatedSmartContractExecution].includes(a),[a]),{title:A,auth:N,meta:F,nonce:y,gas:M,loading:v,data:V}=x,{setNonce:j,setAuthAmount:z}=g,{chainGasInfo:ce,customGasInfo:G,chainGasLoading:H,chainGasLoadFailed:U,stopPollingGasPrice:X,updateCustomGasInfo:le,chainGasLimitLoadFailed:Ne}=M,pe=co(void 0,void 0,t),oe=Yo(G);Lo(t),qo(i,t),jo();let xe=ve(pe?.balance,fe(oe,Pt(m||0))),K=ve(pe?.balance,oe),re=hr({customGasInfo:G,chainGasLoadFailed:U,isSufficientGas:K,isSufficientBalance:xe,isRevokeTx:N.isRevoke,modifiedDataError:f,transaction:x,loading:H}),ue=yr({chainGasLoadFailed:U,isSufficientBalance:xe,isSufficientGas:K,transaction:x,actions:g,modifiedDataError:f,walletInfo:_,params:r,rpcInfo:t}),nt=Pe=>{le(Pe),T(!1)};return k.default.createElement(E.Container,null,k.default.createElement(Cr,{title:A,confirmBuryPointFn:()=>{},onUpdateAuthAmount:Pe=>{z(Pe)},dappInfo:F.originInfo,loading:v.token,approveToken:N}),k.default.createElement(J,null,k.default.createElement(et,{isFree:I,onClick:()=>{T(!0)},injectCoin:pe,loading:H,estimateFailed:U,networkFee:H?void 0:Ft(oe,10**pe?.decimals)})),k.default.createElement(J,null,k.default.createElement(De,{title:s("wallet_extension_network_address_title_walletused"),address:_.address,walletId:_.walletId}),!!u&&k.default.createElement(De,{title:s("wallet_extension_popup_text_interact_with"),address:u})),k.default.createElement(Tr,{nonce:y.custom,suggestedNonce:y.suggested,setNonce:j}),V?k.default.createElement(J,{bordered:!1},k.default.createElement(Po,{data:V,copyable:{hideDesc:!0}})):k.default.createElement(J,{bordered:!1},k.default.createElement(ho,{value:c,error:f,onChange:o})),k.default.createElement(Ie,{placeholder:!0,offsetBottom:0,borderTop:!0},!f&&k.default.createElement(ke,{...re}),k.default.createElement(P,{buttonGroup:ue})),d?k.default.createElement(Vo,{onBack:()=>{T(!1)},rpcInfo:t,chainGasInfo:ce,customGasInfo:G,updateCustomGasInfo:nt,stopPollingGasPrice:X,chainGasLimitLoadFailed:Ne}):null)};l();p();var B=h(D()),Er=h(he());O();At();l();p();var se={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var Ir={uniqueId:Be,rpcUrl:s("wallet_extension_rpc_title_official")},_n=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[r,i]=(0,B.useState)({}),m=[...e],u=!!t.length;u&&m.unshift(Ir);let[a,c]=(0,B.useState)(!1),{updateRpcNetwork:o}=ot(),d=(0,B.useCallback)(async()=>{try{c(!0);let f=e.find(_=>!!_.isDefaultRpc);if(r.isDefaultRpc||r.uniqueId===Be&&!f)return;f&&await o({...f,isDefaultRpc:!1}),await o({...r,isDefaultRpc:!0})}catch(f){console.log(f)}finally{c(!1)}},[r,e,o]),T=(0,B.useCallback)(async()=>{await d(),n(r)},[r,n,d]);return(0,Er.useMount)(()=>{let f=e.find(_=>_.isDefaultRpc);f?i(f):u&&i(Ir)}),B.default.createElement(E.FlexBox,{className:se.root,direction:E.DIRECTION.vertical},B.default.createElement(Je,{backable:!1,closeable:!1,title:s("wallet_extension_rpc_title_select_rpc")}),B.default.createElement(E.Box,{className:se.main},B.default.createElement(E.Box,{className:se.tips},s("wallet_extension_rpc_desc_select_rpc_current")),B.default.createElement(E.Box,{className:se.list},m.map(f=>B.default.createElement(E.Box,{className:se.item,onClick:()=>{i(f)}},B.default.createElement(ro,{ellipsis:!0,className:se.title},f.rpcUrl),B.default.createElement(je.Circle,{checked:f.uniqueId===r.uniqueId}))))),B.default.createElement(E.Box,{className:se.footer},B.default.createElement(P,{buttonGroup:[{loading:a,disabled:!r.uniqueId,actionType:P.ACTION_TYPE.CONFIRM,onClick:T}]})))},wr=_n;var Tn=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:r}=ot(),i=lo({appBaseChain:"ethereum"})||[],m=i.filter(o=>Le(o.realChainIdHex,t.chainId)),u=n.filter(o=>Le(o.chainId,t.chainId)),[a,c]=(0,te.useState)(null);return r==="loading"||!i?.length?te.default.createElement(mo,null):m.length+u.length>1?a?a.uniqueId===Be?te.default.createElement(_t,{...e}):te.default.createElement(xt,{...e,rpcInfo:a}):te.default.createElement(wr,{networkType:t.networkType,targetRpcChain:u,targetMainChain:m,handleSelect:c}):m.length?te.default.createElement(_t,{...e}):te.default.createElement(xt,{...e,rpcInfo:u[0]})},kr=Tn;var lc=(0,me.memo)(({unapproved:e})=>{switch(e.method){case Vt.SEND_EVM_INSCRIPTIONS:return me.default.createElement(sr,{unapproved:e});default:break}switch(e.type){case ne.ETH_SIGN:case ne.PERSONAL_SIGN:case ne.ETH_SIGN_TYPED_DATA:case ne.ETH_GET_ENCRYPTION_PUBLIC_KEY:case ne.ETH_DECRYPT:return me.default.createElement(Ho,{unapproved:e});case ne.WATCH_ASSET:return me.default.createElement(Jo,{unapproved:e});case ne.ADD_ETHEREUM_CHAIN:return me.default.createElement(Uo,{unapproved:e});default:return me.default.createElement(kr,{unapproved:e})}});export{lc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-EHC3QQGG.js.map
