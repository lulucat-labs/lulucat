import{a as oo,b as to}from"./chunk-564T6VYV.js";import{a as Re}from"./chunk-IS3W5LUX.js";import"./chunk-BX423ZLZ.js";import{a as xe}from"./chunk-KW2AFYVX.js";import{a as Xe,b as he}from"./chunk-I2R6SGZU.js";import"./chunk-PEC3MSS4.js";import"./chunk-F4XZWNG2.js";import{a as eo,c as pe}from"./chunk-TQS4TSWH.js";import"./chunk-6LLKXSCU.js";import"./chunk-7XOHQAJS.js";import{b as Qe}from"./chunk-UNBGCT5E.js";import"./chunk-FOZHYRP7.js";import"./chunk-4L5OPDYI.js";import"./chunk-SBQTMPJM.js";import{a as Je,c as H}from"./chunk-7YQLUBDN.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import"./chunk-GGZ73X5S.js";import"./chunk-QIV5EJPL.js";import{a as Ye}from"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import{a as $e}from"./chunk-OGS4HURJ.js";import{b as Ge,d as z,e as We,i as S}from"./chunk-T6GLUO36.js";import"./chunk-F5ELBQNP.js";import"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{g as qe,h as ce}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import{a as Ke}from"./chunk-GOMM7VSE.js";import{r as ze}from"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as je}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import"./chunk-WSXZYUQ4.js";import{b as k}from"./chunk-JRZXGORL.js";import{h as Ze,q as r}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import"./chunk-AUURQ3HI.js";import{cc as b,m as Be,o as Oe,tb as He}from"./chunk-B32MCU7F.js";import"./chunk-VOLYN562.js";import"./chunk-VLKJDIZ5.js";import{Ja as Ve,Na as So}from"./chunk-N4B7HQY5.js";import{d as V,f as Me}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import"./chunk-XRF6BZHR.js";import{b as ge,c as Ue,i as v,j as ae}from"./chunk-OWU5GWTN.js";import"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as p}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{A as C,B as P,C as E,E as Ce,F as ke,H as Se,I as Ae,Lc as Fe,O as Pe,V as ie,W as Y,X as Ee,Y as O,_a as se,_c as ko,aa as j,ab as ve,ea as q,yb as Co}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{A as me,E as be,G as Le,d as M}from"./chunk-E44TZGUB.js";import"./chunk-KBQXBPIW.js";import{O as N,w as s}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{T as De,ca as $}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as x}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f,o as e,q as o}from"./chunk-FJHLV356.js";e();o();e();o();var A=f(x()),W=f(b());N();Me();So();e();o();var ro=f(x());Me();var no=f(b()),le=({origin:t})=>{let m=(0,no.useSelector)(({metamask:c})=>c.silence||{});return{removeSilencePermission:(0,ro.useCallback)(async()=>{await V().removeSilencePermission(t)},[t]),silencePermissions:m[t]||[]}};e();o();e();o();var Ne=f(x()),wo=f(b());e();o();var y=f(x()),we=f(b());N();e();o();var U=f(x());e();o();var K={main:"_main_1vn1g_1",logo:"_logo_1vn1g_6",content:"_content_1vn1g_10",network:"_network_1vn1g_17",icon:"_icon_1vn1g_22"};function _e({icon:t,customIcon:m,name:i,content:c=null,disconnect:n,showDisconnect:a=!0,className:d=""}){return U.default.createElement("div",{className:`${K.main} ${d}`},m||U.default.createElement(k,{src:t,text:i,size:k.SIZE.lg,className:K.logo}),U.default.createElement("div",{className:K.content},U.default.createElement(r.Text,{strong:700,ellipsis:!0},i),c),a&&U.default.createElement(k.IconButton,{icon:"okx-wallet-plugin-unlink",className:K.icon,onClick:n}))}e();o();var Q=f(x());N();e();o();var J={wrapper:"_wrapper_snb9e_1",silence:"_silence_snb9e_4",text:"_text_snb9e_10",cancel:"_cancel_snb9e_13"};var io=({origin:t})=>{let{removeSilencePermission:m,silencePermissions:i}=le({origin:t});if(i.findIndex(a=>a.expireTime>Date.now())===-1)return null;let n=async()=>{await m()};return Q.default.createElement(p.Box,{className:J.wrapper},Q.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:J.silence},Q.default.createElement(r.Text,{className:J.text,type:r.TYPE.secondary,size:r.SIZE.xs},s("wallet_extension_connect_text_silent_mode_enabled")),Q.default.createElement(r.Text,{strong:500,className:J.cancel,size:r.SIZE.xs,onClick:n},s("wallet_extension_connect_btn_cancel"))))};ko();e();o();var _=f(x()),lo=f(b());N();se();ie();e();o();var h=f(x()),mo=f(b());N();ie();e();o();var F={wrapper:"_wrapper_uubzp_1",switchNetwork:"_switchNetwork_uubzp_4",title:"_title_uubzp_7",arrow:"_arrow_uubzp_10",chainIcon:"_chainIcon_uubzp_14",tip:"_tip_uubzp_17"};e();o();var ue=f(x());N();se();ie();var so=({providerType:t})=>{let[m,i]=(0,ue.useState)({}),c=Je(),n=Qe(t),{list:a}=Xe(),d=u=>c.filter(T=>T.factionType===u).find(T=>T.localType===n?.localType)||{};return(0,ue.useEffect)(()=>{switch(t){case C:{let u=a.find(T=>n.type===Ee?T.uniqueId===n?.uniqueId:T.localType===n?.type)||{};i({...u,title:s("wallet_extension_sonic_header_evm_network")});break}case P:{let u=d(4);i({...u,icon:u.imageUrl,title:s("wallet_extension_sonic_desc_solana_comaptible")});break}case E:{let u=d(5);i({...u,icon:u.imageUrl,title:s("wallet_extension_sonic_desc_aptos_comaptible")});break}default:break}},[t,n,c]),m};var g=({providerType:t,isAllchain:m=!1})=>{let i=so({providerType:t}),{title:c,icon:n,chainName:a}=i,[d,u]=(0,h.useState)(!1),T=(0,mo.useSelector)(S);return h.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:F.wrapper},h.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs,className:F.title},c),m?h.default.createElement(r.Text,{type:r.SIZE.xs},s("wallet_extension_sonic_desc_all_networks")):h.default.createElement(h.default.Fragment,null,h.default.createElement(M,{width:16,height:16,alt:"chain",src:n||v,errorImg:v,pictureClassName:F.chainIcon}),h.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:F.switchNetwork,onClick:()=>u(!0)},h.default.createElement(r.Text,{size:r.SIZE.xs},a),h.default.createElement(k,{className:`okx-wallet-plugin-select-unfold ${F.arrow}`,size:k.SIZE.xxs}))),h.default.createElement(he,{visible:d,providerType:t,onClose:()=>u(!1),origin:T?.origin},h.default.createElement(he.Header,{title:s("wallet_extension_title_switch_network"),subTitle:t===C?s("wallet_extension_evm_desc"):s("wallet_extension_aptos_toast_manually_switch_network",{network:a})})))},Ao=({chainName:t})=>h.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs,className:F.tip},s("wallet_extension_sonic_toast_manually_switch_network",{network:t}));g.Tip=Ao;e();o();var X=f(x());N();se();e();o();var D=f(x());N();e();o();Co();function ao(){let t=ve;return{address:$e(t)||"",localType:t}}e();o();var ye={wrapper:"_wrapper_1ujno_1",arrow:"_arrow_1ujno_4"};var co=({walletId:t,network:m})=>{let{address:i}=ao(),[c,n]=D.default.useState(!1),a=m?.coinId;return D.default.createElement(D.default.Fragment,null,D.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:ye.wrapper,onClick:()=>{n(!0)}},D.default.createElement(r.Text,{size:r.SIZE.xs},Be(i)),D.default.createElement(k,{className:`okx-wallet-plugin-select-unfold ${ye.arrow}`,size:k.SIZE.xxs})),D.default.createElement(xe,{visible:c,onClose:()=>n(!1),coinId:a,walletId:t},D.default.createElement(xe.Header,{title:s("extension_defi_top_header_title_select_address_type"),subTitle:s("extension_defi_popup_desc_new_address_default")})))};e();o();var fe={lineItem:"_lineItem_1ljn3_1",chainIcon:"_chainIcon_1ljn3_4",networkTitle:"_networkTitle_1ljn3_7"};var Z=({chain:t})=>{let m=t?.localType||O,i=qe(),c=H({localType:m});return X.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:fe.lineItem},X.default.createElement(r.Text,{size:r.SIZE.xs,type:r.TYPE.secondary,className:fe.networkTitle},s("wallet_extension_sonic_header_btc_address")),X.default.createElement(M,{width:16,height:16,alt:"chain",src:c?.imageUrl||v,errorImg:v,pictureClassName:fe.chainIcon}),X.default.createElement(co,{walletId:i,network:c}))};e();o();var G=f(x());N();e();o();var R={lineItem:"_lineItem_1bqk8_1",chainIcon:"_chainIcon_1bqk8_4"};var ee=({showImage:t=!0,info:m})=>G.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:R.lineItem},G.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs,className:R.title},s("wallet_extension_card_dropdown_available_network",{network:""})),t&&G.default.createElement(M,{width:16,height:16,alt:"chain",src:m.image||v,errorImg:v,pictureClassName:R.chainIcon}),G.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:R.switchNetwork},G.default.createElement(r.Text,{size:r.SIZE.xs},m.chainName||"")));e();o();var po={headerTip:"_headerTip_tbl1j_1"};var _o=({isAllchain:t,isCurrentDappConnect:m})=>{let i=ce(),c=(0,lo.useSelector)(S),{provider:n}=pe({dappUrl:c?.origin}),a=ae[n],d=H({localType:a}),u=()=>_.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs,className:po.headerTip},s("wallet_extension_sonic_desc_switch_network_btc"));if(!m)return _.default.createElement(_.default.Fragment,null,u(),i?.account[Y]&&_.default.createElement(g,{providerType:C}),i?.account[j]&&_.default.createElement(g,{providerType:P}),i?.account[q]&&_.default.createElement(g,{providerType:E}),i?.account[O]&&_.default.createElement(Z,null));if(t)return _.default.createElement(_.default.Fragment,null,u(),i?.account[Y]&&_.default.createElement(g,{providerType:C,isAllchain:t}),i?.account[j]&&_.default.createElement(g,{providerType:P}),i?.account[q]&&_.default.createElement(g,{providerType:E}),i?.account[O]&&_.default.createElement(Z,null));switch(n){case C:case ge["okx6963-provider"]:case ge["ethereum-provider"]:return _.default.createElement(g,{providerType:C});case P:case ke:return _.default.createElement(_.default.Fragment,null,_.default.createElement(g.Tip,{chainName:d?.chainName}),_.default.createElement(g,{providerType:P}));case E:case Se:return _.default.createElement(_.default.Fragment,null,_.default.createElement(g.Tip,{chainName:d?.chainName}),_.default.createElement(g,{providerType:E}));case Ae:case Pe:return _.default.createElement(Z,{chain:d});case Ce:return _.default.createElement(ee,{info:{chainName:s("wallet_extension_cosmos_text_cosmos_network")},showImage:!1});default:return _.default.createElement(ee,{info:{image:d?.imageUrl,chainName:d?.chainName}})}};e();o();var w=f(x()),uo=f(b());se();ie();var fo=({isAllchain:t,isCurrentDappConnect:m,provider:i})=>{let c=(0,uo.useSelector)(Ye),n=c?.length?c[0]:{},a=ae[i],d=H({localType:a});switch(n?.localType){case Y:return w.default.createElement(g,{providerType:C,isAllchain:m?t:!1});case O:return w.default.createElement(Z,{chain:d});case j:return w.default.createElement(w.default.Fragment,null,w.default.createElement(g.Tip,{chainName:n?.chainName}),w.default.createElement(g,{providerType:P}));case q:return w.default.createElement(w.default.Fragment,null,w.default.createElement(g.Tip,{chainName:n?.chainName}),w.default.createElement(g,{providerType:E}));default:return w.default.createElement(ee,{info:{image:n?.image,chainName:n?.chainName}})}};e();o();var oe={main:"_main_80cch_1",connectedItem:"_connectedItem_80cch_4",chainIcon:"_chainIcon_80cch_7",lineItem:"_lineItem_80cch_10",tooltip:"_tooltip_80cch_13",tipIcon:"_tipIcon_80cch_16",networkTitle:"_networkTitle_80cch_21"};var To=({activeTab:t,removeAccount:m,domain:i})=>{let c=(0,we.useSelector)(z),n=ce(),{method:a,provider:d}=pe({dappUrl:t?.origin}),u=(0,y.useMemo)(()=>n?.keyringIdentityType===Fe.PRIVATE_KEY,[n]),T=(0,y.useMemo)(()=>Boolean((c||[]).find(Te=>Te.origin===t?.origin)),[c,t]),L=(0,we.useSelector)(Ge),te=(0,y.useMemo)(()=>L[t?.origin]?.isOkx,[L,t]),re=eo({provider:d,method:a})||te;return y.default.createElement(p.Box,{className:oe.main},y.default.createElement(p.FlexBox,{align:p.ALIGN.center},y.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs},s("wallet_extension_header_subtitle_current_dapp")),y.default.createElement(me,{title:s("wallet_extension_toast_tooltip_adjust_retry"),trigger:me.TRIGGER_TYPES.hover,placement:me.DIRECTION.bottom,className:oe.tooltip},y.default.createElement(De,{className:`okds-question-mark-circle-fill ${oe.tipIcon}`}))),y.default.createElement(_e,{className:oe.connectedItem,customIcon:y.default.createElement(be,{alt:"connected",src:t?.icon||"/static/images/default-img.svg",errorImg:Ue,className:"connect-site-page__origin-icon"}),name:i,disconnect:()=>m(t?.origin),showDisconnect:T}),u?y.default.createElement(fo,{isAllchain:re,isCurrentDappConnect:T,provider:d}):y.default.createElement(_o,{isAllchain:re,isCurrentDappConnect:T}),y.default.createElement(io,{origin:t?.origin}))};e();o();var I=f(x()),de=f(b());N();e();o();var Ie=f(x());N();e();o();var go={main:"_main_ntvor_1"};var Po=({connectedDomains:t,onDisconnect:m,domainHostCount:i})=>{let c=a=>m(a.origin),n=a=>a.extensionId?s("wallet_dapp_conncetion_subtitle_external_extension"):i[a.host]>1?a.origin:Oe(a.origin);return Ie.default.createElement("main",{className:go.main},t.map(a=>Ie.default.createElement(_e,{key:a.origin,icon:a.icon,name:n(a),disconnect:()=>c(a)})))},xo=Po;e();o();var ho={chainIcon:"_chainIcon_rikh8_1",lineItem:"_lineItem_rikh8_4",connectedText:"_connectedText_rikh8_7"};var Eo=({loading:t,emptyText:m,onRemoveAccount:i,onRemoveAllAccount:c,children:n})=>{let a=(0,de.useSelector)(S),d=(0,de.useSelector)(We),u=(0,de.useSelector)(z),T=(0,I.useMemo)(()=>(u||[]).filter(L=>L.origin!==a?.origin),[u,a]);return I.default.createElement(I.default.Fragment,null,n,!!n&&!!T.length&&I.default.createElement(Ze,null),!!T.length&&I.default.createElement(p.Box,null,I.default.createElement(p.FlexBox,{align:p.ALIGN.center},I.default.createElement(r.Text,{type:r.TYPE.secondary,size:r.SIZE.xs,className:ho.connectedText},s("wallet_extension_header_subtitle_connected_dapp"))),I.default.createElement(xo,{domainHostCount:d,connectedDomains:T,onDisconnect:i})),!!u.length&&I.default.createElement(je.FooterActions,null,I.default.createElement($,{block:!0,loading:t,size:$.SIZE.lg,type:$.TYPE.highlight,category:$.CATEGORY.fill,onClick:c},s("wallet_extension_withdraw_btn_disconnected"))),!n&&!u.length&&!T.length&&m)},yo=Eo;var vo=({loading:t,onRemoveAccount:m,onRemoveAllAccount:i})=>{let c=(0,wo.useSelector)(S),n=c?.origin&&c?.origin.replace(/^https?:\/\//iu,"");return Ne.default.createElement(yo,{loading:t,onRemoveAccount:m,onRemoveAllAccount:i},Ne.default.createElement(To,{activeTab:c,removeAccount:m,domain:n}))},Io=vo;var No=Io;e();o();var Do=()=>{let t=(0,W.useSelector)(z),m=(0,W.useSelector)(He),i=(0,W.useDispatch)(),[c,n]=(0,A.useState)(!1),a=(0,W.useSelector)(S),{removeSilencePermission:d,silencePermissions:u}=le({origin:a?.origin}),{setDisconnectUpgrade:T,isNeedShowDisconnectUpgrade:L}=Re(),te=(0,A.useCallback)(()=>{L&&(Le.success({title:s("wallet_extension_card_subtitle_disconnect_update")}),T())},[L,T]),re=async B=>{await oo(B),V().clearCookie(B),await V().removePermittedAllAccount(B),te(),u.length>0&&d(B),await Ve(i)},Te=()=>{n(!0);try{Promise.all(t.map(ne=>(u.length>0&&d(ne.origin),V().clearCookie(ne.origin)))).catch(()=>{});let B=t.map(async ne=>i(ze(ne.origin,m)));Promise.all([...B,to(m)]).then(()=>{n(!1),te()}).catch(()=>{n(!1)})}catch{n(!1)}};return A.default.createElement("div",{className:"connect-site-page__wrapper"},A.default.createElement(Ke,{title:s("wallet_home_dapp_connection_btn_connect"),closeable:!1}),A.default.createElement(No,{loading:c,onRemoveAccount:re,onRemoveAllAccount:Te}))},bo=(0,A.memo)(Do);export{bo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=DAppNetworkManage-SYYJVLTV.js.map
