import{a as w,b as Z,c as O}from"./chunk-MSEKW37V.js";import{a as y,b as L}from"./chunk-KPMUK7JJ.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import"./chunk-QR7BG2TV.js";import"./chunk-GOMM7VSE.js";import{p as v}from"./chunk-LTMEFQRN.js";import{h as U}from"./chunk-TU5XNYNZ.js";import{a as A}from"./chunk-MZFOYMI4.js";import{a as z}from"./chunk-WSXZYUQ4.js";import"./chunk-JRZXGORL.js";import"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{o as $}from"./chunk-AUURQ3HI.js";import{cc as X}from"./chunk-B32MCU7F.js";import"./chunk-VOLYN562.js";import"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import{d as N,f as W}from"./chunk-TKFT6XV3.js";import"./chunk-OWU5GWTN.js";import"./chunk-2BGRD7AD.js";import"./chunk-AIPMH74P.js";import"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{D as d,H as B,q as n}from"./chunk-E44TZGUB.js";import"./chunk-KBQXBPIW.js";import{D as S,O as Q,w as e}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{ca as _}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as K}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as g,o as t,q as a}from"./chunk-FJHLV356.js";t();a();var s=g(K()),M=g(X()),i=g($());Q();W();t();a();var V={root:"_root_1r48s_1"};t();a();t();a();function R(){return{updatePasskey:async I=>{}}}var D=R;var G=D;var Fs=({history:E})=>{let I=(0,M.useDispatch)(),p=d.useForm(),[r,Y]=s.default.useState({}),[j,b]=s.default.useState(null),[k,{setTrue:q,setFalse:x}]=(0,i.useBoolean)(!1),c=(0,s.useRef)(),C=(0,i.useMemoizedFn)(()=>{c.current=v(r.oldPassword).then(()=>(b(null),p.cleanErrors("oldPassword"),!0)).catch(()=>{let o=e("wallet_set_password_errortip_password_wrong");return b(o),p.setErrors({oldPassword:o}),!1})}),{updatePasskey:H}=G();(0,i.useThrottleEffect)(()=>{!r.oldPassword||C()},[r.oldPassword],{wait:500});let P=!!j||!r.oldPassword||!r.password||!r.confirm||r.password?.length<y||r.confirm?.length<y,T=(0,i.useMemoizedFn)(async()=>{let{password:o,confirm:m}=r;if(P||k)return;if(o!==m){p.setErrors({confirm:e("wallet_settings_reset_passord_errortip_input_error")});return}if(q(),c.current||C(),!await c.current){x();return}if(await N().modifyPassword(m)){let[l]=await S(H(m));l&&I(U(1)),B.success(e("wallet_edit_wallet_toast_renamed_success")),E.push(z)}x()},[P,r]),F=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await T()},[]),J=O();return(0,s.useEffect)(()=>(document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}),[]),s.default.createElement(Z,{className:V.root,title:e("wallet_settings_reset_passord_maintitle_reset_password"),desc:e("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:m,itemClass:f})=>s.default.createElement(d,{form:p,size:n.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:m,onValuesChange:(u,l)=>{Y(l)}},s.default.createElement(d.Item,{name:"oldPassword",style:{marginBottom:0},label:e("wallet_settings_reset_passord_subtitle_old_password"),className:f},s.default.createElement(n.Password,{autoFocus:!0,autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_old_password",void 0,{useBr:!1})})),s.default.createElement(d.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:f,label:e("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_desc",void 0,{useBr:!1})})),s.default.createElement(d.Item,{noStyle:!0,shouldUpdate:(u,l)=>u.password!==l.password},({getFieldValue:u})=>{let l=u("password");return s.default.createElement(L,{password:l})}),s.default.createElement(d.Item,{name:"confirm",className:f,label:e("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:w.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_password_confirmation",void 0,{useBr:!1}),onChange:()=>{p.cleanErrors("confirm")}})),s.default.createElement(A.FooterActions,{usePortal:!0,renderNative:!0,affixStyle:J,buttonGroup:[{loading:k,disabled:P,block:!0,type:_.TYPE.highlight,category:_.CATEGORY.fill,size:_.SIZE.lg,onClick:T,btnText:e("wallet_set_password_btn_confirm")}]})))};export{Fs as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-ZAPWC4WL.js.map
