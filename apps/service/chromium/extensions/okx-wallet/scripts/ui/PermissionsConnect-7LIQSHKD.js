import{b as Ut}from"./chunk-YNDUHMHI.js";import{c as qe}from"./chunk-46OYQ6W4.js";import{a as De,b as Le}from"./chunk-7SVEA7IT.js";import{a as Ne}from"./chunk-YSW2YY4I.js";import{a as Pe}from"./chunk-4PFFVHVY.js";import"./chunk-JSJTP4EG.js";import{a as Me}from"./chunk-R6UCQXIY.js";import{a as it}from"./chunk-DIVFRUSZ.js";import{a as k,d as P}from"./chunk-NFPXRZGF.js";import{a as xe,b as st,c as kt}from"./chunk-2AZAHALD.js";import{f as N}from"./chunk-APUK5GYS.js";import"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import"./chunk-QHPYMFK2.js";import"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import"./chunk-2P7I7CKT.js";import{a as We,c as St,d as ve}from"./chunk-TQS4TSWH.js";import{a as Oe,b as be}from"./chunk-BWH5KOIX.js";import"./chunk-6LLKXSCU.js";import"./chunk-FOZHYRP7.js";import"./chunk-HVQTUZKT.js";import{e as Ie}from"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import{a as Ee}from"./chunk-5HXUZG4A.js";import"./chunk-SBQTMPJM.js";import"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import{b as Bt}from"./chunk-GGZ73X5S.js";import{a as Te,b as Ce}from"./chunk-QIV5EJPL.js";import{a as he}from"./chunk-YSEHOL75.js";import"./chunk-MNWYB2XY.js";import{e as S,g as ht}from"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import"./chunk-4X3SKD2N.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import{a as _e,f as ge}from"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import{J as Zt,L as Qt}from"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{e as ye,g as At,i as Ae}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import{a as Se}from"./chunk-GOMM7VSE.js";import{j as ie}from"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as we}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{a as Rt,ab as pe,b as me,h as b,j as B}from"./chunk-WSXZYUQ4.js";import"./chunk-JRZXGORL.js";import"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{o as yt}from"./chunk-AUURQ3HI.js";import{Ka as ce,Lb as ue,cc as I,tb as V,vb as le}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as wt}from"./chunk-VLKJDIZ5.js";import{Ja as R,La as se,Na as Ct,pa as Tt,qa as ko}from"./chunk-N4B7HQY5.js";import{d as rt,f as ne}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import"./chunk-XRF6BZHR.js";import{f as fe}from"./chunk-OWU5GWTN.js";import{E as ae}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import{g as de}from"./chunk-ELX2GHLL.js";import{c as nt}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{Ac as Bo,E as Yt,Kc as ee,Lc as oe,Oa as dt,Rb as gt,S as Vt,U as jt,V as Ht,_a as _t,_c as re,hc as Kt,kc as Lt,n as Dt,qc as Lo,ra as ot,wc as te,z as Do}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{H as Jt,c as zt,e as Xt}from"./chunk-E44TZGUB.js";import{K as ft,f as ut,oa as vt}from"./chunk-KBQXBPIW.js";import{O as q,w as _}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as Ro,Z as qt}from"./chunk-W7JONHX2.js";import{a as qo}from"./chunk-O3LHCDGR.js";import{a as h}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-KHHBU7RQ.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as p,o as e,q as o}from"./chunk-FJHLV356.js";e();o();var v=p(h()),Q=p(I()),D=p(wt()),Oo=p(yt());Lo();Do();Ct();e();o();var Re=p(h()),Be=(0,Re.lazy)(()=>import("./Comp-XSAKTZF2.js"));e();o();e();o();var ke=p(I());Ct();function Ue(){let t=(0,ke.useDispatch)();return()=>t(se())}var Ge=Ue;e();o();e();o();var W=p(h());Ht();e();o();var to=p(h());e();o();var x=p(h()),je=p(I()),He=p(wt());q();re();e();o();var E=p(h()),$e=p(wt());vt();var Fe=p(qo());q();Ht();e();o();var Et={root:"_root_oli0p_1",multiAccount:"_multiAccount_oli0p_4",count:"_count_oli0p_9"};var Go="account-selector",Ye=t=>{let r=(0,$e.useHistory)(),{permissionsRequestId:n,request:s,dappSelectAccount:a,walletInfo:i={},connectable:c=!0,hiddenAddress:m=!1,disableSelectAccount:f=!1}=t,{method:d,provider:g,status:T}=St({dappUrl:s?.metadata?.origin}),l=()=>{r.push({pathname:`${b}/${n}${B}`})},C=(0,E.useMemo)(()=>m?"":s?.providerType===Yt?_("wallet_extension_cosmos_text_cosmos_network"):i.address,[m,s?.providerType,i.address]),w=We({provider:g,method:d}),y=()=>a.length<=1?w?E.default.createElement(k,{bordered:!1},E.default.createElement(kt,{onClick:f?void 0:ut,hiddenAddress:m,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:_("wallet_extension_expand_all_networks")})):E.default.createElement(k,{bordered:!1},E.default.createElement(kt,{onClick:f?void 0:ut,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:C,hiddenAddress:m,connectable:c})):E.default.createElement(k,{bordered:!1},E.default.createElement(xe,{title:_("wallet_dapp_conncetion_requesr_subtitle_current_account")},E.default.createElement(nt.Box,{className:Et.multiAccount},E.default.createElement(nt.Box,{className:Et.count},_("wallet_extension_mid_text_accounts",{num:a.length})),E.default.createElement(Ut,{className:`${Go}__info-arrow`,side:Ut.SIDE.RIGHT}))));return E.default.createElement("div",{className:Et.root,onClick:f?ut:l},T!=="PENDING"&&y())};Ye.propTypes={permissionsRequestId:Fe.default.string.isRequired};var Ve=Ye;function $o({targetDomainMetadata:t,permissionsRequestId:r,request:n,walletInfo:s,connectable:a,tipMessage:i,buttonGroup:c,hiddenAddress:m,disableSelectAccount:f,RequestedNetworks:d,children:g,title:T}){let l=(0,He.useHistory)(),C=(0,je.useSelector)(S),w=ye();return x.default.createElement(nt.Container,null,x.default.createElement(Se,{backable:!1,closeable:!1,title:T??_("wallet_dapp_conncetion_maintitle_conncet_account")}),x.default.createElement(k,null,x.default.createElement(Ne,{...t})),x.default.createElement(Ve,{targetDomainMetadata:t,permissionsRequestId:r,request:n,dappSelectAccount:C,walletInfo:s,disableSelectAccount:f,hiddenAddress:m,connectable:a}),d&&x.default.createElement(d,{request:n}),g,x.default.createElement(we,{placeholder:!0,offsetBottom:0,borderTop:!0},x.default.createElement(P,{...i}),x.default.createElement(N,{buttonGroup:c})),s?.keyringIdentityType===oe.MPC&&x.default.createElement(De,{keyringId:s.keyringId,customConfig:w?.length===1?{confirmText:_("wallet_extension_btn_general_gotit")}:{},actionMap:{["RECOVER"]:()=>{l.push(`${pe}?action=${Ee.RECOVER}&walletId=${s.walletId}`)},["SWITCH_WALLET"]:async()=>w?.length===1?(await c[0]?.onClick(),l.push(me)):l.push({pathname:`${b}/${r}${B}`})}}))}var j=$o;e();o();var Ke=p(I());function Fo(t){let r=At(),s=(0,Ke.useSelector)(S)[0]||r,{walletInfo:a,connectable:i,chainName:c,status:m}=ve({dappUrl:t,walletId:s}),f=Le(s);return{targetWalletId:s,walletInfo:a,connectable:i,chainName:c,mpcConnectable:f,status:m}}var H=Fo;e();o();var K=p(I()),ze=p(wt()),Gt=p(yt());q();Ct();function $t({disabled:t,request:r,targetDomainMetadata:n,cancelPermissionsRequest:s,approvePermissionsRequest:a,connectSource:i,connectChains:c}){let m=(0,K.useDispatch)(),f=n?.origin,d=it(),g=(0,K.useSelector)(S),T=St({dappUrl:f});return async()=>{if(t)return;d({trade:"connect_wallet",all_confirmation:"confirm"});let C={...r,permissions:{...r.permissions}};if(Object.keys(C.permissions).length>0){if(await a(C,g),g.length===1&&await m(ie(g[0],!0)),Qt({dapp_url:f}),T?.dappUrl&&T?.provider){let w={dappurl:T.dappUrl,connect_method:i||T.provider,dappname:n?.name};c&&(w.chain=c),Zt(w)}}else await s(C.metadata.id);await R(m)}}var Yo=({props:t,isMpcError:r,connectable:n,confirmBtnText:s,onConfirm:a,onCancel:i,connectSource:c,connectChains:m,disabledConfirmBtn:f=!1})=>{let d=(0,K.useDispatch)(),g=(0,ze.useHistory)(),T=(0,K.useSelector)(S),{permissionsRequestId:l,targetDomainMetadata:C,cancelPermissionsRequest:w,approvePermissionsRequest:y,request:U}=t,L=it(),M=(0,Gt.useMemoizedFn)(async()=>{L({trade:"connect_wallet",all_confirmation:"cancel"}),i?await i(l):await w(l),await R(d)}),{loading:tt,onClick:et}=st(M),G={actionType:N.ACTION_TYPE.CANCEL,onClick:et,loading:tt},F=$t({request:U,targetDomainMetadata:C,approvePermissionsRequest:y,cancelPermissionsRequest:w,connectSource:c,connectChains:m}),Y=(0,Gt.useMemoizedFn)(async()=>{n?a?await a():await F():g.push({pathname:`${b}/${l}${B}`})}),{loading:pt,onClick:Wt}=st(Y),lt={actionType:N.ACTION_TYPE.CONFIRM,disabled:f||n&&(T.length===0||r),btnText:n?s||_("wallet_extension_connect_btn_connect"):_("wallet_extension_connect_btn_switch_wallet"),onClick:Wt,loading:pt};return[G,lt]},z=Yo;e();o();var Xe=p(h());var It=p(I());function Vo(t,r){let n=(0,It.useDispatch)(),s=(0,It.useSelector)(S),{connectable:a,mpcConnectable:i}=t;(0,Xe.useEffect)(()=>{if(!s.length&&a&&i&&r){let c=Array.isArray(r)?r:[r];n(ht.setSelectAccounts(c))}},[s,a,i,r])}var X=Vo;e();o();var Je=p(h());q();function jo({isMpcError:t,connectable:r,chainName:n}){return(0,Je.useMemo)(()=>t?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:r?{type:P.TIP_TYPE.NORMAL,message:_("wallet_dapp_conncetion_notify_conncet_permission")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:n})},[t,r,n])}var xt=jo;e();o();var Qe=p(h()),Ft=p(I());re();e();o();var Mt=p(h());var Ze=(t,r)=>{let[n,s]=(0,Mt.useState)(!1);return(0,Mt.useEffect)(()=>{(async()=>{if(t&&r){let{data:a}=await Ie({dappUrl:t});s(a.result)}})()},[t,r]),n};function Ho(t){let r=(0,Ft.useSelector)(S),n=(0,Ft.useSelector)(le),s=(0,Qe.useMemo)(()=>r.some(i=>n.find(c=>c.walletId===i)?.initialType===ee.MPC_KEYRING),[r,n]),a=Ze(t?.host,s);return s&&!a}var J=Ho;function Ko(t){let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=At(),i=H(r?.origin),{walletInfo:c,connectable:m,chainName:f,status:d}=i,g=J(r),T=xt({isMpcError:g,connectable:m,chainName:f}),l=z({props:t,isMpcError:g,connectable:m});return X(i,a),d==="PENDING"?null:to.default.createElement(j,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:T,buttonGroup:l})}var eo=Ko;e();o();var so=p(h()),io=p(I());_t();e();o();vt();_t();Kt();var zo=({props:t,isMpcError:r,connectable:n,walletInfo:s={},nearAmount:a})=>{let{walletId:i,address:c}=s,m=z({props:t,isMpcError:r,connectable:n});return!ft(a)&&gt(a,0)&&(m[1]={actionType:N.ACTION_TYPE.FILL_UP,coinId:dt,walletId:i,address:c,receiveOnly:!0}),m},oo=zo;e();o();var ro=p(h());vt();q();Kt();function Xo({nearAmount:t,isMpcError:r,connectable:n,chainName:s}){return(0,ro.useMemo)(()=>!ft(t)&&gt(t,0)?{type:zt.TYPE.warn,message:_("wallet_extension_conncetion_alert_add_more")}:r?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:n?{type:P.TIP_TYPE.NORMAL,message:_("wallet_extension_conncetion_alert_check_balance")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:s})},[t,r,n,s])}var no=Xo;var Jo=t=>{let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=(0,io.useSelector)(V),i=H(r?.origin),{walletInfo:c,connectable:m,chainName:f,targetWalletId:d}=i,g=J(r),T=Me(dt,d)?.coinAmountInt,l=no({targetWalletId:d,isMpcError:g,connectable:m,chainName:f,nearAmount:T}),C=oo({props:t,isMpcError:g,connectable:m,walletInfo:c,nearAmount:T});return X(i,a),so.default.createElement(j,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:l,buttonGroup:C})},ao=Jo;e();o();e();o();var Zo=()=>null,co=Zo;var mo=co;e();o();var mt=p(h());q();e();o();var at=p(h()),lo=p(Ro());e();o();var po={item:"_item_11fx7_1"};function Qo({className:t,message:r}){return at.default.createElement(at.default.Fragment,null,at.default.createElement(k,{bordered:!1,className:(0,lo.default)(po.item,t)},at.default.createElement(Pe,{message:r})))}var uo=Qo;e();o();var wo=p(h());q();ne();_t();ko();e();o();var fo=p(I()),_o=p(yt());Ct();function tr({disabledSubmit:t,confirmBtnLoading:r,permissionsRequestId:n,cancelPermissionsRequest:s,request:a,targetDomainMetadata:i,approvePermissionsRequest:c}){let m=(0,fo.useDispatch)(),f=it(),d=(0,_o.useMemoizedFn)(async()=>{f({trade:"connect_wallet",all_confirmation:"cancel"}),await s(n),await R(m)}),{loading:g,onClick:T}=st(d),l={loading:g,actionType:N.ACTION_TYPE.CANCEL,onClick:T},C=$t({request:a,targetDomainMetadata:i,approvePermissionsRequest:c,cancelPermissionsRequest:s}),w={loading:r,disabled:t,actionType:N.ACTION_TYPE.CONFIRM,onClick:C};return[l,w]}var go=tr;e();o();var Nt=p(h()),To=p(yt());_t();Bo();function er(t,r){let n=(0,Nt.useRef)(r?.origin),a=(t?.providersExts?.[ot]??t?.exts)?.message?.manifestUrl,[i,c]=(0,Nt.useState)(!0);return(0,To.useMount)(()=>{(async()=>{if(a)try{let f=await te(a);if(f?.status===200){let d=f.data;typeof d?.url=="string"&&(n.current=d.url)}}finally{c(!1)}else c(!1)})()}),{loading:i,domain:n.current}}var Co=er;e();o();var Ot=p(h()),Pt=p(I());function or(t){let r=(0,Pt.useSelector)(V),n=(0,Pt.useSelector)(S),s=(0,Pt.useSelector)(_e),a=he(t?.origin,s),[i,c]=(0,Ot.useState)(null);return(0,Ot.useEffect)(()=>{(async()=>{r&&n.includes(r)?c(r):a&&n.includes(a)?c(a):c(n[0])})()},[r,n,a]),i}var ho=or;var rr=({request:t,targetDomainMetadata:r,permissionsRequestId:n,approvePermissionsRequest:s,cancelPermissionsRequest:a,isSilentConnected:i})=>{let c=ho(r),{loading:m,domain:f}=Co(t,r),d=Ae(c,ot),l=((t?.providersExts?.[ot]??t?.exts)?.message?.items||[]).filter(({name:y})=>y===ce.TON_PROOF),C=l.length===1?`${l[0].payload||""}`:l.map(({payload:y})=>({value:y}));(0,wo.useEffect)(()=>{Tt("Sign Ton Proof UI",{tonAddress:d})},[d]);let w=go({disabledSubmit:m,permissionsRequestId:n,request:t,targetDomainMetadata:r,approvePermissionsRequest:async(y,U,L)=>{try{let M=Math.round(Date.now()/1e3),tt=new URL(f).host,et=await Promise.all(l.map(async({payload:G})=>{let F;try{Tt("Call Sign Ton Proof",{tonAddress:d}),F=await rt().signTonProof({proof:{timestamp:M,domain:tt,payload:G}},d,c)}catch(Y){throw Tt("Error Sign Ton Proof",{tonAddress:d,isReject:Y?.message===ae}),Y}return{payload:G,signature:F}}));y.resultParams={domain:f,timestamp:M,signatures:et}}catch{return Jt.error({title:_("wallet_extension_ton_error_signature_support")}),null}return s(y,U,L,!i)},cancelPermissionsRequest:a});return{tonProofs:l,message:C,buttonGroup:w}},yo=rr;e();o();var ct=p(h()),Ao=p(I());ne();function nr({targetDomainMetadata:t,dappMetadata:r,alwaysNeedProof:n}){let s=(0,Ao.useSelector)(V),[a,i]=(0,ct.useState)(null),[c,m]=(0,ct.useState)(!0);return(0,ct.useEffect)(()=>{(async()=>{if(!n){m(!1);return}try{(await rt().getPermittedWallets(t?.origin,!1)).length>0&&i(await rt().getPermittedWallets(t?.origin,!0))}finally{m(!1)}})()},[n]),X(r,c?null:a||s),{loading:c,isSilentConnected:!!a}}var So=nr;e();o();var Eo={loading:"_loading_po7pc_1"};function sr(t){let{alwaysNeedProof:r,targetDomainMetadata:n,permissionsRequestId:s,request:a}=t,i=H(n?.origin),{walletInfo:c,connectable:m,chainName:f}=i,d=J(n),g=xt({isMpcError:d,connectable:m,chainName:f}),T={props:t,isMpcError:d,connectable:m,connectSource:a?.exts?.connectSource},l=z(T),{loading:C,isSilentConnected:w}=So({targetDomainMetadata:n,dappMetadata:i,alwaysNeedProof:r}),{tonProofs:y,message:U,buttonGroup:L}=yo({...t,isSilentConnected:w}),M=y?.length>0;return C?mt.default.createElement("div",{className:Eo.loading},mt.default.createElement(qt.Circle,{size:qt.SIZE.lg})):mt.default.createElement(j,{targetDomainMetadata:{...n,host:n.origin||n.host},permissionsRequestId:s,request:a,walletInfo:c,connectable:m,tipMessage:g,buttonGroup:M?L:l,title:M?_("wallet_extension_header_connect_sign"):void 0},mt.default.createElement(uo,{message:U}))}var Io=sr;e();o();e();o();var ir=()=>null,xo=ir;var Mo=xo;e();o();var Z=p(h());q();e();o();var bt={root:"_root_h6iyb_1",animation:"_animation_h6iyb_14",text:"_text_h6iyb_17"};var ar=({onComplete:t})=>{let[r,n]=(0,Z.useState)(!1),s=de({dark:"/static/images/dapp/success-dark.json",light:"/static/images/dapp/success-light.json"});return Z.default.createElement("div",{className:bt.root},Z.default.createElement(Xt,{className:bt.animation,path:s,loop:!1,onDataReady:()=>{n(!0)},onComplete:t}),r?Z.default.createElement("span",{className:bt.text},_("wallet_home_foot_dapp_connceted")):null)},No=ar;var Po=({chooseAccountProps:t,showAni:r})=>{let n=t?.request?.providerTypes,s=t?.request?.providersExts,a=t?.request?.exts?.alwaysNeedProof,i=t?.request?.providerType,c=!!n,m=t?.request?.exts?.isShowWalletConnect;return W.default.createElement(W.default.Fragment,null,(()=>{switch(!0){case m:return W.default.createElement(Mo,{providerTypes:n,providersExts:s,...t});case c:return W.default.createElement(mo,{providerTypes:n,providersExts:s,...t});case(i===Vt&&a):return W.default.createElement(ao,{...t});case i===jt:return W.default.createElement(Io,{alwaysNeedProof:a,...t});default:return W.default.createElement(eo,{...t})}})(),r&&W.default.createElement(No,{onComplete:()=>{t?.onComplete()}}))};var oc=()=>{let t=(0,Q.useDispatch)(),r=(0,D.useHistory)(),s=(0,D.useRouteMatch)().params.id,i=(0,Q.useSelector)(ge).find(A=>A.metadata.id===s),c=i?.providerTypes,[m,f]=(0,v.useState)(!1),d=(0,Q.useSelector)(Ce),g=(0,Q.useSelector)(ue),{metadata:T={}}=i||{},{origin:l}=T,C=null;if(l)if(g[l])C={...g[l],origin:l},C.icon??=fe;else{let A=new URL(l);C={host:A.host,name:A.hostname,origin:l}}let w=`${b}/${s}`,y=`${b}/${s}${B}`,U=async(A,O,$)=>{await t(Oe(A,O,$))},L=async(A,O,$)=>{await t(be(A,O,$)),await t(Bt())},M=()=>t(qe()),tt=Ge(),et=()=>t(ht.setSelectAccounts([])),G=()=>{s&&d===Te.connect&&L(s,l)},F=()=>{Lt()===Dt&&window.addEventListener("beforeunload",G)},Y=()=>{Lt()===Dt&&window.removeEventListener("beforeunload",G)},pt=()=>(Y(),r.push(Rt)),Wt=async(A,O)=>{A&&(await L(A,l,O),await R(t),pt())},lt=()=>{f(!1),pt(),t(Bt())};(0,Oo.useMount)(()=>{if(tt(),M(),!i){r.push(Rt);return}F(),et()});let bo=c;return v.default.createElement("div",{className:"page-container permissions-connect"},v.default.createElement(D.Switch,null,v.default.createElement(D.Route,{path:y,exact:!0,render:()=>v.default.createElement(Be,{request:i||{},multi:!bo})}),v.default.createElement(D.Route,{path:w,exact:!0,render:()=>v.default.createElement(Po,{chooseAccountProps:{request:i||{},cancelPermissionsRequest:(O,$)=>Wt(O,$),permissionsRequestId:s,targetDomainMetadata:C,onComplete:lt,approvePermissionsRequest:async(O,$,Wo,vo=!0)=>{await U(O,$,Wo),await R(t),vo?f(!0):lt()}},showAni:m})})))};export{oc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=PermissionsConnect-7LIQSHKD.js.map
