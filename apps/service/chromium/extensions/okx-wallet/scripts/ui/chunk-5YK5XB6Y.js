import{a as v,b as A,d as de,f as Te,k as ge,l as _e,m as Pe}from"./chunk-2AM235ZQ.js";import{a as fe}from"./chunk-ITES77TJ.js";import{a as pe}from"./chunk-VOXYDIZC.js";import{a as me,c as it,d as ue}from"./chunk-CLAWFLRW.js";import{a as ie}from"./chunk-JKSK4TNM.js";import{a as re}from"./chunk-APUK5GYS.js";import{d as le}from"./chunk-4L5OPDYI.js";import{a as ce}from"./chunk-S3KOFL77.js";import{a as Xt,c as te}from"./chunk-PJAFZEEL.js";import{c as Qt}from"./chunk-3OCLT7XJ.js";import{a as ae}from"./chunk-WAEF6YGC.js";import{a as Ht}from"./chunk-J2TPGTMF.js";import{b as Zt}from"./chunk-FK74IDTO.js";import{b as zt}from"./chunk-ICS7QRDT.js";import{a as Jt,b as _t}from"./chunk-GGZ73X5S.js";import{a as ee}from"./chunk-IEUJSLGG.js";import{m as at,o as oe,q as ne}from"./chunk-GCAD5G3O.js";import{a as k}from"./chunk-PS6ETN2V.js";import{b as rt}from"./chunk-OGS4HURJ.js";import{b as $t,g as jt}from"./chunk-T6GLUO36.js";import{a as Pt,j as se}from"./chunk-HZPID3WW.js";import{b as gt}from"./chunk-ZZLPMRQY.js";import{Q as Kt}from"./chunk-WSXZYUQ4.js";import{o as nt}from"./chunk-AUURQ3HI.js";import{Db as Yt,Hb as Vt,Ia as y,Ib as Bt,Va as tt,cc as et,nb as Mt,pb as qt,zb as Wt}from"./chunk-B32MCU7F.js";import{a as We}from"./chunk-VLKJDIZ5.js";import{Ja as W,Na as Ut}from"./chunk-N4B7HQY5.js";import{d as S,f as Tt}from"./chunk-TKFT6XV3.js";import{a as B,b as F}from"./chunk-XRF6BZHR.js";import{H as V,a as qe,q as Y}from"./chunk-2BGRD7AD.js";import{a as st}from"./chunk-ZWQEMYA4.js";import{Lb as Gt,Pb as U,W as Lt,X as Dt,Xb as kt,_a as Ft,a as vt,b as Ke,hc as dt,mc as bt,qc as Me}from"./chunk-Q23SA7M6.js";import{G as H}from"./chunk-E44TZGUB.js";import{F as ft,K as Ot,U as wt,f as Q,oa as St}from"./chunk-KBQXBPIW.js";import{O as It,w as L}from"./chunk-364XNTHB.js";import{a as X}from"./chunk-PDSGFBX4.js";import{f as R,o as T,q as g}from"./chunk-FJHLV356.js";T();g();var Z=R(et());function co(){let t=(0,Z.useSelector)(jt),e=t&&t.metadata?t.metadata.id:null,s=e?1:0,o=(0,Z.useSelector)(qt),n=o.length,a=(0,Z.useSelector)(Mt),i=(0,Z.useSelector)(Bt),m=i.length,r=(0,Z.useSelector)(Vt),c=r.length;return{unapprovedTxList:o,unapprovedTxCount:n,unapprovedSmCount:a,unapprovedStList:i,unapprovedStCount:m,unapprovedPermissionCount:s,unapprovedPermissionsRequestId:e,unapprovedSnList:r,unapprovedSnCount:c,unapprovedRequestCount:n+a+m+c+s}}T();g();T();g();var E=R(X()),Nt=R(et()),Ge=R(We());It();T();g();var ct=R(et()),z=R(nt()),K=R(qe());St();Ke();Tt();Me();Ft();T();g();Tt();var Ae=async t=>await S().rpcEvmAddTransaction(t),At=async t=>await S().rpcEvmUpdateTransaction(t),Ee=async t=>await S().rpcEvmConfirmTransaction(t),ye=async t=>await S().rpcEvmFindTransaction(t),he=async(t,e)=>await S().rpcEvmPublishTransaction(t,e);T();g();var xe=R(X());It();var Ye=()=>{let t=ge();return e=>{if(e){let{type:s,status:o,txHash:n,extraParams:a}=e,i={[A.TRANS_OUT]:{key:"wallet_transfer_notif_send_success",params:{first:a?.value,second:a?.coinSymbol}},[A.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_success"},[A.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_success",params:{first:a?.coinSymbol}},[A.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_success",params:{first:a?.coinSymbol}},[A.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployed_successfully"}},m={[A.TRANS_OUT]:{key:"wallet_transfer_notif_send_fail",params:{first:a?.value,second:a?.coinSymbol}},[A.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_fail"},[A.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_fail",params:{first:a?.coinSymbol}},[A.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_fail",params:{first:a?.coinSymbol}},[A.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployfailed"}},r,c,u,l,d;o===v.PENDING?(r=H.TYPE.success,s===A.CANCEL_AUTHORIZATION?(c="wallet_transfer_notif_cancel_approval_submit",u={first:a?.coinSymbol}):c="wallet_transfer_notif_transaction_submit"):(o===v.SUCCEED?(r=H.TYPE.success,c=i[s]?.key,u=i[s]?.params):(r=H.TYPE.error,c=m[s]?.key,u=m[s]?.params),o!==v.DROPPED&&(l=t(n),d="wallet_transfer_notif_view_on_explorer")),H[r]({title:L(c,u)||c,desc:l?xe.default.createElement(ae,{url:l,urlText:L(d)}):null,duration:3})}}},Ne=Ye;function Ve(t){let e={to:t.to,value:(0,K.addHexPrefix)(F(t.value)),gasLimit:(0,K.addHexPrefix)(F(t.gasLimit)),nonce:(0,K.addHexPrefix)(F(t.nonce)),kaiaTxType:t.kaiaTxType,signFn:t.signFn};return t.type===Y.FEE_MARKET?(e.maxFeePerGas=(0,K.addHexPrefix)(F(t.maxFeePerGas)),e.maxPriorityFeePerGas=(0,K.addHexPrefix)(F(t.maxPriorityFeePerGas)),e.type=t.type):(e.gasPrice=(0,K.addHexPrefix)(F(t.gasPrice)),t.type=Y.LEGACY),t.data&&(e.data=t.data),e}function yt(t){let{extensionConfig:e}=k("rpc_info"),s=t||e,o=rt();return(0,z.useMemoizedFn)(n=>{let{type:a,txParams:i,extraParams:m}=n,r=a;return r||(i.to?r=A.CONTRACT_CALL:r=A.CONTRACT_DEPLOY),{id:bt(),type:r,txParams:{...Ve(i),from:i.from||o,chainId:s.chainId},status:v.UNAPPROVED,createTime:+new Date,txPool:[],isCanceling:!1,isSpeeding:!1,extraParams:m||{}}})}function ht(t){let e=Ne(),s=(0,ct.useSelector)(Yt),o=Pt();return(0,z.useMemoizedFn)(async(n,{walletId:a=o,signedCallback:i=Q}={})=>{if(!n)throw new Error("tx meta error");let m;if(n.txParams?.result)m=n.txParams.result;else{let{from:c}=n.txParams||{};m=await S().signRpcEvmTransaction(n.txParams,c,s,a)}if(n?.txParams?.signFn===V.KAIA_SIGN_TRANSACTION)return{rawTx:m};let r=await re(Lt,m);return await i({rawTx:m,txHash:r,status:v.PENDING}),new Promise((c,u)=>{he({txId:n.id,rawTx:m},t).then(({error:l,data:d,tx:p})=>{if(l){(p?.status===v.PENDING||p?.status===v.DROPPED)&&e(p),u(l);let{type:P,txParams:_,extraParams:x}=n,{from:N,to:h,value:w,gasLimit:C,gasPrice:f,maxFeePerGas:G,maxPriorityFeePerGas:I,data:D,nonce:J,chainId:q}=_||{},{approvedAmount:mt,coinSymbol:ut,tokenAddress:lt,approvedAddress:pt,value:Ct,toAddress:Rt}=x||{};vt.captureEvent({tags:{address:N},message:"API_ERROR_evm_rpc_send_tx",contexts:{report:{info:JSON.stringify({type:P,txParams:{from:N,to:h,value:w,gasLimit:C,gasPrice:f,maxFeePerGas:G,maxPriorityFeePerGas:I,data:D,nonce:J,chainId:q},extraParams:wt({approvedAmount:mt,coinSymbol:ut,tokenAddress:lt,approvedAddress:pt,value:Ct,toAddress:Rt},Ot)})}},exception:{values:[{type:"API_ERROR_evm_rpc_send_tx",value:l?.message}]},level:"info"})}else e(p),c({id:n.id,txHash:d.result})}).catch(async l=>{await Ee({txId:n.id,tx:{status:v.DROPPED,finishTime:+new Date,errorMessage:l?.message},checkPoolEmpty:!0}),u(l)})})})}var xt=()=>{let t=(0,ct.useDispatch)(),e=Pt();return async(s,o=e)=>{await t(ee({walletId:o,txParams:s.txParams,isRpcMode:!0}));let{id:n}=s,a=await ye(n);if(a&&(a.status===v.SUCCEED||a.status===v.DROPPED||a.status===v.DROPPED))throw Error(st)}};function Ce(t){let e=yt(t),s=ht(t),o=xt();return(0,z.useMemoizedFn)(async(n,a,i)=>{if(!await ce({walletId:a}))return Q;let r=e(n);return await o(r,a),s(r,{walletId:a,signedCallback:c=>{let u={...r,...c};try{i&&i(u)}catch{}return Ae(u)}})})}function Vo(){let t=yt(),e=ht(),s=xt();return(0,z.useMemoizedFn)(async(o,n)=>{let{type:a,txParams:i,extraParams:m}=o,r=t({type:a,txParams:{...i,...n},extraParams:m}),{id:c,txPool:u}=o;return o.id=r.id,r.id=c,o.txPool=[],await s(r),e(r,{signedCallback:l=>At({txId:c,tx:{...r,status:v.PENDING,isSpeeding:!0,txPool:[o,...u],...l}})})})}function Bo(){let t=oe(!0),e=yt(),s=ht(),o=xt();return(0,z.useMemoizedFn)(async(n,a)=>{let{txParams:i,extraParams:m}=n,{from:r,nonce:c,type:u,chainId:l}=i,d=t.find(({address:x})=>!x),p=e({type:A.TRANS_OUT,txParams:{to:r,value:"0x0",nonce:c,chainId:l,type:u,...a},extraParams:m}),{id:P,txPool:_}=n;return n.id=p.id,p.id=P,n.txPool=[],await o(p),s(p,{signedCallback:x=>At({txId:P,tx:{...p,status:v.PENDING,isCanceling:!0,txPool:[n,..._],extraParams:{toAddress:r,tokenAddress:"",coinSymbol:d?.symbol,value:"0"},...x}})})})}T();g();var $=R(X()),Re=R(et()),ot=R(nt());function Be(t){let e=t.map(o=>{let{nonce:n}=o.txParams;return parseInt(n,16)}),s=Math.max.apply(null,e);return Number.isInteger(s)?s+1:0}function ve(t,e){let s=at(void 0,e),o=rt(),n=t||o,a=(0,Re.useSelector)(Zt),i=(0,ot.useLatest)(de(e)),m=(0,ot.useLatest)(Te(void 0,e)),[r,c]=(0,$.useState)(!1),[u,l]=(0,$.useState)(null),[d,p]=(0,$.useState)(null),P=(0,ot.useMemoizedFn)(async()=>{let _;c(!0);try{_=await(await s()).eth.getTransactionCount(n,"latest"),_=Math.floor(_)}catch{_=0}let x;try{let N=Be(i.current),h=Math.max(_,N),w=m.current.map(C=>{let{nonce:f}=C.txParams;return zt(f)});for(x=h;w.includes(x);)x+=1;l(_),p(x)}finally{c(!1)}return{nonce:_,suggestedNonce:x}});return(0,$.useEffect)(()=>{(async()=>(await s())?.eth&&P())()},[s,n,a]),{loadingNonce:r,nonce:u,suggestedNonce:d,request:P}}dt();T();g();T();g();var j=R(X()),Oe=R(nt());dt();var Ze=({txParams:t={},dappInjectedGasInfo:e={}},s)=>{let{to:o,from:n,value:a,data:i,tokenAddress:m,method:r}=t,[c,u]=(0,j.useState)(""),[l,d]=(0,j.useState)(!0),[p,P]=(0,j.useState)(!1),{extensionConfig:_}=k("rpc_info"),x=s||_,N=_e(x?.rpcUrl),h=x?.chainId,{run:w}=(0,Oe.useDebounceFn)(async()=>{try{d(!0);let C=await N({to:o,from:n,value:a,data:i},m);Qt({method:r,chainId:h})&&(C*=3),u(C),P(!1)}catch{P(!0)}finally{d(!1)}},{wait:500});return(0,j.useEffect)(()=>{U(e.gasLimit,0)?(u(e.gasLimit),d(!1)):w()},[o,n,a,i,m,e.gasLimit]),{chainGasLimit:c,chainGasLimitLoading:l,chainGasLimitLoadFailed:p}},we=Ze;T();g();var M=R(X()),Se=R(nt());St();dt();var ze=({dappInjectedGasInfo:t={},txParams:e={}},s)=>{let[o,n]=(0,M.useState)({}),[a,i]=(0,M.useState)(!0),[m,r]=(0,M.useState)(!1),{extensionConfig:c}=k("rpc_info"),u=s||c,{rpcUrl:l,chainId:d}=u,p=ie(d),P=Pe(l,e),_=7e3,x=(0,M.useRef)(),N=(0,M.useRef)(!0),h=()=>{N.current=null,clearTimeout(x.current)},w=f=>{if(ft(t))n(f);else{let{gasPrice:G,maxFeePerGas:I,maxPriorityFeePerGas:D}=t,{isSupportEip1559:J}=f;if(J){delete f.gasPrice;let q=Gt(I,D);U(I,0)&&U(q,0)&&U(D,0)?(n({...f,maxFeePerGas:I,baseFeePerGas:q,maxPriorityFeePerGas:D}),h()):n(f)}else delete f.maxFeePerGas,delete f.baseFeePerGas,delete f.maxPriorityFeePerGas,U(G,0)?(n({...f,gasPrice:G}),h()):n(f)}},C=async(f=!1)=>{try{f&&i(!0);let I=(await P(d)).find(({level:D})=>D===Ht.MEDIUM)||{};delete I.level,(f||N.current)&&(w(I),r(!1))}catch{f&&r(!0)}finally{i(!1),N.current&&(x.current=setTimeout(()=>{C()},_))}};return(0,Se.useAsyncEffect)(async()=>{if(!u?.rpcUrl)return Q;let f=await p();return ft(f)?C(!0):(n(f),i(!1)),()=>{h()}},[u?.rpcUrl]),{chainGasPrice:o,stopPollingGasPrice:h,chainGasPriceLoading:a,chainGasPriceLoadFailed:m}},Ie=ze;var $e=(t={},e={},s)=>{let{chainGasPrice:o,stopPollingGasPrice:n,chainGasPriceLoading:a,chainGasPriceLoadFailed:i}=Ie({dappInjectedGasInfo:e,txParams:t},s),{chainGasLimit:m,chainGasLimitLoading:r,chainGasLimitLoadFailed:c}=we({txParams:t,dappInjectedGasInfo:e},s);return{chainGasPrice:o,chainGasLimit:m,chainGasLoading:a||r,chainGasLoadFailed:i||c,stopPollingGasPrice:n,chainGasPriceLoading:a,chainGasLimitLoading:r,chainGasPriceLoadFailed:i,chainGasLimitLoadFailed:c}},Le=$e;T();g();var De=async(t,e)=>{let s;try{s=await e.eth.getCode(t)}catch{s=null}return{isContractAddress:s&&s!=="0x"&&s!=="0x0"}};T();g();function Fe(t,{customPermissionAmount:e}){let s=tt(t);if(s){if(s.name!==y.TOKEN_METHOD_APPROVE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${s.name}'`)}else throw new Error("Invalid data");let o=it(s);o.startsWith("0x")&&(o=o.substring(2));let[n,a]=t.split(o);if(!n||!a)throw new Error("Invalid data");if(a.length!==64)throw new Error("Invalid token value; should be exactly 64 hex digits long (u256)");let i=F(e);if(i.length>64)throw new Error("Custom value is larger than u256");return i=i.padStart(a.length,"0"),`${n}${o}${i}`}function je({data:t,to:e}){let s=at(),[o,n]=(0,E.useState)(""),[a,i]=(0,E.useState)(!1);return(0,E.useEffect)(()=>{(async()=>{if(t&&!e){n(y.DEPLOY_CONTRACT);return}try{let l=tt(t)?.name,d=[y.TOKEN_METHOD_APPROVE,y.TOKEN_METHOD_TRANSFER,y.TOKEN_METHOD_TRANSFER_FROM].find(p=>p.toLowerCase()===l.toLowerCase());if(d){n(d);return}}catch{}i(!0);let r=await s(),{isContractAddress:c}=await De(e,r);n(c?y.CONTRACT_INTERACTION:y.SENT_ETHER),i(!1)})()},[t,e,s]),[o,a]}function Je({data:t,type:e}){let s,o,n,a;try{let i=tt(t),m=ue(i);s=it(i),a=m,o=e===y.TOKEN_METHOD_APPROVE,n=o&&Number(a)===0}catch{}return{address:s,isApprove:o,isRevoke:n,amount:a}}function Qe(t,e){let s=ne(void 0,e),[o,n]=(0,E.useState)({}),[a,i]=(0,E.useState)(!1),m=async()=>{try{i(!0);let{symbol:r,decimals:c}=await s(t);n({symbol:r,decimals:c}),i(!1)}catch{i(!1)}};return(0,E.useEffect)(()=>{t&&m()},[t]),[o,a]}function Xe(t){let[e,s]=(0,E.useState)(-1),{isApprove:o,amount:n}=t;return(0,E.useEffect)(()=>{o&&s(n)},[o,n]),[{...t,customApproveAmount:e},s]}function to({origin:t,isApprove:e,isRevoke:s,symbol:o,walletId:n}){let a=se(n),i=(0,Nt.useSelector)(Wt),m=n?a:i,c=(0,Nt.useSelector)($t)[t]||{},[u,l]=(0,E.useState)({});return(0,E.useEffect)(()=>{let d=null,p=null,P=null;e?(d=null,p=o,P=s?L("wallet_approval_subtitle_revoke_approval_desc",{tokenSymbol:o}):L("wallet_dapp_conncetion_alert_approve_tip",{name:c.name,tokenSymbol:o})):(d=c.icon,P=c.host,p=c.name),l({icon:d,host:P,name:p})},[s,o]),{...u,originInfo:c,wallet:`${m.keyringName} - ${m.walletName}`}}function eo(t,e){let{nonce:s,suggestedNonce:o}=ve(t,e),[n,a]=(0,E.useState)(0),[i,m]=(0,E.useState)(!0);return(0,E.useEffect)(()=>{a(o),m(!1)},[o]),[{suggested:s,custom:n,pending:i},a]}var oo=({tx:t,nonce:e,txData:s,tokenInfo:o,chain:n,customGasInfo:a,approvedAmount:i,formattedAmount:m,txType:r})=>{let{from:c,to:u,value:l,data:d}=t,{isSupportEip1559:p,maxFeePerGas:P,maxPriorityFeePerGas:_,gasPrice:x,gasLimit:N}=a,h={from:c,to:u,value:l,gasLimit:N,nonce:e,data:d};p?(h.maxFeePerGas=P,h.maxPriorityFeePerGas=_,h.type=Y.FEE_MARKET):(h.gasPrice=x,h.type=Y.LEGACY),t?.method===V.KAIA_SIGN_TRANSACTION&&(h.signFn=V.KAIA_SIGN_TRANSACTION,h.kaiaTxType=t?.typeInt);let C={[y.DEPLOY_CONTRACT]:A.CONTRACT_DEPLOY,[y.CONTRACT_INTERACTION]:A.CONTRACT_CALL,[y.TOKEN_METHOD_APPROVE]:A.AUTHORIZATION,[y.SENT_ETHER]:A.TRANS_OUT,[y.TOKEN_METHOD_TRANSFER]:A.TRANS_OUT,[y.TOKEN_METHOD_TRANSFER_FROM]:A.TRANS_OUT}[r]||A.CONTRACT_CALL;s.isRevoke&&(C=A.CANCEL_AUTHORIZATION);let f={};return r===y.TOKEN_METHOD_APPROVE&&(f.approvedAmount=i,f.coinSymbol=o.symbol,f.tokenAddress=u,f.approvedAddress=s.address),r===y.SENT_ETHER&&(f.value=kt(B(l)),f.toAddress=u,f.coinSymbol=n.symbol),(r===y.TOKEN_METHOD_TRANSFER||r===y.TOKEN_METHOD_TRANSFER_FROM)&&(f.value=m,f.tokenAddress=u,f.toAddress=s.address,f.coinSymbol=o.symbol),{type:C,txParams:h,extraParams:f}};function no(t,e,s){let o=(0,Ge.useHistory)(),n=pe(),a=fe(),i=Ce(s),[m,r]=(0,E.useState)(!1);return[{sign:async(l,d)=>{r(!0),i(t,l,d).then(async({txHash:p,rawTx:P})=>{let _=t.signFn===V.KAIA_SIGN_TRANSACTION?{raw:P}:p;n({id:e,result:_}),o.push(Kt)}).catch(p=>{p.message!==st&&H.error({title:p?.message}),n({id:e,error:p?.message||"Transaction failed"}),r(!1)}).finally(()=>{o.go(0)})},cancel:async()=>{await a({id:e}),o.go(0)}},m]}function is(t,e){let[s]=je(t),o=Je({data:t.data,type:s}),[n,a]=Qe(t?.to,e),i=to({walletId:t?.walletId,origin:t.origin,...o,...n}),m=(0,E.useMemo)(()=>me(o?.amount||0,n?.decimals),[o?.amount,n?.decimals]),[r,c]=Xe({...o,...n,formattedAmount:m}),[u,l]=(0,E.useState)(t.data);(0,E.useEffect)(()=>{if(s===y.TOKEN_METHOD_APPROVE)try{let b=Fe(t.data,{customPermissionAmount:r.customApproveAmount});l(b)}catch{}},[r.customApproveAmount,t.data,n?.decimals,o,s]);let d={...e,name:e?.name||e?.chainName},[p,P]=eo(t.from,e),[_,x]=(0,E.useState)(null),[N,h]=(0,E.useState)({}),{chainGasPrice:w,chainGasLimit:C,chainGasLoading:f,chainGasLoadFailed:G,stopPollingGasPrice:I,chainGasLimitLoadFailed:D}=Le({to:t.to,from:t.from,value:t.value||"0x0",data:u,method:t.method},{gasLimit:B(t.gas||t.gasLimit),gasPrice:B(t.gasPrice),maxFeePerGas:B(t.maxFeePerGas),maxPriorityFeePerGas:B(t.maxPriorityFeePerGas)},e),J=b=>{x(He=>({...He,...b}))};(0,E.useEffect)(()=>{h(b=>({...b,...w}))},[w]),(0,E.useEffect)(()=>{h(b=>({...b,gasLimit:C}))},[C]);let q=oo({tx:{...t,data:u},nonce:p.custom||p.suggested,txData:o,tokenInfo:n,chain:d,customGasInfo:_||N,approvedAmount:r.customApproveAmount,formattedAmount:m,txType:s}),[{sign:mt,cancel:ut},lt]=no(q,t.id,e),pt=(0,E.useMemo)(()=>{switch(s){case y.DEPLOY_CONTRACT:return L("developer_mode_history_title_contract_eployment");case y.TOKEN_METHOD_APPROVE:return o?.isRevoke?L("wallet_extension_popup_btn_revoke_approval"):L("wallet_extension_popup_btn_approve");default:return L("wallet_extension_popup_title_contract_interaction")}},[s,o?.isRevoke]);return[{type:s,title:pt,auth:{...r,...n,formattedAmount:m},meta:i,chain:d,nonce:p,gas:{chainGasInfo:N,customGasInfo:_||N,chainGasLoading:f,chainGasLoadFailed:G,updateCustomGasInfo:J,stopPollingGasPrice:I,chainGasLimitLoadFailed:D},loading:{sign:lt,token:a},data:u},{sign:mt,cancel:ut,setNonce:P,setAuthAmount:c}]}T();g();var Ue=R(et());T();g();Ut();Tt();function ke(t,e,s){return async o=>{await S().resolvePendingApproval(t,e);let{pendingApprovals:n}=await W(o);Object.values(n).length===0&&!s&&o(_t())}}function be(t){return async e=>{await S().rejectPendingApproval(t);let{pendingApprovals:s}=await W(e);Object.values(s).length===0&&e(_t())}}Ut();Ft();function Cs(t){let e=(0,Ue.useDispatch)(),o=(r=>{let{id:c,origin:u,requestData:l,type:d,requestData:{chainId:p}}=r;return{id:c,origin:u,...l,requestData:l,chainIdToDisplay:parseInt(p,16),switchType:d,explorers:l.blockExplorerUrl}})(t),{addRpcNetwork:n}=le(),{setExtensionConfig:a}=k("rpc_info");return[o,{cancel:async()=>{await e(be(o.id)),await W(e)},approve:async()=>{let{rpcUrl:r,ticker:c,blockExplorerUrl:u,chainId:l,faucetUrl:d,chainName:p}=o,P=await n({chainId:l,explorerUrl:u,faucetUrl:d,name:p,rpcUrl:r,symbol:c}),{uniqueId:_}=P;await a(P),await e(gt("isRpcMode",!0)),await e(gt("currentNetworkUniqueId",_)),await e(Jt(Dt,r,c,p,l,{},!0,_)),await e(ke(o.id,o.requestData)),await W(e)}}]}T();g();function Ss(t){return Xt(t?.image)?t.image=t.image[0]:te(t?.image)&&(t.image=null),t}export{Ee as a,ye as b,Ne as c,Ce as d,Vo as e,Bo as f,ve as g,Le as h,je as i,Je as j,oo as k,is as l,Cs as m,co as n,Ss as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-5YK5XB6Y.js.map
