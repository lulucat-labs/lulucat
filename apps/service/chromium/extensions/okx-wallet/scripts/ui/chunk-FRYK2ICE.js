import{d as co,e as mo}from"./chunk-37XSQI5O.js";import{g as oo,m as vo}from"./chunk-HNJT6VHX.js";import{a as Xe,b as fo,c as yo,d as xo}from"./chunk-KWQDFT3S.js";import{a as uo,b as _o}from"./chunk-CLAWFLRW.js";import{a as De}from"./chunk-R6UCQXIY.js";import{a as po}from"./chunk-DIVFRUSZ.js";import{a as To}from"./chunk-OL23QTWJ.js";import{a as Xt,b as Ge,d as Rt,e as io,g as ro,i as so,k as lo,m as he}from"./chunk-4VFXVCHS.js";import{b as $t}from"./chunk-4OPVNP3G.js";import{a as ao}from"./chunk-7P3TAB2X.js";import{c as Je,e as Qt}from"./chunk-F2DBKTIG.js";import{a as to,b as $e,c as no}from"./chunk-2AZAHALD.js";import{a as jt,f as Ke,t as Kt}from"./chunk-APUK5GYS.js";import{h as eo}from"./chunk-55XCE2ZH.js";import{d as Jt}from"./chunk-TZ4DRGVV.js";import{b as qt}from"./chunk-QHPYMFK2.js";import{d as ge}from"./chunk-F4XZWNG2.js";import{b as Zt}from"./chunk-7YQLUBDN.js";import{a as Mt}from"./chunk-UEHNGOG4.js";import{a as Be,d as Lt}from"./chunk-ICS7QRDT.js";import{a as Ot,b as Ht}from"./chunk-2LFRM3KT.js";import{h as Vt}from"./chunk-DPRLOZH7.js";import{a as Wt,d as zt}from"./chunk-4X3SKD2N.js";import{E as Tt,pa as gt}from"./chunk-ZV6IBWDM.js";import{c as Yt}from"./chunk-HZNY4MK4.js";import{a as Ut}from"./chunk-MZFOYMI4.js";import{b as Te}from"./chunk-JRZXGORL.js";import{f as St,h as je,l as Bt,m as Gt,q as O}from"./chunk-IRNZUYU4.js";import{o as be}from"./chunk-AUURQ3HI.js";import{Eb as Pt,Ia as Nt,K as bt,N as Et,Va as At,Za as It,_a as Qe,cc as an}from"./chunk-B32MCU7F.js";import{a as z}from"./chunk-XRF6BZHR.js";import{d as kt}from"./chunk-OWU5GWTN.js";import{H as Ft,Z as Le,_ as j,da as Se,f as ke,h as Ct,o as wt}from"./chunk-2BGRD7AD.js";import{g as Dt}from"./chunk-ELX2GHLL.js";import{c as h}from"./chunk-AIPMH74P.js";import{Ib as Ye,Jb as ct,Kb as Ve,Lb as Ie,Mc as ht,Nb as mt,Pb as ve,W as lt,Xb as pt,_a as tn,_c as nn,hc as Pe,nc as ut,qc as on}from"./chunk-Q23SA7M6.js";import{A as yt,G as xt,H as vt,b as _t,d as ft,o as K,q as qe}from"./chunk-E44TZGUB.js";import{K as xe,e as st,oa as ze}from"./chunk-KBQXBPIW.js";import{O as te,l as Q,v as Fe,w as o}from"./chunk-364XNTHB.js";import{H as Ze,T as dt,ca as A}from"./chunk-W7JONHX2.js";import{a as ee}from"./chunk-PDSGFBX4.js";import{f as M,o as a,q as i}from"./chunk-FJHLV356.js";a();i();a();i();te();a();i();var Ee=M(ee());a();i();a();i();var J=M(ee()),go=M(an());te();Pe();a();i();var $={title:"_title_1xthp_1",subtitle:"_subtitle_1xthp_9",fee:"_fee_1xthp_15",feeTitle:"_feeTitle_1xthp_21",feeDetail:"_feeDetail_1xthp_26",speedDetail:"_speedDetail_1xthp_33",gasDetail:"_gasDetail_1xthp_36"};var rn=()=>{let e=qt(),t=eo(),r=Vt(),n=(0,go.useSelector)(Pt),l=$t(),v=co(),s=async(u,f,m,F=0)=>{let{baseCoin:T}=await e(m,!0),b=r?.[T.coinId]||"0",C=Ye(u,f),E=Gt(Ve(C,F),{symbol:T.symbol,decimals:T.decimals}),_=Bt(Ye(ct(Ve(C,F),10**T.decimals),b),{symbol:n.symbol});return`${E} ${_}`},p=(u,f)=>{let m=l(u);return o("wallet_extension_transaction_confirmation_gas_detail",{gasPrice:Q.thousandFormat(m),gasLimit:Q.thousandFormat(f)})},d=async(u,f)=>{try{return await v({...u,coinId:f})}catch{return""}},c=({userGasInfo:u,updateGasInfo:f,fetchParams:m})=>{let{gasPrice:F,maxFeePerGas:T,maxPriorityFeePerGas:b}=f,{supportEip1559:C,gasLimit:E,gasPrice:_,maxFeePerGas:g,maxPriorityFeePerGas:G}=u;return C?(delete m.gasPrice,{...m,value:m?.amount,maxFeePerGas:T||g,maxPriorityFeePerGas:b||G,gasLimit:E}):{...m,value:m?.amount,gasPrice:F||_,gasLimit:E}};return async({coinId:u,baseCoinAmountUse:f,userGasInfo:m,updateGasInfo:F,serverSignInfo:T,fetchParams:b})=>{let{gasPrice:C,maxFeePerGas:E}=F,{supportEip1559:_,gasLimit:g,gasPrice:G,maxFeePerGas:N}=m,D=0;T?.needExtFee&&(D=await d(c({userGasInfo:m,updateGasInfo:F,fetchParams:b}),u));let H=_?N:G,Y=await s(H,g,u),U=p(H,g),W=_?E:C,I=await s(W,g,u,D),me=p(W,g);return new Promise((X,V)=>{let Z=K.prompt({hideCloseBtn:!1,alignBottom:!1,titleCenter:!1,infoType:null,confirmText:o("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:A.TYPE.highlight,size:A.SIZE.lg},onConfirm:async()=>{Z.destroy();let{baseCoin:q}=await e(u,!0),{coinAmountInt:ie}=t(q.coinId),pe=Ie(ie,f);lo({userGasInfo:m,updateGasInfo:F,baseCoinAmountAvailable:pe,L1FEE:D})?(xt.error({title:o("extension_toast_text_insufficient_balance")}),V(new Error(he))):X(F)},onClose:()=>{Z.destroy(),V(new Error(he))},renderContent:q=>J.default.createElement(q,null,J.default.createElement("div",{className:$.title},o("extension_toast_title_transaction_replace")),J.default.createElement("div",{className:$.subtitle},o("extension_toast_subtitle_gasincrease")),J.default.createElement("div",{className:$.feeTitle},o("extension_toast_title_current_transaction")),J.default.createElement("div",{className:$.fee},J.default.createElement("div",{className:$.feeDetail},Y),J.default.createElement("div",{className:$.gasDetail},U)),J.default.createElement("div",{className:$.feeTitle},o("extension_toast_title_gasprice")),J.default.createElement("div",{className:$.fee},J.default.createElement("div",{className:$.speedDetail},I),J.default.createElement("div",{className:$.gasDetail},me)))})})}},ho=rn;var sn=()=>{let e=ho();return async({coinId:r,baseCoinAmountUse:n,userGasInfo:l,serverGasInfo:v,serverSignInfo:s,originTxGasInfo:p,fetchParams:d})=>{let c=so({userGasInfo:l,serverGasInfo:v,originTxGasInfo:p});return c?.gasPrice||c?.maxFeePerGas?(await e({coinId:r,baseCoinAmountUse:n,userGasInfo:l,updateGasInfo:c,serverSignInfo:s,fetchParams:d}),Promise.resolve(c)):Promise.resolve()}},Co=sn;a();i();var Me={content:"_content_18w99_1",title:"_title_18w99_4",text:"_text_18w99_10"};var ln=()=>{let e=Co();return async({coinId:r,baseCoinAmountUse:n="0",showSelectNonceDialog:l=!1,onChainNonce:v="0",newNonce:s="0",userGasInfo:p={},serverGasInfo:d={},serverSignInfo:c={},originTxGasInfo:x={},fetchParams:u={},title:f="",text:m="",confirmText:F="",cancelText:T=""})=>new Promise((b,C)=>{if(l){let E=K.prompt({hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,cancelBtnProps:{category:A.CATEGORY.outline,size:A.SIZE.lg},confirmBtnProps:{type:A.TYPE.highlight,size:A.SIZE.lg},confirmText:F,cancelText:T,onConfirm:async()=>{E.destroy();try{let _=await e({coinId:r,baseCoinAmountUse:n,userGasInfo:p,serverGasInfo:d,serverSignInfo:c,originTxGasInfo:x,fetchParams:u});b(_?{nonce:v,updateGasInfo:_}:{nonce:v})}catch(_){C(_)}},onCancel:()=>{E.destroy(),b({nonce:s})},renderContent:_=>Ee.default.createElement(_,null,Ee.default.createElement("div",{className:Me.content},Ee.default.createElement("div",{className:Me.title},f),Ee.default.createElement("div",{className:Me.text},m)))})}else b({nonce:s})})},Oe=ln;var cn=()=>{let e=Oe();return async({coinId:r,baseCoinAmountUse:n,hasFailedTx:l,onChainNonce:v,newNonce:s,userGasInfo:p,serverGasInfo:d,originTxGasInfo:c,serverSignInfo:x,fetchParams:u})=>e({coinId:r,baseCoinAmountUse:n,showSelectNonceDialog:l,onChainNonce:v,newNonce:s,userGasInfo:p,serverGasInfo:d,serverSignInfo:x,originTxGasInfo:c,fetchParams:u,title:o("wallet_extension_transaction_popup_failed_transaction"),text:o("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:o("wallet_extension_transaction_popup_btn_replace"),cancelText:o("wallet_extension_transaction_popup_btn_skip")})},wo=cn;a();i();te();var mn=()=>{let e=Oe();return async({coinId:r,baseCoinAmountUse:n,hasPendingTx:l,onChainNonce:v,newNonce:s,userGasInfo:p,serverGasInfo:d,originTxGasInfo:c,serverSignInfo:x,fetchParams:u})=>e({coinId:r,baseCoinAmountUse:n,showSelectNonceDialog:l,onChainNonce:v,newNonce:s,userGasInfo:p,serverGasInfo:d,serverSignInfo:x,fetchParams:u,originTxGasInfo:c,title:o("wallet_extension_transaction_popup_pending_transaction"),text:o("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:o("wallet_extension_transaction_popup_btn_replace"),cancelText:o("wallet_extension_transaction_popup_btn_continue_wait")})},Fo=mn;a();i();te();ze();var pn=()=>async({isRepeat:t,onCancel:r})=>new Promise((n,l)=>{if(t){let v=K.prompt({alignBottom:!1,hideCloseBtn:!0,infoType:K.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:A.TYPE.highlight,size:A.SIZE.lg},cancelBtnProps:{category:A.CATEGORY.outline,size:A.SIZE.lg},title:o("wallet_extension_popup_repeat_order"),confirmText:o("wallet_extension_popup_repeat_order_btn_continue"),cancelText:r?o("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:o("wallet_extension_popup_repeat_order_desc"),onConfirm:()=>{v.destroy(),n()},onCancel:()=>{v.destroy(),st(r)&&r(),l(new Error(he))}})}else n()}),bo=pn;var Eo="FetchError";var No=()=>{let e=wo(),t=Fo(),r=bo(),n=async({coinId:s,from:p,to:d,amount:c,gasPrice:x})=>{let[{data:u=[]},{data:f={}}]=await Promise.all([Et({checkTypes:[Se.REPEAT,Se.OVERWRITTEN],coinId:s,from:p,to:d,amount:c,gasPrice:x}),bt({coinId:s,address:p},{fromAddr:p,scenario:wt.SCENARIO_SEND_COIN})]);return{txToastCheckData:u,signInfoData:f}},l=s=>{let{hasFailedTx:p,hasPendingTx:d,nonce:c,newNonce:x,originGasPrice:u,originPriorityFee:f}=ro(s),m=io(s,Se.REPEAT);return{hasFailedTx:p,hasPendingTx:d,nonce:c,newNonce:x,originGasPrice:u,originPriorityFee:f,isRepeat:m}};return async({coinId:s,from:p,to:d,amount:c,gasPrice:x,baseCoinAmountUse:u,userGasInfo:f,whetherCheckRepeat:m,onRepeatCancel:F})=>{let T=[],b={};try{let I=await n({coinId:s,from:p,to:d,amount:c,gasPrice:x});if(!Array.isArray(I.txToastCheckData)||typeof I.signInfoData!="object")throw new Error(Eo);T=I.txToastCheckData,b=I.signInfoData?.info||{}}catch{throw new Error(Eo)}let C=l(T),{nonce:E,newNonce:_,originGasPrice:g,originPriorityFee:G,hasFailedTx:N,hasPendingTx:D,isRepeat:H}=C,Y={originGasPrice:g,originPriorityFee:G},U={coinId:s,baseCoinAmountUse:u,onChainNonce:E,newNonce:_,userGasInfo:f,serverGasInfo:b.gasPrice,serverSignInfo:b,originTxGasInfo:Y,fetchParams:{amount:c,coinId:s,from:p,gasPrice:x,to:d}},W={nonce:_};return N?W=await e({...U,hasFailedTx:N}):D&&(W=await t({...U,hasPendingTx:D})),m&&await r({isRepeat:H,onCancel:F}),W}};a();i();var y=M(ee()),ue=M(be()),Re=M(Ze());ze();te();a();i();var ne=M(ee()),Ao=M(be());a();i();var k={"mev-control-enter":"_mev-control-enter_1499c_1",mevControlEnter:"_mev-control-enter_1499c_1","mev-control-content":"_mev-control-content_1499c_6",mevControlContent:"_mev-control-content_1499c_6","mev-control-content-title":"_mev-control-content-title_1499c_9",mevControlContentTitle:"_mev-control-content-title_1499c_9","mev-control-content-desc":"_mev-control-content-desc_1499c_14",mevControlContentDesc:"_mev-control-content-desc_1499c_14","list-content":"_list-content_1499c_18",listContent:"_list-content_1499c_18","list-wrap":"_list-wrap_1499c_21",listWrap:"_list-wrap_1499c_21","list-item":"_list-item_1499c_24",listItem:"_list-item_1499c_24","item-icon":"_item-icon_1499c_30",itemIcon:"_item-icon_1499c_30","list-item-text":"_list-item-text_1499c_34",listItemText:"_list-item-text_1499c_34","mev-control-title":"_mev-control-title_1499c_38",mevControlTitle:"_mev-control-title_1499c_38","mev-control-sub-title":"_mev-control-sub-title_1499c_43",mevControlSubTitle:"_mev-control-sub-title_1499c_43","mev-control-picture":"_mev-control-picture_1499c_48",mevControlPicture:"_mev-control-picture_1499c_48","mev-control-divider":"_mev-control-divider_1499c_52",mevControlDivider:"_mev-control-divider_1499c_52","mev-control-text-content":"_mev-control-text-content_1499c_56",mevControlTextContent:"_mev-control-text-content_1499c_56","mev-status":"_mev-status_1499c_60",mevStatus:"_mev-status_1499c_60","mev-status__text":"_mev-status__text_1499c_64",mevStatusText:"_mev-status__text_1499c_64","mev-status__text__active":"_mev-status__text__active_1499c_69",mevStatusTextActive:"_mev-status__text__active_1499c_69","mev-tooltip":"_mev-tooltip_1499c_72",mevTooltip:"_mev-tooltip_1499c_72"};var un=({mevNodeList:e})=>{let t=(0,ne.useRef)(null),r=(0,Ao.useSize)(t),n=l=>ne.default.createElement(Wt,{hovered:!1,icon:{size:Te.SIZE.lg,src:l.vendorIcon||kt,type:Te.TYPE.image},className:k["list-item"]},ne.default.createElement(h.FlexBox,{direction:h.DIRECTION.vertical},ne.default.createElement(h.FlexBox,{align:h.ALIGN.center},ne.default.createElement(O.Text,{className:k["list-item-text"]},l.name))));return e.length?ne.default.createElement("div",{ref:t,className:k["list-content"]},ne.default.createElement(zt,{itemKey:"id",height:r?.height??408,searchable:!1,dataSource:e,renderItem:n,className:k["list-wrap"]})):null},Io=un;var Po="mevOperated",ko="mevToggle",dn=2e3,_n=({isMev:e,needTooltip:t=!0,isShowBlockSwapMevTooltip:r,onMevChange:n,serverMevInfo:l,className:v="",children:s})=>{let{mevNodeList:p,openMev:d,gas:c,priorityRate:x}=l,[u,{setFalse:f,setTrue:m}]=(0,ue.useBoolean)(!1),[F,{toggle:T}]=(0,ue.useBoolean)(!1),[b,C]=(0,y.useState)(""),E=(0,y.useMemo)(()=>p?.length?p.map(N=>N.supplier):[],[p]),_={gas:c,mevSuppliers:E,priorityRate:x};(0,y.useEffect)(()=>{let N=!e&&r,D=!e&&Fe.get(Po)===void 0,H=()=>{f()},Y=()=>{Fe.set(Po,1)};return N?(C("wallet_extension_trade_tooltip_enable_mev"),m(),document.addEventListener("click",H,!1)):D&&(C("wallet_extension_mev_pop_turnon_mev"),m(),document.addEventListener("click",H,!1),document.addEventListener("click",Y,!1)),()=>{document.removeEventListener("click",H,!1),document.removeEventListener("click",Y,!1)}},[]);let g=(0,ue.useMemoizedFn)(()=>{let N=!e;typeof n=="function"&&n(N,_),Fe.set(ko,N),gt({mev:N}),C(e?"wallet_extension_mev_pop_mev_off":"wallet_extension_mev_pop_mev_on"),T(),m(),setTimeout(()=>{f()},dn)});(0,ue.useMount)(async()=>{if(typeof n=="function"){if(!xe(e)){n(e,_);return}let N=Fe.get(ko);if(!xe(N)){n(N,_);return}n(d,_)}});let G=Dt({dark:"/cdn/assets/imgs/245/127CAD27DF691613.png",light:"/cdn/assets/imgs/2311/700F36AE20EC394E.png"});return y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:(0,Re.default)(k["mev-status"],v),onClick:T},y.default.createElement(St,{show:u,title:t&&o(b),placement:yt.DIRECTION.bottomRight},s||y.default.createElement(to,{clickable:!0,title:o("wallet_extension_mev_subtitle_protection")},y.default.createElement(O.Text,{className:(0,Re.default)(k["mev-status__text"],{[k["mev-status__text__active"]]:e})},o(e?"wallet_extension_mev_desc_open":"wallet_extension_mev_desc_closed"))))),y.default.createElement(K.Action,{visible:F,onClose:T,onCancel:T,title:y.default.createElement(y.default.Fragment,null),isFull:!0,noContentPadding:!0,noMargin:!0,onConfirm:g,confirmBtnProps:e?{size:A.SIZE.lg,type:A.TYPE.primary,category:A.CATEGORY.outline}:{size:A.SIZE.lg,type:A.TYPE.highlight,category:A.CATEGORY.fill},confirmText:e?o("wallet_extension_mev_btn_disable_mev"):o("wallet_extension_mev_btn_activate_protection")},y.default.createElement(h.Box,{className:k["mev-control-content"]},y.default.createElement(h.FlexBox,{justify:"space-between",align:h.ALIGN.center},y.default.createElement(h.Space,{direction:h.DIRECTION.vertical,space:12},y.default.createElement(O.Text,{className:k["mev-control-title"]},o("wallet_extension_mev_grouptitle_mev_protection")),y.default.createElement(O.Text,{style:{color:e?"var(--okd-color-semantic-positive)":"var(--okd-color-content-primary)"},className:k["mev-control-sub-title"]},o(e?"wallet_extension_mev_label_enabled":"wallet_extension_mev_label_disabled"))),y.default.createElement(ft,{className:k["mev-control-picture"],src:G})),y.default.createElement(je,{className:k["mev-control-divider"],style:{marginTop:24}}),y.default.createElement(h.Space,{className:k["mev-control-text-content"],direction:h.DIRECTION.vertical,space:24},y.default.createElement(h.Box,null,y.default.createElement(O.Text,{className:k["mev-control-content-title"]},o("wallet_extension_mev_title_provider")),y.default.createElement(Io,{mevNodeList:p})),y.default.createElement(je,{className:k["mev-control-divider"]}),y.default.createElement(h.Box,null,y.default.createElement(O.Text,{className:k["mev-control-content-title"]},o("wallet_extension_mev_title_mev_meaning")),y.default.createElement(O.Text,{className:k["mev-control-content-desc"]},o("wallet_extension_mev_desc_mev_meaning"))),y.default.createElement(h.Box,null,y.default.createElement(O.Text,{className:k["mev-control-content-title"]},o("wallet_extension_mev_title_mev_avoid")),y.default.createElement(O.Text,{className:k["mev-control-content-desc"]},o("wallet_extension_mev_desc_mev_avoid"))),y.default.createElement(h.Box,null,y.default.createElement(O.Text,{className:k["mev-control-content-title"]},o("wallet_extension_mev_title_why_attack")),y.default.createElement(O.Text,{className:k["mev-control-content-desc"]},o("wallet_extension_mev_desc_why_attack")))))))},Lo=_n;a();i();var B=M(ee()),_e=M(be());ze();te();a();i();var Ne=M(ee()),de=M(Ze());te();a();i();var ce={root:"_root_wpiv5_1",title:"_title_wpiv5_4",header:"_header_wpiv5_8",icon:"_icon_wpiv5_12",content:"_content_wpiv5_16",textarea:"_textarea_wpiv5_19",errorTip:"_errorTip_wpiv5_22",errorBordered:"_errorBordered_wpiv5_29"};function fn({className:e,value:t,onChange:r,error:n,titleClass:l,errorTipClass:v,headerClassName:s,contentClassName:p,...d}){return Ne.default.createElement(_t,{defaultExpanded:!0,className:(0,de.default)(ce.root,e),titleClass:(0,de.default)(ce.title,l),headerClassName:(0,de.default)(ce.header,s),contentClassName:(0,de.default)(ce.content,p),customHeaderIcon:c=>Ne.default.createElement(Te,{icon:"okds-arrow-chevron-down-md",size:Te.SIZE.xs,className:(0,de.default)({"okui-accordion-header-icon-expanded":c},ce.icon)}),title:o("wallet_extension_inscription_text_hex_data_optional")},Ne.default.createElement(qe.TextArea,{...d,inputClassName:ce.textarea,errorType:qe.TIP_TYPE.always,error:!!n,value:t,onChange:c=>{let x=c.target.value||"";r?.(x.trim())}}),!!n&&Ne.default.createElement(O.Text,{className:(0,de.default)(ce.errorTip,v)},n))}var So=fn;a();i();te();function Bo(e){return!!e&&(e.toLowerCase()==="0x"||!Lt(e)||e.length%2!==0)?o("wallet_extension_inscription_text_input_formatting_error"):null}a();i();var Go=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isPauser",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint8"},{name:"totalSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}];a();i();var w=M(ee()),ae=M(be()),Mo=M(Ze());te();Pe();a();i();var S={root:"_root_4gxf5_1",icon:"_icon_4gxf5_1",editApproveAmountModal:"_editApproveAmountModal_4gxf5_10",content:"_content_4gxf5_22",txTypeInfo:"_txTypeInfo_4gxf5_25",editArea:"_editArea_4gxf5_28",unlimitedText:"_unlimitedText_4gxf5_33",unlimitedSymbol:"_unlimitedSymbol_4gxf5_43",symbolClassName:"_symbolClassName_4gxf5_60",quickHandler:"_quickHandler_4gxf5_63",balanceWrap:"_balanceWrap_4gxf5_70",balance:"_balance_4gxf5_70",maxBalance:"_maxBalance_4gxf5_92",unlimited:"_unlimited_4gxf5_33",text:"_text_4gxf5_105",authQuantityWarnTip:"_authQuantityWarnTip_4gxf5_112",danger:"_danger_4gxf5_119",info:"_info_4gxf5_122",approveTip:"_approveTip_4gxf5_125",footerActions:"_footerActions_4gxf5_133"};var Do=Q.toPlainString(10**40),yn=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Oo=({address:e,coins:t,baseCoinId:r})=>{if(Array.isArray(t))return t.find(n=>n?.baseCoinId===r&&Mt(n?.address,e,{baseCoinId:r})||Oo({address:e,baseCoinId:r,coins:n?.childrenCoin}))},xn=({txTypeInfo:e,walletAccount:t,approve:r,baseCoin:n,onAuthTokenAmountChange:l,updateApproveInfo:v})=>{let{walletId:s}=t,{tokenInfo:p,id:d,amount:c,authQuantity:x}=r||{},{autoEdit:u,defaultAmount:f,warnTip:m}=x||{},{address:F,decimals:T,symbol:b}=p,C=xo(b,12),[E,_]=(0,w.useState)(!1),[g,G]=(0,w.useState)(!1),[N,D]=(0,w.useState)(0),H=(0,ae.useMemoizedFn)((L=c)=>{G(Qe(L)),D(uo(L,T)),_(!0)}),Y=(0,ae.useMemoizedFn)(()=>{G(L=>!L),D(0)}),U=(0,ae.useMemoizedFn)(()=>{G(!0),D(0)}),W=(0,w.useMemo)(()=>m?{type:S.info,text:m}:g&&!Qe(f)?{type:S.danger,text:o("wallet_extension_approve_alert_high_risk_unlimited")}:!g&&Q.eq(N||0,0)?{type:S.info,text:o("wallet_extension_approve_cannot_zero")}:null,[m,g,f,N]),{chainId:I}=n||{},{coinId:me}=ge(void 0,void 0,{chainId:I,address:F})||{},X=De(me,s)?.coinAmount,V=Q.thousandFormat(X),Z=(0,ae.useMemoizedFn)(()=>{G(!1),D(X)}),q=(0,ae.useMemoizedFn)(()=>{let L=g?It:_o(N||0,T);l(L),v(d,{amount:L}),_(!1)}),ie=To(),pe=Zt({},s),re=(0,w.useMemo)(()=>pe?.find(L=>L.localType===n?.localType),[n?.localType,pe?.length]),oe=(0,ae.useMemoizedFn)(async(L=0)=>{if(!Oo({address:F,coins:ie,baseCoinId:n?.coinId}))try{let se=await Ot({contractAddress:F,chainInfo:re});await Ht(se)}catch(se){++L<3?oe(L):vt.error({title:se?.msg||o("wallet_home_toast_network_error")})}});return(0,ae.useMount)(()=>{u&&H(f),oe()}),w.default.createElement(h.Box,{className:S.root},w.default.createElement(h.Box,{className:S.icon,onClick:()=>{H()}},w.default.createElement(dt,{className:"okx-wallet-plugin-draw-20"})),w.default.createElement(K.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:E},w.default.createElement(h.Box,{className:S.editApproveAmountModal},w.default.createElement(h.Box,{className:S.content},w.default.createElement(oo,{bordered:!1,txTypeInfo:e,className:S.txTypeInfo}),w.default.createElement(h.Box,{className:S.editArea},g?w.default.createElement(O.Text,{onClick:Y,className:S.unlimitedText},o("wallet_extension_transfer_title_unlimited_amount",{token:w.default.createElement(O.Text,{className:S.unlimitedSymbol},C)})):w.default.createElement(Jt,{symbol:C,autoSize:yn,placeholder:"0",max:Do,decimals:T,value:N,onChange:L=>{mt(L,Do)&&D(L)},style:{fontWeight:700,height:"42px"},symbolClassName:S.symbolClassName})),w.default.createElement(h.Box,{className:S.quickHandler},!!Number(X)&&w.default.createElement(h.Box,{className:S.balanceWrap},w.default.createElement(O.Text,{className:S.balance,ellipsis:{tooltip:V}},o("wallet_extension_approve_label_balance",{amount:V})),w.default.createElement(h.Box,{className:S.maxBalance,onClick:Z},o("commonall_enterfield_btn_max"))),w.default.createElement(h.Box,{onClick:U,className:S.unlimited},w.default.createElement(h.Box,{className:S.text},o("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")))),!!W&&w.default.createElement(h.Box,{className:(0,Mo.default)(S.authQuantityWarnTip,W.type)},W.text)),w.default.createElement(h.Box,{className:S.approveTip},o("wallet_extension_approve_desc_dapp_right")),w.default.createElement(Ut,{affixStyle:{position:"none"},placeholder:!1,className:S.footerActions},w.default.createElement(A,{block:!0,category:A.CATEGORY.fill,type:A.TYPE.primary,size:A.SIZE.lg,onClick:q},o("wallet_extension_approve_btn_amount_confirmation"))))))},Ho=xn;a();i();var He=M(ee()),Wo=M(be());nn();tn();var vn=({coinId:e,txParams:t,networkFee:r,modifiedData:n,mevInfo:l,isMev:v,gasReturnActivity:s})=>({coinId:e,toAddr:t?.to,fromAddr:t?.from,txSource:ht.DAPP,coinAmount:(Be(t?.value)?z(t?.value):t?.value)||0,serviceCharge:r,inputData:n,mevSuppliers:v?l?.mevSuppliers:[],activityId:s?.activityId}),Tn=({mergedParams:e,gasType:t})=>JSON.stringify({to:e?.to,gasType:t,from:e?.from,value:Be(e?.value)?z(e?.value):e?.value,nonce:Be(e?.nonce)?z(e?.nonce):e?.nonce,data:e?.data,gas:e?.gasLimit,oldTxHash:"",gasPrice:e?.supportEip1559?e?.maxFeePerGas:e?.gasPrice,repeatTxType:Ct.CONFIRMING,priorityFee:e?.supportEip1559?e.maxPriorityFeePerGas:0}),gn=({loading:e,isBalanceLoading:t})=>e||t,hn=({coinId:e,txType:t,txParams:r,isMev:n,mevInfo:l,localType:v,modifiedData:s,walletAccount:p,customGasInfo:d,gasReturnActivity:c,modifiedDataError:x,isSufficientGas:u,isSufficientBalance:f,reportGasReturnActivityDataInConfirm:m,canConfirm:F,silentLoading:T,onCancel:b,onConfirm:C,onConfirmReplace:E,isBalanceLoadError:_,isBalanceLoading:g})=>{let{walletId:G}=p||{},N=No(),{networkFee:D,gasType:H,gasPrice:Y}=d||{},U=mo({coinId:e,walletId:G,localType:v,fromAddr:r?.from}),W=Kt(vn({coinId:e,txParams:r,networkFee:D,modifiedData:s,mevInfo:l,isMev:n,gasReturnActivity:c})),I=(0,He.useMemo)(()=>d?.isNetworkFeeLoading||Ge(d,t)||_||x||T||F===!1||!u||!f,[T,d,t,x,F,u,f,_]),me=(0,Wo.useMemoizedFn)(async()=>{if(E&&typeof C=="function")return C({isMev:n,coinId:e,mevInfo:l,txParams:r,customGasInfo:d,modifiedData:s,gasReturnActivity:c,reportGasReturnActivityDataInConfirm:m});let{nonce:re,updateGasInfo:oe}=await N({to:r?.to,from:r?.from,coinId:e,gasPrice:Y,userGasInfo:d,amount:z(r?.value)||0,baseCoinAmountUse:z(r?.value||0)});m();let L={...r,...d,...oe||{},nonce:re,data:s};try{let R=await U(L),se=await jt(lt,R);return await W(R,{txHash:se,extJson:Tn({mergedParams:L,gasType:H})}),C?.({txHash:se})}catch(R){return C?.({error:R})}}),{loading:X,onClick:V}=$e(me),Z=(0,He.useMemo)(()=>({disabled:I,loading:gn({loading:X,isBalanceLoading:g}),actionType:Ke.ACTION_TYPE.CONFIRM,onClick:V}),[I,V,X,g]),{loading:q,onClick:ie}=$e(b);return[(0,He.useMemo)(()=>({loading:q,onClick:ie,actionType:Ke.ACTION_TYPE.CANCEL}),[q,ie]),Z]},Uo=hn;a();i();var We=M(ee());te();var Cn=e=>{let[t,r]=(0,We.useState)({isNetworkFeeLoading:!0,gasLimit:"0",gasPrice:"0",maxFeePerGas:"0",maxPriorityFeePerGas:"0",supportEip1559:!1,gasType:j.STANDARD}),{gasLimitInfo:n={},gasLimit:l,gasPrice:v,maxFeePerGas:s,gasType:p,supportEip1559:d,customConfirmed:c,isGasLimitLoading:x,isNetworkFeeLoading:u,networkFee:f,maxPriorityFeePerGas:m,gasPriceInfo:F,extFee:T,useDefaultGas:b}=t,{minGasFee:C}=Xt({gasLimit:l,gasPrice:v,maxPriorityFeePerGas:m,maxFeePerGas:s,supportEip1559:d,extFee:T,gasPriceInfo:F,gasLimitInfo:n,gasType:p}),E=(0,We.useMemo)(()=>p===j.CUSTOM&&!c&&!b?o("extension_send_mid_text_dapps_suggested_fee"):p||j.STANDARD,[c,p,b]),_=Ge(t,e),g=u&&x&&!n?.gasLimit;return{level:E,estimateFailed:_,customGasInfo:t,loading:u,networkFee:g?void 0:C,maxNetworkFee:g?void 0:f,onCustomGasInfoChange:r}},zo=Cn;a();i();var Ce=M(ee());on();Pe();var wn=({txType:e,walletId:t,coinId:r,txParams:n,customGasInfo:l,preExecuteLoading:v})=>{let[s,p]=(0,Ce.useState)(""),d=ge(r),{from:c,to:x}=n||{},[u,f]=(0,Ce.useState)("");(0,Ce.useEffect)(()=>{v||(Xe(e)||fo(e)?(p(Je.approval),f(Xe(e)?"approve":"revoke_approve")):(p(Je.dapp),f("Contract interaction")))},[v,e]);let m=Qt({walletId:t,coinId:r,fromAddress:c,toAddress:x,txType:s,fee:pt(l?.networkFee),disabled:!x,unavailable:l.gasType===j.CUSTOM&&l.customConfirmed}),{status:F,activity:T,activityId:b,tip:C,clear:E}=m,_=()=>{ut({activityId:b,activity:T,status:F,tip:C,walletId:t,address:c})},g=T?.errorCode;return(0,Ce.useEffect)(()=>{!u||g===0&&Tt({wallet_address:c,interactive_address:x,chain_id:d?.chainId,transaction_type:u})},[g,u,c,x,d?.chainId]),{gasReturnActivity:m,clearGasReturnInfo:E,reportGasReturnActivityDataInConfirm:_}},Yo=wn;a();i();Pe();var Fn=e=>{let{txParams:t={}}=e,{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:l}=t,v=t.gas||t.gasLimit,s=j.STANDARD,p,d,c,x=z(v),u=z(r),f=z(n),m=z(l);return ve(u,0)&&(s=j.CUSTOM,p=u),ve(f,0)&&ve(m,0)&&ve(f,m)&&(s=j.CUSTOM,d=f,c=m),ve(x,0)&&(s=j.CUSTOM),!t.to&&t.data&&(s=j.CUSTOM),{initialGasType:s,initialCustomMaxPriorityFee:c,initialCustomGasLimit:x,initialCustomGasPrice:p,initialCustomMaxBaseFee:Ie(d,c)}},Vo=Fn;a();i();var et={"data-input":"_data-input_1k4cq_1",dataInput:"_data-input_1k4cq_1","data-input-error-tip":"_data-input-error-tip_1k4cq_5",dataInputErrorTip:"_data-input-error-tip_1k4cq_5"};var bn=e=>Number(e)===ke.INCREASE_ALLOWANCE?Go:[],En=e=>{let{txId:t,chainId:r,walletId:n,txParams:l,dappInfo:v={},needMev:s=!1,openMev:p,coinId:d,isShowBlockSwapMevTooltip:c,onMevChange:x,onConfirm:u,onConfirmReplace:f,onCancel:m}=e||{},[F,T]=(0,_e.useSetState)({mevInfo:{},isMev:p}),[b,{toggle:C}]=(0,_e.useBoolean)(!1),{from:E,to:_,value:g="0x0",data:G,typeInt:N}=l||{},D=(0,B.useMemo)(()=>[Le.FeeDelegatedValueTransfer,Le.FeeDelegatedValueTransferMemo,Le.FeeDelegatedSmartContractExecution].includes(N),[N]),[H,Y]=(0,B.useState)(""),U=ge(d,void 0,{chainId:r}),W=U?.coinId,[I,me]=(0,B.useState)({}),X=I.loading,V=(0,B.useMemo)(()=>!_&&G?Nt.DEPLOY_CONTRACT:I?.approveInfoList?.[0]?.spender?.approvalType||"",[_,G,I]),Z=Yt(U?.localType,n),q=z(g),ie=Vo({txParams:l}),pe=po(Z.walletId),re=(0,B.useMemo)(()=>Bo(H),[H]),{isMev:oe,mevInfo:L}=F,R=H||G||"",se=(0,B.useMemo)(()=>({dappData:JSON.stringify({to:_,from:E,value:g,data:R,typeInt:N}),from:E,dappInfo:v,chainIndex:U?.chainId,method:Ft.SIGN_TRANSACTION}),[U?.chainId,E,R,_,g]),Zo=(0,_e.useMemoizedFn)((le,ye)=>{T({isMev:le,mevInfo:ye}),x?.(le,ye)}),{level:qo,networkFee:Qo,maxNetworkFee:we,customGasInfo:tt,estimateFailed:ot,loading:jo,onCustomGasInfoChange:Jo}=zo(V),{gasReturnActivity:nt,reportGasReturnActivityDataInConfirm:Ko}=Yo({txType:V,coinId:W,txParams:l,customGasInfo:tt,preExecuteLoading:X,walletId:Z.walletId}),at=De(W,n),{coinAmountInt:fe,isBalanceLoadError:$o,isBalanceLoading:Xo}=at,it=(0,B.useMemo)(()=>(xe(fe)||Q.gte(fe,we))&&I?.needFillUp!==!0,[fe,we,I?.needFillUp]),rt=(0,B.useMemo)(()=>!Q.eq(q,0)&&!xe(fe)?Q.lte(q,Q.sub(fe,we)):!0,[fe,we,q]),Ro=Uo({coinId:W,txType:V,txParams:l,isMev:oe,mevInfo:L,isBalanceLoadError:$o,isBalanceLoading:Xo,canConfirm:I?.canConfirm,silentLoading:I?.silentLoading,isSufficientGas:it,isSufficientBalance:rt,walletAccount:Z,customGasInfo:tt,gasReturnActivity:nt,modifiedDataError:re,localType:U?.localType,modifiedData:R,walletId:Z?.walletId,reportGasReturnActivityDataInConfirm:Ko,onCancel:m,onConfirm:u,onConfirmReplace:f}),en=(0,_e.useMemoizedFn)(le=>{let ye=bn(V),Ae=At(l?.data,ye);if(Ae){let Ue=yo(l?.data,{approveAmount:le},Ae);Y(Ue)}});return B.default.createElement(B.default.Fragment,null,B.default.createElement(vo,{handleCancel:m,preExecParams:se,walletAccount:Z,buttonGroup:Ro,onUpdatePreExecInfo:me,txState:{txId:t,baseCoin:U,estimateFailed:ot,isSufficientBalance:rt,isSufficientGas:it,coinWithBalance:at},localType:U?.localType,slot:{mev:!!s&&I?.mevInfo?.supportMev&&B.default.createElement(Lo,{isMev:oe,needTooltip:!1,onMevChange:Zo,isShowBlockSwapMevTooltip:c,serverMevInfo:I.mevInfo}),networkFeeEntry:B.default.createElement(ao,{isFree:D,level:qo,coinId:W,networkFee:Qo,maxNetworkFee:we,loading:jo,estimateFailed:ot,onClick:()=>{C(),pe({trade:"contract_interaction",all_confirmation:"network_fee"})}}),interactWith:!!_&&B.default.createElement(no,{address:_,title:o("wallet_extension_popup_text_interact_with")}),advancedEntry:!G&&B.default.createElement(So,{value:H,error:re,onChange:Y,className:et["data-input"],errorTipClass:et["data-input-error-tip"]})},renderEditApproveAmount:(le,ye)=>{let Ae=le?.authQuantity?.canEdit,Ue=le?.spender?.approvalType;return[ke.INCREASE_ALLOWANCE,ke.AUTHORIZATION].includes(Ue)&&Ae?B.default.createElement(Ho,{txTypeInfo:I?.txTypeInfo,walletAccount:Z,approve:le,baseCoin:U,onAuthTokenAmountChange:en,updateApproveInfo:ye}):null}}),B.default.createElement(Rt,{visible:b,coinId:W,address:E,inputData:R,tokenAddress:_,value:z(g),onBack:C,onClose:null,initialGasData:ie,onGasChange:Jo,minimumGasLimit:oe?L.gas:0,isMev:oe,mevInfo:L,gasReturn:nt,gasLimitOptions:{disabled:re}}))},As=En;export{No as a,So as b,Bo as c,Lo as d,As as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-FRYK2ICE.js.map
