import{a as pt}from"./chunk-GFFNWVPK.js";import{b as st,c as lt,d as ft}from"./chunk-SVAZTO4I.js";import{b as rt,i as at,k as ct,m as nt,q as it,r as mt}from"./chunk-JFV2UG4S.js";import{d as ot}from"./chunk-4VFXVCHS.js";import"./chunk-6G3RP33F.js";import"./chunk-GILBGQWV.js";import"./chunk-UWMYELRK.js";import"./chunk-4OPVNP3G.js";import"./chunk-GGC2CY5E.js";import"./chunk-JKSK4TNM.js";import"./chunk-UTSCFP3M.js";import{a as tt}from"./chunk-VPEGTYK6.js";import"./chunk-MZ62OMSF.js";import"./chunk-HYFMV74Y.js";import"./chunk-LX6EREZR.js";import"./chunk-VP3JRWXQ.js";import"./chunk-F2DBKTIG.js";import"./chunk-UKL67WXA.js";import"./chunk-FGVAAF7J.js";import"./chunk-B2JJAXTZ.js";import{a as me,e as et}from"./chunk-APUK5GYS.js";import"./chunk-55XCE2ZH.js";import"./chunk-TZ4DRGVV.js";import"./chunk-WVLQP46O.js";import"./chunk-EADI45MC.js";import"./chunk-KLQLZF6P.js";import"./chunk-XZD4GKLJ.js";import{a as M}from"./chunk-QHPYMFK2.js";import{a as je,c as Qe}from"./chunk-F4XZWNG2.js";import"./chunk-G6PPKZHQ.js";import{a as Re}from"./chunk-2P7I7CKT.js";import"./chunk-S3KOFL77.js";import"./chunk-HVQTUZKT.js";import"./chunk-Z6KV2BLE.js";import"./chunk-DXXZWR4J.js";import"./chunk-5HXUZG4A.js";import{a as Je}from"./chunk-SBQTMPJM.js";import"./chunk-7YQLUBDN.js";import"./chunk-O43TNQSD.js";import"./chunk-LUYLQDIU.js";import"./chunk-QZXD2Q4G.js";import"./chunk-MIHA7WB3.js";import"./chunk-UEHNGOG4.js";import"./chunk-2NGLDVXQ.js";import"./chunk-RQNRRXKS.js";import"./chunk-2LNDMD6C.js";import"./chunk-OAAPCU3J.js";import{a as Ke}from"./chunk-IEUJSLGG.js";import"./chunk-4HIOE2KZ.js";import"./chunk-WRZIZFIL.js";import"./chunk-KYU5M654.js";import"./chunk-YSEHOL75.js";import"./chunk-6Y4AAIZN.js";import"./chunk-SIAVCB4G.js";import"./chunk-MNWYB2XY.js";import"./chunk-KX7CSB3G.js";import"./chunk-AOBCHKFQ.js";import"./chunk-DPRLOZH7.js";import"./chunk-DEQWBIFF.js";import"./chunk-ELJOB4BQ.js";import"./chunk-ELHNWADN.js";import{d as D}from"./chunk-4X3SKD2N.js";import"./chunk-GCAD5G3O.js";import"./chunk-PS6ETN2V.js";import"./chunk-AZYPLE5D.js";import"./chunk-SULFXTUN.js";import"./chunk-OGS4HURJ.js";import"./chunk-NQYDGSER.js";import"./chunk-T6GLUO36.js";import"./chunk-KOPPPKVA.js";import"./chunk-GRXKA7HE.js";import"./chunk-SNFTVDFG.js";import"./chunk-ZV6IBWDM.js";import"./chunk-F5ELBQNP.js";import{a as Xe}from"./chunk-HZPID3WW.js";import"./chunk-HZNY4MK4.js";import"./chunk-6CI55CTV.js";import"./chunk-ZZLPMRQY.js";import{e as $e}from"./chunk-4HGOSSS7.js";import"./chunk-OIXVONQI.js";import"./chunk-REMRMZNH.js";import"./chunk-74FNJDB7.js";import"./chunk-E75DNWM4.js";import{a as ie}from"./chunk-GOMM7VSE.js";import"./chunk-LTMEFQRN.js";import"./chunk-MSUJSPID.js";import"./chunk-TU5XNYNZ.js";import{a as ne}from"./chunk-MZFOYMI4.js";import"./chunk-EQ275TZX.js";import{a as ce}from"./chunk-WSXZYUQ4.js";import{b as Z}from"./chunk-JRZXGORL.js";import{q as s}from"./chunk-IRNZUYU4.js";import"./chunk-SFTZ55EP.js";import"./chunk-DZHQUYHS.js";import{o as Ce}from"./chunk-AUURQ3HI.js";import{L as Ve,cc as oo,m as xe,p as De,r as ze}from"./chunk-B32MCU7F.js";import"./chunk-QCINCBGO.js";import"./chunk-VOLYN562.js";import{a as qe}from"./chunk-VLKJDIZ5.js";import"./chunk-N4B7HQY5.js";import{d as G,f as ae}from"./chunk-TKFT6XV3.js";import"./chunk-MBLN6WQR.js";import{a as X,b as q}from"./chunk-XRF6BZHR.js";import"./chunk-OWU5GWTN.js";import{f as Ze,h as Me,q as He}from"./chunk-2BGRD7AD.js";import"./chunk-TCJNKUJ2.js";import"./chunk-2UKLMOTV.js";import"./chunk-ZWQEMYA4.js";import"./chunk-ELX2GHLL.js";import{c as T}from"./chunk-AIPMH74P.js";import"./chunk-DJDG7W5Q.js";import{$a as Be,Ec as Ue,Hc as de,Jc as Ye,Ka as ye,Mc as Ge,Qb as ke,Y as be,_a as Ne,_c as to,hc as eo,la as Fe,rb as Le,ya as Ee,yb as Rt,za as Se}from"./chunk-Q23SA7M6.js";import"./chunk-XXICVAVV.js";import{D as Y,G as _e,b as Oe,o as re}from"./chunk-E44TZGUB.js";import{F as Pe,oa as Qt}from"./chunk-KBQXBPIW.js";import{O as v,l as ue,w as d}from"./chunk-364XNTHB.js";import"./chunk-NBWNTERD.js";import"./chunk-GBTEQNFM.js";import"./chunk-QBHNZ2BL.js";import"./chunk-J6E3F25X.js";import{H as ve,ca as b}from"./chunk-W7JONHX2.js";import"./chunk-O3LHCDGR.js";import{a as N}from"./chunk-PDSGFBX4.js";import"./chunk-GAMT4PKF.js";import"./chunk-R4QAJG6J.js";import"./chunk-LI7MZD2P.js";import"./chunk-WTNDHHRR.js";import"./chunk-CGP26AOO.js";import"./chunk-2RHSM47Y.js";import"./chunk-ZSUO3ILU.js";import"./chunk-ATMUHCXK.js";import"./chunk-3MCJH4Z7.js";import"./chunk-AGN4QMRN.js";import"./chunk-FV56V3FL.js";import"./chunk-7MZSFBF4.js";import"./chunk-3SRT54EN.js";import"./chunk-J5P7OMUC.js";import"./chunk-KHHBU7RQ.js";import"./chunk-3CPUV3E7.js";import"./chunk-SHMKQUVK.js";import{f as A,o as i,q as m}from"./chunk-FJHLV356.js";i();m();var C=A(N());v();var Ut=A(qe()),se=A(Ce());Ne();ae();i();m();var H=A(N()),ut=A(ve());i();m();var x={"retina-border-basic":"_retina-border-basic_t6cnr_1",retinaBorderBasic:"_retina-border-basic_t6cnr_1","wax-create-account-confirm":"_wax-create-account-confirm_t6cnr_29",waxCreateAccountConfirm:"_wax-create-account-confirm_t6cnr_29","wax-create-account-confirm-form":"_wax-create-account-confirm-form_t6cnr_32",waxCreateAccountConfirmForm:"_wax-create-account-confirm-form_t6cnr_32","wax-create-account-confirm-form-select":"_wax-create-account-confirm-form-select_t6cnr_35",waxCreateAccountConfirmFormSelect:"_wax-create-account-confirm-form-select_t6cnr_35","wax-create-account-confirm-form-select-disabled":"_wax-create-account-confirm-form-select-disabled_t6cnr_42",waxCreateAccountConfirmFormSelectDisabled:"_wax-create-account-confirm-form-select-disabled_t6cnr_42","wax-create-account-confirm-form-select-free":"_wax-create-account-confirm-form-select-free_t6cnr_46",waxCreateAccountConfirmFormSelectFree:"_wax-create-account-confirm-form-select-free_t6cnr_46","wax-create-account-confirm-form-select-free-text":"_wax-create-account-confirm-form-select-free-text_t6cnr_49",waxCreateAccountConfirmFormSelectFreeText:"_wax-create-account-confirm-form-select-free-text_t6cnr_49","wax-create-account-confirm-form-select-free-amount":"_wax-create-account-confirm-form-select-free-amount_t6cnr_53",waxCreateAccountConfirmFormSelectFreeAmount:"_wax-create-account-confirm-form-select-free-amount_t6cnr_53","wax-create-account-confirm-form-select-space":"_wax-create-account-confirm-form-select-space_t6cnr_57",waxCreateAccountConfirmFormSelectSpace:"_wax-create-account-confirm-form-select-space_t6cnr_57","wax-create-account-confirm-form-payInfo":"_wax-create-account-confirm-form-payInfo_t6cnr_60",waxCreateAccountConfirmFormPayInfo:"_wax-create-account-confirm-form-payInfo_t6cnr_60","wax-create-account-confirm-form-payInfo-icon":"_wax-create-account-confirm-form-payInfo-icon_t6cnr_65",waxCreateAccountConfirmFormPayInfoIcon:"_wax-create-account-confirm-form-payInfo-icon_t6cnr_65","wax-create-account-confirm-form-payCrypto-dialog":"_wax-create-account-confirm-form-payCrypto-dialog_t6cnr_69",waxCreateAccountConfirmFormPayCryptoDialog:"_wax-create-account-confirm-form-payCrypto-dialog_t6cnr_69","wax-create-account-confirm-form-payCrypto-title":"_wax-create-account-confirm-form-payCrypto-title_t6cnr_72",waxCreateAccountConfirmFormPayCryptoTitle:"_wax-create-account-confirm-form-payCrypto-title_t6cnr_72","wax-create-account-confirm-form-payCrypto-list":"_wax-create-account-confirm-form-payCrypto-list_t6cnr_78",waxCreateAccountConfirmFormPayCryptoList:"_wax-create-account-confirm-form-payCrypto-list_t6cnr_78","wax-create-account-confirm-form-payWallet":"_wax-create-account-confirm-form-payWallet_t6cnr_81",waxCreateAccountConfirmFormPayWallet:"_wax-create-account-confirm-form-payWallet_t6cnr_81","wax-create-account-confirm-form-payWallet-navigator":"_wax-create-account-confirm-form-payWallet-navigator_t6cnr_84",waxCreateAccountConfirmFormPayWalletNavigator:"_wax-create-account-confirm-form-payWallet-navigator_t6cnr_84","wax-create-account-confirm-form-payWallet-wallet-item":"_wax-create-account-confirm-form-payWallet-wallet-item_t6cnr_87",waxCreateAccountConfirmFormPayWalletWalletItem:"_wax-create-account-confirm-form-payWallet-wallet-item_t6cnr_87","wax-create-account-confirm-form-payWallet-accordion":"_wax-create-account-confirm-form-payWallet-accordion_t6cnr_90",waxCreateAccountConfirmFormPayWalletAccordion:"_wax-create-account-confirm-form-payWallet-accordion_t6cnr_90","wax-create-account-confirm-form-payWallet-accordion-header":"_wax-create-account-confirm-form-payWallet-accordion-header_t6cnr_96",waxCreateAccountConfirmFormPayWalletAccordionHeader:"_wax-create-account-confirm-form-payWallet-accordion-header_t6cnr_96","wax-create-account-confirm-form-payWallet-accordion-content":"_wax-create-account-confirm-form-payWallet-accordion-content_t6cnr_130",waxCreateAccountConfirmFormPayWalletAccordionContent:"_wax-create-account-confirm-form-payWallet-accordion-content_t6cnr_130","wax-create-account-confirm-form-payWallet-accordion-icon":"_wax-create-account-confirm-form-payWallet-accordion-icon_t6cnr_133",waxCreateAccountConfirmFormPayWalletAccordionIcon:"_wax-create-account-confirm-form-payWallet-accordion-icon_t6cnr_133","wax-create-account-confirm-form-payWallet-account-item":"_wax-create-account-confirm-form-payWallet-account-item_t6cnr_136",waxCreateAccountConfirmFormPayWalletAccountItem:"_wax-create-account-confirm-form-payWallet-account-item_t6cnr_136","wax-create-account-confirm-form-payWallet-account-item-main":"_wax-create-account-confirm-form-payWallet-account-item-main_t6cnr_140",waxCreateAccountConfirmFormPayWalletAccountItemMain:"_wax-create-account-confirm-form-payWallet-account-item-main_t6cnr_140","wax-create-account-confirm-form-payWallet-tag":"_wax-create-account-confirm-form-payWallet-tag_t6cnr_143",waxCreateAccountConfirmFormPayWalletTag:"_wax-create-account-confirm-form-payWallet-tag_t6cnr_143","wax-create-account-confirm-form-payWallet-selected-icon":"_wax-create-account-confirm-form-payWallet-selected-icon_t6cnr_152",waxCreateAccountConfirmFormPayWalletSelectedIcon:"_wax-create-account-confirm-form-payWallet-selected-icon_t6cnr_152","wax-create-account-confirm-form-payWallet-footer":"_wax-create-account-confirm-form-payWallet-footer_t6cnr_155",waxCreateAccountConfirmFormPayWalletFooter:"_wax-create-account-confirm-form-payWallet-footer_t6cnr_155","wax-create-account-confirm-form-insufficient-error":"_wax-create-account-confirm-form-insufficient-error_t6cnr_158",waxCreateAccountConfirmFormInsufficientError:"_wax-create-account-confirm-form-insufficient-error_t6cnr_158","wax-create-account-confirm-form-fill-up":"_wax-create-account-confirm-form-fill-up_t6cnr_161",waxCreateAccountConfirmFormFillUp:"_wax-create-account-confirm-form-fill-up_t6cnr_161"};var ro=({type:t,value:e,disabled:a,placeholder:n,onClick:o})=>H.default.createElement(T.FlexBox,{align:T.ALIGN.center,onClick:()=>{o?.(t)},className:(0,ut.default)(x["wax-create-account-confirm-form-select"],{[x["wax-create-account-confirm-form-select-disabled"]]:a})},H.default.createElement(T.Space,{className:x["wax-create-account-confirm-form-select-space"],space:0,direction:T.DIRECTION.vertical},!e&&n&&H.default.createElement(s.Text,{type:s.TYPE.secondary},n),!!e&&H.default.createElement(s.Text,null,e?.label||e),!!e?.desc&&H.default.createElement(s.Text,{size:s.SIZE.xs,type:s.TYPE.secondary},e?.desc||e)),!a&&H.default.createElement(Z,{icon:"okds-arrow-chevron-right-centered-md",size:Z.SIZE.xs})),we=H.default.memo(ro);i();m();var j=A(N());v();var yt=A(ve());var ao=({coinAmount:t,decimals:e,symbol:a})=>j.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:(0,yt.default)(x["wax-create-account-confirm-form-select"],x["wax-create-account-confirm-form-select-free"])},j.default.createElement(T.Space,{space:6,align:T.ALIGN.center,direction:T.DIRECTION.horizontal},j.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-select-free-text"]},d("wallet_extension_mid_colored_free")),j.default.createElement(s.DisplayAmount,{className:x["wax-create-account-confirm-form-select-free-amount"],mode:s.CRYPTO,size:s.SIZE.sm,symbol:a,amount:t,decimals:e}))),_t=j.default.memo(ao);i();m();var V=A(N());v();var co=({symbol:t,decimals:e,value:a={}})=>{let n=[{symbol:t,decimals:e,label:"extension_wallet_create_colored_cpu",value:a?.cpuAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_network",value:a?.netAmount},{decimals:0,symbol:"bytes",label:"extension_wallet_create_colored_ram",value:a?.ramAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_price",value:a?.sumAmount,icon:{icon:"okds-information-circle",tooltip:"extension_wallet_create_tooltip_20percent_transferfee"}}];return V.default.createElement(D,{space:20,className:x["wax-create-account-confirm-form-payInfo"],dataSource:n,renderItem:({icon:o,label:c,value:y,symbol:l,decimals:f})=>V.default.createElement(D.Line,{size:s.SIZE.sm,label:V.default.createElement(V.default.Fragment,null,d(c),!!o&&V.default.createElement(Z,{className:x["wax-create-account-confirm-form-payInfo-icon"],icon:o?.icon,size:Z.SIZE.xs,tooltip:o?.tooltip?d(o?.tooltip):!1})),value:V.default.createElement(s.DisplayAmount,{symbol:l,decimals:f,mode:s.CRYPTO,size:s.SIZE.sm},y)})})},xt=V.default.memo(co);i();m();var z=A(N());v();var no=({name:t,value:e,visible:a,options:n,onChange:o,onClose:c})=>z.default.createElement(re,{windowClass:x["wax-create-account-confirm-form-payCrypto-dialog"],alignBottom:!0,onClose:()=>{c?.(t)},visible:a},z.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-payCrypto-title"],strong:700,ellipsis:{tooltip:!0}},d("extension_wallet_popup_maintitle_select_crypto")),z.default.createElement(D,{className:x["wax-create-account-confirm-form-payCrypto-list"],space:16,dataSource:n,renderItem:y=>{let{icon:l}=y;return z.default.createElement(D.Card,{icon:{src:l},onClick:()=>{o?.({[t]:y}),c?.(t)},selected:e?.coinId===y.coinId},z.default.createElement(T.Space,{space:2,direction:T.DIRECTION.vertical},z.default.createElement(s.Text,null,y.label),z.default.createElement(s.Text,{type:s.TYPE.secondary,size:s.SIZE.sm},y.message)))}})),dt=z.default.memo(no);i();m();var R=A(N());v();i();m();i();m();i();m();var Ct=A(N()),io=({coinId:t,sendAmount:e,fromAddr:a,toAddr:n})=>{let[o,c]=(0,Ct.useState)({});return{props:{visible:!1,coinId:t,address:a,inputData:"",tokenAddress:n,value:e,onGasChange:c},ethereumGasInfo:o}},wt=io;i();m();var mo=({coinId:t,coinAmount:e,fromAddr:a,toAddr:n,ethereumGasInfo:o,btnProps:c,beforeClick:y,onClick:l})=>{let g={fetchParams:{coinId:t,from:a,to:n,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:e};return{props:{beforeClick:y,dataForCheck:g,btnProps:c,onClick:l}}},gt=mo;i();m();var ht=A(oo());Rt();to();ae();var so=({coinId:t,walletId:e,sendAmount:a,fromAddr:n,toAddr:o,ethereumGasInfo:c,onPublish:y})=>{let l=(0,ht.useDispatch)(),{coin:f}=M(t,!1),g=_=>{let{updateGasInfo:u}=_;return u?{...u,gasLimit:c.gasLimit,supportEip1559:c.supportEip1559,networkFee:c.networkFee}:{...c}},r=({updateData:_,finallyGasInfo:u})=>{let{nonce:W}=_,h=Le(f.localType)?.realChainIdHex,P={from:n,gasLimit:q(u.gasLimit),nonce:q(W),chainId:h};return u.supportEip1559?(P.maxFeePerGas=q(u.maxFeePerGas),P.maxPriorityFeePerGas=q(u.maxPriorityFeePerGas),P.type=He.FEE_MARKET):P.gasPrice=q(u.gasPrice),P.value=q(a),P.to=o,De(P)},p=({txParams:_,finallyGasInfo:u})=>{let W=X(_.value),h=X(_.gasLimit),P=X(c.supportEip1559?_.maxFeePerGas:_.gasPrice),S={..._,value:W,from:n,to:o,gas:h,gasPrice:P,priorityFee:X(c.supportEip1559?_.maxPriorityFeePerGas:0),nonce:X(_.nonce),repeatTxType:Me.CONFIRMING,oldTxHash:""};return{coinId:f.coinId,coinAmount:a,fromAdr:n,toAdr:o,serviceCharge:u.networkFee,extJson:JSON.stringify(S),txSource:Ge.NORMAL,inputData:_.data?_.data:""}};return async _=>{let u=g(_),W=r({updateData:_,finallyGasInfo:u}),h={...W,walletId:e},P=p({txParams:W,finallyGasInfo:u});await l(Ke({txParams:h,walletId:e}));let S=await G().signAndGetEthereumPublishParams({signParams:h,from:W.from,baseChain:Be,publishParams:P});typeof y=="function"&&await y(S)}},Tt=so;var lo=({toAddr:t,coinId:e,walletId:a,fromAddr:n,sendAmount:o,btnProps:c,onBeforeClick:y=()=>{},onPublishTrascation:l=()=>{},onClickWrap:f=()=>{}})=>{let{props:g,ethereumGasInfo:r}=wt({coinId:e,toAddr:t,fromAddr:n,sendAmount:o}),p=r?.networkFee,w=Tt({coinId:e,walletId:a,sendAmount:o,fromAddr:n,toAddr:t,ethereumGasInfo:r,onPublish:l}),{props:_}=gt({toAddr:t,coinId:e,fromAddr:n,ethereumGasInfo:r,coinAmount:o,btnProps:c,beforeClick:()=>y?.(p),onClick:(...u)=>{f(async()=>{await w(...u)})}});return R.default.createElement(R.default.Fragment,null,R.default.createElement(ot,{...g}),R.default.createElement(pt,{..._},d("wallet_extension_btn_general_confirm")))},It=lo;i();m();var Wt=A(N());v();var fo=({fromAddr:t,coinId:e,toAddr:a,disabled:n,loading:o,walletId:c,walletType:y,sendAmount:l,hideLoading:f,onBeforeClick:g=()=>{},onPublishTrascation:r=()=>{},onClickWrap:p=()=>{}})=>{let{coin:w}=M(e,!1),_=tt({coinId:e,address:t,chainId:w?.chainId},{pollingInterval:20*1e3}),u=_?.normal,[,W]=ct({coinId:e,walletId:c,address:t},{refreshDeps:[c,t]}),[,h]=it({coinId:e,toAddr:a,walletId:c,fromAddr:t,satBytes:u,coinAmount:l,canTransferAmount:W}),P=mt({coinId:e,toAddr:a,walletId:c,fromAddr:t,satBytes:u,networkFee:h,coinAmount:l,localType:w?.localType,dustSize:_?.minOutput}),S=at({coinId:e,walletId:c,address:t,utxoType:rt.TRANSFER}),B=nt({coinId:e,txType:Ze.TRANS_OUT,address:t}),L=async()=>{p(async()=>{g&&await g(h,W);let I=await S(l,h);await B(I,()=>{f?.()});let O=await P({utxoList:I}),U=await me(w.localType,O);r?.({coinId:e,txHash:U,signedTx:O,walletId:c,walletType:y,toAdr:a,serviceCharge:h,fromAdr:t,coinAmount:l})})};return Wt.default.createElement(b,{loading:o,disabled:n,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:L},d("wallet_extension_btn_general_confirm"))},At=fo;i();m();var Pt=A(N());v();ae();var po=({fromAddr:t,coinId:e,toAddr:a,disabled:n,loading:o,walletId:c,walletType:y,sendAmount:l,onBeforeClick:f=()=>{},onPublishTrascation:g=()=>{},onClickWrap:r=()=>{}})=>{let{coin:p}=M(e,!1),w=async()=>{r(async()=>{typeof f=="function"&&f("0");let _=await Ve({coinId:e,address:t},{fromAddr:t,toAddr:a}),{info:u}=_||{},{chainid:W,compression:h,refBlockNumber:P,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}=u,I={type:0,from:t,to:a,amount:l,memo:"",common:{chainId:W,compression:h,refBlockNumber:P,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}},O=await G().signTransaction(I,t,p.localType),U=await me(p.localType,O);typeof g=="function"&&await g({coinId:e,txHash:U,signedTx:O,walletId:c,walletType:y,toAdr:a,serviceCharge:"0",fromAdr:t,coinAmount:l})})};return Pt.default.createElement(b,{loading:o,disabled:n,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:w},d("wallet_extension_btn_general_confirm"))},bt=po;i();m();var Ft=A(N());v();var Et=A(qe());var uo=600001,yo=({loading:t,disabled:e,fromPage:a,retryCreateAccount:n,onPublishTrascation:o=()=>{}})=>{let c=(0,Et.useHistory)(),y=async()=>{let l=await o?.();if(Number(l?.code)===uo){let f=re.warn({alignBottom:!1,title:d("wallet_extension_wax_modaltitle_account_unavailable"),text:d("wallet_extension_wax_modaldesc_free_account_unsupported"),cancelText:d("wallet_extension_btn_general_cancel"),confirmText:d("wallet_extension_mid_btn_retry"),onCancel:()=>{f.destroy(),c.push(a||ce)},onConfirm:()=>{f.destroy(),n?.()}})}};return Ft.default.createElement(b,{loading:t,disabled:e,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:y},d("wallet_extension_btn_general_confirm"))},St=yo;i();m();var E=A(N());Ye();v();var _o=({name:t,value:e,visible:a,options:n=[],onChange:o,onClose:c})=>{let[y,l]=(0,E.useState)(e);return(0,E.useEffect)(()=>{l(e)},[e]),a?E.default.createElement(T.Portal,{component:T.Container,className:x["wax-create-account-confirm-form-payWallet"]},E.default.createElement(ie,{className:x["wax-create-account-confirm-form-payWallet-navigator"],title:d("extension_wallet_header_title_select_wallet"),closeable:!1,onBack:()=>{c?.(t)}}),E.default.createElement(D,{className:x["wax-create-account-confirm-form-payWallet-wallet-item"],space:12,dataSource:n||[],renderItem:({keyringName:f,keyringColor:g,walletIdentities:r})=>E.default.createElement(Oe,{defaultExpanded:!0,iconClassName:x["wax-create-account-confirm-form-payWallet-accordion-icon"],title:E.default.createElement(s.Text,{strong:!0,size:s.SIZE.lg,style:{color:g}},f),className:x["wax-create-account-confirm-form-payWallet-accordion"],headerClassName:x["wax-create-account-confirm-form-payWallet-accordion-header"],contentClassName:x["wax-create-account-confirm-form-payWallet-accordion-content"]},E.default.createElement(D,{dataSource:r,renderItem:p=>E.default.createElement(T.FlexBox,{className:x["wax-create-account-confirm-form-payWallet-account-item"],align:T.ALIGN.center,onClick:()=>{l(p)}},E.default.createElement(T.Space,{className:x["wax-create-account-confirm-form-payWallet-account-item-main"],space:0,direction:T.DIRECTION.vertical},E.default.createElement(T.Space,{space:8,align:T.ALIGN.center},E.default.createElement(s.Text,{size:s.SIZE.md},p?.walletName),!!p.addressType&&E.default.createElement(T.Box,{className:x["wax-create-account-confirm-form-payWallet-tag"]},d(Ue[p.addressType]))),E.default.createElement(s.DisplayAmount,{mode:s.CRYPTO,decimals:p?.decimals,symbol:p?.symbol,size:s.SIZE.xs,type:s.TYPE.secondary},p?.coinAmountInt)),y?.address===p?.address&&E.default.createElement(Z,{className:x["wax-create-account-confirm-form-payWallet-selected-icon"],icon:"okds-success-circle-fill"}))}))}),E.default.createElement(ne.FooterActions,{zIndex:101,className:x["wax-create-account-confirm-form-payWallet-footer"]},E.default.createElement(b,{size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:()=>{c?.(t),o?.({[t]:y})}},d("wallet_extension_btn_general_confirm")))):null},Nt=_o;i();m();var Bt=A(Ce());ae();Ne();Ye();eo();var xo=()=>{let t=Qe(),e=$e({hasBackup:!0}),a=je();return(0,Bt.useMemoizedFn)(async(n,o)=>{let c=await t(n),y=c?.localType;if(!n||!y)return null;let l=await G().getCreatedWalletIds(),f=await a({walletIds:l,chainId:c.chainId,coinId:n,flatten:!0});return(e?.map(r=>{let{walletIdentities:p}=r;return{...r,walletIdentities:p.map(w=>{let _=f[w?.walletId]||[];return{...w,coins:_.filter(u=>u?.coinId===n&&ke(u.coinAmountInt,o))}}).filter(({coins:w})=>w?.length)}}).filter(({walletIdentities:r})=>r?.some(({coins:p})=>p?.length))).map(r=>{let p=r?.walletIdentities;return ze({coinId:n})?p=p?.reduce((w,{coins:_,walletName:u,addressType:W,...h})=>[...w,..._.map(({coinAmountInt:P,addressType:S,...B})=>{let L=W?.[be]?.find(I=>I?.addressType===de[S])?.address;return{...h,...B,walletName:u,coinAmountInt:P,label:`${r?.keyringName} - ${u}`,desc:xe(L),addressType:de[S],address:L}})],[]):p=p.map(({account:w,walletName:_,coins:u,...W})=>{let h=w?.[y];return{...u[0],...W,address:h,walletName:_,label:`${r?.keyringName} - ${_}`,desc:xe(h)}}),{...r,walletIdentities:p}})},[e])},Lt=xo;i();m();var J=A(N()),Co=()=>{let t=Y.useForm(),[e,a]=(0,J.useState)({}),[n,o]=(0,J.useState)({payCrypto:!1,payWallet:!1}),c=(0,J.useCallback)(l=>{o(f=>({...f,[l]:!f[l]}))},[]),y=(0,J.useCallback)(l=>{t.setFieldsValue(l),a((f={})=>({...f,...l}))},[]);return{form:t,visible:n,payValues:e,onPayValuesChange:y,onToggleSelectPanel:c}},kt=Co;i();m();var Q=A(N()),wo=({form:t,payInfo:e,payValues:a,isFreeCreate:n,walletOptions:o,payCryptoOptions:c,onPayValuesChange:y,setPayWalletError:l})=>{let f=(0,Q.useRef)({payCrypto:!1,payWallet:!1}),g=r=>{y?.(r),t.setFieldsValue(r)};(0,Q.useEffect)(()=>{g({payInfo:e})},[e]),(0,Q.useEffect)(()=>{if(!f.current.payCrypto&&c?.length){let r=c.find(({recommend:p})=>p);g({payCrypto:r}),f.current={...f.current,payCrypto:!0}}if(f.current.payCrypto&&c?.length){let r=c.find(({coinId:p})=>p===a?.payCrypto?.coinId);r&&g({payCrypto:r})}},[c]),(0,Q.useEffect)(()=>{if(!n){if(!f.current.payWallet&&o?.length){let[{walletIdentities:[r]}]=o;g({payWallet:r}),f.current={...f.current,payWallet:!0}}if(f.current.payWallet){o?.length||(g({payWallet:null}),l?.(!1));let{coinId:r}=a?.payCrypto||{},{coinId:p}=a?.payWallet||{};if(o?.length&&r!==p){let[{walletIdentities:[w]}]=o;g({payWallet:w}),l?.(!1)}}}},[n,o])},vt=wo;i();m();Qt();var K=A(Ce());var $=A(N());var go=60*1e3,ho=t=>{let[e,a]=(0,$.useState)({}),[n,{set:o}]=(0,K.useBoolean)(!1),[c,{set:y}]=(0,K.useBoolean)(),[l,f]=(0,$.useState)([]),g=Je(),r=(0,$.useMemo)(()=>Pe(g)?[]:l.map(u=>{let{coinId:W,coinAmount:h}=u,P=g[W]||{},{image:S,symbol:B,decimals:L}=P;return{...P,...u,icon:S,label:$.default.createElement(s.DisplayAmount,{noStyle:!0,symbol:B,decimals:L,mode:s.CRYPTO},h)}}),[g,l]),p=async()=>{let{eosMarket:u,coins:W,freeAccount:h}=await st({coinId:t});a(u),f(W),y(h)},{runAsync:w,refreshAsync:_}=(0,K.useRequest)(p,{manual:!0,pollingInterval:go,pollingWhenHidden:!1,pollingErrorRetryCount:3});return(0,K.useMount)(()=>{(async()=>{try{o(!0),await w()}catch(u){console.log(u)}finally{o(!1)}})()}),[n,c,e,r,_]},Ot=ho;i();m();v();var Dt=A(N()),To=({sendAmount:t,availableBalance:e="0",onCheckCallback:a})=>(0,Dt.useCallback)((n="0",o)=>ue.gt(ue.add(t,n),o!==void 0?o:e)?a?.(!0):a?.(!1),[t,e]),zt=To;var Io=()=>{let t=Re(),e=(0,Ut.useHistory)(),[a,n]=(0,C.useState)(null),o=Number(t.get("coinId"))||ye,{coin:c}=M(o,!1),y=Xe(),[l,f]=(0,C.useState)(!1),[g,r,p,w,_]=Ot(o),[u,W]=(0,C.useState)(!1),[h,{setTrue:P,setFalse:S}]=(0,se.useBoolean)(!1),{form:B,visible:L,payValues:I,onPayValuesChange:O,onToggleSelectPanel:U}=kt({payInfo:p,payCryptoOptions:w}),le=Lt();(0,se.useUpdateEffect)(()=>{(async()=>{if(!r&&I?.payCrypto?.coinId){let k=await le(I?.payCrypto?.coinId,I?.payCrypto?.coinAmount);n(k)}})()},[r,I?.payCrypto?.coinId,I?.payCrypto?.coinAmount]),vt({form:B,payInfo:p,payValues:I,isFreeCreate:r,walletOptions:a,payCryptoOptions:w,setPayWalletError:f,onPayValuesChange:O});let{coinId:ee,coinAmount:ge,toAddress:Yt}=I?.payCrypto||{},{walletId:Gt,serverWalletType:he,address:Te,coinAmountInt:Ie}=I?.payWallet||{},Zt=async k=>{try{P(),await k()}catch(oe){let pe=oe?.msg||d("extension_wallet_transaction_notif_waxaccount_failed");_e.error({title:pe})}finally{S()}},Mt=zt({sendAmount:ge,availableBalance:Ie,onCheckCallback:k=>(f(k),k?Promise.reject():Promise.resolve())}),We=async k=>{let oe=await G().getPublicKeyByWalletId(y,Fe),{coinAmount:pe,symbol:Vt}=I?.payCrypto||{},{ramBytes:qt,cpuAmount:Kt,ramAmount:$t,netAmount:Xt,sumAmount:jt}=I?.payInfo||{},Jt={transaction:k,order:{payCoin:Vt,ramBytes:qt,payAmount:pe,eosAmount:jt,cpuAmount:Kt,ramAmount:$t,netAmount:Xt,ownerKey:oe,activeKey:oe,payAddress:Te,account:t.get("account"),coinId:c?.coinId,chainId:c?.chainId}},Ae=await(r?ft:lt)(Jt,y);return Number(Ae.code)===0&&(_e.success({title:d("extension_wallet_transaction_notif_waxaccount_created"),desc:t.get("account")}),e.push(t.get("from")||ce)),Ae},fe={coinId:ee,toAddr:Yt,walletId:Gt,fromAddr:Te,sendAmount:ge,onBeforeClick:Mt,onPublishTrascation:We,onClickWrap:Zt},te=!r&&(!I?.payCrypto||!I?.payWallet),Ht=(0,C.useMemo)(()=>r?w.find(k=>k?.coinId===o)||w?.[0]:{},[r,o,w]);return C.default.createElement(T.Container,{loading:g,className:x["wax-create-account-confirm"]},C.default.createElement(ie,{closeable:!1,title:d("extension_wallet_header_title_waxaccount_opening")}),C.default.createElement(Y,{form:B,className:x["wax-create-account-confirm-form"]},C.default.createElement(Y.Item,{name:"payCrypto",label:d("extension_wallet_create_text_payment_crypto")},r?C.default.createElement(_t,{...Ht}):C.default.createElement(we,{type:"payCrypto",onClick:U})),!r&&C.default.createElement(Y.Item,{name:"payWallet",extra:!!l&&C.default.createElement(T.Space,{space:7},C.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-insufficient-error"],size:s.SIZE.sm},d("extension_wallet_create_errortip_insufficient_balance")),C.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-fill-up"],size:s.SIZE.sm,onClick:()=>{W(!0)}},d("extension_wallet_create_textbtn_fill_up",{crypto:I?.payCrypto?.symbol}))),label:d("extension_wallet_create_text_payment_wallet")},C.default.createElement(we,{type:"payWallet",onClick:U,disabled:!a?.length,placeholder:d("extension_wallet_create_input_no_available_wallets")})),C.default.createElement(Y.Item,{name:"payInfo",label:d("extension_wallet_create_text_pay_toopen")},C.default.createElement(xt,{symbol:c?.symbol,decimals:c.decimals})),C.default.createElement(Y.Item,null,C.default.createElement(ne.FooterActions,{placeholder:!1},!r&&ee===Se&&C.default.createElement(At,{loading:h,disabled:te,walletType:he,hideLoading:S,availableAmount:Ie,...fe}),!r&&ee===Ee&&C.default.createElement(It,{btnProps:{loading:h,disabled:te},...fe}),!r&&ee===ye&&C.default.createElement(bt,{loading:h,disabled:te,walletType:he,...fe}),r&&C.default.createElement(St,{loading:h,disabled:te,fromPage:t.get("from"),retryCreateAccount:_,onPublishTrascation:We})))),C.default.createElement(dt,{name:"payCrypto",value:I.payCrypto,visible:L.payCrypto,options:w,onChange:O,onClose:U}),C.default.createElement(Nt,{name:"payWallet",value:I?.payWallet,visible:L?.payWallet,options:a,onClose:U,onChange:O}),C.default.createElement(et,{visible:u,closeCallback:()=>W(!1),address:I?.payWallet?.address,coinId:I?.payCrypto?.coinId,receiveOnly:!0}))},Lc=C.default.memo(Io);export{Lc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConfirmPay-XNWNDUL2.js.map
